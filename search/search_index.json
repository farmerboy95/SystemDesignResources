{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Xin ch\u00e0o, m\u00ecnh l\u00e0 farmerboy.</p> <p>\u0110\u00e2y l\u00e0 n\u01a1i m\u00ecnh l\u01b0u tr\u1eef c\u00e1c t\u00e0i li\u1ec7u v\u1ec1 System Design b\u1eb1ng ti\u1ebfng Vi\u1ec7t.</p> <p>D\u1ecbch thu\u1eadt l\u00e0 m\u1ed9t c\u00f4ng vi\u1ec7c r\u1ea5t kh\u00f3 kh\u0103n, n\u00ean n\u1ebfu c\u00e1c b\u1ea1n th\u1ea5y b\u1ea3n d\u1ecbch kh\u00f4ng th\u1ef1c s\u1ef1 t\u1ed1t, h\u00e3y \u0111\u1ec1 xu\u1ea5t ch\u1ec9nh s\u1eeda t\u1ea1i \u0111\u00e2y.</p> <p>L\u01b0u \u00fd, n\u1ebfu b\u1ea1n th\u1eafc m\u1eafc v\u00ec sao m\u00ecnh vi\u1ebft ti\u1ebfng Vi\u1ec7t m\u00e0 v\u1eabn d\u00f9ng UI ti\u1ebfng Anh cho trang n\u00e0y, \u0111\u00f3 l\u00e0 v\u00ec t\u00ednh n\u0103ng t\u00ecm ki\u1ebfm kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng khi ch\u1ecdn ng\u00f4n ng\u1eef ti\u1ebfng Vi\u1ec7t. Mong c\u00e1c b\u1ea1n th\u00f4ng c\u1ea3m.</p> <p>Gi\u1edbi thi\u1ec7u s\u01a1 v\u1ec1 m\u00ecnh th\u00ec hi\u1ec7n t\u1ea1i m\u00ecnh \u0111ang tham gia Competitive Programming v\u1edbi c\u00e1c t\u00e0i kho\u1ea3n nh\u01b0:</p> <ul> <li> farmerboy</li> <li> farmerboy</li> <li> farmerboy</li> <li> farmerboy</li> <li> farmerboy</li> <li> farmerboy</li> <li> farmerboy</li> <li> farmerboy</li> </ul> <p>Ngo\u00e0i ra, c\u00e1c b\u1ea1n c\u00f3 th\u1ec3 t\u00ecm \u0111\u01b0\u1ee3c c\u00e1c t\u00e0i kho\u1ea3n c\u1ee7a m\u00ecnh tr\u00ean c\u00e1c trang Competitive Programming t\u1ea1i clist.by.</p> <p>N\u1ebfu c\u00e1c b\u1ea1n th\u1ea5y website n\u00e0y h\u1eefu \u00edch, c\u00f3 th\u1ec3 \u1ee7ng h\u1ed9 m\u00ecnh th\u00f4ng qua Buy Me A Coffee \u1edf du\u1edbi \u0111\u00e2y ho\u1eb7c \u1edf g\u00f3c ph\u1ea3i d\u01b0\u1edbi m\u00e0n h\u00ecnh.</p>"},{"location":"navigation/","title":"C\u00e1c t\u00e0i li\u1ec7u","text":"<ul> <li>Trang ch\u1ee7<ul> <li>Gi\u1edbi thi\u1ec7u</li> <li>C\u00e1c t\u00e0i li\u1ec7u</li> </ul> </li> <li>ByteByteGo<ul> <li>Chuy\u1ec7n g\u00ec s\u1ebd x\u1ea3y ra khi ta truy c\u1eadp v\u00e0o m\u1ed9t \u0111\u01b0\u1eddng d\u1eabn (URL) tr\u00ean tr\u00ecnh duy\u1ec7t?</li> <li>C\u00e1c m\u1ed1c \u0111\u1ed9 tr\u1ec5 m\u00e0 l\u1eadp tr\u00ecnh vi\u00ean n\u00ean bi\u1ebft</li> <li>HTTP/1 \u0111\u1ebfn HTTP/2 \u0111\u1ebfn HTTP/3</li> <li>REST API l\u00e0 g\u00ec?</li> <li>SSL, TLS v\u00e0 HTTPS</li> <li>Scan to Pay l\u00e0 g\u00ec?</li> <li>Process vs. Thread</li> <li>C\u00e1c k\u0129 thu\u1eadt debug</li> <li>T\u00ecm hi\u1ec3u v\u1ec1 CDN</li> <li>Top 5 \u1ee9ng d\u1ee5ng c\u1ee7a Redis</li> <li>V\u00ec sao Redis l\u1ea1i nhanh?</li> <li>L\u01b0u m\u1eadt kh\u1ea9u v\u00e0o database nh\u01b0 th\u1ebf n\u00e0o cho \u0111\u00fang?</li> <li>API Gateway l\u00e0 g\u00ec?</li> <li>T\u1ea1i sao Kafka l\u1ea1i nhanh nh\u01b0 v\u1eady?</li> <li>Single Sign-on (SSO) l\u00e0 g\u00ec?</li> <li>M\u00f4 h\u00ecnh OSI l\u00e0 g\u00ec?</li> <li>Nh\u1eefng th\u1ee9 b\u1ea1n c\u1ea7n bi\u1ebft v\u1ec1 DNS</li> <li>B\u1ed9 nh\u1edb v\u00e0 \u1ed5 c\u1ee9ng trong m\u00e1y t\u00ednh</li> <li>7 c\u00e1ch m\u00e0 l\u1eadp tr\u00ecnh vi\u00ean t\u1eadn d\u1ee5ng ChatGPT</li> <li>\u0110\u1ecbnh l\u00fd CAP - CAP theorem</li> <li>gRPC l\u00e0 g\u00ec?</li> <li>GraphQL l\u00e0 g\u00ec?</li> <li>Proxy vs. Reverse Proxy</li> <li>Thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng: Thi\u1ebft k\u1ebf Location Based Service</li> <li>7 ki\u1ec3u h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n th\u00f4ng d\u1ee5ng</li> <li>B\u00ed m\u1eadt \u0111\u1eb1ng sau NoSQL: C\u00e2y LSM</li> <li>Bloom Filter l\u00e0 g\u00ec?</li> <li>CI/CD l\u00e0 g\u00ec?</li> <li>L\u00e0m sao ch\u1ecdn database cho \u0111\u00fang?</li> <li>Ki\u1ebfn tr\u00fac Kubernetes</li> <li>Microservices l\u00e0 g\u00ec?</li> <li>V\u00ec sao ph\u1ecfng v\u1ea5n System Design l\u1ea1i quan tr\u1ecdng?</li> <li>H\u1ec7 th\u1ed1ng c\u1ee7a Stack Overflow c\u00f3 g\u00ec hay?</li> <li>Gi\u1ea3i m\u00e3 s\u1ef1 ph\u00e1t tri\u1ec3n trong ki\u1ebfn tr\u00fac API c\u1ee7a Netflix</li> <li>Gi\u1ea3i th\u00edch d\u1ec5 hi\u1ec3u OAuth2</li> <li>Discord l\u01b0u h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn nh\u01b0 th\u1ebf n\u00e0o?</li> <li>7 c\u00e1ch \u0111\u1ec3 t\u0103ng hi\u1ec7u su\u1ea5t API c\u1ee7a b\u1ea1n</li> <li>H\u01b0\u1edbng d\u1eabn t\u1eebng b\u01b0\u1edbc ph\u1ecfng v\u1ea5n System Design</li> <li>Consistent Hashing l\u00e0 g\u00ec?</li> <li>Git Merge vs Rebase</li> <li>6 thu\u1eadt to\u00e1n load balancing ph\u1ed5 bi\u1ebfn</li> <li>Th\u1ee9 t\u1ef1 th\u1ef1c thi c\u00e2u l\u1ec7nh SQL</li> <li>Apple Pay v\u00e0 Google Pay ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?</li> <li>Nh\u1eefng hi\u1ec3u nh\u1ea7m v\u1ec1 Bare Metal, Virtual Machine v\u00e0 Container</li> <li>D\u1ef1 to\u00e1n c\u00f4ng su\u1ea5t cho \u1ee9ng d\u1ee5ng - Back-of-the-envelope Estimation / Capacity planning</li> <li>C\u00e1c n\u1ec1n t\u1ea3ng streaming ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?</li> <li>8 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u quan tr\u1ecdng trong c\u00e1c h\u1ec7 th\u1ed1ng c\u01a1 s\u1edf d\u1eef li\u1ec7u hi\u1ec7n \u0111\u1ea1i</li> <li>Cloud Native th\u1ef1c s\u1ef1 l\u00e0 g\u00ec?</li> <li>Backend Burger cho startup c\u00f3 th\u1ec3 c\u00f3 nh\u1eefng g\u00ec?</li> <li>C\u00e1c h\u1ec7 th\u1ed1ng cache ph\u1ed5 bi\u1ebfn</li> <li>ChatGPT ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?</li> <li>10 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u m\u00e0 ch\u00fang ta d\u00f9ng m\u1ed7i ng\u00e0y</li> <li>Amazon Prime Video t\u1eeb b\u1ecf AWS Serverless, ti\u1ebft ki\u1ec7m 90% chi ph\u00ed</li> <li>6 ki\u1ebfn tr\u00fac ph\u1ed5 bi\u1ebfn trong thi\u1ebft k\u1ebf API</li> <li>5 chi\u1ebfn l\u01b0\u1ee3c tri\u1ec3n khai ph\u1ea7n m\u1ec1m ph\u1ed5 bi\u1ebfn</li> <li>DevOps, SRE, v\u00e0 Platform Engineering l\u00e0 g\u00ec?</li> <li>V\u00ec sao Google v\u00e0 Meta cho c\u1ea3 t\u1ec9 d\u00f2ng code v\u00e0o m\u1ed9t repo l\u1edbn?</li> <li>C\u00e1c thu\u1eadt to\u00e1n quan tr\u1ecdng \u0111\u1ec3 ph\u1ecfng v\u1ea5n System Design</li> <li>5 m\u00f4 h\u00ecnh ki\u1ebfn tr\u00fac ph\u1ea7n m\u1ec1m \u0111\u01b0\u1ee3c \u01b0a chu\u1ed9ng nh\u1ea5t</li> <li>T\u00f3m t\u1eaft nhanh v\u1ec1 Apache Kafka</li> <li>L\u00e0m th\u1ebf n\u00e0o \u0111\u1ec3 c\u00f3 k\u1ebft qu\u1ea3 t\u1ed1t trong ph\u1ecfng v\u1ea5n System Design?</li> <li>Docker c\u00f3 c\u00f2n c\u1ea7n thi\u1ebft kh\u00f4ng?</li> <li>M\u1ed9t s\u1ed1 HTTP status code th\u00f4ng d\u1ee5ng</li> <li>Python vs. C++ vs. Java</li> <li>C\u00e1c c\u00f4ng ty Big Tech release code nh\u01b0 th\u1ebf n\u00e0o?</li> <li>8 giao th\u1ee9c m\u1ea1ng th\u00f4ng d\u1ee5ng</li> <li>Git ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?</li> <li>T\u1ea1i sao JSON Web Token (JWT) ph\u1ed5 bi\u1ebfn?</li> <li>Linux kh\u1edfi \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?</li> <li>Vertical vs. Horizontal Scaling</li> <li>9 lo\u1ea1i API testing ph\u1ed5 bi\u1ebfn</li> <li>C\u00e1c m\u00f4 h\u00ecnh ki\u1ebfn tr\u00fac Client ph\u1ed5 bi\u1ebfn</li> <li>Linux File System c\u00f3 g\u00ec?</li> <li>Disney Hotstar x\u1eed l\u00fd c\u1ea3 t\u1ef7 react nh\u01b0 th\u1ebf n\u00e0o?</li> <li>7 m\u1eb9o v\u1eb7t cho thi\u1ebft k\u1ebf API</li> <li>6 c\u00f4ng c\u1ee5 v\u1ebd bi\u1ec3u \u0111\u1ed3 ki\u1ebfn tr\u00fac b\u1eb1ng code</li> <li>Nh\u1eefng \u0111i\u1ec1u c\u1ea7n bi\u1ebft v\u1ec1 Webhook</li> </ul> </li> <li>Ngu\u1ed3n kh\u00e1c<ul> <li>Chrome Developers Blog<ul> <li>B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 1)</li> <li>B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 2)</li> <li>B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 3)</li> <li>B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 4)</li> </ul> </li> <li>Discord Blog<ul> <li>Discord l\u01b0u tr\u1eef h\u00e0ng t\u1ec9 tin nh\u1eafn nh\u01b0 th\u1ebf n\u00e0o?</li> <li>Discord l\u01b0u tr\u1eef h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn nh\u01b0 th\u1ebf n\u00e0o?</li> </ul> </li> <li>B\u00e0i b\u00e1o khoa h\u1ecdc<ul> <li>Amazon Dynamo</li> </ul> </li> </ul> </li> </ul>"},{"location":"ByteByteGo/algorithms-for-system-design-interviews/","title":"C\u00e1c thu\u1eadt to\u00e1n quan tr\u1ecdng \u0111\u1ec3 ph\u1ecfng v\u1ea5n System Design","text":""},{"location":"ByteByteGo/algorithms-for-system-design-interviews/#nguon","title":"Ngu\u1ed3n","text":"<p> Algorithms You Should Know Before System Design Interviews</p>"},{"location":"ByteByteGo/algorithms-for-system-design-interviews/#consistent-hashing","title":"Consistent Hashing","text":"<p>C\u00f3 bao gi\u1edd b\u1ea1n t\u1ef1 h\u1ecfi l\u00e0m sao c\u00e1c h\u1ec7 th\u1ed1ng nh\u01b0 Cassandra ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u qua nhi\u1ec1u server ch\u01b0a? C\u00e2u tr\u1ea3 l\u1eddi l\u00e0 h\u1ecd d\u00f9ng Consistent Hashing (b\u0103m nh\u1ea5t qu\u00e1n). H\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng b\u1ea1n c\u00f3 m\u1ed9t v\u00f2ng tr\u00f2n, n\u01a1i m\u1ed7i key sau khi \u0111\u01b0\u1ee3c b\u0103m s\u1ebd \u00e1nh x\u1ea1 (map) \u0111\u1ebfn m\u1ed9t \u0111i\u1ec3m tr\u00ean v\u00f2ng tr\u00f2n \u0111\u00f3. C\u00e1c server \u0111\u01b0\u1ee3c g\u00e1n c\u00e1c ph\u1ea1m vi tr\u00ean v\u00f2ng tr\u00f2n n\u00e0y. </p> <p></p> <p>Ngh\u0129a l\u00e0 khi th\u00eam ho\u1eb7c b\u1edbt c\u00e1c server, ch\u1ec9 c\u00f3 c\u00e1c key trong v\u00f9ng \u1ea3nh h\u01b0\u1edfng c\u1ea7n ph\u1ea3i \u00e1nh x\u1ea1 l\u1ea1i. Vi\u1ec7c n\u00e0y t\u1ed1t h\u01a1n nhi\u1ec1u so v\u1edbi \u00e1nh x\u1ea1 b\u0103m b\u00ecnh th\u01b0\u1eddng, khi ta c\u1ea7n ph\u1ea3i \u00e1nh x\u1ea1 l\u1ea1i to\u00e0n b\u1ed9 c\u00e1c key khi c\u00e1c server c\u00f3 s\u1ef1 thay \u0111\u1ed5i. </p> <p></p> <p>C\u00e1i hay \u1edf \u0111\u00e2y l\u00e0 vi\u1ec7c s\u1eed d\u1ee5ng c\u00e1c node \u1ea3o (virtual node), gi\u00fap gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u kh\u00f4ng \u0111\u1ed3ng \u0111\u1ec1u. H\u00e3y t\u00ecm hi\u1ec3u c\u00e1c bi\u1ebfn th\u1ec3 kh\u00e1c nh\u01b0 Rendezvous Hashing ho\u1eb7c Jump Consistent Hashing n\u1ebfu b\u1ea1n mu\u1ed1n t\u00ecm hi\u1ec3u s\u00e2u h\u01a1n. N\u1ebfu b\u1ea1n l\u00e0m v\u1ec1 caching ph\u00e2n t\u00e1n ho\u1eb7c c\u01a1 s\u1edf d\u1eef li\u1ec7u, Consistent Hashing l\u00e0 m\u1ed9t ki\u1ebfn th\u1ee9c r\u1ea5t h\u1eefu \u00edch. Trong th\u1eddi \u0111\u1ea1i c\u1ee7a big data, vi\u1ec7c \u0111\u1ea3m b\u1ea3o ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u hi\u1ec7u qu\u1ea3 l\u00e0 r\u1ea5t quan tr\u1ecdng. Consistent Hashing gi\u1ea3m thi\u1ec3u s\u1ef1 gi\u00e1n \u0111o\u1ea1n khi c\u00e1c server thay \u0111\u1ed5i.</p>"},{"location":"ByteByteGo/algorithms-for-system-design-interviews/#quadtree-cho-spatial-indexing","title":"Quadtree cho Spatial Indexing","text":"<p>Quadtree ho\u1ea1t \u0111\u1ed9ng b\u1eb1ng c\u00e1ch chia kh\u00f4ng gian 2D th\u00e0nh 4 ph\u1ea7n. M\u1ed7i node \u0111\u1ea1i di\u1ec7n cho m\u1ed9t v\u00f9ng, c\u00f3 t\u1eeb 0 \u0111\u1ebfn 4 node con. </p> <p></p> <p>T\u1ea1i sao l\u1ea1i l\u00e0 quadtree? N\u00f3 cho ph\u00e9p ta ch\u00e8n v\u00e0 t\u00ecm ki\u1ebfm v\u1ecb tr\u00ed nhanh ch\u00f3ng. Ta c\u00f3 th\u1ec3 t\u00ecm nhanh c\u00e1c \u0111i\u1ec3m trong m\u1ed9t b\u00e1n k\u00ednh b\u1eb1ng c\u00e1ch duy\u1ec7t c\u00e2y v\u00e0 lo\u1ea1i b\u1ecf c\u00e1c nh\u00e1nh n\u1eb1m ngo\u00e0i ph\u1ea1m vi. Vi\u1ec7c n\u00e0y gi\u00fap cho quadtree tr\u1edf n\u00ean v\u00f4 c\u00f9ng h\u1eefu \u00edch \u0111\u1ec3 index trong kh\u00f4ng gian, th\u1ee9 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ea5t nhi\u1ec1u trong c\u00e1c \u1ee9ng d\u1ee5ng b\u1ea3n \u0111\u1ed3. </p> <p></p> <p>Quadtree r\u1ea5t linh ho\u1ea1t v\u00e0 hi\u1ec7u qu\u1ea3 cho vi\u1ec7c index kh\u00f4ng gian 2D. H\u00e3y t\u00ecm hi\u1ec3u c\u00e1c c\u00e2y index kh\u00f4ng gian kh\u00e1c nh\u01b0 R-trees v\u00e0 KD-trees n\u1ebfu b\u1ea1n mu\u1ed1n bi\u1ebft th\u00eam.</p>"},{"location":"ByteByteGo/algorithms-for-system-design-interviews/#thuat-toan-leaky-bucket-cho-rate-limiting","title":"Thu\u1eadt to\u00e1n Leaky Bucket cho Rate Limiting","text":"<p>Gi\u1ea3 s\u1eed ta c\u00f3 m\u1ed9t c\u00e1i x\u00f4 v\u1edbi m\u1ed9t c\u00e1i l\u1ed7 nh\u1ecf \u1edf \u0111\u00e1y, \u0111\u00f3 l\u00e0 m\u1ed9t c\u00e1i x\u00f4 b\u1ecb th\u1ee7ng v\u00e0 n\u00f3 s\u1ebd r\u1ec9 n\u01b0\u1edbc (leaky bucket). C\u00e1c request \u0111\u1ed5 v\u00e0o nh\u01b0 n\u01b0\u1edbc, nh\u01b0ng n\u1ebfu x\u00f4 \u0111\u1ea7y, c\u00e1c request s\u1ebd b\u1ecb t\u1eeb ch\u1ed1i cho \u0111\u1ebfn khi c\u00e1i x\u00f4 c\u00f3 ch\u1ed7 ch\u1ee9a. Vi\u1ec7c c\u00e0i \u0111\u1eb7t c\u0169ng r\u1ea5t \u0111\u01a1n gi\u1ea3n. K\u00edch th\u01b0\u1edbc x\u00f4 ki\u1ec3m so\u00e1t dung l\u01b0\u1ee3ng l\u1edbn, v\u00e0 x\u00f4 r\u00f2 n\u01b0\u1edbc v\u1edbi t\u1ed1c \u0111\u1ed9 m\u00e0 ta mu\u1ed1n. M\u1ed7i request gi\u1ed1ng nh\u01b0 th\u00eam n\u01b0\u1edbc v\u00e0o x\u00f4. N\u1ebfu x\u00f4 tr\u00e0n, c\u00e1c request s\u1ebd ph\u1ea3i ch\u1edd. C\u00f3 c\u00e1c thu\u1eadt to\u00e1n rate limiting kh\u00e1c nh\u01b0 token bucket v\u00e0 sliding window counter. Ch\u00fang l\u00e0 c\u00e1c thu\u1eadt to\u00e1n \u0111\u01a1n gi\u1ea3n v\u00e0 hi\u1ec7u qu\u1ea3, m\u1ed7i thu\u1eadt to\u00e1n \u0111\u1ec1u c\u00f3 nh\u1eefng s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i gi\u1eefa \u0111\u1ed9 ch\u00ednh x\u00e1c v\u00e0 hi\u1ec7u su\u1ea5t.</p>"},{"location":"ByteByteGo/algorithms-for-system-design-interviews/#cay-trie-cho-tim-kiem-xau","title":"C\u00e2y Trie cho t\u00ecm ki\u1ebfm x\u00e2u","text":"<p>Ti\u1ebfp theo ta \u0111\u1ebfn v\u1edbi trie, m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u d\u1ea1ng c\u00e2y \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u \u0111\u1ec3 t\u00ecm ki\u1ebfm x\u00e2u ho\u1eb7c c\u00e1c ti\u1ec1n t\u1ed1 c\u1ee7a x\u00e2u. M\u1ed7i node c\u1ee7a c\u00e2y bi\u1ec3u th\u1ecb m\u1ed9t ti\u1ec1n t\u1ed1 chung, v\u1edbi c\u00e1c node chia s\u1ebb c\u00e1c ti\u1ec1n t\u1ed1 s\u1eed d\u1ee5ng c\u00f9ng m\u1ed9t c\u00e2y con. </p> <p></p> <p>S\u1ee9c m\u1ea1nh c\u1ee7a trie n\u1eb1m \u1edf t\u1ed1c \u0111\u1ed9 tra c\u1ee9u nhanh ch\u00f3ng v\u00e0 v\u00f4 c\u00f9ng ti\u1ec7n l\u1ee3i. Gi\u1ea3 s\u1eed b\u1ea1n \u0111ang t\u00ecm ki\u1ebfm m\u1ed9t t\u1eeb ho\u1eb7c ti\u1ec1n t\u1ed1 trong m\u1ed9t t\u1eadp d\u1eef li\u1ec7u l\u1edbn. V\u1edbi trie, ta kh\u00f4ng c\u1ea7n ph\u1ea3i duy\u1ec7t qua t\u1eebng t\u1eeb. Thay v\u00e0o \u0111\u00f3, vi\u1ec7c t\u00ecm ki\u1ebfm s\u1ebd di\u1ec5n ra theo t\u1eebng k\u00fd t\u1ef1, di chuy\u1ec3n qua c\u00e1c nh\u00e1nh kh\u1edbp v\u1edbi t\u1eeb kh\u00f3a. Vi\u1ec7c n\u00e0y gi\u00fap c\u00e1c thao t\u00e1c nh\u01b0 autocomplete trong c\u00e1c c\u00f4ng c\u1ee5 t\u00ecm ki\u1ebfm ho\u1eb7c tr\u00ecnh so\u1ea1n th\u1ea3o v\u0103n b\u1ea3n tr\u1edf n\u00ean nhanh ch\u00f3ng h\u01a1n nhi\u1ec1u so v\u1edbi c\u00e1c c\u1ea5u tr\u00fac kh\u00e1c nh\u01b0 hash table ho\u1eb7c m\u1ea3ng. </p> <p></p> <p>M\u1ed9t \u0111i\u1ec3m c\u1ea7n l\u01b0u \u00fd l\u00e0 trie c\u00f3 th\u1ec3 ti\u00eau t\u1ed1n nhi\u1ec1u b\u1ed9 nh\u1edb h\u01a1n so v\u1edbi c\u00e1c c\u1ea5u tr\u00fac kh\u00e1c, do m\u1ed7i node th\u01b0\u1eddng l\u01b0u nhi\u1ec1u con tr\u1ecf tr\u1ecf sang c\u00e1c node kh\u00e1c. </p> <p></p> <p>C\u00f3 c\u00e1c bi\u1ebfn th\u1ec3 nh\u01b0 radix trie ho\u1eb7c suffix trie gi\u00fap t\u1ed1i \u01b0u h\u00f3a vi\u1ec7c s\u1eed d\u1ee5ng b\u1ed9 nh\u1edb. Trie l\u00e0 m\u1ed9t n\u1ec1n t\u1ea3ng m\u1ea1nh m\u1ebd cho vi\u1ec7c t\u00ecm ki\u1ebfm d\u1ef1a tr\u00ean x\u00e2u.</p> <p></p>"},{"location":"ByteByteGo/algorithms-for-system-design-interviews/#bloom-filter","title":"Bloom Filter","text":"<p>Ti\u1ebfp theo, ta \u0111\u1ebfn v\u1edbi Bloom filter. \u0110\u00e2y l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u x\u00e1c su\u1ea5t d\u00f9ng \u0111\u1ec3 ki\u1ec3m tra s\u1ef1 t\u1ed3n t\u1ea1i c\u1ee7a m\u1ed9t ph\u1ea7n t\u1eed trong m\u1ed9t t\u1eadp h\u1ee3p. H\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng m\u1ed9t m\u1ea3ng bit k\u1ebft h\u1ee3p v\u1edbi m\u1ed9t s\u1ed1 h\u00e0m b\u0103m. C\u00e1c ph\u1ea7n t\u1eed khi cho v\u00e0o t\u1eadp h\u1ee3p s\u1ebd \u0111\u01b0\u1ee3c b\u0103m v\u00e0 c\u00e1c bit t\u01b0\u01a1ng \u1ee9ng \u0111\u01b0\u1ee3c set. \u0110\u1ec3 ki\u1ec3m tra s\u1ef1 t\u1ed3n t\u1ea1i c\u1ee7a ph\u1ea7n t\u1eed n\u00e0o \u0111\u00f3, ta xem xem t\u1ea5t c\u1ea3 c\u00e1c bit \u0111\u00e3 \u0111\u01b0\u1ee3c set ch\u01b0a. N\u1ebfu kh\u00f4ng th\u00ec ch\u1eafc ch\u1eafn kh\u00f4ng c\u00f3 trong t\u1eadp h\u1ee3p. Nh\u01b0ng n\u1ebfu \u0111\u1ee7 th\u00ec l\u1ea1i ch\u1ec9 c\u00f3 th\u1ec3 c\u00f3 trong t\u1eadp h\u1ee3p, nh\u01b0ng c\u1ea7n ch\u00fa \u00fd \u0111\u1ebfn c\u00e1c k\u1ebft qu\u1ea3 d\u01b0\u01a1ng t\u00ednh gi\u1ea3 (false positive). </p> <p></p> <p>Ta c\u0169ng kh\u00f4ng th\u1ec3 x\u00f3a ph\u1ea7n t\u1eed sau khi th\u00eam v\u00e0o. V\u1edbi c\u00e1c tr\u01b0\u1eddng h\u1ee3p d\u01b0\u01a1ng t\u00ednh gi\u1ea3, ta c\u00f3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh k\u00edch th\u01b0\u1edbc ho\u1eb7c h\u00e0m b\u0103m \u0111\u1ec3 c\u00e2n b\u1eb1ng gi\u1eefa kh\u00f4ng gian v\u00e0 \u0111\u1ed9 ch\u00ednh x\u00e1c. Bloom filter r\u1ea5t h\u1eefu \u00edch trong vi\u1ec7c l\u1ecdc, lo\u1ea1i b\u1ecf tr\u00f9ng l\u1eb7p v\u00e0 ph\u00e2n t\u00edch b\u1eb1ng c\u00e1ch nhanh ch\u00f3ng lo\u1ea1i b\u1ecf nhi\u1ec5u.</p> <p></p>"},{"location":"ByteByteGo/algorithms-for-system-design-interviews/#cac-thuat-toan-ong-thuan-consensus-algorithms","title":"C\u00e1c thu\u1eadt to\u00e1n \u0111\u1ed3ng thu\u1eadn (Consensus Algorithms)","text":"<p>Trong c\u00e1c h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n, vi\u1ec7c \u0111\u1ea1t \u0111\u01b0\u1ee3c \u0111\u1ed3ng thu\u1eadn (consensus) ngh\u0129a l\u00e0 vi\u1ec7c \u0111\u1ea3m b\u1ea3o t\u1ea5t c\u1ea3 c\u00e1c node \u0111\u1ec1u nh\u1ea5t qu\u00e1n v\u1edbi m\u1ed9t tr\u1ea1ng th\u00e1i chung. \u0110\u00e2y l\u00e0 m\u1ed9t th\u00e1ch th\u1ee9c, \u0111\u1eb7c bi\u1ec7t l\u00e0 v\u1edbi c\u00e1c s\u1ef1 c\u1ed1 m\u1ea1ng. C\u00e1c thu\u1eadt to\u00e1n nh\u01b0 Paxos hay Raft \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y. </p> <p></p> <p>V\u00ed d\u1ee5 v\u1edbi Raft, n\u00f3 b\u1ea7u ra m\u1ed9t leader \u0111\u1ec3 qu\u1ea3n l\u00fd vi\u1ec7c sao ch\u00e9p tr\u1ea1ng th\u00e1i tr\u00ean to\u00e0n b\u1ed9 cluster. N\u1ebfu c\u00e1c node ch\u1ebft \u0111i, Raft b\u1ea3o \u0111\u1ea3m h\u1ec7 th\u1ed1ng v\u1eabn ho\u1ea1t \u0111\u1ed9ng \u0111\u1ec3 tr\u00e1nh d\u1eef li\u1ec7u kh\u00f4ng nh\u1ea5t qu\u00e1n v\u00e0 downtime. M\u1ed9t \u0111i\u1ec3m c\u1ed9ng l\u1edbn c\u1ee7a Raft l\u00e0 n\u00f3 kh\u00e1 d\u1ec5 hi\u1ec3u v\u00e0 tri\u1ec3n khai. Nhi\u1ec1u h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n nh\u01b0 Kafka v\u00e0 etcd \u0111\u00e3 \u00e1p d\u1ee5ng Raft cho vi\u1ec7c sao ch\u00e9p, chuy\u1ec3n giao v\u00e0 b\u1ea7u ra leader. Paxos ra \u0111\u1eddi tr\u01b0\u1edbc Raft v\u00e0 c\u00f3 \u00fd ngh\u0129a l\u1ecbch s\u1eed nh\u01b0ng ph\u1ee9c t\u1ea1p h\u01a1n nhi\u1ec1u.</p>"},{"location":"ByteByteGo/apache-kafka/","title":"T\u00f3m t\u1eaft nhanh v\u1ec1 Apache Kafka","text":""},{"location":"ByteByteGo/apache-kafka/#nguon","title":"Ngu\u1ed3n","text":"<p> System Design: Apache Kafka In 3 Minutes</p>"},{"location":"ByteByteGo/apache-kafka/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Apache Kafka l\u00e0 m\u1ed9t n\u1ec1n t\u1ea3ng ph\u00e2n t\u00e1n chuy\u00ean x\u1eed l\u00fd d\u1eef li\u1ec7u d\u00f2ng th\u1eddi gian th\u1ef1c \u1edf quy m\u00f4 l\u1edbn. Kafka \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n t\u1ea1i LinkedIn, \u0111\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 x\u1eed l\u00fd l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u event v\u1edbi \u0111\u1ed9 tr\u1ec5 th\u1ea5p. N\u00f3 \u0111\u01b0\u1ee3c ph\u00e1t h\u00e0nh m\u00e3 ngu\u1ed3n m\u1edf v\u00e0o n\u0103m 2011 th\u00f4ng qua Qu\u1ef9 Apache v\u00e0 nhanh ch\u00f3ng tr\u1edf th\u00e0nh m\u1ed9t trong nh\u1eefng n\u1ec1n t\u1ea3ng streaming event ph\u1ed5 bi\u1ebfn nh\u1ea5t.</p>"},{"location":"ByteByteGo/apache-kafka/#tong-quan","title":"T\u1ed5ng quan","text":"<p>D\u1eef li\u1ec7u event trong Kafka \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c th\u00e0nh c\u00e1c topic (ch\u1ee7 \u0111\u1ec1), \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i tr\u00ean nhi\u1ec1u server g\u1ecdi l\u00e0 c\u00e1c broker. Vi\u1ec7c n\u00e0y \u0111\u1ea3m b\u1ea3o r\u1eb1ng d\u1eef li\u1ec7u lu\u00f4n d\u1ec5 truy c\u1eadp v\u00e0 c\u00f3 kh\u1ea3 n\u0103ng ch\u1ecbu l\u1ed7i khi h\u1ec7 th\u1ed1ng g\u1eb7p s\u1ef1 c\u1ed1. C\u00e1c \u1ee9ng d\u1ee5ng g\u1eedi d\u1eef li\u1ec7u v\u00e0o Kafka g\u1ecdi l\u00e0 c\u00e1c producer (nh\u00e0 s\u1ea3n xu\u1ea5t), trong khi c\u00e1c \u1ee9ng d\u1ee5ng ti\u00eau th\u1ee5 d\u1eef li\u1ec7u g\u1ecdi l\u00e0 c\u00e1c consumer (ng\u01b0\u1eddi ti\u00eau th\u1ee5). S\u1ee9c m\u1ea1nh c\u1ee7a Kafka n\u1eb1m \u1edf kh\u1ea3 n\u0103ng x\u1eed l\u00fd l\u01b0\u1ee3ng d\u1eef li\u1ec7u kh\u1ed5ng l\u1ed3, t\u00ednh linh ho\u1ea1t trong vi\u1ec7c t\u01b0\u01a1ng th\u00edch v\u1edbi nhi\u1ec1u \u1ee9ng d\u1ee5ng kh\u00e1c nhau, v\u00e0 kh\u1ea3 n\u0103ng ch\u1ecbu l\u1ed7i t\u1ed1t. \u0110i\u1ec1u n\u00e0y gi\u00fap Kafka kh\u00e1c bi\u1ec7t so v\u1edbi c\u00e1c h\u1ec7 th\u1ed1ng messaging \u0111\u01a1n gi\u1ea3n h\u01a1n.</p> <p></p> <p>Kafka \u0111\u00e3 tr\u1edf th\u00e0nh m\u1ed9t th\u00e0nh ph\u1ea7n quan tr\u1ecdng trong ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng hi\u1ec7n \u0111\u1ea1i nh\u1edd kh\u1ea3 n\u0103ng cung c\u1ea5p d\u00f2ng d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c v\u00e0 quy m\u00f4 l\u1edbn. H\u00e3y c\u00f9ng \u0111i\u1ec3m qua m\u1ed9t s\u1ed1 use case ph\u1ed5 bi\u1ebfn v\u00e0 quan tr\u1ecdng nh\u1ea5t c\u1ee7a Kafka.</p>"},{"location":"ByteByteGo/apache-kafka/#cac-use-case","title":"C\u00e1c use case","text":"<p>Tr\u01b0\u1edbc h\u1ebft, Kafka c\u00f3 th\u1ec3 ho\u1ea1t \u0111\u1ed9ng nh\u01b0 m\u1ed9t h\u00e0ng \u0111\u1ee3i th\u00f4ng \u0111i\u1ec7p c\u00f3 \u0111\u1ed9 tin c\u1eady v\u00e0 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng cao. N\u00f3 t\u00e1ch bi\u1ec7t gi\u1eefa producer v\u00e0 consumer, cho ph\u00e9p ch\u00fang ho\u1ea1t \u0111\u1ed9ng \u0111\u1ed9c l\u1eadp v\u00e0 hi\u1ec7u qu\u1ea3 \u1edf quy m\u00f4 l\u1edbn. </p> <p></p> <p>V\u00ed d\u1ee5 nh\u01b0 vi\u1ec7c theo d\u00f5i ho\u1ea1t \u0111\u1ed9ng, Kafka r\u1ea5t ph\u00f9 h\u1ee3p \u0111\u1ec3 l\u1ea5y v\u00e0 l\u01b0u tr\u1eef c\u00e1c s\u1ef1 ki\u1ec7n th\u1eddi gian th\u1ef1c nh\u01b0 l\u01b0\u1ee3t nh\u1ea5p chu\u1ed9t, l\u01b0\u1ee3t xem v\u00e0 giao d\u1ecbch mua h\u00e0ng t\u1eeb c\u00e1c trang web v\u00e0 \u1ee9ng d\u1ee5ng c\u00f3 l\u01b0\u1ee3ng truy c\u1eadp cao. C\u00e1c c\u00f4ng ty nh\u01b0 Uber v\u00e0 Netflix s\u1eed d\u1ee5ng Kafka \u0111\u1ec3 ph\u00e2n t\u00edch c\u00e1c ho\u1ea1t \u0111\u1ed9ng ng\u01b0\u1eddi d\u00f9ng trong th\u1eddi gian th\u1ef1c.</p> <p></p> <p>\u0110\u1ed1i v\u1edbi vi\u1ec7c thu th\u1eadp d\u1eef li\u1ec7u t\u1eeb nhi\u1ec1u ngu\u1ed3n, Kafka c\u00f3 th\u1ec3 h\u1ee3p nh\u1ea5t c\u00e1c d\u00f2ng d\u1eef li\u1ec7u kh\u00e1c nhau v\u00e0o m\u1ed9t pipeline th\u1eddi gian th\u1ef1c th\u1ed1ng nh\u1ea5t \u0111\u1ec3 ph\u00e2n t\u00edch v\u00e0 l\u01b0u tr\u1eef. \u0110i\u1ec1u n\u00e0y c\u1ef1c k\u1ef3 h\u1eefu \u00edch trong vi\u1ec7c t\u1eadp h\u1ee3p d\u1eef li\u1ec7u t\u1eeb internet of things (IoT) v\u00e0 c\u00e1c c\u1ea3m bi\u1ebfn. </p> <p></p> <p>Trong ki\u1ebfn tr\u00fac microservices, Kafka \u0111\u00f3ng vai tr\u00f2 l\u00e0 bus d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c gi\u00fap c\u00e1c d\u1ecbch v\u1ee5 kh\u00e1c nhau li\u00ean l\u1ea1c v\u1edbi nhau.</p> <p></p> <p>Kafka c\u0169ng r\u1ea5t h\u1eefu \u00edch trong vi\u1ec7c gi\u00e1m s\u00e1t v\u00e0 quan s\u00e1t khi \u0111\u01b0\u1ee3c t\u00edch h\u1ee3p v\u1edbi ELK stack. N\u00f3 thu th\u1eadp c\u00e1c s\u1ed1 li\u1ec7u, nh\u1eadt k\u00fd \u1ee9ng d\u1ee5ng v\u00e0 d\u1eef li\u1ec7u m\u1ea1ng theo th\u1eddi gian th\u1ef1c, sau \u0111\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c t\u1eadp h\u1ee3p v\u00e0 ph\u00e2n t\u00edch \u0111\u1ec3 theo d\u00f5i t\u00ecnh tr\u1ea1ng v\u00e0 hi\u1ec7u su\u1ea5t c\u1ee7a h\u1ec7 th\u1ed1ng.</p> <p></p> <p>Cu\u1ed1i c\u00f9ng, Kafka cho ph\u00e9p x\u1eed l\u00fd d\u00f2ng d\u1eef li\u1ec7u l\u1edbn th\u00f4ng qua ki\u1ebfn tr\u00fac ph\u00e2n t\u00e1n c\u1ee7a n\u00f3. Kafka c\u00f3 th\u1ec3 x\u1eed l\u00fd l\u01b0\u1ee3ng l\u1edbn d\u00f2ng d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c, v\u00ed d\u1ee5 nh\u01b0 x\u1eed l\u00fd d\u1eef li\u1ec7u nh\u1ea5p chu\u1ed9t c\u1ee7a ng\u01b0\u1eddi d\u00f9ng \u0111\u1ec3 \u0111\u01b0a ra \u0111\u1ec1 xu\u1ea5t s\u1ea3n ph\u1ea9m, ph\u00e1t hi\u1ec7n b\u1ea5t th\u01b0\u1eddng trong d\u1eef li\u1ec7u c\u1ea3m bi\u1ebfn IoT, ho\u1eb7c ph\u00e2n t\u00edch d\u1eef li\u1ec7u th\u1ecb tr\u01b0\u1eddng t\u00e0i ch\u00ednh.</p> <p></p>"},{"location":"ByteByteGo/apache-kafka/#han-che","title":"H\u1ea1n ch\u1ebf","text":"<p>Tuy nhi\u00ean, Kafka c\u0169ng c\u00f3 m\u1ed9t s\u1ed1 h\u1ea1n ch\u1ebf. N\u00f3 kh\u00e1 ph\u1ee9c t\u1ea1p v\u00e0 kh\u00f3 h\u1ecdc. C\u1ea7n c\u00f3 chuy\u00ean m\u00f4n \u0111\u1ec3 thi\u1ebft l\u1eadp, m\u1edf r\u1ed9ng v\u00e0 b\u1ea3o tr\u00ec h\u1ec7 th\u1ed1ng. Kafka c\u0169ng ti\u00eau t\u1ed1n nhi\u1ec1u t\u00e0i nguy\u00ean, \u0111\u00f2i h\u1ecfi ph\u1ea7n c\u1ee9ng v\u00e0 \u0111\u1ea7u t\u01b0 v\u1eadn h\u00e0nh \u0111\u00e1ng k\u1ec3, c\u00f3 th\u1ec3 kh\u00f4ng ph\u00f9 h\u1ee3p cho c\u00e1c c\u00f4ng ty kh\u1edfi nghi\u1ec7p nh\u1ecf. Ngo\u00e0i ra, Kafka c\u0169ng kh\u00f4ng ph\u00f9 h\u1ee3p cho c\u00e1c \u1ee9ng d\u1ee5ng \u0111\u00f2i h\u1ecfi \u0111\u1ed9 tr\u1ec5 c\u1ef1c th\u1ea5p nh\u01b0 giao d\u1ecbch t\u1ea7n su\u1ea5t cao, n\u01a1i m\u00e0 b\u1ea1n ch\u1eadm h\u01a1n ng\u01b0\u1eddi ta v\u00e0i mili gi\u00e2y c\u0169ng m\u1ea5t m\u1ed9t \u0111\u1ed1ng ti\u1ec1n.</p> <p></p>"},{"location":"ByteByteGo/api-architecture-styles/","title":"6 ki\u1ebfn tr\u00fac ph\u1ed5 bi\u1ebfn trong thi\u1ebft k\u1ebf API","text":""},{"location":"ByteByteGo/api-architecture-styles/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 6 Most Popular API Architecture Styles</p>"},{"location":"ByteByteGo/api-architecture-styles/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>API, hay Application Programming Interfaces - giao di\u1ec7n l\u1eadp tr\u00ecnh \u1ee9ng d\u1ee5ng, \u0111\u00f3ng vai tr\u00f2 c\u1ef1c k\u1ef3 quan tr\u1ecdng trong ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m. Ch\u00fang gi\u1ed1ng nh\u01b0 c\u1ea7u n\u1ed1i, cho ph\u00e9p c\u00e1c th\u00e0nh ph\u1ea7n ph\u1ea7n m\u1ec1m kh\u00e1c nhau giao ti\u1ebfp v\u00e0 t\u01b0\u01a1ng t\u00e1c v\u1edbi nhau. Ch\u00fang ch\u1ecbu tr\u00e1ch nhi\u1ec7m trao \u0111\u1ed5i d\u1eef li\u1ec7u, g\u1ecdi h\u00e0m, v\u00e0 t\u00edch h\u1ee3p gi\u1eefa c\u00e1c th\u00e0nh ph\u1ea7n h\u1ec7 th\u1ed1ng kh\u00e1c nhau.</p> <p>\u0110\u1ec3 h\u1ed7 tr\u1ee3 c\u00e1c ho\u1ea1t \u0111\u1ed9ng n\u00e0y, c\u00f3 nhi\u1ec1u ki\u1ebfn tr\u00fac kh\u00e1c nhau, m\u1ed7i ki\u1ebfn tr\u00fac c\u00f3 tri\u1ebft l\u00fd thi\u1ebft k\u1ebf v\u00e0 c\u00e1c use case ri\u00eang.</p> <p></p>"},{"location":"ByteByteGo/api-architecture-styles/#soap","title":"SOAP","text":"<p>\u0110\u1ea7u ti\u00ean, ch\u00fang ta c\u00f3 SOAP. \u0110\u00e2y l\u00e0 m\u1ed9t ki\u1ebfn tr\u00fac c\u1ed5 \u0111i\u1ec3n, to\u00e0n di\u1ec7n, v\u00e0 d\u1ef1a tr\u00ean XML. SOAP \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i trong c\u00e1c d\u1ecbch v\u1ee5 t\u00e0i ch\u00ednh v\u00e0 c\u1ed5ng thanh to\u00e1n, n\u01a1i t\u00ednh b\u1ea3o m\u1eadt v\u00e0 uy t\u00edn \u0111\u00f3ng vai tr\u00f2 t\u1ed1i quan tr\u1ecdng. Tuy nhi\u00ean, n\u1ebfu b\u1ea1n \u0111ang l\u00e0m vi\u1ec7c tr\u00ean m\u1ed9t \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng ho\u1eb7c m\u1ed9t prototype nhanh, SOAP c\u00f3 th\u1ec3 qu\u00e1 ph\u1ee9c t\u1ea1p v\u00ec s\u1ef1 c\u1ed3ng k\u1ec1nh c\u1ee7a n\u00f3.</p> <p></p>"},{"location":"ByteByteGo/api-architecture-styles/#restful","title":"RESTful","text":"<p>Ti\u1ebfp \u0111\u1ebfn, ta c\u00f3 RESTful APIs. Ch\u00fang gi\u1ed1ng nh\u01b0 c\u1ed9t s\u1ed1ng c\u1ee7a Internet, ph\u1ed5 bi\u1ebfn, d\u1ec5 tri\u1ec3n khai, v\u00e0 s\u1eed d\u1ee5ng HTTP. H\u1ea7u h\u1ebft c\u00e1c web service m\u00e0 b\u1ea1n t\u01b0\u01a1ng t\u00e1c h\u00e0ng ng\u00e0y, nh\u01b0 Twitter ho\u1eb7c YouTube, \u0111\u1ec1u d\u00f9ng RESTful APIs. Tuy nhi\u00ean, n\u1ebfu b\u1ea1n c\u1ea7n d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c ho\u1eb7c ho\u1ea1t \u0111\u1ed9ng v\u1edbi m\u00f4 h\u00ecnh d\u1eef li\u1ec7u k\u1ebft n\u1ed1i m\u1ea1nh, REST c\u00f3 th\u1ec3 kh\u00f4ng ph\u1ea3i l\u00e0 \u01b0u ti\u00ean s\u1ed1 1.</p> <p></p>"},{"location":"ByteByteGo/api-architecture-styles/#graphql","title":"GraphQL","text":"<p>GraphQL kh\u00f4ng ch\u1ec9 l\u00e0 m\u1ed9t ki\u1ebfn tr\u00fac m\u00e0 c\u00f2n l\u00e0 m\u1ed9t ng\u00f4n ng\u1eef truy v\u1ea5n, cho ph\u00e9p client y\u00eau c\u1ea7u m\u1ed9t s\u1ed1 d\u1eef li\u1ec7u c\u1ee5 th\u1ec3. \u0110i\u1ec1u n\u00e0y gi\u00fap tr\u00e1nh vi\u1ec7c l\u1ea5y qu\u00e1 nhi\u1ec1u ho\u1eb7c qu\u00e1 \u00edt d\u1eef li\u1ec7u. B\u1ea1n l\u1ea5y nh\u1eefng th\u1ee9 b\u1ea1n c\u1ea7n, gi\u00fap cho vi\u1ec7c giao ti\u1ebfp m\u1ea1ng hi\u1ec7u qu\u1ea3 h\u01a1n v\u00e0 ph\u1ea3n h\u1ed3i nhanh h\u01a1n. </p> <p></p> <p>Facebook ph\u00e1t tri\u1ec3n GraphQL \u0111\u1ec3 cung c\u1ea5p d\u1eef li\u1ec7u hi\u1ec7u qu\u1ea3 v\u00e0 ch\u00ednh x\u00e1c cho h\u00e0ng t\u1ef7 ng\u01b0\u1eddi d\u00f9ng c\u1ee7a m\u00ecnh. GraphQL c\u0169ng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1edfi c\u00e1c c\u00f4ng ty nh\u01b0 GitHub hay Shopify. T\u00ednh m\u1ec1m d\u1ebbo v\u00e0 hi\u1ec7u qu\u1ea3 gi\u00fap n\u00f3 tr\u1edf th\u00e0nh l\u1ef1a ch\u1ecdn ph\u1ed5 bi\u1ebfn cho c\u00e1c \u1ee9ng d\u1ee5ng v\u1edbi y\u00eau c\u1ea7u d\u1eef li\u1ec7u ph\u1ee9c t\u1ea1p. Tuy nhi\u00ean, vi\u1ec7c h\u1ecdc GraphQL s\u1ebd t\u1ed1n nhi\u1ec1u th\u1eddi gian h\u01a1n b\u1ea1n ngh\u0129, v\u00e0 c\u0169ng c\u1ea7n x\u1eed l\u00fd nhi\u1ec1u h\u01a1n \u1edf ph\u00eda server \u0111\u1ec3 ph\u1ee5c v\u1ee5 t\u00ednh linh ho\u1ea1t.</p>"},{"location":"ByteByteGo/api-architecture-styles/#grpc","title":"gRPC","text":"<p>gRPC l\u00e0 m\u1ed9t ki\u1ebfn tr\u00fac hi\u1ec7n \u0111\u1ea1i, hi\u1ec7u su\u1ea5t cao, s\u1eed d\u1ee5ng Protocol Buffers. N\u00f3 l\u00e0 l\u1ef1a ch\u1ecdn cho c\u00e1c ki\u1ebfn tr\u00fac microservice v\u00e0 c\u00e1c c\u00f4ng ty nh\u01b0 Netflix, \u0111\u1ec3 x\u1eed l\u00fd vi\u1ec7c giao ti\u1ebfp li\u00ean t\u1ee5c gi\u1eefa c\u00e1c service v\u1edbi nhau. Tuy nhi\u00ean, n\u1ebfu s\u1eed d\u1ee5ng gRPC tr\u00ean tr\u00ecnh duy\u1ec7t, b\u1ea1n s\u1ebd g\u1eb7p m\u1ed9t s\u1ed1 kh\u00f3 kh\u0103n v\u00ec c\u00e1c tr\u00ecnh duy\u1ec7t \u00edt h\u1ed7 tr\u1ee3 gRPC.</p> <p></p>"},{"location":"ByteByteGo/api-architecture-styles/#websocket","title":"WebSocket","text":"<p>WebSocket \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng khi b\u1ea1n c\u1ea7n c\u00e1c k\u1ebft n\u1ed1i li\u00ean t\u1ee5c, hai chi\u1ec1u, theo th\u1eddi gian th\u1ef1c, ph\u00f9 h\u1ee3p v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng chat, ch\u01a1i game theo th\u1eddi gian th\u1ef1c, n\u01a1i c\u1ea7n truy\u1ec1n d\u1eef li\u1ec7u nhanh ch\u00f3ng v\u00e0 li\u00ean t\u1ee5c. Nh\u01b0ng n\u1ebfu \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n kh\u00f4ng y\u00eau c\u1ea7u d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c, vi\u1ec7c s\u1eed d\u1ee5ng WebSocket c\u00f3 th\u1ec3 kh\u00f4ng c\u1ea7n thi\u1ebft.</p> <p></p>"},{"location":"ByteByteGo/api-architecture-styles/#webhook","title":"Webhook","text":"<p>Webhook l\u00e0 m\u1ed9t c\u01a1 ch\u1ebf theo s\u1ef1 ki\u1ec7n, hay c\u00f2n g\u1ecdi l\u00e0 th\u00f4ng b\u00e1o, callback, v\u00e0 thao t\u00e1c b\u1ea5t \u0111\u1ed3ng b\u1ed9. V\u00ed d\u1ee5, GitHub d\u00f9ng Webhook \u0111\u1ec3 th\u00f4ng b\u00e1o cho c\u00e1c h\u1ec7 th\u1ed1ng kh\u00e1c khi m\u1ed9t commit m\u1edbi \u0111\u01b0\u1ee3c push l\u00ean. Tuy nhi\u00ean, n\u1ebfu b\u1ea1n c\u1ea7n giao ti\u1ebfp \u0111\u1ed3ng b\u1ed9 hay hay ph\u1ea3n h\u1ed3i ngay l\u1eadp t\u1ee9c, Webhook c\u00f3 th\u1ec3 kh\u00f4ng ph\u00f9 h\u1ee3p.</p> <p></p>"},{"location":"ByteByteGo/api-design/","title":"7 m\u1eb9o v\u1eb7t cho thi\u1ebft k\u1ebf API","text":""},{"location":"ByteByteGo/api-design/#nguon","title":"Ngu\u1ed3n","text":"<p> Good APIs Vs Bad APIs: 7 Tips for API Design</p>"},{"location":"ByteByteGo/api-design/#at-ten-ro-rang","title":"\u0110\u1eb7t t\u00ean r\u00f5 r\u00e0ng","text":"<p>Khi x\u00e2y d\u1ef1ng API, ch\u1ecdn t\u00ean r\u00f5 r\u00e0ng v\u00e0 h\u1ee3p logic. Thay v\u00ec d\u00f9ng <code>/cart/123</code> cho m\u1ed9t app mua h\u00e0ng, h\u00e3y s\u1eed d\u1ee5ng <code>/carts/123</code>. Danh t\u1eeb s\u1ed1 nhi\u1ec1u s\u1ebd cho ng\u01b0\u1eddi s\u1eed d\u1ee5ng API bi\u1ebft r\u1eb1ng m\u00ecnh \u0111ang l\u00e0m vi\u1ec7c v\u1edbi m\u1ed9t t\u1eadp c\u00e1c t\u00e0i nguy\u00ean. H\u00e3y nh\u1ea5t qu\u00e1n, n\u00f3 s\u1ebd gi\u00fap ng\u01b0\u1eddi d\u00f9ng d\u1ec5 d\u00e0ng h\u01a1n khi s\u1eed d\u1ee5ng API c\u1ee7a b\u1ea1n.</p> <p></p>"},{"location":"ByteByteGo/api-design/#am-bao-o-tin-cay-cua-cac-idempotent-api","title":"\u0110\u1ea3m b\u1ea3o \u0111\u1ed9 tin c\u1eady c\u1ee7a c\u00e1c idempotent API","text":"<p>Idempotency ngh\u0129a l\u00e0 l\u00e0m cho vi\u1ec7c g\u1ecdi API nhi\u1ec1u l\u1ea7n c\u0169ng gi\u1ed1ng nh\u01b0 g\u1ecdi m\u1ed9t l\u1ea7n. \u00dd t\u01b0\u1edfng n\u00e0y l\u00e0 ch\u00eca kh\u00f3a cho c\u00e1c API tin c\u1eady, gi\u00fap tr\u00e1nh l\u1ed7i khi API \u0111\u01b0\u1ee3c g\u1ecdi l\u1ea1i, c\u00f3 th\u1ec3 do l\u1ed7i m\u1ea1ng.</p> <p></p> <p>Th\u00f4ng th\u01b0\u1eddng, c\u00e1c request POST kh\u00f4ng ph\u1ea3i idempotent v\u00ec g\u1eedi m\u1ed9t request POST hai l\u1ea7n c\u00f3 th\u1ec3 t\u1ea1o ra hai object gi\u1ed1ng nhau.</p> <p></p> <p>Ta c\u00f3 th\u1ec3 th\u00eam logic \u0111\u1ec3 tr\u00e1nh t\u1ea1o ra c\u00e1c object gi\u1ed1ng nhau, b\u1eb1ng c\u00e1ch sinh m\u1ed9t ID m\u1edbi cho c\u00e1c request kh\u00e1c nhau.</p> <p></p> <p>C\u00e1c request GET th\u00ec th\u01b0\u1eddng idempotent. C\u00e1c request GET gi\u1ed1ng nhau s\u1ebd tr\u1ea3 v\u1ec1 th\u00f4ng tin nh\u01b0 nhau.</p> <p></p> <p>C\u00e1c request PUT s\u1ebd update to\u00e0n b\u1ed9 object n\u00ean c\u0169ng th\u01b0\u1eddng l\u00e0 idempotent. Tuy nhi\u00ean, c\u00e1c request PATCH th\u00ec l\u1ea1i update m\u1ed9t s\u1ed1 tr\u01b0\u1eddng c\u1ee7a object th\u00f4i. V\u00ed d\u1ee5, n\u1ebfu b\u1ea1n g\u1eedi PATCH request hai l\u1ea7n \u0111\u1ec3 th\u00eam m\u1ed9t m\u00e0u xanh v\u00e0o m\u1ed9t tr\u01b0\u1eddng m\u00e0u (m\u1ed9t m\u1ea3ng), ta s\u1ebd c\u00f3 hai m\u00e0u xanh trong m\u1ea3ng \u0111\u00f3. V\u00ec v\u1eady, PATCH request kh\u00f4ng ph\u1ea3i idempotent.</p> <p></p> <p>Cu\u1ed1i c\u00f9ng, c\u00e1c request DELETE s\u1ebd idempotent. DELETE s\u1ebd ch\u1ec9 th\u1ef1c hi\u1ec7n m\u1ed9t l\u1ea7n khi g\u1ecdi nhi\u1ec1u l\u1ea7n. N\u1ebfu object \u0111\u00e3 b\u1ecb x\u00f3a th\u00ec DELETE s\u1ebd ch\u1ec9 tr\u1ea3 v\u1ec1 l\u1ed7i g\u00ec \u0111\u00f3 th\u00f4i, c\u00f2n th\u00f4ng tin c\u1ee7a object \u0111\u00e3 b\u1ecb x\u00f3a s\u1ebd kh\u00f4ng c\u00f2n.</p> <p></p> <p></p>"},{"location":"ByteByteGo/api-design/#them-phien-ban-versioning-vao-api","title":"Th\u00eam phi\u00ean b\u1ea3n (versioning) v\u00e0o API","text":"<p>API s\u1ebd ph\u00e1t tri\u1ec3n v\u00e0 c\u1ea7n update li\u00ean t\u1ee5c. B\u1ea1n s\u1ebd c\u1ea7n ph\u1ea3i update m\u00e0 kh\u00f4ng l\u00e0m gi\u00e1n \u0111o\u1ea1n ho\u1ea1t \u0111\u1ed9ng hi\u1ec7n t\u1ea1i c\u1ee7a \u1ee9ng d\u1ee5ng. M\u1ed9t URL ki\u1ec3u <code>v1/carts/123</code> s\u1ebd gi\u00fap b\u1ea1n update th\u00e0nh <code>v2/carts/123</code> m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn nh\u1eefng ng\u01b0\u1eddi \u0111ang s\u1eed d\u1ee5ng API tr\u01b0\u1edbc \u0111\u00f3.</p> <p>Vi\u1ec7c th\u00eam phi\u00ean b\u1ea3n s\u1ebd gi\u00fap h\u1ed7 tr\u1ee3 c\u1ea3 nh\u1eefng ng\u01b0\u1eddi d\u00f9ng c\u0169 v\u00e0 m\u1edbi, gi\u00fap ng\u01b0\u1eddi s\u1eed d\u1ee5ng n\u00e2ng c\u1ea5p b\u1ea5t k\u1ef3 l\u00fac n\u00e0o m\u00e0 h\u1ecd mu\u1ed1n v\u00e0 gi\u00fap cho vi\u1ec7c t\u00e0i li\u1ec7u h\u00f3a API d\u1ec5 d\u00e0ng h\u01a1n.</p>"},{"location":"ByteByteGo/api-design/#them-phan-trang","title":"Th\u00eam ph\u00e2n trang","text":"<p>Ph\u00e2n trang gi\u00fap ki\u1ec3m so\u00e1t s\u1ed1 l\u01b0\u1ee3ng t\u00e0i nguy\u00ean tr\u1ea3 v\u1ec1 khi g\u1ecdi API. Nh\u1eefng c\u00e1ch ph\u00e2n trang ph\u1ed5 bi\u1ebfn bao g\u1ed3m: Page + Offset v\u00e0 Cursor-based.</p> <p>Ph\u00e2n trang ki\u1ec3u Page + Offset s\u1eed d\u1ee5ng s\u1ed1 trang v\u00e0 s\u1ed1 l\u01b0\u1ee3ng t\u00e0i nguy\u00ean tr\u00ean m\u1ed7i trang. V\u00ed d\u1ee5, trang 2 s\u1ebd bao g\u1ed3m c\u00e1c t\u00e0i nguy\u00ean \u0111\u00e1nh s\u1ed1 t\u1eeb 11 \u0111\u1ebfn 20 khi m\u1ed7i trang c\u00f3 10 t\u00e0i nguy\u00ean. R\u1ea5t \u0111\u01a1n gi\u1ea3n, nh\u01b0ng c\u00f3 th\u1ec3 ch\u1eadm \u0111i v\u1edbi t\u1eadp du li\u1ec7u l\u1edbn, v\u00ec database s\u1ebd ph\u1ea3i \u0111\u1ebfm t\u1ea5t c\u1ea3 c\u00e1c d\u00f2ng t\u1eeb \u0111\u1ea7u cho \u0111\u1ebfn trang c\u1ea7n tr\u1ea3 v\u1ec1.</p> <p></p> <p>Ph\u00e2n trang ki\u1ec3u Cursor-based s\u1eed d\u1ee5ng m\u1ed9t con tr\u1ecf \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh v\u1ecb tr\u00ed c\u1ee7a t\u00e0i nguy\u00ean trong t\u1eadp d\u1eef li\u1ec7u. N\u00f3 theo d\u1ea5u t\u00e0i nguy\u00ean m\u1ed9t c\u00e1ch ch\u00ednh x\u00e1c, d\u00f9 v\u1edbi t\u1eadp d\u1eef li\u1ec7u thay \u0111\u1ed5i li\u00ean t\u1ee5c.</p> <p></p> <p>Ph\u00e2n trang gi\u00fap tr\u00e1nh vi\u1ec7c tr\u1ea3 v\u1ec1 qu\u00e1 nhi\u1ec1u d\u1eef li\u1ec7u m\u00e0 ng\u01b0\u1eddi d\u00f9ng kh\u00f4ng c\u1ea7n, gi\u00fap gi\u1ea3m t\u1ea3i cho server v\u00e0 c\u1ea3i thi\u1ec7n tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\u00f9ng.</p>"},{"location":"ByteByteGo/api-design/#su-dung-truy-van-ro-rang-e-sap-xep-va-loc-du-lieu","title":"S\u1eed d\u1ee5ng truy v\u1ea5n r\u00f5 r\u00e0ng \u0111\u1ec3 s\u1eafp x\u1ebfp v\u00e0 l\u1ecdc d\u1eef li\u1ec7u","text":"<p>V\u00ed d\u1ee5, n\u1ebfu b\u1ea1n mu\u1ed1n s\u1eafp x\u1ebfp c\u00e1c user theo ng\u00e0y \u0111\u0103ng k\u00fd t\u00e0i kho\u1ea3n, d\u00f9ng truy v\u1ea5n ki\u1ec3u <code>/users?sort_by=registered</code>. N\u1ebfu mu\u1ed1n l\u1ecdc ra c\u00e1c product c\u00f3 m\u00e0u xanh ch\u1eb3ng h\u1ea1n, d\u00f9ng <code>/products?filter=color:blue</code>.</p> <p>L\u1ee3i th\u1ebf \u1edf \u0111\u00e2y l\u00e0 g\u00ec?</p> <ol> <li>Query string ki\u1ec3u n\u00e0y gi\u00fap ta truy v\u1ea5n m\u1ed9t c\u00e1ch t\u1ef1 nhi\u00ean, d\u1ec5 \u0111\u1ecdc v\u00e0 d\u1ec5 hi\u1ec3u.</li> <li>B\u1ea1n c\u00f3 th\u1ec3 th\u00eam \u0111i\u1ec1u ki\u1ec7n l\u1ecdc b\u1ea5t k\u1ef3 l\u00fac n\u00e0o b\u1ea1n mu\u1ed1n m\u00e0 kh\u00f4ng l\u00e0m thay \u0111\u1ed5i c\u1ea5u tr\u00fac c\u1ee7a API.</li> <li>K\u1ebft qu\u1ea3 l\u1ecdc v\u00e0 s\u1eafp x\u1ebfp c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c cache \u1edf \u0111\u00e2u \u0111\u00f3 gi\u00fap gi\u1ea3m t\u1ea3i cho server.</li> </ol> <p></p>"},{"location":"ByteByteGo/api-design/#hay-quan-tam-en-bao-mat","title":"H\u00e3y quan t\u00e2m \u0111\u1ebfn b\u1ea3o m\u1eadt","text":"<p>V\u1edbi c\u00e1c credential nh\u1ea1y c\u1ea3m nh\u01b0 API key, b\u1ea1n n\u00ean cho v\u00e0o header thay v\u00ec d\u00f9ng tr\u1ef1c ti\u1ebfp tr\u00ean URL. URL s\u1ebd \u0111\u01b0\u1ee3c log tr\u00ean server v\u00e0 ng\u01b0\u1eddi ta c\u00f3 th\u1ec3 d\u1ec5 d\u00e0ng th\u1ea5y \u0111\u01b0\u1ee3c n\u00f3. C\u00e1c header nh\u01b0 Authorization gi\u00fap tr\u00e1nh t\u00ecnh tr\u1ea1ng \u0111\u00f3.</p> <p></p> <p>Tuy nhi\u00ean, header v\u1eabn c\u00f3 th\u1ec3 l\u00e0m r\u00f2 r\u1ec9 th\u00f4ng tin, v\u00ec v\u1eady b\u1ea1n n\u00ean m\u00e3 h\u00f3a TLS cho API c\u1ee7a m\u00ecnh.</p> <p></p> <p>Ki\u1ec3m so\u00e1t truy c\u1eadp (Access Control) ch\u1eb7t ch\u1ebd cho c\u00e1c API, x\u00e1c th\u1ef1c t\u1ea5t c\u1ea3 c\u00e1c key hay token nh\u1eadn \u0111\u01b0\u1ee3c tr\u01b0\u1edbc khi x\u1eed l\u00fd API.</p> <p></p> <p>B\u1ea3o m\u1eadt l\u00e0 m\u1ed9t ch\u1ee7 \u0111\u1ec1 r\u1ed9ng l\u1edbn, ta ch\u1ec9 ch\u1ea1m v\u00e0o ph\u1ea7n nh\u1ecf \u1edf \u0111\u00e2y th\u00f4i. H\u00e3y t\u00ecm hi\u1ec3u th\u00eam v\u1ec1 b\u1ea3o m\u1eadt API \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o API c\u1ee7a b\u1ea1n an to\u00e0n nh\u00e9.</p>"},{"location":"ByteByteGo/api-design/#on-gian-hoa-viec-truy-van-a-tai-nguyen","title":"\u0110\u01a1n gi\u1ea3n h\u00f3a vi\u1ec7c truy v\u1ea5n \u0111a t\u00e0i nguy\u00ean","text":"<p>Truy v\u1ea5n \u0111a t\u00e0i nguy\u00ean c\u1ea7n r\u00f5 r\u00e0ng v\u00e0 \u0111\u01a1n gi\u1ea3n. V\u00ed d\u1ee5, ta d\u00f9ng <code>carts/123/items/321</code> \u0111\u1ec3 l\u1ea5y th\u00f4ng tin item 321 trong cart 123, kh\u00f4ng n\u00ean d\u00f9ng <code>items?cart_id=123&amp;item_id=321</code>. \u0110i\u1ec1u n\u00e0y gi\u00fap vi\u1ec7c t\u00edch h\u1ee3p tr\u1edf n\u00ean d\u1ec5 d\u00e0ng h\u01a1n.</p>"},{"location":"ByteByteGo/api-design/#bonus-su-dung-rate-limiting","title":"Bonus: S\u1eed d\u1ee5ng rate limiting","text":"<p>Rate limiting gi\u00fap gi\u1ea3m t\u1ea3i cho server, tr\u00e1nh b\u1ecb qu\u00e1 t\u1ea3i ho\u1eb7c t\u1ea5n c\u00f4ng. Ta c\u00f3 th\u1ec3 d\u00f9ng m\u1ed9t s\u1ed1 ti\u00eau ch\u00ed nh\u01b0 \u0111\u1ecba ch\u1ec9 IP, t\u00e0i kho\u1ea3n ng\u01b0\u1eddi d\u00f9ng, hay c\u00e1c API \u0111\u1ec3 gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng request m\u00e0 m\u1ed9t ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 g\u1eedi trong m\u1ed9t kho\u1ea3ng th\u1eddi gian nh\u1ea5t \u0111\u1ecbnh.</p> <p>V\u00ed d\u1ee5, ng\u01b0\u1eddi d\u00f9ng mi\u1ec5n ph\u00ed c\u00f3 th\u1ec3 g\u1ecdi 1000 request m\u1ed7i ng\u00e0y, v\u00e0 m\u1ed7i \u0111\u1ecba ch\u1ec9 IP c\u00f3 th\u1ec3 g\u1ecdi 20 l\u1ea7n m\u1ed7i ph\u00fat.</p>"},{"location":"ByteByteGo/api-gateway/","title":"API Gateway l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/api-gateway/#nguon","title":"Ngu\u1ed3n","text":"<p> What is API Gateway?</p>"},{"location":"ByteByteGo/api-gateway/#khai-niem","title":"Kh\u00e1i ni\u1ec7m","text":"<p>M\u1ed9t API gateway l\u00e0 m\u1ed9t \u0111i\u1ec3m truy c\u1eadp duy nh\u1ea5t c\u1ee7a c\u00e1c client v\u00e0o m\u1ed9t \u1ee9ng d\u1ee5ng. N\u00f3 n\u1eb1m gi\u1eefa client v\u00e0 m\u1ed9t t\u1eadp c\u00e1c backend service c\u1ee7a \u1ee9ng d\u1ee5ng. M\u1ed9t API gateway th\u01b0\u1eddng cung c\u1ea5p m\u1ed9t s\u1ed1 ch\u1ee9c n\u0103ng quan tr\u1ecdng nh\u01b0:</p> <ul> <li>X\u00e1c th\u1ef1c ng\u01b0\u1eddi d\u00f9ng v\u00e0 th\u1ef1c thi c\u00e1c ch\u00ednh s\u00e1ch b\u1ea3o m\u1eadt c\u1ee7a \u1ee9ng d\u1ee5ng.</li> <li>C\u00e2n b\u1eb1ng t\u1ea3i v\u00e0 ng\u1eaft m\u1ea1ch (circuit breaking).</li> <li>Bi\u00ean d\u1ecbch giao th\u1ee9c v\u00e0 kh\u00e1m ph\u00e1 d\u1ecbch v\u1ee5</li> <li>Gi\u00e1m s\u00e1t, logging, ph\u00e2n t\u00edch v\u00e0 thanh to\u00e1n.</li> <li>Caching.</li> </ul> <p></p>"},{"location":"ByteByteGo/api-gateway/#quy-trinh","title":"Quy tr\u00ecnh","text":"<p>Ta h\u00e3y xem x\u00e9t m\u1ed9t quy tr\u00ecnh th\u00f4ng th\u01b0\u1eddng c\u1ee7a m\u1ed9t request t\u1eeb client qua API gateway \u0111\u1ebfn backend service.</p> <p>B\u01b0\u1edbc 1: Client g\u1eedi m\u1ed9t request \u0111\u1ebfn API gateway. Request n\u00e0y th\u01b0\u1eddng qua giao th\u1ee9c HTTP. N\u00f3 c\u00f3 th\u1ec3 l\u00e0 REST, GraphQL, v.v...</p> <p>B\u01b0\u1edbc 2: API gateway x\u00e1c th\u1ef1c HTTP request.</p> <p>B\u01b0\u1edbc 3: API gateway ki\u1ec3m tra \u0111\u1ecba ch\u1ec9 IP c\u1ee7a client v\u00e0 c\u00e1c HTTP header v\u1edbi allow-list (whitelist) v\u00e0 deny-list (blacklist). N\u00f3 c\u0169ng c\u00f3 th\u1ec3 ki\u1ec3m tra rate limit \u0111\u01a1n gi\u1ea3n v\u1edbi m\u1ed9t s\u1ed1 thu\u1ed9c t\u00ednh nh\u1ea5t \u0111\u1ecbnh nh\u01b0 \u0111\u1ecba ch\u1ec9 IP v\u00e0 HTTP header. V\u00ed d\u1ee5, n\u00f3 c\u00f3 th\u1ec3 t\u1eeb ch\u1ed1i c\u00e1c request \u0111\u1ebfn t\u1eeb m\u1ed9t IP address v\u01b0\u1ee3t qu\u00e1 m\u1ed9t t\u1ec9 l\u1ec7 nh\u1ea5t \u0111\u1ecbnh.</p> <p>B\u01b0\u1edbc 4: API gateway \u0111\u01b0a request \u0111\u1ebfn m\u1ed9t b\u00ean x\u00e1c th\u1ef1c danh t\u00ednh \u0111\u1ec3 x\u00e1c th\u1ef1c v\u00e0 u\u1ef7 quy\u1ec1n cho request. API gateway nh\u1eadn m\u1ed9t phi\u00ean x\u00e1c th\u1ef1c t\u1eeb b\u00ean \u0111\u00f3 v\u1edbi ph\u1ea1m vi v\u1ec1 nh\u1eefng th\u1ee9 \u0111\u01b0\u1ee3c ph\u00e9p l\u00e0m c\u1ee7a client.</p> <p>B\u01b0\u1edbc 5: M\u1ed9t rate limit check ch\u1eb7t ch\u1ebd h\u01a1n \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 ki\u1ec3m tra phi\u00ean x\u00e1c th\u1ef1c ban n\u00e3y. N\u1ebfu v\u01b0\u1ee3t qu\u00e1 gi\u1edbi h\u1ea1n, request s\u1ebd b\u1ecb t\u1eeb ch\u1ed1i.</p> <p>B\u01b0\u1edbc 6 v\u00e0 7: V\u1edbi s\u1ef1 gi\u00fap \u0111\u1ee1 c\u1ee7a th\u00e0nh ph\u1ea7n kh\u00e1m ph\u00e1 d\u1ecbch v\u1ee5 (service discovery component), API gateway \u0111\u1ecbnh v\u1ecb d\u1ecbch v\u1ee5 ph\u00f9 h\u1ee3p \u1edf backend \u0111\u1ec3 x\u1eed l\u00fd request b\u1eb1ng c\u00e1ch so \u0111\u01b0\u1eddng d\u1eabn.</p> <p></p> <p>B\u01b0\u1edbc 8: API gateway chuy\u1ec3n \u0111\u1ed5i request th\u00e0nh m\u1ed9t giao th\u1ee9c ph\u00f9 h\u1ee3p v\u00e0 g\u1eedi request m\u1edbi sang backend service. M\u1ed9t v\u00ed d\u1ee5 l\u00e0 gRPC. </p> <p>Khi response tr\u1edf l\u1ea1i t\u1eeb backend service, API gateway s\u1ebd chuy\u1ec3n \u0111\u1ed5i response l\u1ea1i th\u00e0nh giao th\u1ee9c c\u0169 (tr\u01b0\u1edbc b\u01b0\u1edbc 8) v\u00e0 tr\u1ea3 l\u1ea1i response n\u00e0y cho client.</p> <p>M\u1ed9t API gateway chu\u1ea9n c\u0169ng cung c\u1ea5p c\u00e1c d\u1ecbch v\u1ee5 quan tr\u1ecdng kh\u00e1c. V\u00ed d\u1ee5, m\u1ed9t API gateway s\u1ebd theo d\u00f5i l\u1ed7i v\u00e0 cung c\u1ea5p ch\u1ee9c n\u0103ng ng\u1eaft m\u1ea1ch \u0111\u1ec3 b\u00e0o v\u1ec7 service kh\u1ecfi b\u1ecb qu\u00e1 t\u1ea3i. API gateway c\u0169ng c\u1ea7n cung c\u1ea5p logging, gi\u00e1m s\u00e1t, v\u00e0 d\u1ecbch v\u1ee5 ph\u00e2n t\u00edch \u0111\u1ec3 ph\u1ee5c v\u1ee5 m\u1ee5c \u0111\u00edch theo d\u00f5i.</p> <p></p> <p>M\u1ed9t API gateway l\u00e0 m\u1ed9t y\u1ebfu t\u1ed1 quan tr\u1ecdng trong c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng. N\u00f3 n\u00ean \u0111\u01b0\u1ee3c tri\u1ec3n khai cho nhi\u1ec1u khu v\u1ef1c \u0111\u1ec3 c\u1ea3i thi\u1ec7n t\u00ednh kh\u1ea3 d\u1ee5ng. V\u1edbi nhi\u1ec1u d\u1ecbch v\u1ee5 \u0111\u00e1m m\u00e2y t\u1eeb c\u00e1c nh\u00e0 cung c\u1ea5p, API gateway \u0111\u01b0\u1ee3c tri\u1ec3n khai tr\u00ean to\u00e0n th\u1ebf gi\u1edbi \u0111\u1ec3 g\u1ea7n v\u1edbi kh\u00e1ch h\u00e0ng h\u01a1n.</p> <p></p> <p></p>"},{"location":"ByteByteGo/api-testing/","title":"9 lo\u1ea1i API testing ph\u1ed5 bi\u1ebfn","text":""},{"location":"ByteByteGo/api-testing/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 9 Most Popular Types of API Testing</p>"},{"location":"ByteByteGo/api-testing/#cac-loai-api-testing","title":"C\u00e1c lo\u1ea1i API testing","text":"<p>Smoke Testing gi\u1ed1ng nh\u01b0 m\u1ed9t b\u00e0i ki\u1ec3m tra nhanh \u0111\u1ec3 x\u00e1c nh\u1eadn r\u1eb1ng API ho\u1ea1t \u0111\u1ed9ng v\u00e0 ph\u1ea3n h\u1ed3i \u0111\u00fang v\u1edbi c\u00e1c y\u00eau c\u1ea7u c\u01a1 b\u1ea3n. \u0110\u00e2y l\u00e0 b\u01b0\u1edbc \u0111\u1ea7u ti\u00ean khi b\u1ea1n v\u1eeba x\u00e2y d\u1ef1ng m\u1ed9t trang web m\u1edbi v\u00e0 mu\u1ed1n ch\u1eafc ch\u1eafn m\u1ecdi th\u1ee9 ho\u1ea1t \u0111\u1ed9ng tr\u01b0\u1edbc khi ra m\u1eaft.</p> <p></p> <p>Functional Testing l\u00e0 b\u01b0\u1edbc ti\u1ebfp theo, n\u01a1i c\u00e1c QA t\u1ea1o ra c\u00e1c k\u1ecbch b\u1ea3n ki\u1ec3m th\u1eed chi ti\u1ebft \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o m\u1ecdi ch\u1ee9c n\u0103ng c\u1ee7a API ho\u1ea1t \u0111\u1ed9ng \u0111\u00fang v\u00e0 \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u c\u1ee5 th\u1ec3. Gi\u1ed1ng nh\u01b0 ki\u1ec3m tra t\u1eebng t\u00ednh n\u0103ng c\u1ee7a m\u1ed9t ph\u1ea7n m\u1ec1m m\u1edbi, c\u00e1c Functional Test n\u00e0y \u0111\u1ea3m b\u1ea3o c\u00e1c t\u00ednh n\u0103ng nh\u01b0 t\u00ecm ki\u1ebfm s\u1ea3n ph\u1ea9m, th\u00eam v\u00e0o gi\u1ecf h\u00e0ng, v\u00e0 thanh to\u00e1n an to\u00e0n \u0111\u1ec1u ho\u1ea1t \u0111\u1ed9ng ch\u00ednh x\u00e1c.</p> <p></p> <p>Khi c\u00f3 nhi\u1ec1u API l\u00e0m vi\u1ec7c c\u00f9ng nhau, Integration Testing \u0111\u1ea3m b\u1ea3o c\u00e1c API v\u00e0 d\u1ecbch v\u1ee5 \u0111\u00e1m m\u00e2y n\u00e0y c\u00f3 th\u1ec3 giao ti\u1ebfp v\u00e0 trao \u0111\u1ed5i d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch ch\u00ednh x\u00e1c. Ch\u1eb3ng h\u1ea1n, v\u1edbi m\u1ed9t trang web \u0111\u1eb7t v\u00e9 du l\u1ecbch, ki\u1ec3m th\u1eed t\u00edch h\u1ee3p x\u00e1c nh\u1eadn r\u1eb1ng API \u0111\u1eb7t v\u00e9 m\u00e1y bay ph\u1ed1i h\u1ee3p ch\u00ednh x\u00e1c v\u1edbi h\u1ec7 th\u1ed1ng thanh to\u00e1n, nh\u1eadn d\u1ea1ng h\u00e0nh kh\u00e1ch v\u00e0 c\u00e1c h\u1ec7 th\u1ed1ng kh\u00e1c.</p> <p></p> <p></p> <p>M\u1ed7i khi c\u00f3 c\u1eadp nh\u1eadt ho\u1eb7c thay \u0111\u1ed5i code, Regression Testing \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n \u0111\u1ec3 ch\u1ea1y l\u1ea1i c\u00e1c k\u1ecbch b\u1ea3n ki\u1ec3m th\u1eed hi\u1ec7n c\u00f3 nh\u1eb1m ph\u00e1t hi\u1ec7n b\u1ea5t k\u1ef3 l\u1ed7i n\u00e0o xu\u1ea5t hi\u1ec7n do thay \u0111\u1ed5i. \u0110i\u1ec1u n\u00e0y gi\u00fap c\u00e1c dev y\u00ean t\u00e2m tri\u1ec3n khai c\u00e1c c\u1eadp nh\u1eadt m\u00e0 kh\u00f4ng lo l\u1eafng v\u1ec1 vi\u1ec7c g\u00e2y ra s\u1ef1 c\u1ed1 m\u1edbi.</p> <p></p> <p>Load Testing \u0111\u00e1nh gi\u00e1 hi\u1ec7u su\u1ea5t th\u1ef1c t\u1ebf c\u1ee7a API b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng n\u00f3 v\u1edbi l\u01b0u l\u01b0\u1ee3ng ng\u01b0\u1eddi d\u00f9ng cao. Stress Testing th\u00ec \u0111i xa h\u01a1n, m\u00f4 ph\u1ecfng c\u00e1c t\u00ecnh hu\u1ed1ng qu\u00e1 t\u1ea3i nghi\u00eam tr\u1ecdng v\u00e0 c\u00e1c \u0111i\u1ec1u ki\u1ec7n xa h\u01a1n m\u1ee9c s\u1eed d\u1ee5ng b\u00ecnh th\u01b0\u1eddng. C\u1ea3 hai \u0111\u1ec1u gi\u00fap th\u1eed nghi\u1ec7m API \u0111\u1ec3 duy tr\u00ec s\u1ef1 \u1ed5n \u0111\u1ecbnh v\u00e0 \u0111\u00e1p \u1ee9ng nhanh ch\u00f3ng trong c\u00e1c th\u1eddi \u0111i\u1ec3m cao \u0111i\u1ec3m, nh\u01b0 m\u00f9a mua s\u1eafm cu\u1ed1i n\u0103m ho\u1eb7c m\u1ed9t s\u1ef1 ki\u1ec7n g\u00e2y b\u00e3o tr\u00ean m\u1ea1ng x\u00e3 h\u1ed9i.</p> <p></p> <p>An ninh l\u00e0 m\u1ed9t y\u1ebfu t\u1ed1 quan tr\u1ecdng khi API truy c\u1eadp v\u00e0o c\u00e1c h\u1ec7 th\u1ed1ng v\u00e0 d\u1eef li\u1ec7u nh\u1ea1y c\u1ea3m. Security Testing d\u00f2 t\u00ecm c\u00e1c l\u1ed7 h\u1ed5ng c\u00f3 th\u1ec3 cho ph\u00e9p truy c\u1eadp tr\u00e1i ph\u00e9p ho\u1eb7c t\u1ea5n c\u00f4ng m\u1ea1ng. Ki\u1ec3m tra b\u1ea3o m\u1eadt gi\u00fap c\u1ee7ng c\u1ed1 API, gi\u1ed1ng nh\u01b0 m\u1ed9t k\u00e9t s\u1eaft b\u1ea3o v\u1ec7 t\u00e0i s\u1ea3n qu\u00fd gi\u00e1.</p> <p></p> <p>UI Testing \u0111\u1ea3m b\u1ea3o r\u1eb1ng API g\u00f3p ph\u1ea7n v\u00e0o tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\u00f9ng m\u01b0\u1ee3t m\u00e0. V\u00ed d\u1ee5, th\u1eddi gian ph\u1ea3n h\u1ed3i nhanh trong vi\u1ec7c hi\u1ec3n th\u1ecb b\u1ea3n \u0111\u1ed3 v\u00e0 \u0111i\u1ec1u h\u01b0\u1edbng trong c\u00e1c \u1ee9ng d\u1ee5ng chia s\u1ebb xe tr\u1ef1c ti\u1ebfp li\u00ean quan \u0111\u1ebfn tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\u00f9ng t\u00edch c\u1ef1c.</p> <p></p> <p>Cu\u1ed1i c\u00f9ng, Fuzz Testing \u0111\u1ea9y API \u0111\u1ebfn gi\u1edbi h\u1ea1n b\u1eb1ng c\u00e1ch g\u1eedi d\u1eef li\u1ec7u kh\u00f4ng \u0111\u00fang \u0111\u1ecbnh d\u1ea1ng, kh\u00f4ng nh\u01b0 mong \u0111\u1ee3i ho\u1eb7c ng\u1eabu nhi\u00ean \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh c\u00e1c t\u00ecnh hu\u1ed1ng tr\u00e9o ngoe. \u0110i\u1ec1u n\u00e0y gi\u00fap API chu\u1ea9n b\u1ecb t\u1ed1t h\u01a1n cho nh\u1eefng use case kh\u00f4ng l\u01b0\u1eddng tr\u01b0\u1edbc \u0111\u01b0\u1ee3c trong th\u1ef1c t\u1ebf.</p> <p></p> <p></p>"},{"location":"ByteByteGo/apple-google-pay/","title":"Apple Pay v\u00e0 Google Pay ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/apple-google-pay/#nguon","title":"Ngu\u1ed3n","text":"<p> How Does Apple/Google Pay Work?</p>"},{"location":"ByteByteGo/apple-google-pay/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Apple Pay v\u00e0 Google Pay x\u1eed l\u00fd th\u00f4ng tin th\u1ebb t\u00edn d\u1ee5ng nh\u1ea1y c\u1ea3m c\u1ee7a kh\u00e1ch nh\u01b0 th\u1ebf n\u00e0o? C\u00e1i n\u00e0o ngon h\u01a1n? C\u00f9ng t\u00ecm hi\u1ec3u nh\u00e9.</p>"},{"location":"ByteByteGo/apple-google-pay/#apple-pay","title":"Apple Pay","text":"<p>Apple Pay ra m\u1eaft v\u00e0o n\u0103m 2013. \u0110\u00f3 l\u00e0 m\u1ed9t \u00fd t\u01b0\u1edfng m\u1edbi l\u1ea1 v\u00e0o th\u1eddi \u0111i\u1ec3m \u0111\u00f3. N\u00f3 ho\u00e0n thi\u1ec7n kh\u00e1i ni\u1ec7m g\u1ecdi l\u00e0 tokenization, trong \u0111\u00f3 ch\u1ec9 c\u1ea7n m\u1ed9t token thanh to\u00e1n \u0111\u1ea1i di\u1ec7n cho th\u00f4ng tin th\u1ebb t\u00edn d\u1ee5ng nh\u1ea1y c\u1ea3m l\u00e0 \u0111\u1ee7 \u0111\u1ec3 ho\u00e0n t\u1ea5t m\u1ed9t giao d\u1ecbch. </p> <p></p> <p>Apple Pay y\u00eau c\u1ea7u s\u1ef1 h\u1ee3p t\u00e1c ch\u1eb7t ch\u1ebd t\u1eeb c\u00e1c m\u1ea1ng thanh to\u00e1n nh\u01b0 Visa v\u00e0 c\u00e1c ng\u00e2n h\u00e0ng ph\u00e1t h\u00e0nh l\u1edbn, nh\u01b0 JPMC, \u0111\u1ec3 x\u00e2y d\u1ef1ng m\u1ed9t h\u1ec7 th\u1ed1ng m\u1edbi \u0111\u1ec3 h\u1ed7 tr\u1ee3 vi\u1ec7c ch\u1ea5p nh\u1eadn thanh to\u00e1n d\u1ef1a tr\u00ean token.</p>"},{"location":"ByteByteGo/apple-google-pay/#google-pay","title":"Google Pay","text":"<p>Google Pay ra m\u1eaft v\u00e0o n\u0103m 2018. Tr\u01b0\u1edbc \u0111\u00f3 n\u00f3 c\u00f3 t\u00ean l\u00e0 Android Pay (2015), v\u00e0 tr\u01b0\u1edbc \u0111\u00f3 n\u1eefa l\u1ea1i \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 Google Wallet (2014). T\u00ean th\u01b0\u01a1ng hi\u1ec7u ki\u1ec3u n\u00e0y nghe kh\u00e1 kh\u00f3 hi\u1ec3u v\u00e0 c\u00f3 v\u1ebb nh\u01b0 b\u00e2y gi\u1edd Google Pay l\u1ea1i l\u00e0 Google Wallet \u1edf m\u1ed9t s\u1ed1 qu\u1ed1c gia. Ta s\u1ebd g\u1ecdi phi\u00ean b\u1ea3n hi\u1ec7n t\u1ea1i s\u1eed d\u1ee5ng token thanh to\u00e1n l\u00e0 Google Pay.</p>"},{"location":"ByteByteGo/apple-google-pay/#cach-thuc-hoat-ong","title":"C\u00e1ch th\u1ee9c ho\u1ea1t \u0111\u1ed9ng","text":"<p>Th\u1ef1c t\u1ebf c\u1ea3 hai \u0111\u1ec1u an to\u00e0n, nh\u01b0ng chi ti\u1ebft k\u1ef9 thu\u1eadt c\u00f3 ch\u00fat kh\u00e1c bi\u1ec7t.</p>"},{"location":"ByteByteGo/apple-google-pay/#tokenization","title":"Tokenization","text":"<p>C\u1ea3 hai n\u1ec1n t\u1ea3ng \u0111\u1ec1u s\u1eed d\u1ee5ng tokenization \u0111\u1ec3 b\u1ea3o v\u1ec7 th\u00f4ng tin th\u1ebb t\u00edn d\u1ee5ng nh\u1ea1y c\u1ea3m c\u1ee7a kh\u00e1ch h\u00e0ng. Ch\u00fa \u00fd r\u1eb1ng c\u1ea3 hai n\u1ec1n t\u1ea3ng \u0111\u1ec1u tuy\u00ean b\u1ed1 r\u1eb1ng h\u1ecd kh\u00f4ng l\u01b0u PAN (Primary Account Number - s\u1ed1 t\u00e0i kho\u1ea3n ch\u00ednh) tr\u00ean thi\u1ebft b\u1ecb. PAN sau \u0111\u00f3 \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn nh\u1eefng server t\u01b0\u01a1ng \u1ee9ng th\u00f4ng qua HTTPS.</p>"},{"location":"ByteByteGo/apple-google-pay/#apple-pay_1","title":"Apple Pay","text":"<p>T\u1ea1i Apple server, th\u00f4ng tin th\u1ebb t\u00edn d\u1ee5ng kh\u00f4ng \u0111\u01b0\u1ee3c l\u01b0u \u1edf \u0111\u00e2u c\u1ea3. N\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 \u0111\u1ecbnh danh m\u1ea1ng thanh to\u00e1n v\u00e0 ng\u00e2n h\u00e0ng ph\u00e1t h\u00e0nh th\u1ebb t\u00edn d\u1ee5ng. \u0110\u1ec3 d\u1ec5 h\u00ecnh dung, ta s\u1ebd g\u1ecdi m\u1ea1ng thanh to\u00e1n, nh\u01b0 Visa v\u00e0 ng\u00e2n h\u00e0ng ph\u00e1t h\u00e0nh th\u1ebb t\u00edn d\u1ee5ng, t\u1eeb b\u00e2y gi\u1edd l\u00e0 ng\u00e2n h\u00e0ng n\u00f3i chung.</p> <p>Th\u00f4ng tin th\u1ebb t\u00edn d\u1ee5ng sau \u0111\u00f3 \u0111\u01b0\u1ee3c g\u1eedi t\u1eeb Apple server \u0111\u1ebfn ng\u00e2n h\u00e0ng m\u1ed9t c\u00e1ch an to\u00e0n qua m\u1ea1ng. Ng\u00e2n h\u00e0ng x\u00e1c th\u1ef1c s\u1ed1 t\u00e0i kho\u1ea3n v\u00e0 tr\u1ea3 v\u1ec1 m\u1ed9t token g\u1ecdi l\u00e0 DAN (Device Account Number - s\u1ed1 t\u00e0i kho\u1ea3n thi\u1ebft b\u1ecb). S\u1ed1 n\u00e0y \u0111\u01b0\u1ee3c t\u1ea1o ra ch\u1ec9 cho thi\u1ebft b\u1ecb t\u01b0\u01a1ng \u1ee9ng s\u1eed d\u1ee5ng. Vi\u1ec7c t\u1ea1o ra token v\u00e0 \u00e1nh x\u1ea1 token v\u1edbi PAN th\u01b0\u1eddng \u0111\u01b0\u1ee3c giao cho m\u1ed9t TSP (Token Service Provider - nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 token). TSP l\u00e0 n\u01a1i ch\u1ee9a th\u00f4ng tin nh\u1ea1y c\u1ea3m nh\u1ea5t. Token sau \u0111\u00f3 \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 Apple server. Apple server chuy\u1ec3n ti\u1ebfp token \u0111\u1ebfn iPhone, n\u01a1i n\u00f3 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef an to\u00e0n trong m\u1ed9t chip \u0111\u1eb7c bi\u1ec7t g\u1ecdi l\u00e0 Secure Element. V\u1ec1 logic th\u00ec Apple server ch\u1ec9 l\u00e0 m\u1ed9t b\u1ed9 l\u1ecdc. N\u00f3 ki\u1ec3u nh\u01b0 l\u00e0 iPhone g\u1eedi th\u00f4ng tin th\u1ebb t\u00edn d\u1ee5ng tr\u1ef1c ti\u1ebfp \u0111\u1ebfn ng\u00e2n h\u00e0ng \u0111\u1ec3 \u0111\u1ed5i l\u1ea5y token.</p> <p></p>"},{"location":"ByteByteGo/apple-google-pay/#google-pay_1","title":"Google Pay","text":"<p>V\u1edbi Google Pay, qu\u00e1 tr\u00ecnh n\u00e0y h\u01a1i kh\u00e1c m\u1ed9t ch\u00fat. Gi\u1ed1ng nh\u01b0 Apple, PAN c\u0169ng \u0111\u01b0\u1ee3c g\u1eedi m\u1ed9t c\u00e1ch an to\u00e0n t\u1eeb thi\u1ebft b\u1ecb \u0111\u1ebfn server c\u1ee7a Google. Server c\u1ee7a Google s\u1eed d\u1ee5ng PAN \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh ng\u00e2n h\u00e0ng. PAN sau \u0111\u00f3 \u0111\u01b0\u1ee3c g\u1eedi m\u1ed9t c\u00e1ch an to\u00e0n \u0111\u1ebfn ng\u00e2n h\u00e0ng qua m\u1ea1ng. Ng\u00e2n h\u00e0ng x\u00e1c th\u1ef1c PAN v\u00e0 chuy\u1ec3n n\u00f3 \u0111\u1ebfn TSP \u0111\u1ec3 \u0111\u1ed5i l\u1ea5y token thanh to\u00e1n. Token \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 D-PAN (Device PAN - s\u1ed1 t\u00e0i kho\u1ea3n thi\u1ebft b\u1ecb). Token sau \u0111\u00f3 \u0111\u01b0\u1ee3c g\u1eedi tr\u1edf l\u1ea1i server c\u1ee7a Google, n\u01a1i n\u00f3 \u0111\u01b0\u1ee3c chuy\u1ec3n \u0111\u1ebfn thi\u1ebft b\u1ecb \u0111\u1ec3 l\u01b0u tr\u1eef an to\u00e0n.</p> <p></p> <p>B\u00e2y gi\u1edd, c\u00f3 hai \u0111i\u1ec3m c\u1ea7n \u0111\u1ec1 c\u1eadp \u1edf \u0111\u00e2y kh\u00e1c v\u1edbi Apple. </p> <ol> <li>Token c\u1ee7a Google Pay kh\u00f4ng \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong m\u1ed9t secure element nh\u01b0 c\u00e1c thi\u1ebft b\u1ecb Apple. N\u00f3 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong \u1ee9ng d\u1ee5ng v\u00ed. </li> <li>Apple kh\u1eb3ng \u0111\u1ecbnh h\u1ecd kh\u00f4ng bao gi\u1edd l\u01b0u tr\u1eef token thanh to\u00e1n tr\u00ean server c\u1ee7a h\u1ecd. Google kh\u00f4ng c\u00f3 tuy\u00ean b\u1ed1 nh\u01b0 v\u1eady, v\u00e0 th\u1ef1c t\u1ebf, trong \u0111i\u1ec1u kho\u1ea3n d\u1ecbch v\u1ee5 c\u1ee7a h\u1ecd, h\u1ecd kh\u1eb3ng \u0111\u1ecbnh th\u00f4ng tin thanh to\u00e1n \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef tr\u00ean server c\u1ee7a h\u1ecd.</li> </ol>"},{"location":"ByteByteGo/apple-google-pay/#thanh-toan","title":"Thanh to\u00e1n","text":"<p>R\u1ed3i m\u1ea5y c\u00e1i token n\u00e0y \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 thanh to\u00e1n ki\u1ec3u g\u00ec?</p>"},{"location":"ByteByteGo/apple-google-pay/#apple-pay_2","title":"Apple Pay","text":"<p>V\u1edbi iPhone, khi ta b\u1ea5m Thanh to\u00e1n, token \u0111\u01b0\u1ee3c l\u1ea5y t\u1eeb secure element v\u00e0 g\u1eedi \u0111\u1ebfn terminal Point-of-Sale (l\u00e0 c\u00e1i m\u00e1y m\u00e0 ch\u1ee7 qu\u00e1n \u0111\u01b0a ra \u0111\u1ec3 cho b\u1ea1n qu\u1eb9t \u0111i\u1ec7n tho\u1ea1i hay th\u1ebb v\u00e0o \u1ea5y) c\u1ee7a merchant qua NFC (near-field communication, hay c\u00f2n g\u1ecdi l\u00e0 giao ti\u1ebfp kh\u00f4ng ch\u1ea1m). N\u00f3 th\u1ef1c s\u1ef1 an to\u00e0n v\u00ec token \u0111\u01b0\u1ee3c g\u1eedi tr\u1ef1c ti\u1ebfp t\u1eeb secure element \u0111\u1ebfn b\u1ed9 \u0111i\u1ec1u khi\u1ec3n NFC tr\u00ean thi\u1ebft b\u1ecb, n\u01a1i n\u00f3 \u0111\u01b0\u1ee3c truy\u1ec1n \u0111\u1ebfn terminal Point-of-Sale.</p> <p>B\u00e2y gi\u1edd t\u1eeb terminal Point-of-Sale, token \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn ng\u00e2n h\u00e0ng c\u1ee7a merchant. Ng\u00e2n h\u00e0ng c\u1ee7a merchant x\u00e1c \u0111\u1ecbnh m\u1ea1ng thanh to\u00e1n t\u1eeb token, v\u00e0 \u0111\u1ecbnh tuy\u1ebfn an to\u00e0n n\u00f3 \u0111\u1ebfn m\u1ea1ng thanh to\u00e1n. M\u1ea1ng thanh to\u00e1n x\u00e1c th\u1ef1c token sau \u0111\u00f3 y\u00eau c\u1ea7u TSP \u0111\u1ed5i n\u00f3 tr\u1edf l\u1ea1i th\u00e0nh PAN g\u1ed1c. S\u1ed1 g\u1ed1c \u0111\u01b0\u1ee3c g\u1eedi an to\u00e0n t\u1eeb TSP \u0111\u1ebfn ng\u00e2n h\u00e0ng, \u1edf \u0111\u00e2y thanh to\u00e1n \u0111\u01b0\u1ee3c x\u00e1c nh\u1eadn.</p> <p></p>"},{"location":"ByteByteGo/apple-google-pay/#google-pay_2","title":"Google Pay","text":"<p>V\u1edbi Google Pay, qu\u00e1 tr\u00ecnh c\u0169ng t\u01b0\u01a1ng t\u1ef1 sau khi token thanh to\u00e1n \u0111\u1ebfn terminal Point-of-Sale. B\u00e2y gi\u1edd c\u00e1ch n\u00f3 \u0111\u01b0\u1ee3c g\u1eedi t\u1eeb thi\u1ebft b\u1ecb \u0111\u1ebfn terminal Point-of-Sale kh\u00e1c m\u1ed9t ch\u00fat. Thi\u1ebft b\u1ecb Android kh\u00f4ng l\u01b0u tr\u1eef token thanh to\u00e1n trong secure element. Thay v\u00e0o \u0111\u00f3, n\u00f3 s\u1eed d\u1ee5ng c\u00e1i g\u1ecdi l\u00e0 HCE (host card emulation). V\u1edbi HCE, token thanh to\u00e1n \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong \u1ee9ng d\u1ee5ng v\u00ed, v\u00e0 \u0111\u01b0\u1ee3c l\u1ea5y ra khi c\u1ea7n thi\u1ebft b\u1edfi \u1ee9ng d\u1ee5ng v\u00ed an to\u00e0n t\u1eeb \u0111\u00e1m m\u00e2y. B\u1ed9 \u0111i\u1ec1u khi\u1ec3n NFC v\u00e0 \u1ee9ng d\u1ee5ng v\u00ed l\u00e0m vi\u1ec7c c\u00f9ng nhau \u0111\u1ec3 truy\u1ec1n token thanh to\u00e1n qua NFC \u0111\u1ebfn terminal Point-of-Sale. \u0110\u1ebfn \u0111\u00e2y, ph\u1ea7n c\u00f2n l\u1ea1i c\u1ee7a giao d\u1ecbch gi\u1ed1ng nh\u01b0 Apple.</p> <p></p>"},{"location":"ByteByteGo/apple-google-pay/#ket-luan","title":"K\u1ebft lu\u1eadn","text":"<p>T\u00f3m l\u1ea1i, c\u1ea3 Apple Pay v\u00e0 Google Pay \u0111\u1ec1u s\u1eed d\u1ee5ng tokenization. </p> <p>Apple Pay ho\u00e0n thi\u1ec7n c\u00f4ng ngh\u1ec7 v\u00e0 l\u00e0m cho n\u00f3 d\u1ec5 s\u1eed d\u1ee5ng v\u00e0 an to\u00e0n. </p> <p>C\u00e1ch tri\u1ec3n khai c\u1ee7a Google c\u0169ng t\u01b0\u01a1ng t\u1ef1. S\u1ef1 kh\u00e1c bi\u1ec7t ch\u00ednh l\u00e0 c\u00e1ch token thanh to\u00e1n \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef, x\u1eed l\u00fd v\u00e0 truy\u1ec1n tr\u00ean thi\u1ebft b\u1ecb, v\u00e0 c\u00e1ch token thanh to\u00e1n c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef tr\u00ean server c\u1ee7a Google.</p>"},{"location":"ByteByteGo/architecture-patterns/","title":"5 m\u00f4 h\u00ecnh ki\u1ebfn tr\u00fac ph\u1ea7n m\u1ec1m \u0111\u01b0\u1ee3c \u01b0a chu\u1ed9ng nh\u1ea5t","text":""},{"location":"ByteByteGo/architecture-patterns/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 5 Most Used Architecture Patterns</p>"},{"location":"ByteByteGo/architecture-patterns/#kien-truc-phan-lop-layered-architecture","title":"Ki\u1ebfn tr\u00fac ph\u00e2n l\u1edbp (Layered Architecture)","text":"<p>M\u00f4 h\u00ecnh n\u00e0y chia c\u00e1c th\u00e0nh ph\u1ea7n c\u1ee7a h\u1ec7 th\u1ed1ng th\u00e0nh c\u00e1c l\u1edbp ri\u00eang bi\u1ec7t, th\u01b0\u1eddng l\u00e0 l\u1edbp giao di\u1ec7n (presentation layer), l\u1edbp logic nghi\u1ec7p v\u1ee5 (business logic layer), v\u00e0 l\u1edbp truy c\u1eadp d\u1eef li\u1ec7u (data access layer). </p> <p></p> <p>V\u00ed d\u1ee5, trong thi\u1ebft k\u1ebf giao di\u1ec7n ng\u01b0\u1eddi d\u00f9ng, ta th\u01b0\u1eddng th\u1ea5y m\u00f4 h\u00ecnh Model-View-Presenter (MVP), m\u1ed9t d\u1ea1ng ki\u1ebfn tr\u00fac ph\u00e2n l\u1edbp \u0111\u1eb7c bi\u1ec7t. \u1ede \u0111\u00e2y, Model \u0111\u1ea1i di\u1ec7n cho d\u1eef li\u1ec7u v\u00e0 logic nghi\u1ec7p v\u1ee5, View hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u, v\u00e0 Presenter \u0111\u00f3ng vai tr\u00f2 c\u1ea7u n\u1ed1i \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o s\u1ef1 t\u00e1ch bi\u1ec7t r\u00f5 r\u00e0ng gi\u1eefa c\u00e1c kh\u1ed1i ch\u1ee9c n\u0103ng.</p> <p></p> <p>M\u1ee5c ti\u00eau ch\u00ednh c\u1ee7a ki\u1ebfn tr\u00fac ph\u00e2n l\u1edbp l\u00e0 th\u00fac \u0111\u1ea9y s\u1ef1 t\u00e1ch bi\u1ec7t, \u0111\u1ec3 nh\u1eefng thay \u0111\u1ed5i \u1edf m\u1ed9t l\u1edbp kh\u00f4ng \u1ea3nh h\u01b0\u1edfng ti\u00eau c\u1ef1c \u0111\u1ebfn c\u00e1c l\u1edbp kh\u00e1c. C\u1ea5u tr\u00fac n\u00e0y cung c\u1ea5p s\u1ef1 tr\u1eebu t\u01b0\u1ee3ng h\u00f3a v\u00e0 \u0111\u00f3ng g\u00f3i, v\u1edbi m\u1ed7i l\u1edbp c\u00f3 m\u1ed9t nhi\u1ec7m v\u1ee5 r\u00f5 r\u00e0ng.</p>"},{"location":"ByteByteGo/architecture-patterns/#kien-truc-huong-su-kien-event-driven-architecture","title":"Ki\u1ebfn tr\u00fac h\u01b0\u1edbng s\u1ef1 ki\u1ec7n (Event-Driven Architecture)","text":"<p>M\u00f4 h\u00ecnh n\u00e0y khuy\u1ebfn kh\u00edch vi\u1ec7c s\u1ea3n xu\u1ea5t (produce) v\u00e0 ti\u00eau th\u1ee5 (consume) c\u00e1c s\u1ef1 ki\u1ec7n (event) gi\u1eefa c\u00e1c th\u00e0nh ph\u1ea7n v\u00e0 d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m t\u00e1ch r\u1eddi. C\u00e1c th\u00e0nh ph\u1ea7n h\u1ec7 th\u1ed1ng s\u1ebd ph\u00e1t ra s\u1ef1 ki\u1ec7n khi c\u00f3 \u0111i\u1ec1u g\u00ec \u0111\u00f3 x\u1ea3y ra, v\u00e0 c\u00e1c th\u00e0nh ph\u1ea7n kh\u00e1c s\u1ebd \u0111\u0103ng k\u00fd nh\u1eadn c\u00e1c s\u1ef1 ki\u1ec7n m\u00e0 ch\u00fang quan t\u00e2m. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p t\u1ea1o ra c\u00e1c ki\u1ebfn tr\u00fac c\u00f3 t\u00ednh r\u1eddi r\u1ea1c cao. </p> <p></p> <p>M\u1ed9t v\u00ed d\u1ee5 n\u1ed5i b\u1eadt l\u00e0 Command Query Responsibility Segregation (CQRS), trong \u0111\u00f3 c\u00e1c thao t\u00e1c ghi d\u1eef li\u1ec7u (l\u1ec7nh - commands) \u0111\u01b0\u1ee3c t\u00e1ch bi\u1ec7t kh\u1ecfi c\u00e1c thao t\u00e1c \u0111\u1ecdc (truy v\u1ea5n - queries), v\u00e0 s\u1ef1 thay \u0111\u1ed5i th\u01b0\u1eddng \u0111\u01b0\u1ee3c truy\u1ec1n qua c\u00e1c s\u1ef1 ki\u1ec7n. \u0110i\u1ec1u n\u00e0y l\u00e0m cho h\u1ec7 th\u1ed1ng tr\u1edf th\u00e0nh m\u1ed9t h\u1ec7 th\u1ed1ng h\u01b0\u1edbng s\u1ef1 ki\u1ec7n th\u1ef1c s\u1ef1.</p> <p></p> <p>M\u00f4 h\u00ecnh pub/sub (xu\u1ea5t b\u1ea3n/\u0111\u0103ng k\u00fd), n\u01a1i c\u00e1c th\u00e0nh ph\u1ea7n xu\u1ea5t b\u1ea3n v\u00e0 \u0111\u0103ng k\u00fd s\u1ef1 ki\u1ec7n, th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong c\u00e1c ki\u1ebfn tr\u00fac nh\u01b0 v\u1eady. \u1ede \u0111\u00e2y, c\u00e1c th\u00e0nh ph\u1ea7n kh\u00f4ng g\u1ecdi tr\u1ef1c ti\u1ebfp nhau; ch\u00fang ch\u1ec9 ph\u1ea3n \u1ee9ng v\u1edbi c\u00e1c s\u1ef1 ki\u1ec7n \u0111\u00e3 ra l\u00f2.</p>"},{"location":"ByteByteGo/architecture-patterns/#kien-truc-vi-nhan-microkernel-architecture","title":"Ki\u1ebfn tr\u00fac vi nh\u00e2n (Microkernel Architecture)","text":"<p>M\u00f4 h\u00ecnh n\u00e0y nh\u1ea5n m\u1ea1nh vi\u1ec7c t\u00e1ch bi\u1ec7t ch\u1ee9c n\u0103ng c\u1ed1t l\u00f5i c\u1ee7a h\u1ec7 th\u1ed1ng th\u00e0nh m\u1ed9t vi nh\u00e2n nh\u1ecf (microkernel) v\u00e0 c\u00e1c ch\u1ee9c n\u0103ng m\u1edf r\u1ed9ng th\u00e0nh c\u00e1c ti\u1ec7n \u00edch b\u1ed5 sung ho\u1eb7c plugin. </p> <p></p> <p>V\u00ed d\u1ee5, trong c\u00e1c h\u1ec7 \u0111i\u1ec1u h\u00e0nh, vi nh\u00e2n c\u00f3 th\u1ec3 x\u1eed l\u00fd c\u00e1c t\u00e1c v\u1ee5 quan tr\u1ecdng nh\u01b0 giao ti\u1ebfp gi\u1eefa c\u00e1c ti\u1ebfn tr\u00ecnh, trong khi c\u00e1c ch\u1ee9c n\u0103ng kh\u00e1c \u0111\u01b0\u1ee3c giao cho c\u00e1c th\u00e0nh ph\u1ea7n b\u00ean ngo\u00e0i. </p> <p></p> <p>M\u1ed9t v\u00ed d\u1ee5 kh\u00e1c l\u00e0 Eclipse IDE: l\u00f5i runtime c\u1ee7a n\u00f3 x\u1eed l\u00fd ki\u1ebfn tr\u00fac plugin, v\u00e0 c\u00e1c t\u00ednh n\u0103ng nh\u01b0 c\u00f4ng c\u1ee5 Java hay t\u00edch h\u1ee3p Git \u0111\u01b0\u1ee3c cung c\u1ea5p d\u01b0\u1edbi d\u1ea1ng plugin. Thi\u1ebft k\u1ebf n\u00e0y \u01b0u ti\u00ean kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng, d\u1ec5 b\u1ea3o tr\u00ec v\u00e0 c\u00f4 l\u1eadp l\u1ed7i. D\u00f9 l\u00e0 m\u1ed9t th\u00e0nh ph\u1ea7n h\u1ec7 \u0111i\u1ec1u h\u00e0nh hay m\u1ed9t plugin trong Eclipse g\u1eb7p s\u1ef1 c\u1ed1, h\u1ec7 th\u1ed1ng c\u1ed1t l\u00f5i v\u1eabn \u1ed5n \u0111\u1ecbnh v\u00e0 kh\u00f4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng.</p>"},{"location":"ByteByteGo/architecture-patterns/#kien-truc-vi-dich-vu-microservices-architecture","title":"Ki\u1ebfn tr\u00fac vi d\u1ecbch v\u1ee5 (Microservices Architecture)","text":"<p>M\u00f4 h\u00ecnh n\u00e0y ph\u00e2n chia m\u1ed9t \u1ee9ng d\u1ee5ng th\u00e0nh m\u1ed9t t\u1eadp c\u00e1c d\u1ecbch v\u1ee5 nh\u1ecf, k\u1ebft n\u1ed1i l\u1ecfng l\u1ebbo. M\u1ed7i d\u1ecbch v\u1ee5 th\u1ef1c hi\u1ec7n c\u00e1c kh\u1ea3 n\u0103ng nghi\u1ec7p v\u1ee5 c\u1ee5 th\u1ec3, ch\u1ee9a m\u00f4 h\u00ecnh d\u1eef li\u1ec7u ri\u00eang c\u1ee7a n\u00f3, v\u00e0 giao ti\u1ebfp qua API. </p> <p></p> <p>V\u00ed d\u1ee5, Netflix s\u1eed d\u1ee5ng ki\u1ebfn tr\u00fac vi d\u1ecbch v\u1ee5 \u0111\u1ec3 x\u1eed l\u00fd m\u1ecdi th\u1ee9 t\u1eeb \u0111\u1ec1 xu\u1ea5t phim \u0111\u1ebfn thanh to\u00e1n. Ki\u1ebfn tr\u00fac n\u00e0y th\u00fac \u0111\u1ea9y vi\u1ec7c chia nh\u1ecf ch\u1ee9c n\u0103ng, \u0111\u1ec3 c\u00e1c d\u1ecbch v\u1ee5 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n, tri\u1ec3n khai v\u00e0 m\u1edf r\u1ed9ng \u0111\u1ed9c l\u1eadp. \u0110i\u1ec1u n\u00e0y t\u0103ng c\u01b0\u1eddng s\u1ef1 linh ho\u1ea1t v\u00e0 cho ph\u00e9p c\u00e1c c\u00f4ng ty nh\u01b0 Netflix nhanh ch\u00f3ng \u0111\u1ed5i m\u1edbi. Tuy nhi\u00ean, s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i l\u00e0 \u0111\u1ed9 ph\u1ee9c t\u1ea1p trong vi\u1ec7c qu\u1ea3n l\u00fd giao ti\u1ebfp gi\u1eefa c\u00e1c d\u1ecbch v\u1ee5 v\u00e0 duy tr\u00ec t\u00ednh nh\u1ea5t qu\u00e1n c\u1ee7a d\u1eef li\u1ec7u.</p> <p></p>"},{"location":"ByteByteGo/architecture-patterns/#kien-truc-nguyen-khoi-monolithic-architecture","title":"Ki\u1ebfn tr\u00fac nguy\u00ean kh\u1ed1i (Monolithic Architecture)","text":"<p>C\u1ed1t l\u00f5i c\u1ee7a thi\u1ebft k\u1ebf nguy\u00ean kh\u1ed1i l\u00e0 t\u1ea5t c\u1ea3 c\u00e1c th\u00e0nh ph\u1ea7n c\u1ee7a \u1ee9ng d\u1ee5ng \u2013 t\u1eeb truy c\u1eadp d\u1eef li\u1ec7u, logic nghi\u1ec7p v\u1ee5 \u0111\u1ebfn giao di\u1ec7n ng\u01b0\u1eddi d\u00f9ng \u2013 \u0111\u01b0\u1ee3c g\u00f3i g\u1ecdn trong m\u1ed9t m\u00e3 ngu\u1ed3n v\u00e0 ch\u1ea1y nh\u01b0 m\u1ed9t \u0111\u01a1n v\u1ecb duy nh\u1ea5t. Ph\u01b0\u01a1ng ph\u00e1p n\u00e0y \u0111\u01a1n gi\u1ea3n h\u00f3a vi\u1ec7c ph\u00e1t tri\u1ec3n v\u00e0 tri\u1ec3n khai, l\u00e0m cho n\u00f3 tr\u1edf th\u00e0nh l\u1ef1a ch\u1ecdn h\u00e0ng \u0111\u1ea7u cho nhi\u1ec1u c\u00f4ng ty kh\u1edfi nghi\u1ec7p v\u00e0 c\u00e1c \u1ee9ng d\u1ee5ng nh\u1ecf. </p> <p></p> <p>Tuy nhi\u00ean, c\u1ea7n l\u01b0u \u00fd s\u1ef1 tr\u1ed7i d\u1eady c\u1ee7a modular monolith (nguy\u00ean kh\u1ed1i ph\u00e2n m\u00f4-\u0111un). Ph\u01b0\u01a1ng ph\u00e1p n\u00e0y gi\u1eef nguy\u00ean l\u1ee3i \u00edch c\u1ee7a m\u1ed9t \u0111\u01a1n v\u1ecb tri\u1ec3n khai duy nh\u1ea5t nh\u01b0ng nh\u1ea5n m\u1ea1nh c\u00e1c ranh gi\u1edbi m\u00f4-\u0111un r\u00f5 r\u00e0ng trong m\u00e3 ngu\u1ed3n. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p b\u1ea3o tr\u00ec v\u00e0 m\u1edf r\u1ed9ng d\u1ec5 d\u00e0ng h\u01a1n. \u0110\u00e2y l\u00e0 m\u1ed9t ph\u01b0\u01a1ng \u00e1n t\u1ed1t, mang l\u1ea1i s\u1ef1 \u0111\u01a1n gi\u1ea3n c\u1ee7a ki\u1ebfn tr\u00fac nguy\u00ean kh\u1ed1i trong khi m\u1edf \u0111\u01b0\u1eddng cho kh\u1ea3 n\u0103ng chuy\u1ec3n \u0111\u1ed5i sang c\u00e1c ki\u1ebfn tr\u00fac ph\u00e2n t\u00e1n nh\u01b0 vi d\u1ecbch v\u1ee5 trong t\u01b0\u01a1ng lai.</p> <p></p>"},{"location":"ByteByteGo/back-of-the-envelope-estimation/","title":"D\u1ef1 to\u00e1n c\u00f4ng su\u1ea5t cho \u1ee9ng d\u1ee5ng - Back-of-the-envelope Estimation / Capacity planning","text":""},{"location":"ByteByteGo/back-of-the-envelope-estimation/#nguon","title":"Ngu\u1ed3n","text":"<p> Back-Of-The-Envelope Estimation / Capacity Planning</p>"},{"location":"ByteByteGo/back-of-the-envelope-estimation/#du-toan-cong-suat-la-gi","title":"D\u1ef1 to\u00e1n c\u00f4ng su\u1ea5t l\u00e0 g\u00ec?","text":"<p>D\u1ef1 to\u00e1n c\u00f4ng su\u1ea5t (Back-of-the-envelope estimation) l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 r\u1ea5t h\u1eefu \u00edch trong thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng. Trong b\u00e0i vi\u1ebft n\u00e0y, ta s\u1ebd \u0111i v\u00e0o t\u00ecm hi\u1ec3u l\u00e0m th\u1ebf n\u00e0o v\u00e0 khi n\u00e0o n\u00ean d\u1ef1 to\u00e1n c\u00f4ng su\u1ea5t, c\u0169ng nh\u01b0 t\u00ecm hi\u1ec3u m\u1ed9t s\u1ed1 m\u1eb9o \u0111\u1ec3 s\u1eed d\u1ee5ng c\u00f4ng c\u1ee5 n\u00e0y m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p>C\u00e1c dev v\u1edbi nhi\u1ec1u n\u0103m kinh nghi\u1ec7m s\u1eed d\u1ee5ng d\u1ef1 to\u00e1n c\u00f4ng su\u1ea5t \u0111\u1ec3 ki\u1ec3m tra nhanh m\u1ed9t thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng. Trong c\u00e1c tr\u01b0\u1eddng h\u1ee3p nh\u01b0 v\u1eady, ta kh\u00f4ng c\u1ea7n c\u00e1c con s\u1ed1 ph\u1ea3i ch\u00ednh x\u00e1c tuy\u1ec7t \u0111\u1ed1i. Th\u01b0\u1eddng ta s\u1ebd ch\u1ec9 c\u1ea7n ch\u00ednh x\u00e1c \u0111\u1ebfn ch\u1ee5c ho\u1eb7c tr\u0103m l\u1ea7n so v\u1edbi con s\u1ed1 th\u1ef1c t\u1ebf th\u00f4i.</p> <p>V\u00ed d\u1ee5, n\u1ebfu t\u00ednh to\u00e1n cho th\u1ea5y quy m\u00f4 c\u1ee7a web service c\u1ea7n x\u1eed l\u00fd 1 tri\u1ec7u request m\u1ed7i gi\u00e2y, v\u00e0 m\u1ed7i web server ch\u1ec9 c\u00f3 th\u1ec3 x\u1eed l\u00fd kho\u1ea3ng 10 ngh\u00ecn request m\u1ed7i gi\u00e2y, ta s\u1ebd nhanh ch\u00f3ng nh\u1eadn ra hai \u0111i\u1ec1u: M\u1ed9t, ta c\u1ea7n ph\u1ea3i t\u1ea1o m\u1ed9t c\u1ee5m (cluster) c\u00e1c web server, v\u1edbi m\u1ed9t load balancer \u1edf tr\u01b0\u1edbc c\u1ee5m \u0111\u00f3. Hai, ta c\u1ea7n kho\u1ea3ng 100 web server.</p> <p></p> <p>M\u1ed9t v\u00ed d\u1ee5 kh\u00e1c l\u00e0 khi t\u00ednh to\u00e1n cho th\u1ea5y r\u1eb1ng database c\u1ea7n x\u1eed l\u00fd kho\u1ea3ng 10 truy v\u1ea5n tr\u00ean gi\u00e2y khi cao \u0111i\u1ec3m, ngh\u0129a l\u00e0 m\u1ed9t database server duy nh\u1ea5t s\u1ebd c\u00f3 th\u1ec3 x\u1eed l\u00fd \u0111\u01b0\u1ee3c t\u1ea3i \u0111\u00f3 trong m\u1ed9t th\u1eddi gian d\u00e0i, v\u00e0 ta kh\u00f4ng c\u1ea7n ph\u1ea3i t\u00ednh \u0111\u1ebfn vi\u1ec7c sharding ho\u1eb7c caching trong m\u1ed9t kho\u1ea3ng th\u1eddi gian.</p>"},{"location":"ByteByteGo/back-of-the-envelope-estimation/#cac-gia-tri-can-du-toan","title":"C\u00e1c gi\u00e1 tr\u1ecb c\u1ea7n d\u1ef1 to\u00e1n","text":"<p>Gi\u1edd ta s\u1ebd \u0111i v\u00e0o m\u1ed9t s\u1ed1 gi\u00e1 tr\u1ecb ph\u1ed5 bi\u1ebfn m\u00e0 ta c\u1ea7n d\u1ef1 to\u00e1n. Gi\u00e1 tr\u1ecb quan tr\u1ecdng nh\u1ea5t l\u00e0 s\u1ed1 request m\u1ed7i gi\u00e2y (Requests per second - RPS) \u1edf m\u1ee9c service ho\u1eb7c s\u1ed1 truy v\u1ea5n m\u1ed7i gi\u00e2y (Queries per second - QPS) \u1edf m\u1ee9c database. M\u1ed9t s\u1ed1 gi\u00e1 tr\u1ecb con c\u1ee7a l\u1edbp gi\u00e1 tr\u1ecb RPS n\u00e0y bao g\u1ed3m nh\u01b0 sau. </p> <p>Th\u1ee9 nh\u1ea5t l\u00e0 DAU (hay s\u1ed1 ng\u01b0\u1eddi d\u00f9ng h\u00e0ng ng\u00e0y - Daily Active Users), gi\u00e1 tr\u1ecb n\u00e0y kh\u00e1 d\u1ec5 l\u1ea5y. \u0110\u00f4i khi th\u00ec ta ch\u1ec9 c\u00f3 th\u1ec3 bi\u1ebft MAU (hay s\u1ed1 ng\u01b0\u1eddi d\u00f9ng h\u00e0ng th\u00e1ng - Monthly Active Users). Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, ta s\u1ebd t\u00ednh DAU d\u1ef1a tr\u00ean m\u1ed9t s\u1ed1 ph\u1ea7n tr\u0103m c\u1ee7a MAU.</p> <p>Gi\u00e1 tr\u1ecb th\u1ee9 hai l\u00e0 \u01b0\u1edbc l\u01b0\u1ee3ng v\u1ec1 vi\u1ec7c s\u1eed d\u1ee5ng tr\u00ean DAU c\u1ee7a service m\u00e0 ta \u0111ang thi\u1ebft k\u1ebf. V\u00ed d\u1ee5, kh\u00f4ng ph\u1ea3i ai ho\u1ea1t \u0111\u1ed9ng tr\u00ean Twitter c\u0169ng post b\u00e0i, ch\u1ec9 c\u00f3 m\u1ed9t s\u1ed1 ph\u1ea7n tr\u0103m l\u00e0m v\u1eady th\u00f4i. 10%-25% c\u00f3 v\u1ebb h\u1ee3p l\u00fd. M\u1ed9t l\u1ea7n n\u1eefa, ta kh\u00f4ng c\u1ea7n ph\u1ea3i ch\u00ednh x\u00e1c tuy\u1ec7t \u0111\u1ed1i. Ch\u1ec9 c\u1ea7n ch\u00ednh x\u00e1c \u0111\u1ebfn ch\u1ee5c l\u1ea7n l\u00e0 \u0111\u1ee7.</p> <p>Gi\u00e1 tr\u1ecb th\u1ee9 ba l\u00e0 m\u1ed9t h\u1ec7 s\u1ed1 scaling. T\u1ea7n su\u1ea5t s\u1eed d\u1ee5ng c\u1ee7a m\u1ed9t service th\u01b0\u1eddng c\u00f3 nh\u1eefng l\u00fac cao \u0111i\u1ec3m v\u00e0 th\u1ea5p \u0111i\u1ec3m trong ng\u00e0y. Ta c\u1ea7n ph\u1ea3i \u01b0\u1edbc l\u01b0\u1ee3ng xem t\u1ea7n su\u1ea5t s\u1eed d\u1ee5ng cao \u0111i\u1ec3m s\u1ebd cao h\u01a1n bao nhi\u00eau so v\u1edbi t\u1ea7n su\u1ea5t s\u1eed d\u1ee5ng trung b\u00ecnh. \u0110i\u1ec1u n\u00e0y s\u1ebd ph\u1ea3n \u00e1nh kho\u1ea3ng RPS cao nh\u1ea5t khi\u1ebfn service c\u1ee7a ta c\u00f3 th\u1ec3 t\u00ea li\u1ec7t l\u00e0 bao nhi\u00eau. V\u00ed d\u1ee5, v\u1edbi m\u1ed9t service nh\u01b0 Google Maps, t\u1ea7n su\u1ea5t s\u1eed d\u1ee5ng trong gi\u1edd cao \u0111i\u1ec3m c\u00f3 th\u1ec3 cao h\u01a1n trung b\u00ecnh 5 l\u1ea7n. M\u1ed9t v\u00ed d\u1ee5 kh\u00e1c l\u00e0 d\u1ecbch v\u1ee5 chia s\u1ebb xe nh\u01b0 Uber, t\u1ea7n su\u1ea5t s\u1eed d\u1ee5ng v\u00e0o t\u1ed1i cu\u1ed1i tu\u1ea7n c\u00f3 th\u1ec3 cao h\u01a1n trung b\u00ecnh 2 l\u1ea7n.</p>"},{"location":"ByteByteGo/back-of-the-envelope-estimation/#vi-du","title":"V\u00ed d\u1ee5","text":"<p>Ta s\u1ebd \u01b0\u1edbc l\u01b0\u1ee3ng s\u1ed1 Tweet m\u1ed7i gi\u00e2y \u0111\u01b0\u1ee3c t\u1ea1o ra tr\u00ean Twitter. L\u01b0u \u00fd r\u1eb1ng c\u00e1c con s\u1ed1 n\u00e0y ch\u1ec9 l\u00e0 t\u00ednh to\u00e1n th\u00f4i, ch\u1ee9 kh\u00f4ng ph\u1ea3i ch\u00ednh th\u1ee9c t\u1eeb Twitter \u0111\u00e2u. Gi\u1ea3 s\u1eed Twitter c\u00f3 300 tri\u1ec7u MAU, v\u00e0 50% MAU d\u00f9ng Twitter h\u00e0ng ng\u00e0y. Ngh\u0129a l\u00e0 s\u1ebd c\u00f3 150 tri\u1ec7u DAU. Ti\u1ebfp theo, ta \u01b0\u1edbc t\u00ednh r\u1eb1ng kho\u1ea3ng 25% DAU \u0111\u00f3 s\u1ebd vi\u1ebft Tweet. M\u1ed7i ng\u01b0\u1eddi s\u1ebd vi\u1ebft trung b\u00ecnh kho\u1ea3ng 2 tweet ch\u1eb3ng h\u1ea1n. Ngh\u0129a l\u00e0 \\(25\\% * 2 = 0.5\\) tweet m\u1ed7i DAU. V\u1edbi h\u1ec7 s\u1ed1 scaling, ta \u01b0\u1edbc t\u00ednh r\u1eb1ng ph\u1ea7n l\u1edbn ng\u01b0\u1eddi d\u00f9ng tweet v\u00e0o bu\u1ed5i s\u00e1ng khi ng\u1ee7 d\u1eady v\u00e0 kh\u00f4ng th\u1ec3 \u0111\u1ee3i \u0111\u1ec3 chia s\u1ebb v\u1ec1 gi\u1ea5c m\u01a1 t\u1ed1i h\u00f4m tr\u01b0\u1edbc. N\u00f3 s\u1ebd l\u00e0m t\u0103ng m\u1ea1nh traffic t\u1ea1o tweet l\u00ean g\u1ea5p \u0111\u00f4i so v\u1edbi trung b\u00ecnh khi b\u1edd \u0111\u00f4ng n\u01b0\u1edbc M\u1ef9 th\u1ee9c gi\u1ea5c.</p> <p>Gi\u1edd ta \u0111\u00e3 c\u00f3 \u0111\u1ee7 d\u1eef li\u1ec7u \u0111\u1ec3 t\u00ednh to\u00e1n s\u1ed1 tweet t\u1ea1o ra m\u1ed7i gi\u00e2y. Ta c\u00f3: 150 tri\u1ec7u DAU nh\u00e2n 0.5 tweet m\u1ed7i DAU, nh\u00e2n 2 l\u1ea7n h\u1ec7 s\u1ed1 scaling chia cho 86400 gi\u00e2y trong m\u1ed9t ng\u00e0y. \u0110\u00f3 s\u1ebd l\u00e0 kho\u1ea3ng 1500 tweet m\u1ed7i gi\u00e2y.</p> <p>Gi\u1edd ta s\u1ebd \u0111i qua c\u00e1c k\u1ef9 thu\u1eadt \u0111\u1ec3 \u0111\u01a1n gi\u1ea3n h\u00f3a t\u00ednh to\u00e1n. \u0110\u1ea7u ti\u00ean, ta chuy\u1ec3n t\u1ea5t c\u1ea3 c\u00e1c con s\u1ed1 l\u1edbn th\u00e0nh d\u1ea1ng k\u00ed hi\u1ec7u khoa h\u1ecdc. T\u00ednh to\u00e1n tr\u00ean c\u00e1c con s\u1ed1 l\u1edbn th\u01b0\u1eddng d\u1ec5 g\u00e2y l\u1ed7i. B\u1eb1ng c\u00e1ch chuy\u1ec3n c\u00e1c con s\u1ed1 l\u1edbn th\u00e0nh k\u00ed hi\u1ec7u khoa h\u1ecdc, m\u1ed9t ph\u1ea7n c\u1ee7a ph\u00e9p nh\u00e2n s\u1ebd tr\u1edf th\u00e0nh ph\u00e9p c\u1ed9ng \u0111\u01a1n gi\u1ea3n, v\u00e0 ph\u00e9p chia s\u1ebd tr\u1edf th\u00e0nh ph\u00e9p tr\u1eeb. Trong v\u00ed d\u1ee5 tr\u00ean, 150 tri\u1ec7u DAU s\u1ebd tr\u1edf th\u00e0nh \\(150 \\cdot 10^6\\) hay \\(1.5 \\cdot 10^8\\). C\u00f3 \\(86400\\) gi\u00e2y trong m\u1ed9t ng\u00e0y, ta s\u1ebd l\u00e0m tr\u00f2n l\u00ean th\u00e0nh \\(100000\\) gi\u00e2y, v\u00e0 n\u00f3 s\u1ebd tr\u1edf th\u00e0nh \\(10^5\\) gi\u00e2y. V\u00e0 v\u00ec \u0111\u00e2y l\u00e0 ph\u00e9p chia, \\(10^5\\) s\u1ebd tr\u1edf th\u00e0nh \\(10^{-5}\\). Ti\u1ebfp theo, ta nh\u00f3m t\u1ea5t c\u1ea3 c\u00e1c l\u0169y th\u1eeba c\u1ee7a 10 l\u1ea1i v\u1edbi nhau, v\u00e0 t\u1ea5t c\u1ea3 c\u00e1c con s\u1ed1 kh\u00e1c l\u1ea1i v\u1edbi nhau. V\u00ed d\u1ee5, ph\u00e9p to\u00e1n tr\u00ean tr\u1edf th\u00e0nh: \\(1.5 \\cdot 0.5 \\cdot 2\\) v\u00e0 \\(10^8 \\cdot 10^{-5} = 10^{8-5} = 10^3\\). \u0110\u1eb7t t\u1ea5t c\u1ea3 l\u1ea1i v\u1edbi nhau, ta s\u1ebd c\u00f3 \\(1.5 \\cdot 10^3\\) hay 1500.</p> <p></p> <p>Ta c\u00f3 th\u1ec3 d\u1ec5 d\u00e0ng chuy\u1ec3n \u0111\u1ed5i qua l\u1ea1i c\u00e1c d\u1ea1ng s\u1ed1 l\u1edbn v\u00e0 k\u00ed hi\u1ec7u khoa h\u1ecdc nhanh ch\u00f3ng. M\u1ed9t s\u1ed1 c\u00e1ch chuy\u1ec3n nhanh ta c\u1ea7n nh\u1edb l\u00e0: \\(10^{12}\\) l\u00e0 m\u1ed9t tri\u1ec7u t\u1ef7, hay 1TB. v\u00e0 khi ta th\u1ea5y m\u1ed9t s\u1ed1 nh\u01b0 50TB, ta s\u1ebd chuy\u1ec3n n\u00f3 th\u00e0nh \\(5 \\cdot 10^1 \\cdot 10^{12}\\), hay \\(5 \\cdot 10^{13}\\). Ta s\u1ebd b\u1ecf qua vi\u1ec7c r\u1eb1ng 1KB th\u1ef1c s\u1ef1 l\u00e0 \\(2^{10}\\) bytes, hay 1024 bytes, ch\u1ee9 kh\u00f4ng ph\u1ea3i 1000 bytes. Ta kh\u00f4ng th\u1ef1c s\u1ef1 c\u1ea7n \u0111\u1ebfn m\u1ee9c \u0111\u1ed9 ch\u00ednh x\u00e1c \u0111\u00f3.</p> <p></p> <p>T\u1ed5ng k\u1ebft v\u1edbi m\u1ed9t v\u00ed d\u1ee5 cu\u1ed1i. Ta s\u1ebd t\u00ednh xem c\u1ea7n bao nhi\u00eau dung l\u01b0\u1ee3ng \u0111\u1ec3 l\u01b0u file \u0111a ph\u01b0\u01a1ng ti\u1ec7n (h\u00ecnh \u1ea3nh, video, ...) cho c\u00e1c tweet. Ta bi\u1ebft t\u1eeb v\u00ed d\u1ee5 tr\u01b0\u1edbc r\u1eb1ng s\u1ebd c\u00f3 kho\u1ea3ng 150 tri\u1ec7u tweet m\u1ed9t ng\u00e0y. Gi\u1edd ta c\u1ea7n \u01b0\u1edbc t\u00ednh kho\u1ea3ng bao nhi\u00eau ph\u1ea7n tr\u0103m s\u1ed1 tweet \u0111\u00f3 s\u1ebd ch\u1ee9a h\u00ecnh \u1ea3nh ho\u1eb7c video, v\u00e0 m\u1ea5y c\u00e1i file \u0111\u00f3 s\u1ebd l\u1edbn t\u1ea7m bao nhi\u00eau. V\u1edbi s\u1ef1 nghi\u00ean c\u1ee9u k\u1ef9 l\u01b0\u1ee1ng, ta \u01b0\u1edbc t\u00ednh r\u1eb1ng 10% tweet ch\u1ee9a h\u00ecnh \u1ea3nh, v\u00e0 m\u1ed7i h\u00ecnh \u1ea3nh n\u1eb7ng kho\u1ea3ng 100KB, v\u00e0 1% tweet ch\u1ee9a video, v\u00e0 m\u1ed7i video n\u1eb7ng kho\u1ea3ng 100MB. Ta c\u0169ng gi\u1ea3 s\u1eed r\u1eb1ng m\u1ed7i file s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u l\u00e0m 3 b\u1ea3n, v\u00e0 Twitter s\u1ebd l\u01b0u tr\u1eef c\u00e1c file \u0111\u00f3 trong 5 n\u0103m.</p> <p>Gi\u1edd ta s\u1ebd t\u00ednh to\u00e1n. \u0110\u1ed1i v\u1edbi vi\u1ec7c l\u01b0u tr\u1eef h\u00ecnh \u1ea3nh, ta c\u00f3: 150 tri\u1ec7u tweet x 0.1 s\u1ed1 tweet ch\u1ee9a h\u00ecnh \u1ea3nh x 100KB m\u1ed7i h\u00ecnh \u1ea3nh x 400 ng\u00e0y trong m\u1ed9t n\u0103m x 5 n\u0103m x 3 b\u1ea3n sao, n\u00f3 s\u1ebd b\u1eb1ng \\(1.5 \\cdot 10^8 \\cdot 10^{-1} \\cdot 10^5 \\cdot 4 \\cdot 10^2 \\cdot 5 \\cdot 3\\). Ta nh\u00f3m c\u00e1c l\u0169y th\u1eeba c\u1ee7a 10 l\u1ea1i v\u1edbi nhau, v\u00e0 t\u1ea5t c\u1ea3 c\u00e1c con s\u1ed1 kh\u00e1c l\u1ea1i v\u1edbi nhau, cho ra \\(1.5 \\cdot 4 \\cdot 5 \\cdot 3\\), b\u1eb1ng \\(90\\) v\u00e0 \\(10^{8-1+5+2}\\), hay \\(10^{14}\\). k\u1ebft qu\u1ea3 l\u00e0 \\(9 \\cdot 10^{15}\\), hay 9PB. \u0110\u1ed1i v\u1edbi vi\u1ec7c l\u01b0u tr\u1eef video, ta t\u00ednh nhanh ch\u00fat. Do video trung b\u00ecnh n\u1eb7ng 1000 l\u1ea7n h\u00ecnh \u1ea3nh, v\u00e0 ch\u1ec9 c\u00f3 1/10 s\u1ed1 tweet ch\u1ee9a video so v\u1edbi h\u00ecnh \u1ea3nh, n\u00ean dung l\u01b0\u1ee3ng l\u01b0u tr\u1eef video s\u1ebd l\u00e0 \\(100 \\cdot 9\\) PB, hay 900PB.</p>"},{"location":"ByteByteGo/back-of-the-envelope-estimation/#ket-luan","title":"K\u1ebft lu\u1eadn","text":"<p>D\u1ef1 to\u00e1n c\u00f4ng su\u1ea5t l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 r\u1ea5t h\u1eefu \u00edch trong h\u1ec7 th\u1ed1ng. \u0110\u1eebng qu\u00e1 ch\u00fa tr\u1ecdng v\u00e0o s\u1ef1 ch\u00ednh x\u00e1c. Ch\u1ec9 c\u1ea7n ch\u00ednh x\u00e1c \u0111\u1ebfn m\u1ee9c \u0111\u1ed9 ch\u1ee5c l\u1ea7n l\u00e0 \u0111\u1ee7 \u0111\u1ec3 c\u00f3 \u0111\u01b0\u1ee3c \u0111\u1ea7y \u0111\u1ee7 th\u00f4ng tin v\u00e0 x\u00e1c nh\u1eadn thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng.</p>"},{"location":"ByteByteGo/backend-burger/","title":"Backend Burger cho startup c\u00f3 th\u1ec3 c\u00f3 nh\u1eefng g\u00ec?","text":""},{"location":"ByteByteGo/backend-burger/#nguon","title":"Ngu\u1ed3n","text":"<p> The Most Beloved Burger for Developers</p>"},{"location":"ByteByteGo/backend-burger/#tai-sao-lai-la-burger","title":"T\u1ea1i sao l\u1ea1i l\u00e0 Burger?","text":"<p>B\u00e1nh m\u00ec hamburger l\u00e0 m\u1ed9t m\u00f3n \u0103n ph\u1ed5 bi\u1ebfn, n\u00f3 bao g\u1ed3m nhi\u1ec1u th\u00e0nh ph\u1ea7n nh\u01b0 th\u1ecbt, c\u00e1c lo\u1ea1i rau, s\u1ed1t, v\u00e0 b\u00e1nh m\u00ec k\u1eb9p ngo\u00e0i, m\u1ecdi th\u1ee9 \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p l\u1ea1i v\u1edbi nhau \u0111\u1ec3 t\u1ea1o ra m\u1ed9t m\u00f3n \u0103n ngon.</p> <p>Ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m c\u0169ng gi\u1ed1ng nh\u01b0 v\u1eady, n\u00f3 bao g\u1ed3m nhi\u1ec1u th\u00e0nh ph\u1ea7n nh\u01b0 frontend, backend, database, v\u00e0 nhi\u1ec1u h\u01a1n n\u1eefa, m\u1ecdi th\u1ee9 \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p l\u1ea1i v\u1edbi nhau \u0111\u1ec3 t\u1ea1o ra m\u1ed9t \u1ee9ng d\u1ee5ng ho\u00e0n ch\u1ec9nh. C\u1ea3 frontend v\u00e0 backend \u0111\u1ec1u s\u1ebd c\u00f3 nh\u1eefng chi\u1ebfc burger cho ri\u00eang m\u00ecnh, g\u00f3p ph\u1ea7n t\u1ea1o n\u00ean th\u00e0nh c\u00f4ng cho m\u1ed9t \u1ee9ng d\u1ee5ng.</p> <p>B\u00e0i vi\u1ebft n\u00e0y s\u1ebd t\u1eadp trung v\u00e0o m\u1ed9t chi\u1ebfc burger cho backend. T\u00f9y v\u00e0o giai \u0111o\u1ea1n ph\u00e1t tri\u1ec3n c\u1ee7a m\u1ed9t c\u00f4ng ty, ta l\u1ea1i c\u00f3 nh\u1eefng chi\u1ebfc burger kh\u00e1c nhau. Ta s\u1ebd ch\u1ec9 t\u1eadp trung v\u00e0o m\u1ed9t c\u00f4ng ty \u1edf giai \u0111o\u1ea1n \u0111\u1ea7u, khi ngu\u1ed3n l\u1ef1c c\u00f2n h\u1ea1n ch\u1ebf v\u00e0 ch\u01b0a ch\u1eafc ch\u1eafn v\u1ec1 product/market fit. Th\u00eam n\u1eefa, ti\u00eau ch\u00ed ch\u00ednh l\u00e0 s\u1ef1 linh ho\u1ea1t.</p>"},{"location":"ByteByteGo/backend-burger/#cac-thanh-phan-cua-backend-burger","title":"C\u00e1c th\u00e0nh ph\u1ea7n c\u1ee7a Backend Burger","text":"<p>B\u1eaft \u0111\u1ea7u t\u1eeb tr\u00ean xu\u1ed1ng. \u0110\u1ed1i v\u1edbi containerization, ch\u00fang ta kh\u00f4ng ch\u1ecdn g\u00ec c\u1ea3. \u0110\u1ec3 c\u00f3 \u0111\u01b0\u1ee3c s\u1ef1 linh ho\u1ea1t t\u1ed1i \u0111a, ch\u00fang ta s\u1ebd ch\u1ecdn serverless functions. Serverless functions c\u00f3 m\u1ed9t m\u00f4 h\u00ecnh l\u1eadp tr\u00ecnh request/response r\u1ea5t nghi\u00eam ng\u1eb7t, nh\u01b0ng trong \u0111\u00f3, h\u1ea7u h\u1ebft serverless functions \u0111\u1ec1u \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i d\u01b0\u1edbi d\u1ea1ng container.</p> <p>V\u1ec1 ki\u1ebfn tr\u00fac, Serverless l\u00e0 ngon nh\u1ea5t v\u1edbi ch\u00fang ta. V\u1edbi serverless computing, ta ch\u1ec9 tr\u1ea3 ti\u1ec1n cho t\u00e0i nguy\u00ean ta s\u1eed d\u1ee5ng, v\u00e0 kh\u00f4ng c\u1ea7n lo l\u1eafng v\u1ec1 vi\u1ec7c cung c\u1ea5p, m\u1edf r\u1ed9ng, ho\u1eb7c duy tr\u00ec m\u00e1y ch\u1ee7. \u0110i\u1ec1u n\u00e0y gi\u00fap gi\u1ea3i ph\u00f3ng th\u1eddi gian v\u00e0 ngu\u1ed3n l\u1ef1c \u0111\u1ec3 t\u1eadp trung v\u00e0o c\u00e1c t\u00ednh n\u0103ng c\u1ea7n c\u00f3 c\u1ee7a s\u1ea3n ph\u1ea9m.</p> <p>V\u1edbi CI/CD, ta ch\u1ecdn Github Actions. \u1ede giai \u0111o\u1ea1n n\u00e0y, ta kh\u00f4ng c\u1ea7n t\u1ef1 thi\u1ebft l\u1eadp CI/CD.</p> <p>V\u1edbi API, ch\u1ec9 c\u00f3 th\u1ec3 l\u00e0 REST. REST l\u00e0 ti\u00eau chu\u1ea9n gi\u1eefa client v\u00e0 server.</p> <p>V\u1edbi h\u1ec7 th\u1ed1ng qu\u1ea3n l\u00fd phi\u00ean b\u1ea3n (version control systems hay VCS), GitHub l\u00e0 \u0111\u01b0\u1ee3c.</p> <p>V\u1edbi caching, cache tr\u00ecnh duy\u1ec7t v\u00e0 CDN l\u00e0 hai ph\u1ea7n quan tr\u1ecdng nh\u1ea5t \u0111\u1ec3 c\u1ea3i thi\u1ec7n tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\u00f9ng. CDN \u0111i k\u00e8m mi\u1ec5n ph\u00ed v\u1edbi h\u1ea7u h\u1ebft c\u00e1c nh\u00e0 cung c\u1ea5p hosting nh\u01b0 Vercel v\u00e0 Netlify. N\u1ebfu kh\u00f4ng th\u00ec ch\u1ec9 c\u1ea7n s\u1eed d\u1ee5ng Cloudflare.</p> <p>V\u1edbi frameworks, ta s\u1ebd s\u1eed d\u1ee5ng Next.js v\u00e0 host c\u1ea3 frontend v\u00e0 backend tr\u00ean Vercel, ngh\u0129a l\u00e0 d\u00f9ng Express.js v\u1edbi Typescript \u1edf ph\u00eda backend. M\u1ed9t ng\u00f4n ng\u1eef cho c\u1ea3 frontend v\u00e0 backend.</p> <p>V\u1edbi testing, s\u1ebd h\u01a1i g\u00e2y tranh c\u00e3i m\u1ed9t ch\u00fat nh\u01b0ng ta th\u1ef1c s\u1ef1 kh\u00f4ng qu\u00e1 c\u1ea7n testing cho giai \u0111o\u1ea1n s\u1edbm nh\u01b0 th\u1ebf n\u00e0y, tr\u1eeb m\u1ed9t s\u1ed1 unit testing \u0111\u01a1n gi\u1ea3n. Khi t\u00ecm th\u1ea5y product/market fit v\u00e0 b\u1eaft \u0111\u1ea7u m\u1edf r\u1ed9ng c\u00f4ng ty, ta s\u1ebd \u0111\u1ea7u t\u01b0 nhi\u1ec1u h\u01a1n v\u00e0o testing (h\u1ee9a lu\u00f4n :v).</p> <p>V\u1edbi database, ta s\u1ebd s\u1eed d\u1ee5ng Aurora Serverless n\u1ebfu m\u00f4 h\u00ecnh d\u1eef li\u1ec7u ph\u1ee9c t\u1ea1p, ho\u1eb7c Firestore / Firebase n\u1ebfu d\u1eef li\u1ec7u \u0111\u01a1n gi\u1ea3n.</p> <p>B\u1ea1n c\u00f3 th\u1ec3 xem c\u00e1c l\u1ef1a ch\u1ecdn kh\u00e1c c\u00f3 th\u1ec3 c\u00f3 cho Burger c\u1ee7a m\u00ecnh \u1edf h\u00ecnh d\u01b0\u1edbi nh\u00e9. Ch\u00fac c\u00e1c b\u1ea1n th\u00e0nh c\u00f4ng.</p> <p></p>"},{"location":"ByteByteGo/big-tech-releases-code/","title":"C\u00e1c c\u00f4ng ty Big Tech release code nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/big-tech-releases-code/#nguon","title":"Ngu\u1ed3n","text":"<p> How Big Tech Ships Code to Production</p>"},{"location":"ByteByteGo/big-tech-releases-code/#quy-trinh","title":"Quy tr\u00ecnh","text":"<p>M\u1ecdi th\u1ee9 b\u1eaft \u0111\u1ea7u t\u1eeb vi\u1ec7c team product s\u1ebd t\u1eadp h\u1ee3p feedback v\u00e0 y\u00eau c\u1ea7u c\u1ee7a ng\u01b0\u1eddi d\u00f9ng. Team product v\u00e0 team engineering s\u1ebd chia nh\u1ecf ch\u00fang th\u00e0nh c\u00e1c c\u00f4ng vi\u1ec7c ho\u1eb7c user story nh\u1ecf h\u01a1n. Dev sau \u0111\u00f3 s\u1ebd ch\u1ecdn c\u00e1c c\u00f4ng vi\u1ec7c trong cu\u1ed9c h\u1ecdp l\u1eadp k\u1ebf ho\u1ea1ch sprint, th\u01b0\u1eddng k\u00e9o d\u00e0i t\u1eeb 1-2 tu\u1ea7n. </p> <p></p> <p>\u0110\u1ed1i v\u1edbi c\u00e1c d\u1ef1 \u00e1n l\u1edbn, c\u00f4ng vi\u1ec7c c\u00f3 th\u1ec3 k\u00e9o d\u00e0i qua nhi\u1ec1u sprint. Engineering manager ho\u1eb7c tech lead s\u1ebd \u01b0u ti\u00ean v\u00e0 s\u1eafp x\u1ebfp c\u00e1c c\u00f4ng vi\u1ec7c qua c\u00e1c sprint \u0111\u1ec3 c\u00e2n b\u1eb1ng kh\u1ea3 n\u0103ng c\u1ee7a team. Khi c\u00f3 sprint, dev s\u1ebd b\u1eaft \u0111\u1ea7u l\u00e0m. \u0110\u1ed1i v\u1edbi c\u00e1c d\u1ef1 \u00e1n l\u1edbn, th\u01b0\u1eddng c\u00f3 quy tr\u00ecnh RFC ho\u1eb7c thi\u1ebft k\u1ebf t\u00e0i li\u1ec7u \u0111\u1ec3 th\u1ed1ng nh\u1ea5t v\u1ec1 ki\u1ebfn tr\u00fac t\u1ed5ng th\u1ec3 v\u00e0 ph\u01b0\u01a1ng ph\u00e1p k\u1ef9 thu\u1eadt ngay t\u1eeb \u0111\u1ea7u. </p> <p>\u0110\u00e2y l\u00e0 n\u01a1i m\u00e0 m\u1ed9t s\u1ed1 quy tr\u00ecnh quan tr\u1ecdng xu\u1ea5t hi\u1ec7n. Dev s\u1eed d\u1ee5ng Git ho\u1eb7c m\u1ed9t c\u00f4ng c\u1ee5 t\u01b0\u01a1ng t\u1ef1 \u0111\u1ec3 qu\u1ea3n l\u00fd code v\u00e0 t\u1ea1o c\u00e1c feature branch \u0111\u1ec3 x\u00e2y d\u1ef1ng ch\u1ee9c n\u0103ng m\u1edbi m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn code ch\u00ednh, gi\u00fap cho vi\u1ec7c c\u1ee7a c\u00e1c dev kh\u00e1c nhau kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn nhau. </p> <p></p> <p>Khi c\u1ea7n thay \u0111\u1ed5i database schema, c\u00e1c migration script \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n trong c\u00e1c branch t\u01b0\u01a1ng \u1ee9ng. Schema migration c\u1ea7n ph\u1ea3i \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf c\u1ea9n th\u1eadn v\u00e0 test k\u1ef9 v\u00ec r\u1ee7i ro m\u1ea5t d\u1eef li\u1ec7u. Khi code xong, dev s\u1ebd m\u1edf pull request \u0111\u1ec3 team c\u00f3 th\u1ec3 review. Vi\u1ec7c n\u00e0y gi\u00fap ph\u00e1t hi\u1ec7n l\u1ed7i s\u1edbm. Sau khi \u0111\u01b0\u1ee3c duy\u1ec7t, code s\u1ebd \u0111\u01b0\u1ee3c merge v\u00e0o branch ch\u00ednh sau khi \u0111\u01b0\u1ee3c ch\u1ea1y unit test. </p> <p></p> <p>Khi m\u1ed9t ch\u1ee9c n\u0103ng m\u1edbi \u0111\u01b0\u1ee3c th\u00eam v\u00e0o branch ch\u00ednh, n\u00f3 kh\u1edfi \u0111\u1ed9ng CI/CD pipeline. C\u00e1c c\u00f4ng c\u1ee5 nh\u01b0 GitHub Actions v\u00e0 Jenkins s\u1ebd t\u1ef1 \u0111\u1ed9ng build, test, v\u00e0 deploy code qua nhi\u1ec1u m\u00f4i tr\u01b0\u1eddng nh\u01b0 dev, test, v\u00e0 staging. </p> <p></p> <p>Vi\u1ec7c ki\u1ec3m tra qua nhi\u1ec1u m\u00f4i tr\u01b0\u1eddng r\u1ea5t l\u00e0 quan tr\u1ecdng. Staging c\u1ea7n ph\u1ea3i gi\u1ed1ng v\u1edbi c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng production \u0111\u1ec3 ki\u1ec3m tra t\u00ednh nh\u1ea5t qu\u00e1n, gi\u00fap gi\u1ea3m thi\u1ec3u nh\u1eefng b\u1ea5t ng\u1edd sau n\u00e0y. </p> <p>QA engineer ki\u1ec3m tra k\u1ef9 l\u01b0\u1ee1ng ch\u1ee9c n\u0103ng, ch\u1ea1y regression test, scan b\u1ea3o m\u1eadt, test hi\u1ec7u su\u1ea5t, v\u00e2n v\u00e2n... C\u1ea7n l\u01b0u \u00fd r\u1eb1ng m\u1ed9t s\u1ed1 team d\u1ef1a v\u00e0o ch\u00ednh dev \u0111\u1ec3 ki\u1ec3m tra code thay v\u00ec c\u00f3 QA ri\u00eang. Vi\u1ec7c n\u00e0y c\u0169ng ok cho m\u1ed9t s\u1ed1 s\u1ea3n ph\u1ea9m, nh\u01b0ng kh\u00f4ng ph\u1ea3i t\u1ea5t c\u1ea3. </p> <p>Khi build qua t\u1ea5t c\u1ea3 c\u00e1c checkpoint, n\u00f3 s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n \u0111\u1ebfn UAT. UAT l\u00e0 vi\u1ebft t\u1eaft c\u1ee7a user acceptance testing. Team product, QA, v\u00e0 dev s\u1ebd ki\u1ec3m tra ch\u1ee9c n\u0103ng c\u00f9ng nhau. C\u00e1c release candidate qua UAT s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n t\u1eeb t\u1eeb v\u00e0o production. </p> <p></p> <p>M\u1ed9t s\u1ed1 team s\u1eed d\u1ee5ng k\u1ef9 thu\u1eadt nh\u01b0 canary release v\u00e0 feature flags \u0111\u1ec3 t\u1eeb t\u1eeb tri\u1ec3n khai thay \u0111\u1ed5i v\u00e0 gi\u1ea3m r\u1ee7i ro. </p> <p></p> <p>\u0110\u1ed1i v\u1edbi vi\u1ec7c tri\u1ec3n khai schema changes, c\u00e1c k\u1ef9 thu\u1eadt nh\u01b0 maintenance windows, read replicas, v\u00e0 rollback scripts gi\u00fap gi\u1ea3m r\u1ee7i ro. Multi-phase migrations v\u00e0 feature flags gi\u00fap ki\u1ec3m so\u00e1t quy\u1ec1n truy c\u1eadp trong qu\u00e1 tr\u00ecnh chuy\u1ec3n \u0111\u1ed5i. Trong su\u1ed1t qu\u00e1 tr\u00ecnh n\u00e0y, SRE s\u1ebd theo d\u00f5i metrics, logs, v\u00e0 traffic \u0111\u1ec3 ph\u00e1t hi\u1ec7n s\u1edbm v\u1ea5n \u0111\u1ec1 production. Bug \u0111\u01b0\u1ee3c \u01b0u ti\u00ean s\u1eeda tr\u01b0\u1edbc. Ngo\u00e0i ra, team product v\u00e0 engineering c\u0169ng theo d\u00f5i analytics \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o ch\u1ee9c n\u0103ng ho\u1ea1t \u0111\u1ed9ng nh\u01b0 mong \u0111\u1ee3i v\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn c\u00e1c metrics kh\u00e1c. T\u00f3m l\u1ea1i, y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng c\u1ee7a b\u1ea1n s\u1ebd tr\u1ea3i qua qu\u00e1 tr\u00ecnh thi\u1ebft k\u1ebf, ph\u00e1t tri\u1ec3n, ki\u1ec3m th\u1eed, v\u00e0 tri\u1ec3n khai t\u1eeb t\u1eeb tr\u01b0\u1edbc khi tr\u1edf th\u00e0nh m\u1ed9t ph\u1ea7n c\u1ee7a ph\u1ea7n m\u1ec1m b\u1ea1n s\u1eed d\u1ee5ng.</p> <p></p>"},{"location":"ByteByteGo/bloom-filter/","title":"Bloom Filter l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/bloom-filter/#nguon","title":"Ngu\u1ed3n","text":"<p> Bloom Filters | Algorithms You Should Know #2 | Real-world Examples</p>"},{"location":"ByteByteGo/bloom-filter/#mo-au","title":"M\u1edf \u0111\u1ea7u","text":"<p>Bloom Filter (b\u1ed9 l\u1ecdc n\u1edf hoa) l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u c\u00f3 nhi\u1ec1u \u1ee9ng d\u1ee5ng th\u1ef1c t\u1ebf. Ta c\u00f3 th\u1ec3 th\u1ea5y n\u00f3 trong c\u00e1c router m\u1ea1ng, database v\u00e0 tr\u00ecnh duy\u1ec7t web, v\u00e2n v\u00e2n. Ta \u0111\u00e3 t\u1eebng n\u00f3i v\u1ec1 Bloom Filter trong m\u1ed9t b\u00e0i vi\u1ebft v\u1ec1 c\u00e2y LSM. Ta c\u00f9ng xem n\u00f3 l\u00e0 g\u00ec qua b\u00e0i vi\u1ebft sau nh\u00e9.</p>"},{"location":"ByteByteGo/bloom-filter/#bloom-filter-la-gi_1","title":"Bloom Filter l\u00e0 g\u00ec?","text":"<p>Bloom filter l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u x\u00e1c su\u1ea5t, hi\u1ec7u qu\u1ea3 v\u1ec1 m\u1eb7t kh\u00f4ng gian, \u0111\u00e3 ra \u0111\u1eddi \u0111\u01b0\u1ee3c t\u1ea7m 50 n\u0103m. N\u00f3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 tr\u1ea3 l\u1eddi cho c\u00e2u h\u1ecfi: ph\u1ea7n t\u1eed n\u00e0y c\u00f3 \u1edf trong t\u1eadp h\u1ee3p kh\u00f4ng? Bloom filter s\u1ebd tr\u1ea3 l\u1eddi \"ch\u1eafc ch\u1eafn l\u00e0 kh\u00f4ng\" ho\u1eb7c \"c\u00f3 l\u1ebd l\u00e0 c\u00f3\". N\u00f3i c\u00e1ch kh\u00e1c, ta c\u00f3 th\u1ec3 g\u1eb7p tr\u01b0\u1eddng h\u1ee3p kh\u1eb3ng \u0111\u1ecbnh sai, ngh\u0129a l\u00e0 ph\u1ea7n t\u1eed kh\u00f4ng \u1edf trong t\u1eadp h\u1ee3p nh\u01b0ng bloom filter l\u1ea1i cho k\u1ebft qu\u1ea3 l\u00e0 c\u00f3. Ng\u01b0\u1ee3c l\u1ea1i, ph\u1ee7 \u0111\u1ecbnh sai kh\u00f4ng th\u1ec3 x\u1ea3y ra, ngh\u0129a l\u00e0 ph\u1ea7n t\u1eed c\u00f3 trong t\u1eadp h\u1ee3p nh\u01b0ng bloom filter cho ra k\u1ebft qu\u1ea3 l\u00e0 kh\u00f4ng.</p> <p></p> <p>Ph\u1ea7n \"c\u00f3 l\u1ebd l\u00e0 c\u00f3\" ch\u00ednh l\u00e0 \u0111i\u1ec1u l\u00e0m cho bloom filter c\u00f3 t\u00ednh x\u00e1c su\u1ea5t. C\u0169ng nh\u01b0 nhi\u1ec1u th\u1ee9 kh\u00e1c trong c\u00f4ng ngh\u1ec7 ph\u1ea7n m\u1ec1m, \u0111\u00e2y l\u00e0 m\u1ed9t s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i. S\u1ef1 \u0111\u00e1nh \u0111\u1ed5i \u1edf \u0111\u00e2y l\u00e0: \u0111\u00f4i khi c\u00e2u tr\u1ea3 l\u1eddi \"c\u00f3\" c\u00f3 th\u1ec3 sai v\u00e0i l\u1ea7n, nh\u01b0ng bloom filter ti\u00eau t\u1ed1n r\u1ea5t \u00edt b\u1ed9 nh\u1edb, so v\u1edbi c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u c\u00f3 \u1ee9ng d\u1ee5ng t\u01b0\u01a1ng t\u1ef1, ch\u1eb3ng h\u1ea1n nh\u01b0 hash table, th\u1ee9 s\u1ebd lu\u00f4n cho k\u1ebft qu\u1ea3 \u0111\u00fang. N\u1ebfu m\u1ed9t use case ch\u1ea5p nh\u1eadn m\u1ed9t s\u1ed1 c\u00e2u tr\u1ea3 l\u1eddi \"c\u00f3\" sai, nh\u01b0ng kh\u00f4ng ch\u1ea5p nh\u1eadn c\u00e2u tr\u1ea3 l\u1eddi \"kh\u00f4ng\" sai, bloom filter s\u1ebd l\u00e0 m\u1ed9t gi\u1ea3i ph\u00e1p tuy\u1ec7t v\u1eddi. M\u1ed9t \u0111i\u1ec3m quan tr\u1ecdng n\u1eefa l\u00e0, ta kh\u00f4ng th\u1ec3 xo\u00e1 ph\u1ea7n t\u1eed ra kh\u1ecfi bloom filter.</p> <p></p>"},{"location":"ByteByteGo/bloom-filter/#bloom-filter-uoc-ung-dung-nhu-the-nao","title":"Bloom filter \u0111\u01b0\u1ee3c \u1ee9ng d\u1ee5ng nh\u01b0 th\u1ebf n\u00e0o?","text":"<p>Nhi\u1ec1u database NoSQL s\u1eed d\u1ee5ng c\u00e1c bloom filter \u0111\u1ec3 gi\u1ea3m vi\u1ec7c \u0111\u1ecdc \u0111\u0129a v\u1edbi c\u00e1c key kh\u00f4ng t\u1ed3n t\u1ea1i. V\u1edbi m\u1ed9t database d\u1ef1a v\u00e0o c\u00e2y LSM, vi\u1ec7c t\u00ecm m\u1ed9t key kh\u00f4ng c\u00f3 trong database c\u1ea7n ph\u1ea3i tra c\u1ee9u qua nhi\u1ec1u file v\u00e0 r\u1ea5t t\u1ed1n k\u00e9m.</p> <p></p> <p>C\u00e1c CDN nh\u01b0 Akamai d\u00f9ng bloom filter \u0111\u1ec3 tr\u00e1nh cache c\u00e1c \"one-hit-wonder\". \u0110\u00e2y l\u00e0 c\u00e1c trang web ch\u1ec9 \u0111\u01b0\u1ee3c request m\u1ed9t l\u1ea7n. Theo Akamai, 75% s\u1ed1 trang l\u00e0 \"one-hit-wonder\". S\u1eed d\u1ee5ng bloom filter \u0111\u1ec3 theo d\u00f5i t\u1ea5t c\u1ea3 c\u00e1c URL \u0111\u01b0\u1ee3c xem v\u00e0 ch\u1ec9 cache c\u00e1c trang trong l\u1ea7n request th\u1ee9 hai \u0111\u00e3 gi\u00fap gi\u1ea3m \u0111\u00e1ng k\u1ec3 vi\u1ec7c cache v\u00e0 t\u0103ng t\u1ec9 l\u1ec7 truy c\u1eadp cache.</p> <p></p> <p>C\u00e1c tr\u00ecnh duy\u1ec7t nh\u01b0 Chrome t\u1eebng d\u00f9ng bloom filter \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh c\u00e1c URL \u0111\u1ed9c h\u1ea1i. B\u1ea5t k\u1ef3 URL n\u00e0o tr\u01b0\u1edbc h\u1ebft c\u0169ng ph\u1ea3i \u0111\u01b0\u1ee3c ki\u1ec3m tra trong bloom filter. N\u00f3 ch\u1ec9 th\u1ef1c hi\u1ec7n ki\u1ec3m tra k\u1ef9 URL sau khi bloom filter tr\u1ea3 v\u1ec1 \"c\u00f3 th\u1ec3 l\u00e0 \u0111\u1ed9c h\u1ea1i\". Tuy nhi\u00ean, s\u1ed1 l\u01b0\u1ee3ng URL \u0111\u1ed9c h\u1ea1i t\u0103ng l\u00ean h\u00e0ng tri\u1ec7u n\u00ean bloom filter kh\u00f4ng c\u00f2n \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng n\u1eefa, m\u00e0 thay v\u00e0o \u0111\u00f3 l\u00e0 m\u1ed9t gi\u1ea3i ph\u00e1p hi\u1ec3u qu\u1ea3 nh\u01b0ng ph\u1ee9c t\u1ea1p h\u01a1n.</p> <p></p> <p>T\u01b0\u01a1ng t\u1ef1 v\u1eady, m\u1ed9t s\u1ed1 tr\u00ecnh x\u00e1c th\u1ef1c m\u1eadt kh\u1ea9u s\u1ebd d\u00f9ng bloom filter \u0111\u1ec3 tr\u00e1nh cho ng\u01b0\u1eddi d\u00f9ng d\u00f9ng c\u00e1c m\u1eadt kh\u1ea9u y\u1ebfu. \u0110\u00f4i khi m\u1ed9t m\u1eadt kh\u1ea9u m\u1ea1nh s\u1ebd kh\u00f4ng qua \u0111\u01b0\u1ee3c do kh\u1eb3ng \u0111\u1ecbnh sai, nh\u01b0ng trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, n\u00f3 ch\u1ec9 c\u00f3 th\u1ec3 h\u1ecfi ng\u01b0\u1eddi d\u00f9ng cung c\u1ea5p m\u1eadt kh\u1ea9u kh\u00e1c.</p> <p>Tr\u00ean \u0111\u00e2y ch\u1ec9 l\u00e0 m\u1ed9t s\u1ed1 v\u00ed d\u1ee5 ph\u1ed5 bi\u1ebfn. Bloom filter c\u00f2n r\u1ea5t nhi\u1ec1u \u1ee9ng d\u1ee5ng kh\u00e1c n\u1eefa.</p>"},{"location":"ByteByteGo/bloom-filter/#bloom-filter-hoat-ong-nhu-the-nao","title":"Bloom filter ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?","text":"<p>M\u1ed9t th\u00e0nh ph\u1ea7n quan tr\u1ecdng c\u1ee7a m\u1ed9t bloom filter ngon l\u00e0nh l\u00e0 c\u00e1c h\u00e0m hash t\u1ed1t. C\u00e1c h\u00e0m hash n\u00e0y c\u1ea7n ph\u1ea3i nhanh v\u00e0 ch\u00fang ph\u1ea3i cho ra c\u00e1c output \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i \u0111\u1ed3ng \u0111\u1ec1u v\u00e0 ng\u1eabu nhi\u00ean. Tr\u00f9ng l\u1eb7p c\u0169ng \u0111\u01b0\u1ee3c, mi\u1ec5n l\u00e0 hi\u1ebfm khi x\u1ea3y ra. M\u1ed9t bloom filter l\u00e0 m\u1ed9t t\u1eadp h\u1ee3p l\u1edbn, v\u1edbi m\u1ed7i ph\u1ea7n t\u1eed ch\u1ee9a m\u1ed9t bit, v\u00e0 ban \u0111\u1ea7u bit \u0111\u00f3 l\u00e0 0.</p> <p>Gi\u1edd t\u01b0\u1edfng t\u01b0\u1ee3ng ta \u0111ang l\u01b0u c\u00e1c m\u00f3n \u0103n nh\u00e9. V\u1edbi v\u00ed d\u1ee5 n\u00e0y, ta s\u1ebd d\u00f9ng m\u1ed9t bloom filter v\u1edbi 10 ph\u1ea7n t\u1eed \u0111\u00e1nh s\u1ed1 t\u1eeb 0 \u0111\u1ebfn 9, v\u00e0 ta s\u1ebd d\u00f9ng 3 h\u00e0m hash. </p> <p>Th\u00eam <code>ribeye</code> v\u00e0o bloom filter nh\u00e9. C\u00e1c h\u00e0m hash s\u1ebd tr\u1ea3 v\u1ec1 l\u1ea7n l\u01b0\u1ee3t c\u00e1c s\u1ed1 1, 3 v\u00e0 4. C\u00e1c bit t\u01b0\u01a1ng \u1ee9ng s\u1ebd \u0111\u01b0\u1ee3c \u0111\u00e1nh d\u1ea5u b\u1eb1ng 1, d\u0129 nhi\u00ean l\u00e0 trong th\u1eddi gian h\u1eb1ng s\u1ed1. </p> <p></p> <p>Ti\u1ebfp theo, cho <code>potato</code> v\u00e0o bloom filter. C\u00e1c h\u00e0m hash s\u1ebd tr\u1ea3 v\u1ec1 l\u1ea7n l\u01b0\u1ee3t c\u00e1c s\u1ed1 0, 4 v\u00e0 8. \u0110\u00e1nh d\u1ea5u 1 v\u00e0o c\u00e1c bit \u0111\u00f3. </p> <p></p> <p>Gi\u1edd ta c\u1ea7n ki\u1ec3m tra xem <code>ribeye</code> c\u00f3 trong \u0111\u00f3 kh\u00f4ng. V\u00ec c\u00f9ng input s\u1ebd cho ra c\u00f9ng output, <code>ribeye</code> s\u1ebd \u0111\u01b0\u1ee3c hash th\u00e0nh 1, 3, 4. Ta ki\u1ec3m tra c\u00e1c ph\u1ea7n t\u1eed t\u01b0\u01a1ng \u1ee9ng, th\u1ea5y ch\u00fang \u0111\u1ec1u c\u00f3 bit b\u1eb1ng 1. N\u00ean bloom filter s\u1ebd tr\u1ea3 v\u1ec1 l\u00e0 \"c\u00f3 l\u1ebd l\u00e0 c\u00f3\". Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, \u0111\u00fang l\u00e0 c\u00f3.</p> <p></p> <p>Gi\u1edd ki\u1ec3m tra xem <code>pork chop</code> c\u00f3 trong \u0111\u00f3 kh\u00f4ng. C\u00e1c h\u00e0m hash s\u1ebd tr\u1ea3 v\u1ec1 0, 5, 8. D\u00f9 ph\u1ea7n t\u1eed th\u1ee9 0 v\u00e0 8 ch\u1ee9a 1, nh\u01b0ng ph\u1ea7n t\u1eed 5 l\u1ea1i ch\u1ee9a 0. V\u00ec v\u1eady n\u00ean bloom filter tr\u1ea3 v\u1ec1 \"ch\u1eafc ch\u1eafn l\u00e0 kh\u00f4ng\".</p> <p></p> <p>V\u1edbi <code>lemon</code> th\u00ec sao? C\u00e1c h\u00e0m hash tr\u1ea3 v\u1ec1 1, 4, 8. Do c\u00e1c ph\u1ea7n t\u1eed t\u01b0\u01a1ng \u1ee9ng \u0111\u1ec1u ch\u1ee9a bit 1, bloom filter s\u1ebd tr\u1ea3 v\u1ec1 \"c\u00f3 l\u1ebd l\u00e0 c\u00f3\". \u0110\u00e2y l\u00e0 m\u1ed9t v\u00ed d\u1ee5 v\u1ec1 kh\u1eb3ng \u0111\u1ecbnh sai, v\u00ec ta ban \u0111\u1ea7u kh\u00f4ng cho <code>lemon</code> v\u00e0o bloom filter.</p> <p></p> <p>Trong th\u1ef1c t\u1ebf, k\u00edch th\u01b0\u1edbc c\u1ee7a bloom filter s\u1ebd l\u1edbn h\u01a1n nhi\u1ec1u so v\u1edbi v\u00ed d\u1ee5 n\u00e0y. Ta c\u00f3 th\u1ec3 ki\u1ec3m so\u00e1t t\u1ea7n su\u1ea5t th\u1ea5y kh\u1eb3ng \u0111\u1ecbnh sai b\u1eb1ng c\u00e1ch ch\u1ecdn ch\u00ednh x\u00e1c k\u00edch th\u01b0\u1edbc cho bloom filter d\u1ef1a v\u00e0o k\u1ef3 v\u1ecdng s\u1ed1 entry trong \u0111\u00f3. \u0110\u00e2y l\u00e0 s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i gi\u1eefa kh\u00f4ng gian b\u1ed9 nh\u1edb v\u00e0 s\u1ef1 ch\u00ednh x\u00e1c.</p>"},{"location":"ByteByteGo/caching-systems/","title":"C\u00e1c h\u1ec7 th\u1ed1ng cache ph\u1ed5 bi\u1ebfn","text":""},{"location":"ByteByteGo/caching-systems/#nguon","title":"Ngu\u1ed3n","text":"<p> Cache Systems Every Developer Should Know</p>"},{"location":"ByteByteGo/caching-systems/#tai-sao-can-cache","title":"T\u1ea1i sao c\u1ea7n cache?","text":"<p>Caching l\u00e0 m\u1ed9t k\u1ef9 thu\u1eadt ph\u1ed5 bi\u1ebfn \u0111\u1ec3 t\u0103ng hi\u1ec7u su\u1ea5t h\u1ec7 th\u1ed1ng v\u00e0 gi\u1ea3m th\u1eddi gian ph\u1ea3n h\u1ed3i. T\u1eeb frontend \u0111\u1ebfn backend, caching \u0111\u00f3ng m\u1ed9t vai tr\u00f2 quan tr\u1ecdng trong vi\u1ec7c c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t c\u1ee7a c\u00e1c \u1ee9ng d\u1ee5ng v\u00e0 h\u1ec7 th\u1ed1ng kh\u00e1c nhau. M\u1ed9t ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng \u0111i\u1ec3n h\u00ecnh bao g\u1ed3m nhi\u1ec1u l\u1edbp caching. T\u1ea1i m\u1ed7i l\u1edbp, ta l\u1ea1i c\u00f3 nhi\u1ec1u c\u01a1 ch\u1ebf caching d\u1eef li\u1ec7u, t\u00f9y v\u00e0o y\u00eau c\u1ea7u c\u1ee7a t\u1eebng \u1ee9ng d\u1ee5ng c\u1ee5 th\u1ec3.</p> <p></p>"},{"location":"ByteByteGo/caching-systems/#caching-trong-may-tinh","title":"Caching trong m\u00e1y t\u00ednh","text":"<p>Trong m\u00e1y t\u00ednh, c\u00e1c cache L1, L2, L3 l\u00e0 \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn nhi\u1ec1u nh\u1ea5t.</p> <ul> <li>Cache L1 l\u00e0 lo\u1ea1i nh\u1ecf nh\u1ea5t v\u00e0 c\u0169ng nhanh nh\u1ea5t, th\u01b0\u1eddng \u0111\u01b0\u1ee3c t\u00edch h\u1ee3p v\u00e0o CPU. N\u00f3 l\u01b0u tr\u1eef d\u1eef li\u1ec7u v\u00e0 ch\u1ec9 th\u1ecb \u0111\u01b0\u1ee3c truy c\u1eadp th\u01b0\u1eddng xuy\u00ean, cho ph\u00e9p CPU truy c\u1eadp ch\u00fang m\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i l\u1ea5y t\u1eeb c\u00e1c lo\u1ea1i b\u1ed9 nh\u1edb ch\u1eadm h\u01a1n. </li> <li>Cache L2 l\u1edbn h\u01a1n nh\u01b0ng ch\u1eadm h\u01a1n so v\u1edbi cache L1, th\u01b0\u1eddng \u0111\u01b0\u1ee3c \u0111\u1eb7t tr\u00ean chip CPU ho\u1eb7c tr\u00ean m\u1ed9t chip ri\u00eang. </li> <li>Cache L3 l\u1edbn h\u01a1n v\u00e0 ch\u1eadm h\u01a1n so v\u1edbi cache L2, th\u01b0\u1eddng \u0111\u01b0\u1ee3c chia s\u1ebb gi\u1eefa nhi\u1ec1u l\u00f5i CPU.</li> </ul> <p>M\u1ed9t lo\u1ea1i cache ph\u1ea7n c\u1ee9ng kh\u00e1c c\u0169ng ph\u1ed5 bi\u1ebfn l\u00e0 TLB (translation lookaside buffer). N\u00f3 cho ph\u00e9p CPU d\u1ecbch nhanh \u0111\u1ecba ch\u1ec9 b\u1ed9 nh\u1edb \u1ea3o th\u00e0nh \u0111\u1ecba ch\u1ec9 b\u1ed9 nh\u1edb v\u1eadt l\u00fd, b\u1eb1ng c\u00e1ch l\u01b0u tr\u1eef c\u00e1c b\u1ea3n d\u1ecbch \u0111\u1ecba ch\u1ec9 g\u1ea7n \u0111\u00e2y, \u0111\u1ec3 gi\u1ea3m th\u1eddi gian c\u1ea7n thi\u1ebft \u0111\u1ec3 truy c\u1eadp d\u1eef li\u1ec7u t\u1eeb b\u1ed9 nh\u1edb.</p> <p></p> <p>\u1ede c\u1ea5p \u0111\u1ed9 h\u1ec7 \u0111i\u1ec1u h\u00e0nh, ta c\u00f3 page cache v\u00e0 c\u00e1c cache file h\u1ec7 th\u1ed1ng kh\u00e1c. Page cache \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd b\u1edfi h\u1ec7 \u0111i\u1ec1u h\u00e0nh v\u00e0 n\u1eb1m trong b\u1ed9 nh\u1edb ch\u00ednh. N\u00f3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 l\u01b0u tr\u1eef c\u00e1c kh\u1ed1i \u0111\u0129a \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng g\u1ea7n \u0111\u00e2y trong b\u1ed9 nh\u1edb. Khi m\u1ed9t ch\u01b0\u01a1ng tr\u00ecnh y\u00eau c\u1ea7u d\u1eef li\u1ec7u t\u1eeb \u0111\u0129a, h\u1ec7 \u0111i\u1ec1u h\u00e0nh c\u00f3 th\u1ec3 nhanh ch\u00f3ng truy xu\u1ea5t d\u1eef li\u1ec7u t\u1eeb b\u1ed9 nh\u1edb thay v\u00ec \u0111\u1ecdc t\u1eeb \u0111\u0129a.</p> <p></p> <p>Ta c\u0169ng c\u00f3 c\u00e1c cache kh\u00e1c \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd b\u1edfi h\u1ec7 \u0111i\u1ec1u h\u00e0nh, nh\u01b0 cache inode. Nh\u1eefng cache n\u00e0y \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\u0103ng t\u1ed1c c\u00e1c ho\u1ea1t \u0111\u1ed9ng li\u00ean quan \u0111\u1ebfn file h\u1ec7 th\u1ed1ng b\u1eb1ng c\u00e1ch gi\u1ea3m s\u1ed1 l\u1ea7n truy c\u1eadp \u0111\u0129a c\u1ea7n thi\u1ebft \u0111\u1ec3 truy c\u1eadp c\u00e1c file v\u00e0 th\u01b0 m\u1ee5c.</p> <p></p>"},{"location":"ByteByteGo/caching-systems/#caching-trong-frontend","title":"Caching trong frontend","text":"<p>Tr\u00ean ph\u1ea7n frontend, tr\u00ecnh duy\u1ec7t web c\u00f3 th\u1ec3 cache c\u00e1c HTTP response \u0111\u1ec3 cho ph\u00e9p truy xu\u1ea5t d\u1eef li\u1ec7u nhanh h\u01a1n. Khi ta request d\u1eef li\u1ec7u qua HTTP l\u1ea7n \u0111\u1ea7u, ta s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c m\u1ed9t expiration policy (ch\u00ednh s\u00e1ch h\u1ebft h\u1ea1n) trong header HTTP.</p> <p></p> <p>Ta request d\u1eef li\u1ec7u \u0111\u00f3 l\u1ea7n n\u1eefa, tr\u00ecnh duy\u1ec7t khi \u0111\u00f3 s\u1ebd tr\u1ea3 v\u1ec1 d\u1eef li\u1ec7u t\u1eeb cache n\u1ebfu c\u00f3 d\u1eef li\u1ec7u \u0111\u00f3 trong cache.</p> <p></p> <p>M\u1ea1ng ph\u00e2n ph\u1ed1i n\u1ed9i dung (CDN) \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i \u0111\u1ec3 c\u1ea3i thi\u1ec7n vi\u1ec7c ph\u00e2n ph\u1ed1i n\u1ed9i dung t\u0129nh, nh\u01b0 h\u00ecnh \u1ea3nh, video v\u00e0 c\u00e1c t\u00e0i nguy\u00ean web kh\u00e1c. M\u1ed9t trong nh\u1eefng c\u00e1ch m\u00e0 CDN t\u0103ng t\u1ed1c vi\u1ec7c ph\u00e2n ph\u1ed1i n\u1ed9i dung l\u00e0 th\u00f4ng qua vi\u1ec7c caching. Khi m\u1ed9t ng\u01b0\u1eddi d\u00f9ng y\u00eau c\u1ea7u n\u1ed9i dung t\u1eeb m\u1ed9t CDN, m\u1ea1ng CDN s\u1ebd t\u00ecm ki\u1ebfm n\u1ed9i dung \u0111\u01b0\u1ee3c request trong cache c\u1ee7a m\u00ecnh. N\u1ebfu n\u1ed9i dung ch\u01b0a c\u00f3 trong cache, CDN s\u1ebd l\u1ea5y n\u00f3 t\u1eeb server ngu\u1ed3n v\u00e0 l\u01b0u tr\u1eef n\u00f3 tr\u00ean c\u00e1c server edge.</p> <p></p> <p>Khi m\u1ed9t ng\u01b0\u1eddi d\u00f9ng kh\u00e1c request c\u00f9ng m\u1ed9t n\u1ed9i dung, CDN c\u00f3 th\u1ec3 cung c\u1ea5p n\u1ed9i dung tr\u1ef1c ti\u1ebfp t\u1eeb cache c\u1ee7a m\u00ecnh m\u00e0 kh\u00f4ng c\u1ea7n l\u1ea5y l\u1ea1i t\u1eeb server ngu\u1ed3n.</p> <p></p>"},{"location":"ByteByteGo/caching-systems/#caching-trong-backend","title":"Caching trong backend","text":"<p>M\u1ed9t s\u1ed1 load balancer c\u00f3 th\u1ec3 cache t\u00e0i nguy\u00ean \u0111\u1ec3 gi\u1ea3m t\u1ea3i cho c\u00e1c server ph\u00eda sau. Khi m\u1ed9t ng\u01b0\u1eddi d\u00f9ng request n\u1ed9i dung t\u1eeb m\u1ed9t server \u0111\u1ee9ng sau load balancer, load balancer c\u00f3 th\u1ec3 cache response v\u00e0 tr\u1ea3 v\u1ec1 tr\u1ef1c ti\u1ebfp cho ng\u01b0\u1eddi d\u00f9ng ti\u1ebfp theo n\u1ebfu ng\u01b0\u1eddi \u0111\u00f3 request c\u00f9ng n\u1ed9i dung \u0111\u00f3. \u0110i\u1ec1u n\u00e0y gi\u00fap c\u1ea3i thi\u1ec7n th\u1eddi gian ph\u1ea3n h\u1ed3i v\u00e0 gi\u1ea3m t\u1ea3i cho c\u00e1c server ph\u00eda sau.</p> <p></p> <p>Caching kh\u00f4ng nh\u1ea5t thi\u1ebft ph\u1ea3i n\u1eb1m trong b\u1ed9 nh\u1edb. Trong c\u00e1c h\u1ea1 t\u1ea7ng messaging, c\u00e1c message broker nh\u01b0 Kafka c\u00f3 th\u1ec3 cache m\u1ed9t l\u01b0\u1ee3ng l\u1edbn c\u00e1c message tr\u00ean \u0111\u0129a. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p c\u00e1c consumer truy xu\u1ea5t message theo t\u1ed1c \u0111\u1ed9 m\u00e0 consumer mong mu\u1ed1n. Message c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c cache trong m\u1ed9t kho\u1ea3ng th\u1eddi gian d\u00e0i d\u1ef1a tr\u00ean retention.</p> <p></p> <p>C\u00e1c cache ph\u00e2n t\u00e1n nh\u01b0 Redis c\u00f3 th\u1ec3 l\u01b0u tr\u1eef c\u00e1c c\u1eb7p key-value trong b\u1ed9 nh\u1edb, cung c\u1ea5p hi\u1ec7u su\u1ea5t \u0111\u1ecdc/ghi cao h\u01a1n so v\u1edbi c\u00e1c c\u01a1 s\u1edf d\u1eef li\u1ec7u truy\u1ec1n th\u1ed1ng.</p> <p></p> <p>C\u00e1c h\u1ec7 th\u1ed1ng t\u00ecm ki\u1ebfm full-text nh\u01b0 Elastic Search c\u00f3 th\u1ec3 index d\u1eef li\u1ec7u \u0111\u1ec3 t\u00ecm ki\u1ebfm t\u00e0i li\u1ec7u v\u00e0 log m\u1ed9t c\u00e1ch nhanh ch\u00f3ng v\u00e0 hi\u1ec7u qu\u1ea3.</p> <p></p>"},{"location":"ByteByteGo/caching-systems/#caching-trong-database","title":"Caching trong database","text":"<p>Ngay c\u1ea3 trong database, ta c\u0169ng c\u00f3 nhi\u1ec1u l\u1edbp caching.</p> <p>D\u1eef li\u1ec7u th\u01b0\u1eddng \u0111\u01b0\u1ee3c ghi v\u00e0o write-ahead log (WAL) tr\u01b0\u1edbc khi \u0111\u01b0\u1ee3c index trong m\u1ed9t B-tree. Buffer pool l\u00e0 m\u1ed9t khu v\u1ef1c b\u1ed9 nh\u1edb \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 cache k\u1ebft qu\u1ea3 truy v\u1ea5n, trong khi materialized views c\u00f3 th\u1ec3 t\u00ednh to\u00e1n tr\u01b0\u1edbc k\u1ebft qu\u1ea3 truy v\u1ea5n \u0111\u1ec3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t. Transaction log ghi l\u1ea1i t\u1ea5t c\u1ea3 c\u00e1c giao d\u1ecbch v\u00e0 c\u1eadp nh\u1eadt trong c\u01a1 s\u1edf d\u1eef li\u1ec7u, trong khi replication log theo d\u00f5i tr\u1ea1ng th\u00e1i sao ch\u00e9p trong m\u1ed9t c\u1ee5m c\u01a1 s\u1edf d\u1eef li\u1ec7u.</p> <p></p> <p></p>"},{"location":"ByteByteGo/cap-theorem/","title":"\u0110\u1ecbnh l\u00fd CAP - CAP theorem","text":""},{"location":"ByteByteGo/cap-theorem/#nguon","title":"Ngu\u1ed3n","text":"<p> CAP Theorem Simplified | System Design Fundamentals</p>"},{"location":"ByteByteGo/cap-theorem/#khai-niem","title":"Kh\u00e1i ni\u1ec7m","text":"<p>\u0110\u1ecbnh l\u00fd CAP (CAP Theorem) l\u00e0 m\u1ed9t kh\u00e1i ni\u1ec7m trong khoa h\u1ecdc m\u00e1y t\u00ednh gi\u1ea3i th\u00edch s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i gi\u1eefa t\u00ednh nh\u1ea5t qu\u00e1n (consistency - C), t\u00ednh kh\u1ea3 d\u1ee5ng (availability - A) v\u00e0 s\u1ee9c ch\u1ecbu \u0111\u1ef1ng s\u1ef1 ph\u00e2n v\u00f9ng trong m\u1ea1ng (partition tolerance - P) trong c\u00e1c h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n.</p> <p></p> <p>T\u00ednh nh\u1ea5t qu\u00e1n (consistency - C) l\u00e0 thu\u1ed9c t\u00ednh c\u1ee7a m\u1ed9t h\u1ec7 th\u1ed1ng trong \u0111\u00f3 t\u1ea5t c\u1ea3 c\u00e1c node c\u00f3 c\u00f9ng m\u1ed9t k\u1ebft qu\u1ea3 khi \u0111\u1ecdc d\u1eef li\u1ec7u. \u0110i\u1ec1u \u0111\u00f3 c\u00f3 ngh\u0129a l\u00e0 t\u1ea5t c\u1ea3 client \u0111\u1ec1u nh\u00ecn th\u1ea5y c\u00f9ng m\u1ed9t d\u1eef li\u1ec7u trong c\u00f9ng th\u1eddi \u0111i\u1ec3m, b\u1ea5t k\u1ec3 vi\u1ec7c client k\u1ebft n\u1ed1i v\u1edbi node n\u00e0o.</p> <p>T\u00ednh kh\u1ea3 d\u1ee5ng (availability - A) l\u00e0 kh\u1ea3 n\u0103ng c\u1ee7a h\u1ec7 th\u1ed1ng \u0111\u1ec3 lu\u00f4n lu\u00f4n \u0111\u00e1p \u1ee9ng c\u00e1c request c\u1ee7a ng\u01b0\u1eddi d\u00f9ng.</p> <p>S\u1ee9c ch\u1ecbu \u0111\u1ef1ng ph\u00e2n v\u00f9ng trong m\u1ea1ng (partition tolerance - P) l\u00e0 kh\u1ea3 n\u0103ng h\u1ec7 th\u1ed1ng ti\u1ebfp t\u1ee5c ho\u1ea1t \u0111\u1ed9ng ngay c\u1ea3 khi c\u00f3 m\u1ed9t ph\u00e2n v\u00f9ng m\u1ea1ng. </p>"},{"location":"ByteByteGo/cap-theorem/#phan-vung-mang","title":"Ph\u00e2n v\u00f9ng m\u1ea1ng","text":"<p>Nh\u01b0ng ph\u00e2n v\u00f9ng m\u1ea1ng (network partition) l\u00e0 g\u00ec? Ph\u00e2n v\u00f9ng m\u1ea1ng x\u1ea3y ra khi c\u00e1c node trong h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n kh\u00f4ng th\u1ec3 giao ti\u1ebfp v\u1edbi nhau do l\u1ed7i m\u1ea1ng. </p> <p>Khi c\u00f3 ph\u00e2n v\u00f9ng m\u1ea1ng, h\u1ec7 th\u1ed1ng ph\u1ea3i ch\u1ecdn gi\u1eefa t\u00ednh nh\u1ea5t qu\u00e1n v\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng. </p> <p>N\u1ebfu h\u1ec7 th\u1ed1ng \u01b0u ti\u00ean t\u00ednh nh\u1ea5t qu\u00e1n, n\u00f3 c\u00f3 th\u1ec3 kh\u00f4ng kh\u1ea3 d\u1ee5ng cho \u0111\u1ebfn khi ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. N\u1ebfu h\u1ec7 th\u1ed1ng \u01b0u ti\u00ean t\u00ednh kh\u1ea3 d\u1ee5ng, n\u00f3 c\u00f3 th\u1ec3 cho ph\u00e9p c\u1eadp nh\u1eadt d\u1eef li\u1ec7u. Nh\u01b0ng s\u1ef1 kh\u00f4ng th\u1ed1ng nh\u1ea5t v\u1ec1 m\u1eb7t d\u1eef li\u1ec7u c\u00f3 th\u1ec3 x\u1ea3y ra cho \u0111\u1ebfn khi ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft.</p> <p></p> <p>C\u00f9ng xem m\u1ed9t v\u00ed d\u1ee5 nh\u00e9.</p>"},{"location":"ByteByteGo/cap-theorem/#vi-du","title":"V\u00ed d\u1ee5","text":"<p>Gi\u1ea3 s\u1eed ta c\u00f3 m\u1ed9t ng\u00e2n h\u00e0ng nh\u1ecf v\u1edbi hai m\u00e1y ATM \u0111\u01b0\u1ee3c k\u1ebft n\u1ed1i qua m\u1ea1ng. C\u00e1c m\u00e1y ATM n\u00e0y h\u1ed7 tr\u1ee3 3 thao t\u00e1c: g\u1eedi ti\u1ec1n, r\u00fat ti\u1ec1n v\u00e0 ki\u1ec3m tra s\u1ed1 d\u01b0. B\u1ea5t k\u1ec3 \u0111i\u1ec1u g\u00ec x\u1ea3y ra, s\u1ed1 d\u01b0 s\u1ebd kh\u00f4ng bao gi\u1edd b\u1ecb \u00e2m. Kh\u00f4ng c\u00f3 c\u01a1 s\u1edf d\u1eef li\u1ec7u trung t\u00e2m \u0111\u1ec3 l\u01b0u s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n, n\u00f3 \u0111\u01b0\u1ee3c l\u01b0u tr\u00ean c\u1ea3 hai m\u00e1y ATM.</p> <p>Khi m\u1ed9t kh\u00e1ch h\u00e0ng d\u00f9ng m\u00e1y ATM, s\u1ed1 d\u01b0 s\u1ebd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt tr\u00ean c\u1ea3 hai m\u00e1y ATM qua m\u1ea1ng. \u0110i\u1ec1u n\u00e0y \u0111\u1ea3m b\u1ea3o r\u1eb1ng c\u00e1c m\u00e1y ATM c\u00f3 c\u00f9ng k\u1ebft qu\u1ea3 khi ki\u1ec3m tra s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n.</p> <p>N\u1ebfu c\u00f3 m\u1ed9t ph\u00e2n v\u00f9ng m\u1ea1ng v\u00e0 c\u00e1c m\u00e1y ATM kh\u00f4ng th\u1ec3 giao ti\u1ebfp v\u1edbi nhau, th\u00ec h\u1ec7 th\u1ed1ng ph\u1ea3i ch\u1ecdn gi\u1eefa t\u00ednh nh\u1ea5t qu\u00e1n v\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng.</p> <p>N\u1ebfu ng\u00e2n h\u00e0ng \u01b0u ti\u00ean t\u00ednh nh\u1ea5t qu\u00e1n,\u00a0m\u00e1y ATM c\u00f3 th\u1ec3 t\u1eeb ch\u1ed1i x\u1eed l\u00fd ti\u1ec1n g\u1eedi ho\u1eb7c\u00a0r\u00fat ti\u1ec1n cho \u0111\u1ebfn khi ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. \u0110i\u1ec1u n\u00e0y \u0111\u1ea3m b\u1ea3o r\u1eb1ng s\u1ed1 d\u01b0 v\u1eabn nh\u1ea5t qu\u00e1n nh\u01b0ng h\u1ec7 th\u1ed1ng kh\u00f4ng kh\u1ea3 d\u1ee5ng v\u1edbi kh\u00e1ch h\u00e0ng.</p> <p></p> <p>N\u1ebfu ng\u00e2n h\u00e0ng \u01b0u ti\u00ean t\u00ednh kh\u1ea3 d\u1ee5ng, th\u00ec m\u00e1y ATM\u00a0c\u00f3 th\u1ec3 cho ph\u00e9p g\u1eedi v\u00e0 r\u00fat ti\u1ec1n,\u00a0nh\u01b0ng s\u1ed1 d\u01b0 c\u00f3 th\u1ec3 kh\u00f4ng \u1ed5n \u0111\u1ecbnh\u00a0cho \u0111\u1ebfn khi ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft.</p> <p></p> <p>Khi c\u00f3 ph\u00e2n v\u00f9ng m\u1ea1ng, kh\u00e1ch h\u00e0ng\u00a0c\u00f3 th\u1ec3 r\u00fat to\u00e0n b\u1ed9 s\u1ed1 d\u01b0 t\u1eeb c\u1ea3 hai m\u00e1y ATM. Khi ph\u00e2n v\u00f9ng m\u1ea1ng \u0111\u01b0\u1ee3c kh\u1eafc ph\u1ee5c,\u00a0s\u1ef1 kh\u00f4ng nh\u1ea5t qu\u00e1n \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft v\u00e0 b\u00e2y gi\u1edd\u00a0s\u1ed1 d\u01b0 l\u00e0 s\u1ed1 \u00e2m. \u0110\u00f3 l\u00e0 \u0111i\u1ec1u kh\u00f4ng \u0111\u01b0\u1ee3c ph\u00e9p x\u1ea3y ra.</p> <p></p> <p>H\u00e3y c\u00f9ng xem m\u1ed9t v\u00ed d\u1ee5 kh\u00e1c v\u00e0 xem c\u00e1ch m\u1ed9t m\u1ea1ng x\u00e3 h\u1ed9i c\u00f3 th\u1ec3 \u00e1p d\u1ee5ng \u0111\u1ecbnh l\u00fd CAP</p> <p>Trong khi m\u1ea1ng b\u1ecb ph\u00e2n v\u00f9ng, n\u1ebfu hai ng\u01b0\u1eddi d\u00f9ng c\u00f9ng b\u00ecnh lu\u1eadn m\u1ed9t b\u00e0i \u0111\u0103ng c\u00f9ng l\u00fac, b\u00ecnh lu\u1eadn c\u1ee7a m\u1ed9t ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 kh\u00f4ng \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb \u0111\u1ebfn ng\u01b0\u1eddi d\u00f9ng kia cho \u0111\u1ebfn khi ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. </p> <p></p> <p>Ngo\u00e0i ra, n\u1ebfu m\u1ea1ng x\u00e3 h\u1ed9i \u01b0u ti\u00ean t\u00ednh nh\u1ea5t qu\u00e1n, th\u00ec t\u00ednh n\u0103ng comment c\u00f3 th\u1ec3 kh\u00f4ng kh\u1ea3 d\u1ee5ng cho \u0111\u1ebfn khi ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. \u0110\u1ed1i v\u1edbi m\u1ea1ng x\u00e3 h\u1ed9i, vi\u1ec7c \u01b0u ti\u00ean t\u00ednh kh\u1ea3 d\u1ee5ng th\u01b0\u1eddng \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn v\u1edbi c\u00e1i gi\u00e1 l\u00e0 ng\u01b0\u1eddi d\u00f9ng \u0111\u00f4i khi th\u1ea5y c\u00e1c data h\u01a1i kh\u00e1c nhau.</p> <p></p> <p>\u0110\u1ecbnh l\u00fd CAP nghe c\u00f3 v\u1ebb r\u1ea5t \u0111\u01a1n gi\u1ea3n, nh\u01b0ng th\u1ebf gi\u1edbi th\u1ef1c l\u1ea1i r\u1ea5t h\u1ed7n lo\u1ea1n.</p> <p>C\u0169ng gi\u1ed1ng nh\u01b0 nhi\u1ec1u th\u1ee9 trong c\u00f4ng ngh\u1ec7 ph\u1ea7n m\u1ec1m, t\u1ea5t c\u1ea3 \u0111\u1ec1u li\u00ean quan \u0111\u1ebfn s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i v\u00e0 c\u00e1c l\u1ef1a ch\u1ecdn kh\u00f4ng ph\u1ea3i l\u00fac n\u00e0o c\u0169ng r\u00e0nh r\u00e0nh ra \u0111\u00f3. \u0110\u1ecbnh l\u00fd CPA gi\u1ea3 \u0111\u1ecbnh 100% t\u00ednh kh\u1ea3 d\u1ee5ng ho\u1eb7c 100% t\u00ednh nh\u1ea5t qu\u00e1n. Trong th\u1ebf gi\u1edbi th\u1ef1c, c\u00f3 c\u00e1c m\u1ee9c \u0111\u1ed9 nh\u1ea5t qu\u00e1n v\u00e0 kh\u1ea3 d\u1ee5ng m\u00e0 nh\u1eefng ng\u01b0\u1eddi thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n ph\u1ea3i xem x\u00e9t c\u1ea9n th\u1eadn. \u0110\u00e2y l\u00e0 l\u00fac m\u00e0 m\u00f4 h\u00ecnh \u0111\u01a1n gi\u1ea3n c\u1ee7a \u0111\u1ecbnh l\u00fd CAP c\u00f3 th\u1ec3 g\u00e2y hi\u1ec3u nh\u1ea7m.</p> <p>Quay l\u1ea1i v\u00ed d\u1ee5 ng\u00e2n h\u00e0ng, trong qu\u00e1 tr\u00ecnh ph\u00e2n v\u00f9ng m\u1ea1ng, m\u00e1y ATM ch\u1ec9 c\u00f3 th\u1ec3 cho ph\u00e9p x\u1eed l\u00fd c\u00e1c y\u00eau c\u1ea7u v\u1ec1 s\u1ed1 d\u01b0, trong khi c\u00e1c kho\u1ea3n ti\u1ec1n g\u1eedi ho\u1eb7c r\u00fat ti\u1ec1n b\u1ecb ch\u1eb7n. </p> <p></p> <p>Ngo\u00e0i ra, ng\u00e2n h\u00e0ng c\u00f3 th\u1ec3 tri\u1ec3n khai m\u1ed9t ph\u01b0\u01a1ng ph\u00e1p k\u1ebft h\u1ee3p. V\u00ed d\u1ee5, ATM c\u00f3 th\u1ec3 cho ph\u00e9p x\u1eed l\u00fd c\u00e1c y\u00eau c\u1ea7u v\u1ec1 s\u1ed1 d\u01b0 v\u00e0 c\u00e1c kho\u1ea3n ti\u1ec1n nh\u1ecf khi m\u1ea1ng \u0111ang b\u1ecb ph\u1ea7n v\u00f9ng, nh\u01b0ng ch\u1eb7n c\u00e1c kho\u1ea3n r\u00fat ti\u1ec1n ho\u1eb7c g\u1eedi ti\u1ec1n l\u1edbn cho \u0111\u1ebfn khi ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft.</p> <p></p> <p>C\u1ea7n l\u01b0u \u00fd l\u00e0 trong th\u1ef1c t\u1ebf, vi\u1ec7c \u0111\u1ed1i so\u00e1t sau ph\u00e2n v\u00f9ng m\u1ea1ng c\u00f3 th\u1ec3 r\u1ea5t l\u00e0 l\u1ed9n x\u1ed9n. V\u1edbi v\u00ed d\u1ee5 ng\u00e2n h\u00e0ng \u1edf tr\u00ean th\u00ec vi\u1ec7c \u0111\u1ed1i so\u00e1t l\u00e0 t\u01b0\u01a1ng \u0111\u1ed1i \u0111\u01a1n gi\u1ea3n. Trong th\u1ef1c t\u1ebf, c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u li\u00ean quan c\u00f3 th\u1ec3 ph\u1ee9c t\u1ea1p v\u00e0 kh\u00f3 dung ho\u00e0.</p> <p></p> <p>M\u1ed9t v\u00ed d\u1ee5 \u0111i\u1ec3n h\u00ecnh v\u1ec1 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u\u00a0ph\u1ee9c t\u1ea1p l\u00e0 Google Docs. Gi\u1ea3i quy\u1ebft c\u00e1c b\u1ea3n c\u1eadp nh\u1eadt xung \u0111\u1ed9t c\u00f3 th\u1ec3 r\u1ea5t ph\u1ee9c t\u1ea1p.</p> <p></p>"},{"location":"ByteByteGo/cap-theorem/#ket-luan","title":"K\u1ebft lu\u1eadn","text":"<p>V\u1eady \u0111\u1ecbnh l\u00fd CAP c\u00f3 h\u1eefu \u00edch kh\u00f4ng? C\u00f3, \u0111\u00f3 l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 h\u1eefu \u00edch \u0111\u1ec3 gi\u00fap ta c\u00e2n nh\u1eafc\u00a0nh\u1eefng \u0111\u00e1nh \u0111\u1ed5i c\u1ea7n l\u01b0u \u00fd\u00a0khi c\u00f3 m\u1ed9t ph\u00e2n v\u00f9ng m\u1ea1ng. C\u00f3 \u0111i\u1ec1u, n\u00f3 kh\u00f4ng cung c\u1ea5p m\u1ed9t b\u1ee9c tranh to\u00e0n c\u1ea3nh v\u1ec1 s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i c\u1ea7n xem x\u00e9t khi thi\u1ebft k\u1ebf m\u1ed9t h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n to\u00e0n di\u1ec7n.</p> <p>C\u1ee5 th\u1ec3, khi h\u1ec7 th\u1ed1ng ho\u1ea1t \u0111\u1ed9ng\u00a0b\u00ecnh th\u01b0\u1eddng m\u00e0 kh\u00f4ng c\u00f3 b\u1ea5t k\u1ef3 s\u1ef1 c\u1ed1 m\u1ea1ng n\u00e0o (h\u1ea7u h\u1ebft th\u1eddi gian l\u00e0 nh\u01b0 v\u1eady), ta l\u1ea1i c\u00f3 nh\u1eefng \u0111\u00e1nh \u0111\u1ed5i kh\u00e1c \u0111\u1ec3 xem x\u00e9t gi\u1eefa \u0111\u1ed9 tr\u1ec5 v\u00e0 t\u00ednh nh\u1ea5t qu\u00e1n. N\u00f3 l\u1ea1i thu\u1ed9c v\u1ec1 \u0111\u1ecbnh l\u00fd PACELC. Ta s\u1ebd n\u00f3i v\u1ec1 n\u00f3 trong m\u1ed9t b\u00e0i vi\u1ebft kh\u00e1c.</p> <p></p>"},{"location":"ByteByteGo/cdn/","title":"T\u00ecm hi\u1ec3u v\u1ec1 CDN","text":""},{"location":"ByteByteGo/cdn/#nguon","title":"Ngu\u1ed3n","text":"<p> What Is A CDN? How Does It Work?</p>"},{"location":"ByteByteGo/cdn/#cdn-la-gi","title":"CDN l\u00e0 g\u00ec?","text":"<p>CDN (Content Delivery Network - M\u1ea1ng l\u01b0\u1edbi ph\u00e2n ph\u1ed1i n\u1ed9i dung) \u0111\u01b0\u1ee3c ra \u0111\u1eddi v\u00e0o cu\u1ed1i nh\u1eefng n\u0103m 90 c\u1ee7a th\u1ebf k\u1ec9 20 (1998). Ban \u0111\u1ea7u n\u00f3 \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n \u0111\u1ec3 t\u0103ng t\u1ed1c vi\u1ec7c ph\u00e2n ph\u1ed1i content HTML t\u0129nh cho user tr\u00ean to\u00e0n th\u1ebf gi\u1edbi.</p> <p></p> <p>CDN ph\u00e1t tri\u1ec3n m\u1ea1nh m\u1ebd trong nh\u1eefng th\u1eadp ni\u00ean ti\u1ebfp theo. Ng\u00e0y nay, m\u1ed9t CDN c\u1ea7n \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1ea5t k\u00ec khi n\u00e0o c\u00f3 HTTP traffic.</p>"},{"location":"ByteByteGo/cdn/#cdn-ngay-nay-lam-uoc-gi-cho-chung-ta","title":"CDN ng\u00e0y nay l\u00e0m \u0111\u01b0\u1ee3c g\u00ec cho ch\u00fang ta?","text":"<p>\u1ede c\u1ea5p \u0111\u1ed9 c\u01a1 b\u1ea3n, m\u1ed9t CDN mang content l\u1ea1i g\u1ea7n user h\u01a1n. \u0110i\u1ec1u n\u00e0y c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t c\u1ee7a web service d\u01b0\u1edbi g\u00f3c nh\u00ecn user. Th\u1ed1ng k\u00ea ch\u1ec9 ra r\u1eb1ng hi\u1ec7u su\u1ea5t r\u1ea5t quan tr\u1ecdng cho vi\u1ec7c ti\u1ebfp c\u1eadn v\u00e0 gi\u1eef ch\u00e2n user.</p> <p></p> <p></p> <p>\u0110\u1ec3 mang service l\u1ea1i g\u1ea7n user h\u01a1n, CDN tri\u1ec3n khai r\u1ea5t nhi\u1ec1u server t\u1ea1i h\u00e0ng tr\u0103m \u0111\u1ecba \u0111i\u1ec3m tr\u00ean th\u1ebf gi\u1edbi. C\u00e1c \u0111\u1ecba \u0111i\u1ec3m n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 PoP (Point of Presence - \u0111i\u1ec3m t\u1ed3n t\u1ea1i). Server n\u1eb1m trong PoP th\u01b0\u1eddng \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 edge server. PoP hi\u1ec7n di\u1ec7n \u1edf nhi\u1ec1u n\u01a1i tr\u00ean th\u1ebf gi\u1edbi gi\u00fap \u0111\u1ea3m b\u1ea3o r\u1eb1ng m\u1ecdi user c\u00f3 th\u1ec3 k\u1ebft n\u1ed1i \u0111\u1ebfn edge server g\u1ea7n h\u1ecd nh\u1ea5t.</p> <p></p> <p>C\u00e1c CDN kh\u00e1c nhau tri\u1ec3n khai c\u00e1c c\u00f4ng ngh\u1ec7 kh\u00e1c nhau \u0111\u1ec3 \u0111i\u1ec1u h\u01b0\u1edbng request c\u1ee7a user \u0111\u1ebfn PoP g\u1ea7n nh\u1ea5t. Hai c\u00f4ng ngh\u1ec7 ph\u1ed5 bi\u1ebfn nh\u1ea5t l\u00e0 routing d\u1ef1a tr\u00ean DNS v\u00e0 Anycast.</p> <p>V\u1edbi routing d\u1ef1a tr\u00ean DNS, m\u1ed7i PoP c\u00f3 m\u1ed9t \u0111\u1ecba ch\u1ec9 IP ri\u00eang. Khi user t\u00ecm \u0111\u1ecba ch\u1ec9 IP c\u1ee7a CDN, DNS tr\u1ea3 v\u1ec1 \u0111\u1ecba ch\u1ec9 IP c\u1ee7a PoP g\u1ea7n v\u1edbi user nh\u1ea5t.</p> <p></p> <p>V\u1edbi Anycast, c\u00e1c PoP chia s\u1ebb c\u00f9ng m\u1ed9t \u0111\u1ecba ch\u1ec9 IP. Khi m\u1ed9t request v\u00e0o m\u1ea1ng Anycast c\u1ee7a \u0111\u1ecba ch\u1ec9 IP \u0111\u00f3, m\u1ea1ng n\u00e0y s\u1ebd g\u1eedi request \u0111\u1ebfn PoP g\u1ea7n nh\u1ea5t v\u1edbi user.</p> <p></p> <p>M\u1ed7i edge server \u0111\u00f3ng vai tr\u00f2 l\u00e0 reverse proxy v\u1edbi content cache r\u1ea5t l\u1edbn. Content t\u0129nh \u0111\u01b0\u1ee3c cache trong nh\u1eefng content cache tr\u00ean edge server. N\u1ebfu m\u1ed9t content n\u1eb1m trong cache, n\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c nhanh ch\u00f3ng tr\u1ea3 v\u1ec1 cho user. Edge server ch\u1ec9 c\u1ea7n m\u1ed9t b\u1ea3n sao c\u1ee7a content t\u0129nh t\u1eeb server g\u1ed1c n\u1ebfu content kh\u00f4ng n\u1eb1m trong cache n\u00ean vi\u1ec7c n\u00e0y gi\u00fap gi\u1ea3m y\u00eau c\u1ea7u t\u1ea3i v\u00e0 b\u0103ng th\u00f4ng cho server g\u1ed1c r\u1ea5t nhi\u1ec1u.</p> <p></p> <p></p> <p>M\u1ed9t CDN hi\u1ec7n \u0111\u1ea1i c\u00f2n c\u00f3 th\u1ec3 chuy\u1ec3n \u0111\u1ed5i content t\u0129nh th\u00e0nh m\u1ed9t d\u1ea1ng t\u1ed1i \u01b0u h\u01a1n. V\u00ed d\u1ee5, CDN c\u00f3 th\u1ec3 minify Javascript bundle tr\u01b0\u1edbc khi \u0111\u1ebfn tay user, ho\u1eb7c chuy\u1ec3n \u0111\u1ed5i m\u1ed9t file h\u00ecnh \u1ea3nh t\u1eeb d\u1ea1ng c\u0169 th\u00e0nh nh\u1eefng d\u1ea1ng m\u1edbi h\u01a1n nh\u01b0 WebP hay AVIF.</p> <p></p> <p>Edge server c\u00f2n \u0111\u00f3ng vai tr\u00f2 c\u1ef1c k\u1ef3 quan tr\u1ecdng trong HTTP stack hi\u1ec7n \u0111\u1ea1i. T\u1ea5t c\u1ea3 TLS connection k\u1ebft th\u00fac t\u1ea1i edge server. B\u1eaft tay TLS r\u1ea5t t\u1ed1n k\u00e9m. C\u00e1c phi\u00ean b\u1ea3n TLS th\u1ecbnh h\u00e0nh nh\u01b0 TLS 1.2 c\u1ea7n v\u00e0i network round trip \u0111\u1ec3 t\u1ea1o connection. Th\u1ebf n\u00ean k\u1ebft th\u00fac TLS connection t\u1ea1i edge server gi\u00fap gi\u1ea3m \u0111\u1ed9 tr\u1ec5 \u0111\u1ec3 t\u1ea1o TLS connection. \u0110\u00e2y l\u00e0 l\u00fd do v\u00ec sao nhi\u1ec1u \u1ee9ng d\u1ee5ng ng\u00e0y nay g\u1eedi HTTP content \u0111\u1ed9ng kh\u00f4ng cache \u0111\u01b0\u1ee3c qua CDN.</p> <p></p> <p></p> <p>B\u00ean c\u1ea1nh hi\u1ec7u su\u1ea5t, CDN hi\u1ec7n \u0111\u1ea1i c\u00f2n c\u00f3 hai l\u1ee3i \u00edch l\u1edbn n\u1eefa. </p> <p>Th\u1ee9 nh\u1ea5t l\u00e0 b\u1ea3o m\u1eadt. T\u1ea5t c\u1ea3 c\u00e1c m\u1ea1ng CDN \u0111\u1ec1u c\u00f3 dung l\u01b0\u1ee3ng m\u1ea1ng l\u1edbn t\u1ea1i edge server. \u0110\u00e2y l\u00e0 m\u1ea5u ch\u1ed1t \u0111\u1ec3 ch\u1ed1ng t\u1ea7n c\u00f4ng t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5 (DDoS) quy m\u00f4 l\u1edbn m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3, b\u1eb1ng vi\u1ec7c c\u00f3 m\u1ed9t m\u1ea1ng c\u00f3 dung l\u01b0\u1ee3ng c\u00f2n l\u1edbn h\u01a1n c\u1ee7a k\u1ebb t\u1ea5n c\u00f4ng. \u0110i\u1ec1u n\u00e0y th\u1eadt s\u1ef1 hi\u1ec7u qu\u1ea3 v\u1edbi CDN tr\u00ean n\u1ec1n m\u1ea1ng Anycast. N\u00f3 cho ph\u00e9p CDN khu\u1ebfch t\u00e1n traffic t\u1ea5n c\u00f4ng tr\u00ean m\u1ed9t l\u01b0\u1ee3ng l\u1edbn server.</p> <p></p> <p></p> <p>Th\u1ee9 hai, CDN hi\u1ec7n \u0111\u1ea1i c\u1ea3i thi\u1ec7n t\u00ednh th\u01b0\u1eddng tr\u1ef1c (availability). CDN c\u00f3 t\u00ednh ph\u00e2n b\u1ed1 r\u1ea5t l\u1edbn. V\u1edbi vi\u1ec7c c\u00f3 b\u1ea3n sao content tr\u00ean nhi\u1ec1u PoP, CDN c\u00f3 th\u1ec3 ch\u1ecbu \u0111\u01b0\u1ee3c nhi\u1ec1u s\u1ef1 c\u1ed1 ph\u1ea7n c\u1ee9ng h\u01a1n server g\u1ed1c.</p> <p></p> <p>CDN hi\u1ec7n \u0111\u1ea1i mang l\u1ea1i r\u1ea5t nhi\u1ec1u l\u1ee3i \u00edch. H\u00e3y d\u00f9ng CDN khi ta c\u00f3 HTTP traffic.</p>"},{"location":"ByteByteGo/chatgpt-hacks/","title":"7 c\u00e1ch m\u00e0 l\u1eadp tr\u00ecnh vi\u00ean t\u1eadn d\u1ee5ng ChatGPT","text":""},{"location":"ByteByteGo/chatgpt-hacks/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 7 ChatGPT Developer Hacks</p>"},{"location":"ByteByteGo/chatgpt-hacks/#mo-au","title":"M\u1edf \u0111\u1ea7u","text":"<p>ChatGPT \u0111ang c\u00e1ch m\u1ea1ng ho\u00e1 c\u00e1ch th\u1ee9c l\u00e0m vi\u1ec7c c\u1ee7a dev v\u00e0 n\u1ebfu b\u1ea1n ch\u01b0a tham gia, b\u1ea1n \u0111ang b\u1ecf l\u1ee1 m\u1ed9t l\u1ee3i th\u1ebf c\u1ea1nh tranh r\u1ea5t l\u1edbn. Trong b\u00e0i n\u00e0y, ta s\u1ebd c\u00f9ng t\u00ecm hi\u1ec3u ChatGPT v\u00e0 cho th\u1ea5y c\u00e1ch n\u00f3 c\u00f3 th\u1ec3 t\u0103ng t\u1ed1c c\u00f4ng vi\u1ec7c h\u00e0ng ng\u00e0y v\u00e0 n\u00e2ng cao hi\u1ec7u su\u1ea5t c\u1ee7a b\u1ea1n.</p> <p>\u0110\u1eebng \u0111\u1ec3 b\u1ecb b\u1ecf l\u1ea1i ph\u00eda sau - h\u00e3y kh\u00e1m ph\u00e1 c\u00e1ch khai th\u00e1c s\u1ee9c m\u1ea1nh c\u1ee7a ChatGPT v\u00e0 \u0111i \u0111\u1ea7u trong th\u1ebf gi\u1edbi \u0111ang ph\u00e1t tri\u1ec3n r\u1ea5t nhanh ch\u00f3ng n\u00e0y.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#giai-thich-code","title":"Gi\u1ea3i th\u00edch code","text":"<p>M\u1ed9t trong nh\u1eefng c\u00e1ch th\u00f4ng d\u1ee5ng m\u00e0 dev hay d\u00f9ng v\u1edbi ChatGPT l\u00e0 nh\u1edd n\u00f3 gi\u1ea3i th\u00edch nh\u1eefng \u0111o\u1ea1n code kh\u00f3 hi\u1ec3u. ChatGPT bi\u1ebft r\u1ea5t nhi\u1ec1u v\u1ec1 c\u00e1c ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh v\u00e0 c\u00f3 th\u1ec3 gi\u1ea3i th\u00edch c\u00e1c ph\u1ea7n code ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o theo m\u1ed9t c\u00e1ch \u0111\u01a1n gi\u1ea3n.</p> <p>V\u00ed d\u1ee5, gi\u1ea3 s\u1eed ta c\u00f3 m\u1ed9t \u0111o\u1ea1n code Python d\u00f9ng m\u1ed9t s\u1ed1 t\u00ednh n\u0103ng n\u00e2ng cao nh\u01b0 list comprehension hay lambda function nh\u01b0 sau:</p> <p></p> <p>N\u1ebfu ta kh\u00f4ng hi\u1ec3u ho\u1eb7c c\u1ea3m th\u1ea5y code kh\u00f3 hi\u1ec3u, ta c\u00f3 th\u1ec3 d\u00f9ng ChatGPT \u0111\u1ec3 n\u00f3 gi\u1ea3i th\u00edch code. </p> <p></p> <p>V\u1edbi s\u1ef1 tr\u1ee3 gi\u00fap c\u1ee7a ChatGPT, ta c\u00f3 th\u1ec3 hi\u1ec3u r\u00f5 h\u01a1n v\u1ec1 code m\u00e0 ta \u0111ang d\u00f9ng v\u00e0 c\u1ea3m th\u1ea5y t\u1ef1 tin h\u01a1n v\u1edbi nh\u1eefng \u0111o\u1ea1n code ph\u1ee9c t\u1ea1p.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#tim-loi-va-review-code","title":"T\u00ecm l\u1ed7i v\u00e0 review code","text":"<p>M\u1ed9t c\u00e1ch kh\u00e1c \u0111\u1ec3 d\u00f9ng ChatGPT l\u00e0 t\u00ecm l\u1ed7i v\u00e0 review code. ChatGPT c\u00f3 th\u1ec3 gi\u00fap ta t\u00ecm l\u1ed7i trong code v\u00e0 \u0111\u1ec1 xu\u1ea5t nh\u1eefng c\u1ea3i ti\u1ebfn cho code. Khi ta \u0111ang l\u00e0m trong m\u1ed9t d\u1ef1 \u00e1n, th\u01b0\u1eddng th\u00ec s\u1ebd c\u00f3 l\u00fac m\u1ed9t s\u1ed1 th\u1ee9 kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng nh\u01b0 c\u00e1ch ta mong mu\u1ed1n. ChatGPT c\u00f3 th\u1ec3 \u0111\u1ecdc code v\u00e0 ch\u1ec9 ra c\u00e1c l\u1ed7i ho\u1eb7c ph\u1ea7n code n\u00e0o c\u1ea7n \u0111\u01b0\u1ee3c s\u1eeda. N\u00f3 c\u0169ng c\u00f3 th\u1ec3 \u0111\u01b0a ra c\u00e1c \u0111\u1ec1 xu\u1ea5t l\u00e0m sao cho code c\u1ee7a ta ngon h\u01a1n.</p> <p>Ta c\u00f9ng xem x\u00e9t m\u1ed9t v\u00ed d\u1ee5 v\u1edbi ng\u00f4n ng\u1eef C v\u1edbi m\u1ed9t h\u00e0m \u0111\u1ea3o ng\u01b0\u1ee3c x\u00e2u t\u1ea1i ch\u1ed7. \u0110\u00e2y l\u00e0 code c\u00f3 bug:</p> <p></p> <p>Ta c\u00f3 th\u1ec3 d\u00f9ng ChatGPT \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh v\u00e0 s\u1eeda l\u1ed7i trong code n\u00e0y. N\u00f3 cho ta bi\u1ebft r\u1eb1ng c\u00f3 m\u1ed9t l\u1ed7i nh\u1ecf (c\u1ee5 th\u1ec3 l\u00e0 v\u1ecb tr\u00ed n\u00ean l\u00e0 <code>len-i-1</code> ch\u1ee9 kh\u00f4ng ph\u1ea3i <code>len-i</code>, trong h\u00ecnh d\u01b0\u1edbi th\u00ec l\u1ed7i trong code v\u1eabn \u1edf \u0111\u00f3, r\u1ea5t xin l\u1ed7i c\u00e1c b\u1ea1n) n\u1eb1m trong h\u00e0m <code>reverse_string</code> khi ho\u00e1n \u0111\u1ed5i c\u00e1c k\u00fd t\u1ef1. Th\u1eadm ch\u00ed n\u00f3 c\u00f2n sinh code ch\u00ednh x\u00e1c cho ch\u00fang ta.</p> <p></p>"},{"location":"ByteByteGo/chatgpt-hacks/#chuyen-code-tu-ngon-ngu-nay-sang-ngon-ngu-khac","title":"Chuy\u1ec3n code t\u1eeb ng\u00f4n ng\u1eef n\u00e0y sang ng\u00f4n ng\u1eef kh\u00e1c","text":"<p>Ta c\u0169ng c\u00f3 th\u1ec3 d\u00f9ng ChatGPT \u0111\u1ec3 chuy\u1ec3n code t\u1eeb ng\u00f4n ng\u1eef n\u00e0y sang ng\u00f4n ng\u1eef kh\u00e1c. \u0110i\u1ec1u n\u00e0y th\u1ef1c s\u1ef1 c\u00f3 \u00edch khi ta c\u00f3 code \u1edf ng\u00f4n ng\u1eef A, nh\u01b0ng ta \u0111ang l\u00e0m vi\u1ec7c v\u1edbi ng\u00f4n ng\u1eef B. ChatGPT bi\u1ebft nhi\u1ec1u ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh, n\u00ean n\u00f3 c\u00f3 th\u1ec3 chuy\u1ec3n \u0111\u1ed5i code.</p> <p>V\u00ed d\u1ee5, ta c\u00f3 code Python gi\u00fap s\u1eeda m\u1ed9t l\u1ed7i b\u1ea3o m\u00e2t, nh\u01b0ng project c\u1ee7a ch\u00fang ta \u0111ang d\u00f9ng Rust. Ta c\u1ea7n chuy\u1ec3n code Python th\u00e0nh Rust v\u00e0 ChatGPT c\u00f3 th\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u \u0111\u00f3. \u0110\u00e2y l\u00e0 code m\u1eabu b\u00ean Python:</p> <p></p> <p>Ta c\u00f3 th\u1ec3 nh\u1edd ChatGPT gi\u00fap vi\u1ebft l\u1ea1i code theo ng\u00f4n ng\u1eef Rust, c\u00f3 th\u1ec3 nh\u01b0 sau:</p> <p></p> <p>V\u1edbi s\u1ef1 tr\u1ee3 gi\u00fap c\u1ee7a ChatGPT, ta c\u00f3 th\u1ec3 chuy\u1ec3n code t\u1eeb ng\u00f4n ng\u1eef n\u00e0y sang ng\u00f4n ng\u1eef kh\u00e1c m\u1ed9t c\u00e1ch d\u1ec5 d\u00e0ng, gi\u00fap ta ti\u1ebft ki\u1ec7m th\u1eddi gian, tr\u00e1nh l\u1ed7i khi th\u1ef1c hi\u1ec7n th\u1ee7 c\u00f4ng v\u00e0 d\u1ea1y ta th\u00eam v\u1ec1 c\u00e1c ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh kh\u00e1c nhau.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#hoc-ngon-ngu-moi","title":"H\u1ecdc ng\u00f4n ng\u1eef m\u1edbi","text":"<p>Ta c\u0169ng c\u00f3 th\u1ec3 h\u1ecdc ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh m\u1edbi v\u1edbi s\u1ef1 gi\u00fap \u0111\u1ee1 c\u1ee7a ChatGPT. </p> <p>M\u1ed9t v\u00ed d\u1ee5 th\u1ef1c t\u1ebf l\u00e0 ch\u00fang t\u00f4i c\u1ea7n ph\u1ea3i xong m\u1ed9t project v\u1edbi Rust, m\u00e0 ch\u00fang t\u00f4i kh\u00f4ng bi\u1ebft Rust nhi\u1ec1u l\u1eafm. Ch\u00fang t\u00f4i c\u1ea7n \u0111\u1ecdc m\u1ed9t object t\u1eeb Google Cloud Storage bucket theo \u0111o\u1ea1n \u0111\u1ec3 l\u00e0m n\u00f3 hi\u1ec7u qu\u1ea3 h\u01a1n. V\u00ec v\u1eady, ch\u00fang t\u00f4i nh\u1edd ChatGPT c\u00e1ch \u0111\u1ec3 l\u00e0m.</p> <p></p> <p>ChatGPT c\u00f3 th\u1ec3 cung c\u1ea5p cho ch\u00fang ta nh\u1eefng h\u01b0\u1edbng d\u1eabn, v\u00ed d\u1ee5\u00a0v\u00e0 th\u1eadm ch\u00ed c\u1ea3 code \u0111\u1ec3 gi\u00fap\u00a0ta th\u1ef1c hi\u1ec7n c\u00f4ng vi\u1ec7c c\u1ee7a m\u00ecnh. B\u1eb1ng c\u00e1ch \u0111\u1eb7t c\u00e2u h\u1ecfi c\u1ee5 th\u1ec3 ho\u1eb7c l\u1ea5y v\u00ed d\u1ee5, ta\u00a0c\u00f3 th\u1ec3 h\u1ecdc c\u00e1ch s\u1eed d\u1ee5ng c\u00e1c th\u01b0 vi\u1ec7n, ch\u1ee9c n\u0103ng m\u1edbi,\u00a0ho\u1eb7c c\u00e1c t\u00ednh n\u0103ng ng\u00f4n ng\u1eef m\u00e0 ch\u00fang ta kh\u00f4ng quen d\u00f9ng.</p> <p>Ch\u1eb3ng h\u1ea1n, trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, ChatGPT cho\u00a0ch\u00fang t\u00f4i v\u00ed d\u1ee5 v\u1ec1 c\u00e1ch \u0111\u1ecdc m\u1ed9t \u0111\u1ed1i t\u01b0\u1ee3ng\u00a0t\u1eeb nh\u00f3m GCS theo t\u1eebng \u0111o\u1ea1n b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng Rust, g\u1ed3m c\u1ea3 c\u00e1c \u0111\u1ec1 xu\u1ea5t v\u1ec1 th\u01b0 vi\u1ec7n v\u00e0 code m\u1eabu \u0111\u1ec3 th\u1ef1c hi\u1ec7n y\u00eau c\u1ea7u c\u1ee7a ch\u00fang t\u00f4i.</p> <p></p> <p></p> <p>B\u1eb1ng c\u00e1ch l\u00e0m theo h\u01b0\u1edbng d\u1eabn do ChatGPT cung c\u1ea5p, ch\u00fang t\u00f4i \u0111\u00e3 nhanh ch\u00f3ng hi\u1ec3u r\u00f5 h\u01a1n\u00a0v\u1ec1 Rust v\u00e0 ho\u00e0n th\u00e0nh project c\u1ee7a m\u00ecnh m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p>B\u1eb1ng c\u00e1ch d\u1ef1a v\u00e0o ChatGPT khi h\u1ecdc m\u1ed9t ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh m\u1edbi, ta c\u00f3 th\u1ec3 ti\u1ebft ki\u1ec7m th\u1eddi gian v\u00e0 r\u00fat ng\u1eafn th\u1eddi gian h\u1ecdc t\u1eadp, gi\u00fap d\u1ec5 d\u00e0ng th\u00edch nghi v\u1edbi ng\u00f4n ng\u1eef m\u1edbi v\u00e0 d\u1ea7n d\u1ea7n th\u00e0nh th\u1ea1o ng\u00f4n ng\u1eef \u0111\u00f3.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#viet-unit-test","title":"Vi\u1ebft unit test","text":"<p>ChatGPT c\u0169ng c\u00f3 th\u1ec3 vi\u1ebft unit test cho code. Unit test r\u1ea5t quan tr\u1ecdng v\u00ec n\u00f3 gi\u00fap \u0111\u1ea3m b\u1ea3o code ch\u1ea1y \u0111\u00fang v\u00e0 nh\u1eefng thay \u0111\u1ed5i v\u1ec1 sau kh\u00f4ng ph\u00e1 v\u1ee1 ch\u1ee9c n\u0103ng hi\u1ec7n c\u00f3. Vi\u1ebft t\u1ed1t unit test l\u00e0 vi\u1ec7c kh\u00f4ng d\u1ec5 d\u00e0ng, \u0111\u00f4i khi r\u1ea5t l\u00e0 ch\u00e1n, nh\u01b0ng ChatGPT c\u00f3 th\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y.</p> <p>X\u00e9t m\u1ed9t v\u00ed d\u1ee5 th\u1ef1c t\u1ebf khi ta c\u00f3 m\u1ed9t h\u00e0m TypeScript nh\u1eadn m\u1ed9t x\u00e2u v\u00e0 tr\u00e1nh c\u00e1c k\u00fd t\u1ef1 \u0111\u1eb7c bi\u1ec7t \u0111\u1ec3 d\u00f9ng trong HTML. H\u00e0m nh\u01b0 sau:</p> <p></p> <p>Ta c\u00f3 th\u1ec3 d\u00f9ng ChatGPT \u0111\u1ec3 t\u1ea1o c\u00e1c test case \u0111\u1ec3 x\u00e1c th\u1ef1c t\u00ednh ch\u00ednh x\u00e1c c\u1ee7a h\u00e0m <code>sanitizeHtml</code>.</p> <p>N\u00f3 cho ta m\u1ed9t s\u1ed1 test case kh\u00e1 t\u1ed1t, v\u00e0 c\u0169ng c\u00f3 th\u1ec3 vi\u1ebft test case n\u1eefa:</p> <p></p> <p>Nh\u1edd ChatGPT, ta c\u00f3 th\u1ec3 t\u1ea1o c\u00e1c test case cho code, \u0111\u1ea3m b\u1ea3o code ho\u1ea1t \u0111\u1ed9ng ch\u00ednh x\u00e1c v\u00e0 duy tr\u00ec ch\u1ea5t l\u01b0\u1ee3ng ph\u1ea7n m\u1ec1m \u1edf m\u1ee9c cao.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#them-tinh-nang-cho-code","title":"Th\u00eam t\u00ednh n\u0103ng cho code","text":"<p>B\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng ChatGPT \u0111\u1ec3 th\u00eam t\u00ednh n\u0103ng cho code hi\u1ec7n t\u1ea1i. V\u1edbi s\u1ef1 hi\u1ec3u bi\u1ebft v\u1ec1 ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh v\u00e0 c\u00e1c kh\u00e1i ni\u1ec7m v\u1ec1 c\u00f4ng ngh\u1ec7 ph\u1ea7n m\u1ec1m, n\u00f3 c\u00f3 th\u1ec3 gi\u00fap ta n\u00e2ng c\u1ea5p code b\u1eb1ng c\u00e1ch \u0111\u1ec1 xu\u1ea5t c\u00e1c thay \u0111\u1ed5i v\u00e0 c\u00e1c code snippet m\u1edbi.</p> <p>Th\u1eed l\u1ea5y m\u1ed9t v\u00ed d\u1ee5 th\u1ef1c t\u1ebf trong \u0111\u00f3 ta c\u00f3 m\u1ed9t h\u00e0m TypeScript l\u1ecdc c\u00e1c ph\u1ea7n t\u1eed t\u1eeb m\u1ed9t m\u1ea3ng d\u1ef1a tr\u00ean m\u1ed9t h\u00e0m v\u1ecb t\u1eeb. \u0110\u00e2y l\u00e0 h\u00e0m ban \u0111\u1ea7u:</p> <p></p> <p>Gi\u1ea3 s\u1eed ta mu\u1ed1n s\u1eeda h\u00e0m n\u00e0y \u0111\u1ec3 c\u00f3 th\u00eam m\u1ed9t t\u00ednh n\u0103ng: m\u1ed9t tham s\u1ed1 tu\u1ef3 ch\u1ecdn cho ph\u00e9p ta gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng ph\u1ea7n t\u1eed tr\u1ea3 v\u1ec1 sau khi l\u1ecdc. Ta c\u00f3 th\u1ec3 nh\u1edd ChatGPT gi\u00fap trong vi\u1ec7c th\u00eam t\u00ednh n\u0103ng n\u00e0y. ChatGPT c\u00f3 th\u1ec3 \u0111\u1ec1 xu\u1ea5t th\u00eam tham s\u1ed1 n\u00e0y v\u00e0 c\u1eadp nh\u1eadt \u0111i\u1ec1u ki\u1ec7n v\u00f2ng l\u1eb7p \u0111\u1ec3 d\u1eebng sau khi \u0111\u1ea1t \u0111\u1ebfn s\u1ed1 ph\u1ea7n t\u1eed c\u1ea7n l\u1ecdc.</p> <p>\u0110\u00e2y l\u00e0 h\u00e0m sau khi s\u1eeda:</p> <p></p> <p>B\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng ChatGPT \u0111\u1ec3 s\u1eeda code v\u00e0 th\u00eam t\u00ednh n\u0103ng, ta c\u00f3 th\u1ec3 ti\u1ebft ki\u1ec7m th\u1eddi gian, \u0111\u1ea3m b\u1ea3o r\u1eb1ng c\u00e1c thay \u0111\u1ed5i \u0111\u01b0\u1ee3c c\u00e0i \u0111\u1eb7t ch\u00ednh x\u00e1c, v\u00e0 h\u1ecdc th\u00eam nhi\u1ec1u k\u1ef9 thu\u1eadt \u0111\u1ec3 c\u1ea3i ti\u1ebfn code.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#viet-docs-va-comment-cho-code","title":"Vi\u1ebft docs v\u00e0 comment cho code","text":"<p>Cu\u1ed1i c\u00f9ng, ta c\u00f3 th\u1ec3 d\u00f9ng ChatGPT \u0111\u1ec3 vi\u1ebft docs v\u00e0 comment cho code. T\u00e0i li\u1ec7u v\u00e0 comment \u0111\u01b0\u1ee3c vi\u1ebft t\u1ed1t l\u00e0 r\u1ea5t quan tr\u1ecdng \u0111\u1ec3 duy tr\u00ec kh\u1ea3 n\u0103ng b\u1ea3o tr\u00ec codebase c\u1ee7a ch\u00fang ta.</p> <p>ChatGPT c\u00f3 th\u1ec3 gi\u00fap vi\u1ebft c\u00e1c comment v\u00e0 t\u00e0i li\u1ec7u r\u00f5 r\u00e0ng, ng\u1eafn g\u1ecdn v\u00e0 \u0111\u1ea7y \u0111\u1ee7 th\u00f4ng tin, ngay c\u1ea3 v\u1edbi c\u00e1c code ph\u1ee9c t\u1ea1p trong th\u1ebf gi\u1edbi th\u1ef1c.</p> <p>V\u00ed d\u1ee5 nh\u01b0 ta c\u00f3 m\u1ed9t h\u00e0m TypeScript t\u00ecm ki\u1ebfm m\u1ed9t pattern n\u00e0o \u0111\u00f3 trong m\u1ed9t \u0111o\u1ea1n v\u0103n b\u1ea3n v\u00e0 tr\u1ea3 v\u1ec1 t\u1ea5t c\u1ea3 c\u00e1c n\u01a1i n\u00f3 xu\u1ea5t hi\u1ec7n trong v\u0103n b\u1ea3n.</p> <p>\u0110\u00e2y l\u00e0 h\u00e0m \u0111\u00f3:</p> <p></p> <p>Ta c\u00f3 th\u1ec3 y\u00eau c\u1ea7u ChatGPT gi\u00fap vi\u1ebft docs v\u00e0 comment cho h\u00e0m n\u00e0y, gi\u1ea3i th\u00edch m\u1ee5c \u0111\u00edch, th\u00f4ng s\u1ed1 v\u00e0 gi\u00e1 tr\u1ecb tr\u1ea3 v\u1ec1 c\u1ee7a n\u00f3.</p> <p>\u0110\u00e2y l\u00e0 nh\u1eefng g\u00ec ChatGPT c\u00f3 th\u1ec3 \u0111\u1ec1 xu\u1ea5t:</p> <p></p> <p>B\u1eb1ng c\u00e1ch d\u00f9ng ChatGPT \u0111\u1ec3 vi\u1ebft docs v\u00e0 comment, ta c\u00f3 th\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng code d\u1ec5 hi\u1ec3u v\u00e0 d\u1ec5 b\u1ea3o tr\u00ec, gi\u00fap c\u00e1c dev kh\u00e1c d\u1ec5 ti\u1ebfp c\u1eadn code h\u01a1n.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#luu-y","title":"L\u01b0u \u00fd","text":"<p>C\u1ea7n nh\u1edb l\u00e0 ChatGPT c\u0169ng c\u00f3 nh\u1eefng h\u1ea1n ch\u1ebf v\u00e0 kh\u00f4ng n\u00ean d\u1ef1a v\u00e0o m\u1ed9t c\u00e1ch m\u00f9 qu\u00e1ng. \u0110\u00f4i khi n\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0a ra c\u00e2u tr\u1ea3 l\u1eddi kh\u00f4ng t\u1ed1i \u01b0u ho\u1eb7c sai, n\u00ean ta c\u1ea7n suy ngh\u0129 ch\u00edn ch\u1eafn v\u00e0 \u0111\u1eb7t c\u00e2u h\u1ecfi \u0111\u00fang. V\u00ed d\u1ee5, n\u1ebfu ta ki\u1ec3m tra v\u00ed d\u1ee5 Rust \u0111\u01b0\u1ee3c t\u1ea1o tr\u01b0\u1edbc \u0111\u00f3 \u0111\u1ec3 \u0111\u1ecdc m\u1ed9t object t\u1eeb m\u1ed9t GCS bucket theo \u0111o\u1ea1n, ta s\u1ebd th\u1ea5y r\u1eb1ng n\u00f3 kh\u00f4ng l\u00fd t\u01b0\u1edfng cho c\u00e1c object r\u1ea5t l\u1edbn v\u00ec n\u00f3 \u0111\u1ecdc to\u00e0n b\u1ed9 object v\u00e0o b\u1ed9 nh\u1edb.</p> <p>L\u00e0 dev, ta ph\u1ea3i ch\u1ecbu tr\u00e1ch nhi\u1ec7m v\u1ec1 code v\u00e0 gi\u1ea3i ph\u00e1p c\u1ee7a ch\u00ednh ch\u00fang ta. S\u1eed d\u1ee5ng ChatGPT ch\u1ec9 n\u00ean d\u1eebng \u1edf m\u1ee9c tr\u1ee3 gi\u00fap, h\u00e3y \u0111\u1ea3m b\u1ea3o ki\u1ec3m tra k\u1ef9 c\u00e1c \u0111\u1ec1 xu\u1ea5t c\u1ee7a n\u00f3 v\u00e0 duy tr\u00ec quy\u1ec1n ki\u1ec3m so\u00e1t c\u00f4ng vi\u1ec7c c\u1ee7a b\u1ea3n th\u00e2n.</p>"},{"location":"ByteByteGo/chatgpt-hacks/#tong-ket","title":"T\u1ed5ng k\u1ebft","text":"<p>ChatGPT l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 thay \u0111\u1ed5i cu\u1ed9c ch\u01a1i d\u00e0nh cho c\u00e1c dev. N\u00f3 gi\u00fap ta gi\u1ea3i quy\u1ebft c\u00e1c b\u00e0i to\u00e1n ph\u1ee9c t\u1ea1p, hi\u1ec3u ng\u00f4n ng\u1eef m\u1edbi v\u00e0 c\u1ea3i thi\u1ec7n code c\u1ee7a ch\u00fang ta m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p>B\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng ChatGPT, ta c\u00f3 th\u1ec3 tr\u1edf th\u00e0nh dev gi\u1ecfi h\u01a1n v\u00e0 l\u00e0m cho c\u00f4ng vi\u1ec7c c\u1ee7a m\u00ecnh tr\u1edf n\u00ean th\u00fa v\u1ecb h\u01a1n.</p>"},{"location":"ByteByteGo/choose-database/","title":"L\u00e0m sao ch\u1ecdn database cho \u0111\u00fang?","text":""},{"location":"ByteByteGo/choose-database/#nguon","title":"Ngu\u1ed3n","text":"<p> How To Choose The Right Database?</p>"},{"location":"ByteByteGo/choose-database/#mo-au","title":"M\u1edf \u0111\u1ea7u","text":"<p>Khi x\u00e2y d\u1ef1ng m\u1ed9t h\u1ec7 th\u1ed1ng c\u00f3 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng cao (highly scalable), vi\u1ec7c ch\u1ecdn \u0111\u00fang database th\u01b0\u1eddng l\u00e0 quy\u1ebft \u0111\u1ecbnh quan tr\u1ecdng nh\u1ea5t m\u00e0 ta ph\u1ea3i \u0111\u01b0a ra. N\u1ebfu b\u1ea1n ph\u1ea3i ch\u1ecdn database ti\u1ebfp theo cho business \u0111ang ph\u00e1t tri\u1ec3n c\u1ef1c nhanh c\u1ee7a m\u00ecnh, sau \u0111\u00e2y l\u00e0 c\u00e1c \u0111i\u1ec3m quan tr\u1ecdng c\u1ea7n l\u01b0u \u00fd. </p> <p>Ta \u0111ang n\u00f3i v\u1ec1 vi\u1ec7c ch\u1ecdn database cho m\u1ed9t business \u0111ang ph\u00e1t tri\u1ec3n th\u1ef1c s\u1ef1, n\u01a1i m\u00e0 m\u1ed9t l\u1ef1a ch\u1ecdn t\u1ed3i s\u1ebd d\u1eabn \u0111\u1ebfn th\u1eddi gian s\u1eadp k\u00e9o d\u00e0i, g\u00e2y \u1ea3nh h\u01b0\u1edfng x\u1ea5u \u0111\u1ebfn ng\u01b0\u1eddi d\u00f9ng, th\u1eadm ch\u00ed m\u1ea5t d\u1eef li\u1ec7u ch\u1ee9 kh\u00f4ng ph\u1ea3i ch\u01a1i.</p>"},{"location":"ByteByteGo/choose-database/#co-can-thiet-khong","title":"C\u00f3 c\u1ea7n thi\u1ebft kh\u00f4ng?","text":"<p>\u0110\u1ea7u ti\u00ean, ta c\u1ea7n tr\u1ea3 l\u1eddi c\u00e1c c\u00e2u h\u1ecfi sau:</p> <ul> <li>Ta c\u00f3 th\u1ef1c s\u1ef1 c\u1ea7n m\u1ed9t database kh\u00e1c hay kh\u00f4ng? </li> <li>C\u00f3 l\u00fd do g\u00ec \u0111\u1ee7 thuy\u1ebft ph\u1ee5c \u0111\u1ec3 thay \u0111\u1ed5i database kh\u00f4ng? </li> <li>Database hi\u1ec7n t\u1ea1i c\u00f3 \u0111ang \u0111\u1ea1t \u0111\u1ebfn gi\u1edbi h\u1ea1n hay kh\u00f4ng? C\u00f3 th\u1ec3 \u0111\u1ed9 tr\u1ec5 p95 \u0111ang qu\u00e1 cao. C\u00f3 th\u1ec3 b\u1ed9 nh\u1edb database b\u00e2y gi\u1edd \u0111ang qu\u00e1 t\u1ea3i, v\u00e0 m\u1ed9t request \u0111\u01a1n gi\u1ea3n c\u0169ng c\u1ea7n r\u1ea5t nhi\u1ec1u th\u1eddi gian. </li> </ul> <p>B\u1ea5t k\u1ec3 v\u1ea5n \u0111\u1ec1 c\u00f3 l\u00e0 g\u00ec \u0111i n\u1eefa, h\u00e3y ch\u1eafc ch\u1eafn r\u1eb1ng ch\u00fang kh\u00f4ng d\u1ec5 gi\u1ea3i quy\u1ebft v\u1edbi database hi\u1ec7n t\u1ea1i. </p> <p>H\u00e3y \u0111\u1ecdc \u0111i \u0111\u1ecdc l\u1ea1i h\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng c\u1ee7a database hi\u1ec7n t\u1ea1i. S\u1ebd c\u00f3 th\u1ec3 c\u00f3 m\u1ed9t ho\u1eb7c hai \u0111i\u1ec3m g\u00ec \u0111\u00f3 c\u00f3 th\u1ec3 gi\u1ea3i quy\u1ebft s\u01a1 b\u1ed9 v\u1ea5n \u0111\u1ec1 c\u1ee7a ch\u00fang ta. Vi\u1ec7c n\u00e0y r\u1ea5t h\u1eefu \u00edch, v\u00ec chuy\u1ec3n \u0111\u1ed5i database t\u1ed1n r\u1ea5t nhi\u1ec1u th\u1eddi gian, th\u01b0\u1eddng l\u00e0 nhi\u1ec1u h\u01a1n b\u1ea1n ngh\u0129. C\u00e1c \u0111i\u1ec3m m\u1ea5u ch\u1ed1t n\u00e0y c\u00f3 th\u1ec3 l\u00e0 vi\u1ec7c \u0111i\u1ec1u ch\u1ec9nh k\u00edch th\u01b0\u1edbc b\u1ed9 nh\u1edb, ch\u1ecdn m\u1ed9t ki\u1ec3u n\u00e9n d\u1eef li\u1ec7u kh\u00e1c ho\u1eb7c m\u1ed9t ki\u1ec3u garbage collection kh\u00e1c ch\u1eb3ng h\u1ea1n. Database r\u1ea5t ph\u1ee9c t\u1ea1p v\u00e0 c\u00f3 t\u00ednh \u0111i\u1ec1u ch\u1ec9nh cao. H\u00e3y ch\u1eafc r\u1eb1ng b\u1ea1n hi\u1ec3u \u0111\u01b0\u1ee3c database hi\u1ec7n t\u1ea1i, hi\u1ec3u \u0111\u01b0\u1ee3c gi\u1edbi h\u1ea1n c\u1ee7a n\u00f3.</p> <p>H\u1ecfi c\u00e1c chuy\u00ean gia trong c\u1ed9ng \u0111\u1ed3ng. M\u00f4 t\u1ea3 v\u1ea5n \u0111\u1ec1 c\u1ee7a b\u1ea1n. Ai bi\u1ebft s\u1ebd tr\u1ea3 l\u1eddi, th\u01b0\u1eddng l\u00e0 theo nh\u1eefng c\u00e1ch r\u1ea5t b\u1ea5t ng\u1edd.</p> <p>\u0110\u1ec3 t\u00ecm th\u00eam m\u1ed9t s\u1ed1 kho\u1ea3ng tr\u1ed1ng ch\u01b0a \u0111\u01b0\u1ee3c khai th\u00e1c, c\u00f3 th\u1ec3 s\u1ebd c\u00f3 m\u1ed9t s\u1ed1 b\u1ea3n v\u00e1 cho ki\u1ebfn tr\u00fac \u1ee9ng d\u1ee5ng, gi\u00fap ta c\u00f3 l\u1ed1i tho\u00e1t. C\u00f3 th\u1ec3 th\u00eam m\u1ed9t cache tr\u01b0\u1edbc n\u00f3, v\u00e0 cho ta th\u00eam v\u00e0i th\u00e1ng nghi\u00ean c\u1ee9u kh\u00f4ng? C\u00f3 th\u1ec3 th\u00eam v\u00e0i replica \u0111\u1ec3 gi\u1ea3m t\u1ea3i vi\u1ec7c \u0111\u1ecdc d\u1eef li\u1ec7u kh\u00f4ng? C\u00f3 th\u1ec3 shard database ho\u1eb7c partition n\u00f3 theo c\u00e1ch n\u00e0o \u0111\u00f3 kh\u00f4ng? \u0110i\u1ec3m quan tr\u1ecdng l\u00e0: Chuy\u1ec3n \u0111\u1ed5i database tr\u00ean m\u00f4i tr\u01b0\u1eddng live r\u1ea5t r\u1ee7i ro v\u00e0 t\u1ed1n k\u00e9m. Ta c\u1ea7n ch\u1eafc r\u1eb1ng kh\u00f4ng c\u00f3 c\u00e1ch n\u00e0o \u0111\u1ec3 ti\u1ebfp t\u1ee5c d\u00f9ng database hi\u1ec7n t\u1ea1i n\u1eefa.</p>"},{"location":"ByteByteGo/choose-database/#lam-sao-chon-database-moi","title":"L\u00e0m sao ch\u1ecdn database m\u1edfi?","text":"<p>Ok, gi\u1edd coi nh\u01b0 ta \u0111\u00e3 h\u1ebft c\u00e1ch v\u1edbi database hi\u1ec7n t\u1ea1i. Ch\u1ecdn c\u00e1i m\u1edbi sao \u0111\u00e2y? </p> <p>Nh\u1eefng dev nh\u01b0 ch\u00fang ta th\u01b0\u1eddng b\u1ecb thu h\u00fat b\u1edfi c\u00e1i m\u1edbi, nh\u01b0 nh\u1eefng con thi\u00eau th\u00e2n lao v\u00e0o ng\u1ecdn l\u1eeda. Nh\u01b0ng khi nh\u1eafc \u0111\u1ebfn database, c\u00e0ng ch\u00e1n th\u00ec c\u00e0ng t\u1ed1t. Ta n\u00ean ch\u1ecdn nh\u1eefng c\u00e1i n\u00e0o l\u00e2u \u0111\u1eddi v\u00e0 \u0111\u00e3 \u0111\u01b0\u1ee3c test k\u1ef9. B\u1ea5t k\u1ec3 m\u1ea3ng b\u1ea1n \u0111ang l\u00e0m l\u00e0 g\u00ec, s\u1ebd c\u00f3 m\u1ed9t c\u1ed9ng \u0111\u1ed3ng v\u00e0 th\u1ecb tr\u01b0\u1eddng v\u1edbi nh\u1eefng nh\u00e0 qu\u1ea3n tr\u1ecb v\u00e0 dev c\u00f3 kinh nghi\u1ec7m v\u1edbi lo\u1ea1i database m\u00e0 ta \u0111ang c\u00e2n nh\u1eafc.</p> <p>Ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m l\u00e0 v\u1ec1 s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i. Khi nh\u1eafc \u0111\u1ebfn database, n\u00f3 c\u00e0ng \u0111\u00fang h\u01a1n. C\u1ea7n nh\u1edb l\u00e0 kh\u00f4ng c\u00f3 g\u00ec mi\u1ec5n ph\u00ed h\u1ebft. C\u1ea9n th\u1eadn v\u1edbi nh\u1eefng l\u1eddi ti\u1ebfp th\u1ecb th\u00e1i qu\u00e1. S\u1ebd lu\u00f4n c\u00f3 nh\u1eefng chi ph\u00ed \u1ea9n sau nh\u1eefng l\u1eddi c\u00f3 c\u00e1nh nh\u01b0 \"kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng \u0111\u1ebfn v\u00f4 h\u1ea1n m\u00e0 kh\u00f4ng t\u1ed1n c\u00f4ng s\u1ee9c\". H\u00e3y \u0111\u00e0o s\u00e2u nghi\u00ean c\u1ee9u \u0111\u1ec3 xem b\u1ea1n c\u1ea7n \u0111\u00e1nh \u0111\u1ed5i g\u00ec. H\u00e3y \u0111\u1ecdc h\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng thay v\u00ec xem m\u1ed7i qu\u1ea3ng c\u00e1o. \u1ede \u0111\u00f3 th\u01b0\u1eddng s\u1ebd c\u00f3 m\u1ed9t ph\u1ea7n g\u1ecdi l\u00e0 \"Gi\u1edbi h\u1ea1n\" (Limits). Ph\u1ea7n FAQ c\u0169ng r\u1ea5t h\u1eefu \u00edch. C\u00e1c ph\u1ea7n n\u00e0y l\u00e0 n\u01a1i nh\u1eefng gi\u1edbi h\u1ea1n c\u1ee7a database th\u1ef1c s\u1ef1 \u0111\u01b0\u1ee3c ph\u01a1i b\u00e0y.</p> <p></p> <p>Theo kinh nghi\u1ec7m c\u1ee7a ch\u00fang t\u00f4i, c\u00e0ng tuy\u00ean b\u1ed1 h\u1ea5p d\u1eabn th\u00ec c\u00e1c tuy\u00ean b\u1ed1 t\u1eeb ch\u1ed1i tr\u00e1ch nhi\u1ec7m (disclaimers) c\u00e0ng d\u00e0i h\u01a1n \u1edf sau. V\u00ed d\u1ee5, nhi\u1ec1u database NoSQL h\u1ed7 tr\u1ee3 m\u1edf r\u1ed9ng nhi\u1ec1u h\u01a1n so v\u1edbi c\u00e1c database quan h\u1ec7 c\u0169. Ch\u00fang th\u01b0\u1eddng tuy\u00ean b\u1ed1 r\u1eb1ng c\u00f3 th\u1ec3 h\u1ed7 tr\u1ee3 m\u1edf r\u1ed9ng theo chi\u1ec1u ngang g\u1ea7n nh\u01b0 l\u00e0 tuy\u1ebfn t\u00ednh. Tuy nhi\u00ean, \u0111i \u0111\u00f4i v\u1edbi \u0111\u00f3 l\u00e0 nh\u1eefng \u0111\u00e1nh \u0111\u1ed5i nh\u01b0 sau. M\u1ed9t, ch\u00fang lo\u1ea1i b\u1ecf ho\u1eb7c h\u1ea1n ch\u1ebf vi\u1ec7c \u0111\u1ea3m b\u1ea3o t\u00ednh transactional. Hai, ch\u00fang h\u1ea1n ch\u1ebf nghi\u00eam tr\u1ecdng t\u00ednh linh ho\u1ea1t c\u1ee7a m\u00f4 h\u00ecnh d\u1eef li\u1ec7u. Kh\u00f4ng c\u00f3 truy v\u1ea5n n\u00e0o gi\u1eefa c\u00e1c data entity. Data b\u1ecb denormalize khi c\u00f9ng m\u1ed9t data \u0111\u01b0\u1ee3c l\u01b0u t\u1ea1i nhi\u1ec1u collection kh\u00e1c nhau \u0111\u1ec3 h\u1ed7 tr\u1ee3 nhi\u1ec1u ki\u1ec3u truy c\u1eadp data kh\u00e1c nhau. </p> <p></p> <p>\u0110\u1ec3 bi\u1ebft th\u00eam v\u1ec1 m\u1ed9t lo\u1ea1i database n\u00e0o \u0111\u00f3, gia nh\u1eadp nh\u00f3m chat. H\u1ecfi nhi\u1ec1u c\u00e2u h\u1ecfi. V\u1edbi c\u00e1c project m\u00e3 ngu\u1ed3n m\u1edf, \u0111\u1ecdc GitHub issues. C\u1ed1 g\u1eafng bi\u1ebft c\u00e0ng nhi\u1ec1u c\u00e0ng t\u1ed1t v\u1ec1 c\u00e1c \u1ee9ng vi\u00ean database m\u00e0 ta \u0111ang c\u00e2n nh\u1eafc. Th\u1eddi gian \u0111\u1ea7u t\u01b0 v\u00e0o cho \u0111\u1ebfn gi\u1edd gi\u1edd v\u1eabn t\u01b0\u01a1ng \u0111\u1ed1i nh\u1ecf \u0111\u1ea5y.</p>"},{"location":"ByteByteGo/choose-database/#test-database-moi-sao-ay","title":"Test database m\u1edfi sao \u0111\u00e2y?","text":"<p>R\u1ed3i, gi\u1edd ta \u0111\u00e3 c\u00f3 m\u1ed9t s\u1ed1 \u00edt \u1ee9ng vi\u00ean c\u00f2n s\u00f3t l\u1ea1i, ti\u1ebfp theo l\u00e0m g\u00ec? </p> <p>T\u1ea1o bench test v\u1edbi data c\u1ee7a ch\u00ednh ch\u00fang ta cho m\u1ed7i \u1ee9ng vi\u00ean, v\u1edbi ki\u1ec3u truy c\u1eadp nh\u01b0 th\u1ef1c t\u1ebf lu\u00f4n. Ta c\u00f3 data \u0111\u00f3 m\u00e0 ph\u1ea3i kh\u00f4ng? D\u00f9 sao th\u00ec database hi\u1ec7n t\u1ea1i c\u0169ng \u0111ang qu\u00e1 t\u1ea3i r\u1ed3i, n\u00ean c\u00f3 m\u1ed9t t\u1eadp data t\u01b0\u1ee3ng tr\u01b0ng c\u0169ng l\u00e0 c\u00f3 th\u1ec3. \u0110\u00fang, \u0111i\u1ec1u n\u00e0y s\u1ebd t\u1ed1n k\u00e9m, v\u00e0 c\u00f3 th\u1ec3 m\u1ea5t h\u00e0ng tu\u1ea7n, nh\u01b0ng kh\u00f4ng th\u1ec3 b\u1ecf qua b\u01b0\u1edbc n\u00e0y. Vi\u1ec7c chuy\u1ec3n \u0111\u1ed5i database tr\u00ean live r\u1ea5t r\u1ee7i ro, v\u00e0 s\u1ebd t\u1ed1n nhi\u1ec1u c\u00f4ng s\u1ee9c h\u01a1n l\u00e0 vi\u1ec7c benchmark. N\u1ebfu ta \u0111ang \u0111\u00e1nh c\u01b0\u1ee3c s\u1ef1 nghi\u1ec7p v\u00e0o c\u00e1i n\u00e0y, h\u00e3y ch\u1eafc ch\u1eafn l\u00e0 n\u00f3 ho\u1ea1t \u0111\u1ed9ng. </p> <p>Trong khi benchmark, h\u00e3y ch\u00fa \u00fd \u0111\u1ebfn c\u00e1c ngo\u1ea1i l\u1ec7. \u0110o p99 c\u1ee7a m\u1ecdi th\u1ee9. p50 kh\u00f4ng c\u00f3 \u00fd ngh\u0129a g\u00ec \u0111\u00e2u. C\u1ed1 g\u1eafng m\u00f4 ph\u1ecfng l\u1ea1i m\u00f4i tr\u01b0\u1eddng live, v\u00e0 \u0111\u1ea9y gi\u1edbi h\u1ea1n \u0111i xa h\u01a1n xem n\u00f3 ch\u1ecbu \u0111\u01b0\u1ee3c \u0111\u1ebfn \u0111\u00e2u. </p> <p></p> <p>Th\u1eed m\u1ed9t s\u1ed1 t\u00e1c v\u1ee5 v\u1eadn h\u00e0nh r\u1ee7i ro h\u01a1n, nh\u01b0 ph\u00e1 h\u1ecfng m\u1ed9t node, ho\u1eb7c test xem c\u00f3 h\u1ecfng data khi b\u1ecb ph\u00e2n v\u00f9ng d\u1eef li\u1ec7u kh\u00f4ng. Th\u1eed t\u0103ng, gi\u1ea3m sharding, n\u1ebfu c\u00f3 th\u1ec3. Sau khi ki\u1ec3m tra h\u1ebft, l\u00ean k\u1ebf ho\u1ea1ch chuy\u1ec3n \u0111\u1ed5i database c\u1ea9n th\u1eadn. Vi\u1ebft ra m\u1ed9t k\u1ebf ho\u1ea1ch chuy\u1ec3n \u0111\u1ed5i t\u1eebng b\u01b0\u1edbc v\u00e0 nh\u1edd \u0111\u1ed3ng nghi\u1ec7p review l\u1ea1i cho c\u1ea9n th\u1eadn. N\u1ebfu c\u00f3 th\u1ec3, chuy\u1ec3n m\u1ed9t service nh\u1ecf tr\u01b0\u1edbc, v\u00e0 l\u1ea5y th\u1eadt nhi\u1ec1u th\u00f4ng tin t\u1eeb n\u00f3.</p> <p>Ch\u1ecdn ra m\u1ed9t database \u0111\u00fang kh\u00f4ng h\u1ec1 h\u1ea5p d\u1eabn t\u00ed n\u00e0o, v\u00e0 t\u1ed1n r\u1ea5t nhi\u1ec1u c\u00f4ng s\u1ee9c. Chuy\u1ec3n \u0111\u1ed5i sang m\u1ed9t database m\u1edbi trong th\u1ef1c t\u1ebf c\u00f3 th\u1ec3 m\u1ea5t nhi\u1ec1u n\u0103m \u1edf quy m\u00f4 l\u1edbn. Ch\u00fac may m\u1eafn.</p>"},{"location":"ByteByteGo/ci-cd/","title":"CI/CD l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/ci-cd/#nguon","title":"Ngu\u1ed3n","text":"<p> CI/CD In 5 Minutes | Is It Worth The Hassle: Crash Course System Design #2</p>"},{"location":"ByteByteGo/ci-cd/#tong-quan-ve-cicd","title":"T\u1ed5ng quan v\u1ec1 CI/CD","text":"<p>CI/CD (Continuous Integration / Continuous Delivery, l\u01b0\u1ee3c d\u1ecbch l\u00e0 T\u00edch h\u1ee3p Li\u00ean t\u1ee5c / Ph\u00e2n ph\u1ed1i Li\u00ean t\u1ee5c) t\u1ef1 \u0111\u1ed9ng ho\u00e1 quy tr\u00ecnh ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m t\u1eeb code ban \u0111\u1ea7u cho \u0111\u1ebfn khi deploy (tri\u1ec3n khai). N\u00f3 lo\u1ea1i b\u1ecf ph\u1ea7n l\u1edbn s\u1ef1 can thi\u1ec7p th\u1ee7 c\u00f4ng c\u1ee7a con ng\u01b0\u1eddi \u0111\u1ec3 \u0111\u01b0a code m\u1edbi l\u00ean m\u00f4i tr\u01b0\u1eddng live.</p> <p></p> <p>CI/CD \u0111\u1ea3m nhi\u1ec7m vi\u1ec7c build, test v\u00e0 deploy code m\u1edbi v\u00e0o m\u00f4i tr\u01b0\u1eddng live. V\u1ec1 m\u1eb7t l\u00fd thuy\u1ebft th\u00ec n\u00f3 cho ph\u00e9p c\u00e1c nh\u00f3m dev deploy ph\u1ea7n m\u1ec1m nhanh h\u01a1n. Nghe c\u00f3 v\u1ebb hay nh\u01b0ng c\u00f3 th\u1ef1c s\u1ef1 l\u00e0 nh\u01b0 v\u1eady kh\u00f4ng?</p> <p>C\u00e2u tr\u1ea3 l\u1eddi l\u00e0 c\u00f2n tu\u1ef3. C\u00f9ng xem x\u00e9t t\u1eebng ph\u1ea7n c\u1ee7a CI/CD nh\u00e9.</p>"},{"location":"ByteByteGo/ci-cd/#ci","title":"CI","text":"<p>CI \u00edt g\u00e2y tranh c\u00e3i h\u01a1n v\u00e0 n\u00f3 c\u0169ng ph\u1ed5 bi\u1ebfn h\u01a1n CD. S\u01a1 s\u01a1 th\u00ec n\u00f3 l\u00e0 c\u00e1ch s\u1eed d\u1ee5ng t\u1ef1 d\u1ed9ng ho\u00e1 \u0111\u1ec3 cho ph\u00e9p c\u00e1c team h\u1ee3p nh\u1ea5t thay \u0111\u1ed5i v\u1ec1 code v\u00e0o repository (kho l\u01b0u tr\u1eef) s\u1edbm h\u01a1n v\u00e0 th\u01b0\u1eddng xuy\u00ean h\u01a1n. M\u1ed7i commit s\u1ebd k\u00edch ho\u1ea1t m\u1ed9t quy tr\u00ecnh l\u00e0m vi\u1ec7c t\u1ef1 \u0111\u1ed9ng tr\u00ean m\u1ed9t m\u00e1y ch\u1ee7 CI, m\u00e1y ch\u1ee7 n\u00e0y sau \u0111\u00f3 ch\u1ea1y m\u1ed9t lo\u1ea1t c\u00e1c t\u00e1c v\u1ee5 \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng commit \u0111\u1ee7 an to\u00e0n \u0111\u1ec3 merge v\u00e0o main branch.</p> <p></p> <p>M\u1ed9t quy tr\u00ecnh CI t\u1ed1t d\u1ef1a tr\u00ean m\u1ed9t t\u1eadp c\u00e1c test ngon l\u00e0nh. S\u1ebd kh\u00f4ng d\u1ec5 \u0111\u1ec3 duy tr\u00ec m\u1ed9t t\u1eadp c\u00e1c test nh\u01b0 v\u1eady v\u1edbi ph\u1ea1m vi bao ph\u1ee7 (coverage) \u0111\u1ea7y \u0111\u1ee7. Ph\u1ea1m vi test cao th\u01b0\u1eddng m\u1ea5t nhi\u1ec1u th\u1eddi gian h\u01a1n \u0111\u1ec3 ch\u1ea1y. \u0110i\u1ec1u n\u00e0y \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn n\u0103ng su\u1ea5t ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m. Kh\u00e1 kh\u00f3 \u0111\u1ec3 c\u00e2n b\u1eb1ng vi\u1ec7c n\u00e0y nh\u01b0ng c\u0169ng \u0111\u00e1ng \u0111\u1ec3 l\u00e0m cho t\u1ed1t.</p> <p>C\u00e1c c\u00f4ng c\u1ee5 ph\u1ed5 bi\u1ebfn trong CI bao g\u1ed3m nh\u1eefng g\u00ec? M\u1ed9t h\u1ec7 th\u1ed1ng qu\u1ea3n l\u00fd m\u00e3 ngu\u1ed3n t\u1ed1t s\u1ebd l\u00e0 n\u1ec1n t\u1ea3ng ph\u00e1t tri\u1ec3n. GitHub l\u00e0 m\u1ed9t v\u00ed d\u1ee5 r\u1ea5t n\u1ed5i ti\u1ebfng. N\u00f3 ch\u1ee9 m\u1ecdi th\u1ee9 c\u1ea7n \u0111\u1ec3 x\u00e2y d\u1ef1ng ph\u1ea7n m\u1ec1m. N\u00f3 bao g\u1ed3m m\u00e3 ngu\u1ed3n, t\u1eadp l\u1ec7nh test, v\u00e0 c\u00e1c t\u1eadp l\u1ec7nh \u0111\u1ec3 build c\u00e1c \u1ee9ng d\u1ee5ng ph\u1ea7n m\u1ec1m.</p> <p></p> <p>C\u00f3 nhi\u1ec1u c\u00f4ng c\u1ee5 \u0111\u1ec3 qu\u1ea3n l\u00fd quy tr\u00ecnh CI. GitHub Actions v\u00e0 Buildkite l\u00e0 m\u1ed9t s\u1ed1 v\u00ed d\u1ee5. Jenkins, CircleCI v\u00e0 TravisCI c\u0169ng ngon. C\u00e1c c\u00f4ng c\u1ee5 n\u00e0y qu\u1ea3n l\u00fd build v\u00e0 c\u00e1c t\u00e1c v\u1ee5 test trong CI. </p> <p>C\u00f3 nhi\u1ec1u c\u00f4ng c\u1ee5 test \u0111\u1ec3 vi\u1ebft v\u00e0 ch\u1ea1y test. C\u00e1c c\u00f4ng c\u1ee5 n\u00e0y th\u01b0\u1eddng thi\u00ean v\u1ec1 m\u1ed9t ng\u00f4n ng\u1eef v\u00e0 h\u1ec7 sinh th\u00e1i c\u1ee5 th\u1ec3 n\u00e0o \u0111\u00f3. V\u00ed d\u1ee5, v\u1edbi JS, Jest l\u00e0 m\u1ed9t v\u00ed d\u1ee5 v\u1ec1 framework unit test, trong khi \u0111\u00f3, playwright v\u00e0 cypress l\u00e0 c\u00e1c framework integration test cho \u1ee9ng d\u1ee5ng web. </p> <p>C\u00e1c c\u00f4ng c\u1ee5 build c\u00f2n \u0111a d\u1ea1ng h\u01a1n v\u00e0 thi\u00ean v\u1ec1 m\u1ed9t h\u1ec7 sinh th\u00e1i c\u1ee5 th\u1ec3. Gradle l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 build m\u1ea1nh m\u1ebd cho Java. H\u1ec7 sinh th\u00e1i build cho JavaScript b\u1ecb ph\u00e2n m\u1ea3nh v\u00e0 kh\u00f3 theo d\u00f5i. Webpack l\u00e0 ti\u00eau chu\u1ea9n, nh\u01b0ng nhi\u1ec1u c\u00f4ng c\u1ee5 build m\u1edbi l\u1ea1i cho l\u00e0 m\u00ecnh nhanh h\u01a1n, nh\u01b0ng ch\u01b0a th\u1ec3 c\u00f3 t\u00ednh m\u1edf r\u1ed9ng cao nh\u01b0 Webpack.</p> <p></p>"},{"location":"ByteByteGo/ci-cd/#cd","title":"CD","text":"<p>Th\u1ef1c ra, \u0111\u1ea1t \u0111\u01b0\u1ee3c CD th\u1ef1c s\u1ef1 r\u1ea5t l\u00e0 kh\u00f3. C\u00f3 t\u1ed3n t\u1ea1i chuy\u1ec7n \u0111\u00f3, nh\u01b0ng th\u1ef1c t\u1ebf kh\u00f4ng ph\u1ed5 bi\u1ebfn nh\u01b0 CI.</p> <p></p> <p>Nhi\u1ec1u team ch\u1ec9 th\u1ef1c h\u00e0nh CD trong nh\u1eefng lo\u1ea1i h\u1ec7 th\u1ed1ng c\u01a1 b\u1ea3n nh\u1ea5t. C\u00e1c h\u1ec7 th\u00f4ng n\u00e0y th\u01b0\u1eddng stateless, nh\u01b0 API server ho\u1eb7c web server. V\u1edbi vi\u1ec7c gi\u00e1m s\u00e1t t\u1ed1t tr\u00ean live, c\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c tri\u1ec3n khai li\u00ean t\u1ee5c v\u1edbi r\u1ee7i ro t\u1ed1i thi\u1ec3u. Ch\u00fang stateless, v\u00e0 rollback c\u0169ng nhanh v\u00e0 \u00edt \u1ea3nh h\u01b0\u1edfng.</p> <p></p> <p>Vi\u1ec7c \u0111\u1eb7t c\u1edd \u0111\u1ec3 b\u1eadt t\u1eaft t\u00ednh n\u0103ng m\u1edbi c\u0169ng ph\u1ed5 bi\u1ebfn, n\u00f3 gi\u00fap t\u00e1ch b\u1ea1ch vi\u1ec7c ph\u00e1t tri\u1ec3n v\u00e0 k\u00edch ho\u1ea1t t\u00ednh n\u0103ng. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p ta c\u00f3 th\u1ec3 nhanh ch\u00f3ng t\u1eaft t\u00ednh n\u0103ng m\u1edbi n\u1ebfu c\u00f3 v\u1ea5n \u0111\u1ec1 m\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i rollback. </p> <p></p> <p>Tri\u1ec3n khai Canary c\u0169ng l\u00e0 m\u1ed9t vi\u1ec7c ph\u1ed5 bi\u1ebfn cho nh\u1eefng s\u1ea3n ph\u1ea9m v\u1edbi h\u00e0ng tr\u0103m tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng. N\u00f3 tri\u1ec3n khai code m\u1edbi cho m\u1ed9t nh\u00f3m nh\u1ecf ng\u01b0\u1eddi d\u00f9ng th\u00e0nh th\u1ea1o v\u00e0 c\u00e1c nh\u00e2n vi\u00ean - nh\u1eefng ng\u01b0\u1eddi \u0111\u00e1nh gi\u00e1 cao c\u00e1c t\u00ednh n\u0103ng m\u1edbi v\u00e0 s\u1eb5n s\u00e0ng ch\u1ea5p nh\u1eadn r\u1ee7i ro \u0111\u1ec3 gi\u00fap ph\u00e1t hi\u1ec7n c\u00e1c s\u1ef1 c\u1ed1 tr\u01b0\u1edbc khi code m\u1edbi \u0111\u01b0\u1ee3c \u0111\u01b0a v\u00e0o s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p team c\u00f3 th\u1ec3 test code m\u1edbi trong th\u1ebf gi\u1edbi th\u1ef1c, \u0111\u1ed3ng th\u1eddi h\u1ea1n ch\u1ebf thi\u1ec7t h\u1ea1i khi c\u00f3 v\u1ea5n \u0111\u1ec1 ph\u00e1t sinh. Nh\u1eefng k\u1ef9 thu\u1eadt n\u00e0y ho\u1ea1t \u0111\u1ed9ng t\u1ed1t cho c\u00e1c h\u1ec7 th\u1ed1ng stateless \u0111\u01a1n gi\u1ea3n.</p> <p></p> <p>M\u1eb7t kh\u00e1c, r\u1ea5t \u00edt team c\u00f3 t\u00e0i nguy\u00ean ho\u1eb7c ni\u1ec1m tin \u0111\u1ec3 d\u00f9ng CD trong c\u00e1c h\u1ec7 th\u1ed1ng stateful ph\u1ee9c t\u1ea1p nh\u01b0 c\u1ee5m database backend ho\u1eb7c c\u1ee5m websocket. Thay v\u00e0o \u0111\u00f3, c\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y th\u01b0\u1eddng c\u00f3 quy tr\u00ecnh tri\u1ec3n khai \u1ed5n \u0111\u1ecbnh, th\u1ee7 c\u00f4ng, r\u1ee7i ro v\u00e0 t\u1ed1n th\u1eddi gian. C\u1ea7n m\u1ed9t team chuy\u00ean bi\u1ec7t \u0111\u1ec3 lo vi\u1ec7c n\u00e0y. R\u1ea5t hi\u1ebfm khi th\u1ea5y c\u00e1c h\u1ec7 th\u1ed1ng tri\u1ec3n khai li\u00ean t\u1ee5c v\u00e0 t\u1ef1 \u0111\u1ed9ng.</p> <p></p> <p>C\u00f3 nhi\u1ec1u c\u00f4ng c\u1ee5 d\u00f9ng cho CD. C\u00e1c c\u00f4ng c\u1ee5 \u1edf tr\u00ean nh\u01b0 GitHub Actions, Buildkite v\u00e0 Jenkins \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng nhi\u1ec1u cho c\u00e1c t\u00e1c v\u1ee5 CD. Ngo\u00e0i ra c\u00f2n c\u00f3 c\u00e1c c\u00f4ng c\u1ee5 d\u00e0nh ri\u00eang cho c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng \u0111\u1ec3 gi\u00fap CD d\u1ec5 b\u1ea3o tr\u00ec h\u01a1n. V\u00ed d\u1ee5, tr\u00ean Kubernetes, ArgoCD r\u1ea5t hay \u0111\u01b0\u1ee3c d\u00f9ng.</p> <p></p> <p>T\u00f3m l\u1ea1i, CI/CD l\u00e0 m\u1ed9t ph\u01b0\u01a1ng ph\u00e1p ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m m\u1ea1nh m\u1ebd c\u00f3 th\u1ec3 gi\u00fap c\u00e1c team ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m nhanh v\u00e0 c\u00f3 ch\u1ea5t l\u01b0\u1ee3ng t\u1ed1t h\u01a1n. Tuy nhi\u00ean, \u0111\u00e2y kh\u00f4ng ph\u1ea3i l\u00e0 gi\u1ea3i ph\u00e1p cho m\u1ecdi v\u1ea5n \u0111\u1ec1 v\u00e0 vi\u1ec7c tri\u1ec3n khai gi\u1ea3i ph\u00e1p n\u00e0y c\u00f3 th\u1ec3 kh\u00e1c nhau tu\u1ef3 v\u00e0o m\u1ee9c \u0111\u1ed9 ph\u1ee9c t\u1ea1p c\u1ee7a h\u1ec7 th\u1ed1ng.</p>"},{"location":"ByteByteGo/client-architecture-patterns/","title":"C\u00e1c m\u00f4 h\u00ecnh ki\u1ebfn tr\u00fac Client ph\u1ed5 bi\u1ebfn","text":""},{"location":"ByteByteGo/client-architecture-patterns/#nguon","title":"Ngu\u1ed3n","text":"<p> Everything You NEED to Know About Client Architecture Patterns</p>"},{"location":"ByteByteGo/client-architecture-patterns/#lich-su","title":"L\u1ecbch s\u1eed","text":"<p>B\u1eaft \u0111\u1ea7u v\u1edbi m\u00f4 h\u00ecnh MVC (Model-View-Controller) \u0111\u00e3 t\u1ed3n t\u1ea1i g\u1ea7n n\u1eeda th\u1ebf k\u1ef7. \u0110\u00e2y l\u00e0 m\u1ed9t c\u00e1ch ti\u1ebfp c\u1eadn mang t\u00ednh \u0111\u1ed9t ph\u00e1, t\u00e1ch bi\u1ec7t gi\u1eefa UI, d\u1eef li\u1ec7u, v\u00e0 logic \u0111i\u1ec1u khi\u1ec3n, cho ph\u00e9p dev t\u1eadp trung v\u00e0o t\u1eebng ph\u1ea7n ri\u00eang l\u1ebb. Tuy nhi\u00ean, khi c\u00f4ng ngh\u1ec7 ph\u00e1t tri\u1ec3n, \u0111\u1ed9 ph\u1ee9c t\u1ea1p c\u1ee7a \u1ee9ng d\u1ee5ng c\u0169ng t\u0103ng l\u00ean, \u0111i\u1ec1u \u0111\u00f3 d\u1eabn \u0111\u1ebfn nhu c\u1ea7u v\u1ec1 c\u00e1c m\u00f4 h\u00ecnh m\u1edbi.</p>"},{"location":"ByteByteGo/client-architecture-patterns/#cac-mo-hinh","title":"C\u00e1c m\u00f4 h\u00ecnh","text":"<p>V\u1eady \u0111i\u1ec3m chung gi\u1eefa c\u00e1c m\u00f4 h\u00ecnh n\u00e0y l\u00e0 g\u00ec? T\u1ea5t c\u1ea3 \u0111\u1ec1u c\u00f3 <code>V</code> cho View, ph\u1ea7n m\u00e0 ng\u01b0\u1eddi d\u00f9ng t\u01b0\u01a1ng t\u00e1c. \u0110\u00e2y l\u00e0 \"g\u01b0\u01a1ng m\u1eb7t\" c\u1ee7a \u1ee9ng d\u1ee5ng, ch\u1ecbu tr\u00e1ch nhi\u1ec7m tr\u00ecnh b\u00e0y n\u1ed9i dung v\u00e0 thu th\u1eadp c\u00e1c thao t\u00e1c c\u1ee7a ng\u01b0\u1eddi d\u00f9ng. Ti\u1ebfp theo l\u00e0 <code>M</code> cho Model, ph\u1ea7n ch\u1ecbu tr\u00e1ch nhi\u1ec7m qu\u1ea3n l\u00fd logic nghi\u1ec7p v\u1ee5 v\u00e0 d\u1eef li\u1ec7u. N\u00f3 quan t\u00e2m \u0111\u1ebfn c\u00e1ch d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef v\u00e0 thao t\u00e1c.</p> <p></p> <p></p> <p>S\u1ef1 kh\u00e1c bi\u1ec7t th\u1ef1c s\u1ef1 x\u1ea3y ra \u1edf c\u00e1c th\u00e0nh ph\u1ea7n trung gian: Controller, Presenter, v\u00e0 ViewModel, l\u00e0 nh\u1eefng th\u00e0nh ph\u1ea7n gi\u00fap View v\u00e0 Model giao ti\u1ebfp m\u00e0 kh\u00f4ng li\u00ean k\u1ebft tr\u1ef1c ti\u1ebfp v\u1edbi nhau. </p> <p></p> <p></p> <p>H\u00e3y c\u00f9ng xem x\u00e9t v\u00ed d\u1ee5 \u0111\u01a1n gi\u1ea3n \u2013 m\u1ed9t ng\u01b0\u1eddi d\u00f9ng c\u1eadp nh\u1eadt \u1ea3nh \u0111\u1ea1i di\u1ec7n c\u1ee7a m\u00ecnh.</p>"},{"location":"ByteByteGo/client-architecture-patterns/#mvc","title":"MVC","text":"<p>V\u1edbi MVC, khi ng\u01b0\u1eddi d\u00f9ng ch\u1ecdn \u1ea3nh m\u1edbi, View g\u1eedi h\u00e0nh \u0111\u1ed9ng n\u00e0y \u0111\u1ebfn Controller, sau \u0111\u00f3 Controller s\u1ebd c\u1eadp nh\u1eadt Model. </p> <p></p> <p>Khi Model \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt, Controller s\u1ebd y\u00eau c\u1ea7u View refresh l\u1ea1i giao di\u1ec7n. \u0110\u00e2y l\u00e0 m\u1ed9t lu\u1ed3ng \u0111\u01a1n gi\u1ea3n nh\u01b0ng c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn vi\u1ec7c Controller b\u1ecb qu\u00e1 t\u1ea3i khi \u1ee9ng d\u1ee5ng ph\u00e1t tri\u1ec3n to ra.</p> <p></p>"},{"location":"ByteByteGo/client-architecture-patterns/#mvp","title":"MVP","text":"<p>MVP gi\u1edbi thi\u1ec7u m\u1ed9t Presenter r\u00f5 r\u00e0ng h\u01a1n, ch\u1ecbu tr\u00e1ch nhi\u1ec7m x\u1eed l\u00fd logic UI - bi\u1ebfn \u0111\u1ed5i d\u1eef li\u1ec7u t\u1eeb Model \u0111\u1ec3 hi\u1ec3n th\u1ecb, x\u1eed l\u00fd \u0111\u1ea7u v\u00e0o c\u1ee7a ng\u01b0\u1eddi d\u00f9ng, v\u00e0 \u0111i\u1ec1u ph\u1ed1i vi\u1ec7c c\u1eadp nh\u1eadt gi\u1eefa Model v\u00e0 View. \u0110i\u1ec1u n\u00e0y gi\u00fap View ch\u1ec9 c\u1ea7n t\u1eadp trung v\u00e0o vi\u1ec7c hi\u1ec3n th\u1ecb, trong khi Presenter x\u1eed l\u00fd m\u1ecdi h\u00e0nh vi UI. </p> <p></p> <p>Khi ng\u01b0\u1eddi d\u00f9ng ch\u1ecdn \u1ea3nh m\u1edbi, View s\u1ebd th\u00f4ng b\u00e1o cho Presenter, v\u00e0 Presenter s\u1ebd c\u1eadp nh\u1eadt Model, \u0111\u1ed3ng th\u1eddi \u0111\u1ecbnh d\u1ea1ng d\u1eef li\u1ec7u m\u1edbi v\u00e0 y\u00eau c\u1ea7u View hi\u1ec3n th\u1ecb \u1ea3nh m\u1edbi. V\u1edbi vi\u1ec7c c\u00f4 l\u1eadp logic UI, MVP gi\u00fap View t\u1eadp trung v\u00e0o vi\u1ec7c v\u1ebd h\u00ecnh \u1ea3nh \u0111\u1ec3 c\u00f3 code s\u1ea1ch h\u01a1n, d\u1ec5 test h\u01a1n.</p> <p></p>"},{"location":"ByteByteGo/client-architecture-patterns/#mvvm-va-mvvm-c","title":"MVVM v\u00e0 MVVM-C","text":"<p>MVVM s\u1eed d\u1ee5ng data binding gi\u1eefa View v\u00e0 ViewModel, cho ph\u00e9p t\u1ef1 \u0111\u1ed9ng c\u1eadp nh\u1eadt d\u1eef li\u1ec7u theo c\u1ea3 hai h\u01b0\u1edbng, gi\u1ea3m thi\u1ec3u vi\u1ec7c ph\u1ea3i vi\u1ebft c\u00e1c logic c\u1eadp nh\u1eadt r\u00f5 r\u00e0ng. Khi ng\u01b0\u1eddi d\u00f9ng ch\u1ecdn \u1ea3nh m\u1edbi, View s\u1ebd c\u1eadp nh\u1eadt ViewModel th\u00f4ng qua r\u00e0ng bu\u1ed9c d\u1eef li\u1ec7u hai chi\u1ec1u, v\u00e0 ViewModel s\u1ebd l\u01b0u thay \u0111\u1ed5i n\u00e0y v\u00e0o Model. M\u1ecdi thay \u0111\u1ed5i t\u1eeb Model s\u1ebd t\u1ef1 \u0111\u1ed9ng \u0111\u01b0\u1ee3c ph\u1ea3n \u00e1nh trong View m\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i ch\u1ee7 \u0111\u1ed9ng refresh. B\u1eb1ng c\u00e1ch x\u1eed l\u00fd \u0111\u1ed3ng b\u1ed9 hai chi\u1ec1u gi\u1eefa View v\u00e0 Model, data binding gi\u00fap c\u1eadp nh\u1eadt m\u00e0 kh\u00f4ng c\u1ea7n code r\u01b0\u1eddm r\u00e0.</p> <p></p> <p></p> <p>MVVM-C th\u00eam m\u1ed9t l\u1edbp Coordinator \u0111\u1ec3 qu\u1ea3n l\u00fd logic \u0111i\u1ec1u h\u01b0\u1edbng. Coordinators gi\u1eef tr\u00e1ch nhi\u1ec7m chuy\u1ec3n \u0111\u1ed5i gi\u1eefa c\u00e1c m\u00e0n h\u00ecnh v\u00e0 use case. </p> <p></p> <p>Trong v\u00ed d\u1ee5 c\u1ee7a ch\u00fang ta, Coordinator s\u1ebd ch\u1ecbu tr\u00e1ch nhi\u1ec7m chuy\u1ec3n t\u1eeb m\u00e0n h\u00ecnh h\u1ed3 s\u01a1 sang ch\u1ecdn \u1ea3nh, r\u1ed3i quay l\u1ea1i, trong khi ViewModel ch\u1ec9 t\u1eadp trung v\u00e0o vi\u1ec7c x\u1eed l\u00fd d\u1eef li\u1ec7u.</p> <p></p>"},{"location":"ByteByteGo/client-architecture-patterns/#viper","title":"VIPER","text":"<p>VIPER l\u00e0 m\u00f4 h\u00ecnh ph\u00e2n chia chi ti\u1ebft nh\u1ea5t, bao g\u1ed3m View, Interactor cho logic nghi\u1ec7p v\u1ee5, Presenter \u0111\u1ec3 chu\u1ea9n b\u1ecb d\u1eef li\u1ec7u cho View, Entity cho d\u1eef li\u1ec7u th\u00f4, v\u00e0 Router cho \u0111i\u1ec1u h\u01b0\u1edbng.</p> <p></p> <p>Trong v\u00ed d\u1ee5, View ch\u1ec9 hi\u1ec3n th\u1ecb h\u00e0nh \u0111\u1ed9ng c\u1ee7a ng\u01b0\u1eddi d\u00f9ng, Interactor x\u1eed l\u00fd logic nghi\u1ec7p v\u1ee5 c\u1ee7a vi\u1ec7c c\u1eadp nh\u1eadt \u1ea3nh, Presenter c\u1eadp nh\u1eadt c\u1ea3 View v\u00e0 Entity t\u01b0\u01a1ng \u1ee9ng v\u1edbi Model, v\u00e0 Router qu\u1ea3n l\u00fd \u0111i\u1ec1u h\u01b0\u1edbng. M\u00f4 h\u00ecnh n\u00e0y \u0111\u1eb7c bi\u1ec7t m\u1ea1nh m\u1ebd cho c\u00e1c \u1ee9ng d\u1ee5ng l\u1edbn, ph\u1ee9c t\u1ea1p.</p> <p></p>"},{"location":"ByteByteGo/client-architecture-patterns/#biet-chon-gi-ay","title":"Bi\u1ebft ch\u1ecdn g\u00ec \u0111\u00e2y?","text":"<p>V\u1eady n\u00ean ch\u1ecdn m\u00f4 h\u00ecnh n\u00e0o? T\u00f9y thu\u1ed9c v\u00e0o k\u00edch th\u01b0\u1edbc v\u00e0 \u0111\u1ed9 ph\u1ee9c t\u1ea1p c\u1ee7a \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n. </p> <ul> <li>MVC c\u00f3 th\u1ec3 ph\u00f9 h\u1ee3p cho c\u00e1c d\u1ef1 \u00e1n nh\u1ecf v\u1edbi y\u00eau c\u1ea7u \u0111\u01a1n gi\u1ea3n. </li> <li>MVP t\u0103ng c\u01b0\u1eddng kh\u1ea3 n\u0103ng ki\u1ec3m th\u1eed v\u00e0 t\u00e1ch bi\u1ec7t logic UI. </li> <li>MVVM ho\u1eb7c MVVM-C t\u1ecfa s\u00e1ng trong l\u1eadp tr\u00ecnh reactive v\u00e0 khi s\u1eed d\u1ee5ng r\u00e0ng bu\u1ed9c d\u1eef li\u1ec7u. </li> <li>VIPER l\u00e0 l\u1ef1a ch\u1ecdn h\u00e0ng \u0111\u1ea7u cho c\u00e1c \u1ee9ng d\u1ee5ng l\u1edbn, n\u01a1i vi\u1ec7c t\u00e1ch bi\u1ec7t r\u00f5 r\u00e0ng v\u00e0 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng l\u00e0 \u0111i\u1ec1u quan tr\u1ecdng.</li> </ul> <p>Cu\u1ed1i c\u00f9ng, s\u1ef1 l\u1ef1a ch\u1ecdn c\u0169ng ph\u1ee5 thu\u1ed9c v\u00e0o kinh nghi\u1ec7m c\u1ee7a team v\u00e0 th\u00e1ch th\u1ee9c c\u1ee5 th\u1ec3 m\u00e0 project c\u1ee7a b\u1ea1n g\u1eb7p ph\u1ea3i.</p>"},{"location":"ByteByteGo/cloud-native/","title":"Cloud Native th\u1ef1c s\u1ef1 l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/cloud-native/#nguon","title":"Ngu\u1ed3n","text":"<p> But What Is Cloud Native Really All About?</p>"},{"location":"ByteByteGo/cloud-native/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Thu\u1eadt ng\u1eef \"Cloud Native\" c\u00f3 v\u1ebb nh\u01b0 xu\u1ea5t hi\u1ec7n l\u1ea7n \u0111\u1ea7u v\u00e0o t\u1ea7m 10 n\u0103m tr\u01b0\u1edbc khi Netflix n\u00f3i v\u1ec1 ki\u1ebfn tr\u00fac \u1ee9ng d\u1ee5ng web-scale c\u1ee7a h\u1ecd t\u1ea1i m\u1ed9t bu\u1ed5i talk AWS re:Invent n\u0103m 2013. L\u00fac \u0111\u00f3, \u00fd ngh\u0129a c\u1ee7a thu\u1eadt ng\u1eef n\u00e0y c\u00f3 l\u1ebd kh\u00e1c so v\u1edbi hi\u1ec7n t\u1ea1i. Tuy nhi\u00ean, c\u00f3 m\u1ed9t \u0111i\u1ec1u v\u1eabn gi\u1eef nguy\u00ean: kh\u00f4ng c\u00f3 \u0111\u1ecbnh ngh\u0129a r\u00f5 r\u00e0ng cho n\u00f3 l\u00fac \u0111\u00f3, v\u00e0 hi\u1ec7n t\u1ea1i c\u0169ng v\u1eabn ch\u01b0a c\u00f3 \u0111\u1ecbnh ngh\u0129a r\u00f5 r\u00e0ng. N\u00f3 c\u00f3 \u00fd ngh\u0129a kh\u00e1c nhau v\u1edbi m\u1ed7i ng\u01b0\u1eddi. Trong b\u00e0i n\u00e0y, ta s\u1ebd \u0111i v\u00e0o gi\u1ea3i ngh\u0129a thu\u1eadt ng\u1eef \"Cloud Native\" v\u00e0 th\u1ea3o lu\u1eadn v\u1ec1 l\u00fd do v\u00e0 khi n\u00e0o n\u00f3 quan tr\u1ecdng.</p>"},{"location":"ByteByteGo/cloud-native/#hua-hen","title":"H\u1ee9a h\u1eb9n","text":"<p>\u0110\u1ea7u ti\u00ean, Cloud Native h\u1ee9a h\u1eb9n \u0111i\u1ec1u g\u00ec? Cloud Native l\u00e0 m\u1ed9t b\u1ea3n thi\u1ebft k\u1ebf \u0111\u1ec3 x\u00e2y d\u1ef1ng \u1ee9ng d\u1ee5ng web-scale tr\u00ean cloud c\u00f3 t\u00ednh s\u1eb5n s\u00e0ng (availability) v\u00e0 m\u1edf r\u1ed9ng (scalability) cao h\u01a1n. N\u00f3 h\u1ee9a h\u1eb9n t\u0103ng c\u01b0\u1eddng t\u00ednh linh ho\u1ea1t \u0111\u1ec3 tri\u1ec3n khai c\u00e1c t\u00ednh n\u0103ng m\u1edbi m\u1ed9t c\u00e1ch nhanh ch\u00f3ng m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn t\u00ednh s\u1eb5n s\u00e0ng, gi\u00fap ph\u1ea3n \u1ee9ng nhanh h\u01a1n v\u1edbi c\u00e1c y\u00eau c\u1ea7u thay \u0111\u1ed5i c\u1ee7a kh\u00e1ch h\u00e0ng.</p>"},{"location":"ByteByteGo/cloud-native/#cloud-computing","title":"Cloud Computing","text":"<p>Tr\u01b0\u1edbc khi \u0111i v\u00e0o vi\u1ec7c l\u00e0m sao Cloud Native \u0111\u00e1p \u1ee9ng nh\u1eefng l\u1eddi h\u1ee9a n\u00e0y, ta h\u00e3y xem x\u00e9t ng\u01b0\u1eddi anh em c\u1ee7a n\u00f3, Cloud Computing. Theo ki\u1ec3u c\u01a1 b\u1ea3n nh\u1ea5t, Cloud Computing l\u00e0 vi\u1ec7c ch\u1ea1y \u1ee9ng d\u1ee5ng tr\u00ean c\u00e1c t\u00e0i nguy\u00ean m\u00e1y t\u00ednh do c\u00e1c nh\u00e0 cung c\u1ea5p cloud qu\u1ea3n l\u00fd, m\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i mua v\u00e0 qu\u1ea3n l\u00fd ph\u1ea7n c\u1ee9ng. Di d\u1eddi m\u1ed9t \u1ee9ng d\u1ee5ng nguy\u00ean kh\u1ed1i l\u00ean cloud l\u00e0 m\u1ed9t b\u01b0\u1edbc kh\u1edfi \u0111\u1ea7u t\u1ed1t. N\u00f3 gi\u00fap \u0111\u1ed9i ng\u0169 kh\u00f4ng c\u1ea7n ph\u1ea3i qu\u1ea3n l\u00fd c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng ph\u1ea7n c\u1ee9ng. Ta c\u00f3 th\u1ec3 nhanh ch\u00f3ng cung c\u1ea5p t\u00e0i nguy\u00ean m\u00e1y t\u00ednh v\u00e0 d\u1ec5 d\u00e0ng m\u1edf r\u1ed9ng quy m\u00f4. Tuy nhi\u00ean, vi\u1ec7c ch\u1ec9 ch\u1ea1y \u1ee9ng d\u1ee5ng tr\u00ean cloud kh\u00f4ng l\u00e0m cho n\u00f3 tr\u1edf th\u00e0nh Cloud Native. \u0110\u1ec3 m\u1ed9t \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c coi l\u00e0 Cloud Native, ta c\u1ea7n \u00edt nh\u1ea5t 4 tr\u1ee5 c\u1ed9t.</p>"},{"location":"ByteByteGo/cloud-native/#4-tru-cot-cua-cloud-native","title":"4 tr\u1ee5 c\u1ed9t c\u1ee7a Cloud Native","text":""},{"location":"ByteByteGo/cloud-native/#kien-truc-ung-dung","title":"Ki\u1ebfn tr\u00fac \u1ee9ng d\u1ee5ng","text":"<p>Tr\u1ee5 c\u1ed9t \u0111\u1ea7u ti\u00ean l\u00e0 ki\u1ebfn tr\u00fac \u1ee9ng d\u1ee5ng. \u1ee8ng d\u1ee5ng Cloud Native \u0111\u01b0\u1ee3c t\u1ea1o th\u00e0nh t\u1eeb nhi\u1ec1u service nh\u1ecf, ph\u1ee5 thu\u1ed9c l\u1eabn nhau g\u1ecdi l\u00e0 microservice. </p> <p></p> <p>Theo truy\u1ec1n th\u1ed1ng, dev s\u1ebd x\u00e2y d\u1ef1ng \u1ee9ng d\u1ee5ng nguy\u00ean kh\u1ed1i v\u1edbi m\u1ed9t binary duy nh\u1ea5t ch\u1ee9a t\u1ea5t c\u1ea3 c\u00e1c ch\u1ee9c n\u0103ng c\u1ea7n thi\u1ebft. Vi\u1ec7c ph\u00e1t tri\u1ec3n, ki\u1ec3m th\u1eed v\u00e0 tri\u1ec3n khai \u1ee9ng d\u1ee5ng nguy\u00ean kh\u1ed1i nhanh ch\u00f3ng kh\u00e1 l\u00e0 kh\u00f3 kh\u0103n. Vi\u1ec7c m\u1edf r\u1ed9ng \u1ee9ng d\u1ee5ng nguy\u00ean kh\u1ed1i c\u0169ng kh\u00f3 kh\u0103n. B\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng Cloud Native, nh\u00e0 ph\u00e1t tri\u1ec3n chia c\u00e1c ch\u1ee9c n\u0103ng c\u1ee7a \u1ee9ng d\u1ee5ng l\u1edbn th\u00e0nh c\u00e1c microservice nh\u1ecf h\u01a1n. C\u00e1c service n\u00e0y nh\u1ecf, cho ph\u00e9p c\u00e1c team t\u1ef1 qu\u1ea3n l\u00fd service c\u1ee7a m\u00ecnh v\u00e0 tri\u1ec3n khai, m\u1edf r\u1ed9ng ch\u00fang m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp theo l\u1ecbch tr\u00ecnh c\u1ee7a h\u1ecd. C\u00e1c microservice n\u00e0y \u0111\u01b0\u1ee3c k\u1ebft n\u1ed1i l\u1ecfng l\u1ebbo. Ch\u00fang giao ti\u1ebfp v\u1edbi nhau qua API \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a r\u00f5 r\u00e0ng. V\u00ed d\u1ee5, m\u1ed9t \u1ee9ng d\u1ee5ng th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed c\u00f3 th\u1ec3 bao g\u1ed3m m\u1ed9t service gi\u1ecf h\u00e0ng giao ti\u1ebfp v\u1edbi service thanh to\u00e1n v\u00e0 service qu\u1ea3n l\u00fd h\u00e0ng t\u1ed3n kho.</p> <p></p>"},{"location":"ByteByteGo/cloud-native/#container-va-container-orchestration","title":"Container v\u00e0 container orchestration","text":"<p>Tr\u1ee5 c\u1ed9t th\u1ee9 hai l\u00e0 container v\u00e0 container orchestration. \u1ee8ng d\u1ee5ng Cloud Native \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i trong c\u00e1c container. Container l\u00e0 c\u00e1c th\u00e0nh ph\u1ea7n nh\u1eb9 ch\u1ee9a t\u1ea5t c\u1ea3 m\u1ecdi th\u1ee9 c\u1ea7n thi\u1ebft \u0111\u1ec3 ch\u1ea1y m\u1ed9t microservice trong b\u1ea5t k\u1ef3 m\u00f4i tr\u01b0\u1eddng n\u00e0o. </p> <p></p> <p>Container orchestration l\u00e0 m\u1ed9t th\u00e0nh ph\u1ea7n quan tr\u1ecdng cho c\u00e1c \u1ee9ng d\u1ee5ng Cloud Native l\u1edbn. Khi s\u1ed1 l\u01b0\u1ee3ng microservice t\u0103ng, container orchestration qu\u1ea3n l\u00fd s\u1ed1 l\u01b0\u1ee3ng l\u1edbn c\u00e1c container \u0111\u1ec3 t\u1ea5t c\u1ea3 c\u00e1c microservice c\u00f3 th\u1ec3 ch\u1ea1y m\u1ed9t c\u00e1ch m\u01b0\u1ee3t m\u00e0 nh\u01b0 m\u1ed9t \u1ee9ng d\u1ee5ng \u0111\u01a1n nh\u1ea5t. M\u1ed9t n\u1ec1n t\u1ea3ng container orchestration ph\u1ed5 bi\u1ebfn l\u00e0 Kubernetes. N\u00f3 gi\u00e1m s\u00e1t v\u00e0 \u0111i\u1ec1u khi\u1ec3n n\u01a1i container ch\u1ea1y, ph\u00e1t hi\u1ec7n v\u00e0 s\u1eeda ch\u1eefa l\u1ed7i, v\u00e0 c\u00e2n b\u1eb1ng t\u1ea3i gi\u1eefa c\u00e1c microservice.</p> <p></p>"},{"location":"ByteByteGo/cloud-native/#qua-trinh-phat-trien","title":"Qu\u00e1 tr\u00ecnh ph\u00e1t tri\u1ec3n","text":"<p>Tr\u1ee5 c\u1ed9t th\u1ee9 ba l\u00e0 qu\u00e1 tr\u00ecnh ph\u00e1t tri\u1ec3n. C\u00e1c \u1ee9ng d\u1ee5ng cloud native \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng v\u1edbi ki\u1ebfn tr\u00fac microservice. C\u00e1c service kh\u00e1c nhau \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n, tri\u1ec3n khai v\u00e0 m\u1edf r\u1ed9ng quy m\u00f4 m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp v\u1edbi nhau. \u0110i\u1ec1u n\u00e0y \u0111\u00f2i h\u1ecfi s\u1ef1 h\u1ee3p t\u00e1c cao gi\u1eefa c\u00e1c team ph\u00e1t tri\u1ec3n v\u00e0 v\u1eadn h\u00e0nh, c\u0169ng nh\u01b0 \u0111\u1ea7u t\u01b0 l\u1edbn v\u00e0o t\u1ef1 \u0111\u1ed9ng h\u00f3a qu\u00e1 tr\u00ecnh ph\u00e1t tri\u1ec3n v\u00e0 tri\u1ec3n khai. \u0110\u00e2y l\u00e0 n\u01a1i m\u00e0 DevOps ra tay. DevOps l\u00e0 m\u1ed9t ph\u01b0\u01a1ng ph\u00e1p ph\u00e1t tri\u1ec3n nh\u1ea5n m\u1ea1nh s\u1ef1 h\u1ee3p t\u00e1c, giao ti\u1ebfp v\u00e0 t\u1ef1 \u0111\u1ed9ng h\u00f3a gi\u1eefa c\u00e1c team ph\u00e1t tri\u1ec3n v\u00e0 v\u1eadn h\u00e0nh \u0111\u1ec3 tri\u1ec3n khai \u1ee9ng d\u1ee5ng cloud native m\u1ed9t c\u00e1ch nhanh ch\u00f3ng v\u00e0 \u0111\u00e1ng tin c\u1eady.</p> <p></p> <p>M\u1ed9t ph\u1ea7n quan tr\u1ecdng c\u1ee7a DevOps l\u00e0 CI/CD. N\u00f3 cho ph\u00e9p team t\u1ef1 \u0111\u1ed9ng h\u00f3a qu\u00e1 tr\u00ecnh ph\u00e1t tri\u1ec3n v\u00e0 tri\u1ec3n khai ph\u1ea7n m\u1ec1m, gi\u00fap n\u00f3 nhanh ch\u00f3ng v\u00e0 \u0111\u00e1ng tin c\u1eady h\u01a1n. </p> <p>Ph\u1ea7n Continuous Integration c\u1ee7a CI/CD \u0111\u1ec1 c\u1eadp \u0111\u1ebfn vi\u1ec7c th\u01b0\u1eddng xuy\u00ean h\u1ee3p nh\u1ea5t c\u00e1c thay \u0111\u1ed5i code v\u00e0o m\u1ed9t kho l\u01b0u tr\u1eef chung v\u00e0 ch\u1ea1y c\u00e1c b\u00e0i ki\u1ec3m th\u1eed t\u1ef1 \u0111\u1ed9ng \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng code ho\u1ea1t \u0111\u1ed9ng nh\u01b0 \u00fd.</p> <p></p> <p>Ph\u1ea7n Continuous Delivery c\u1ee7a CI/CD \u0111\u1ec1 c\u1eadp \u0111\u1ebfn vi\u1ec7c t\u1ef1 \u0111\u1ed9ng h\u00f3a vi\u1ec7c tri\u1ec3n khai ph\u1ea7n m\u1ec1m l\u00ean m\u00f4i tr\u01b0\u1eddng s\u1ea3n xu\u1ea5t, th\u01b0\u1eddng th\u00f4ng qua vi\u1ec7c s\u1eed d\u1ee5ng c\u00e1c pipeline tri\u1ec3n khai t\u1ef1 \u0111\u1ed9ng.</p> <p></p>"},{"location":"ByteByteGo/cloud-native/#tieu-chuan-mo","title":"Ti\u00eau chu\u1ea9n m\u1edf","text":"<p>Tr\u1ee5 c\u1ed9t cu\u1ed1i c\u00f9ng l\u00e0 vi\u1ec7c \u00e1p d\u1ee5ng c\u00e1c ti\u00eau chu\u1ea9n m\u1edf c\u1ee7a Cloud Native. Khi h\u1ec7 sinh th\u00e1i Cloud Native tr\u01b0\u1edfng th\u00e0nh, c\u00e1c th\u00e0nh ph\u1ea7n quan tr\u1ecdng tr\u1edf n\u00ean chu\u1ea9n h\u00f3a v\u00e0 c\u00e1c best practice tr\u1edf n\u00ean ph\u1ed5 bi\u1ebfn. Vi\u1ec7c tr\u1edf n\u00ean cloud native c\u00f3 ngh\u0129a l\u00e0 vi\u1ec7c s\u1eed d\u1ee5ng c\u00e1c th\u00e0nh ph\u1ea7n chu\u1ea9n h\u00f3a n\u00e0y nh\u01b0 c\u00e1c building block v\u00e0 tu\u00e2n theo c\u00e1c best practice khi s\u1eed d\u1ee5ng ch\u00fang.</p> <p>Ta c\u00f9ng \u0111i qua m\u1ed9t s\u1ed1 ti\u00eau chu\u1ea9n v\u00e0 d\u1ef1 \u00e1n n\u1ed5i ti\u1ebfng \u0111\u1eb1ng sau nh\u1eefng ti\u00eau chu\u1ea9n \u0111\u00f3. Ta \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u0111\u1ebfn Kubernetes. \u0110\u00f3 l\u00e0 m\u1ed9t d\u1ef1 \u00e1n qu\u1ea3n l\u00fd r\u1ea5t n\u1ed5i ti\u1ebfng. Distributed tracing l\u00e0 m\u1ed9t th\u00e0nh ph\u1ea7n quan tr\u1ecdng c\u1ee7a observability. N\u00f3 theo d\u00f5i c\u00e1c request khi ch\u00fang \u0111i qua m\u1ed9t \u0111\u1ed1ng c\u00e1c microservice. M\u1ed9t s\u1ed1 d\u1ef1 \u00e1n n\u1ed5i ti\u1ebfng l\u00e0 Jaeger, Zipkin v\u00e0 OpenTelemetry.</p> <p></p> <p>Service mesh l\u00e0 m\u1ed9t l\u1edbp c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng quan tr\u1ecdng \u0111\u1ec3 qu\u1ea3n l\u00fd giao ti\u1ebfp gi\u1eefa c\u00e1c microservice. Istio v\u00e0 Linkerd l\u00e0 m\u1ed9t s\u1ed1 v\u00ed d\u1ee5. </p> <p></p> <p>B\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng c\u00e1c ti\u00eau chu\u1ea9n m\u1edf, dev \u0111\u01b0\u1ee3c gi\u1ea3i ph\u00f3ng kh\u1ecfi vi\u1ec7c lo l\u1eafng v\u1ec1 c\u00e1c ch\u1ee9c n\u0103ng chung nh\u01b0 logging, tracing v\u00e0 service discovery. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p dev t\u1eadp trung v\u00e0o nh\u1eefng \u0111i\u1ec1u quan tr\u1ecdng, \u0111\u00f3 l\u00e0 \u1ee9ng d\u1ee5ng microservice c\u1ee7a h\u1ecd.</p>"},{"location":"ByteByteGo/cloud-native/#cloud-native-nen-uoc-ap-dung-khi-nao","title":"Cloud Native n\u00ean \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng khi n\u00e0o?","text":"<p>V\u1eady th\u00ec, khi n\u00e0o ta n\u00ean \u00e1p d\u1ee5ng Cloud Native? C\u00e2u tr\u1ea3 l\u1eddi l\u00e0 c\u00f2n tu\u1ef3. N\u1ebfu \u1ee9ng d\u1ee5ng nh\u1ecf v\u00e0 \u0111\u01a1n gi\u1ea3n, Cloud Native c\u00f3 th\u1ec3 kh\u00f4ng c\u1ea7n thi\u1ebft v\u00e0 m\u1ed9t ki\u1ebfn tr\u00fac nguy\u00ean kh\u1ed1i truy\u1ec1n th\u1ed1ng ho\u1eb7c m\u1ed9t m\u00f4 h\u00ecnh tri\u1ec3n khai \u0111\u01a1n gi\u1ea3n l\u00e0 \u0111\u01b0\u1ee3c.</p> <p>Tuy nhi\u00ean, \u0111\u1ed1i v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng l\u1edbn v\u00e0 ph\u1ee9c t\u1ea1p h\u01a1n, Cloud Native c\u00f3 th\u1ec3 cung c\u1ea5p h\u00e0ng lo\u1ea1t c\u00e1c l\u1ee3i \u00edch, nh\u01b0 t\u0103ng c\u01b0\u1eddng kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng, t\u00ednh s\u1eb5n s\u00e0ng v\u00e0 ph\u00e1t tri\u1ec3n nhanh h\u01a1n.</p> <p>Cu\u1ed1i c\u00f9ng, quy\u1ebft \u0111\u1ecbnh \u00e1p d\u1ee5ng Cloud Native n\u00ean d\u1ef1a tr\u00ean \u0111\u00e1nh gi\u00e1 c\u1ea9n th\u1eadn v\u1ec1 y\u00eau c\u1ea7u c\u1ee7a \u1ee9ng d\u1ee5ng v\u00e0 t\u00e0i nguy\u00ean c\u1ee7a t\u1ed5 ch\u1ee9c. Khi th\u1ef1c hi\u1ec7n \u0111\u00fang c\u00e1ch, Cloud Native c\u00f3 th\u1ec3 gi\u00fap t\u1ed5 ch\u1ee9c x\u00e2y d\u1ef1ng v\u00e0 tri\u1ec3n khai c\u00e1c \u1ee9ng d\u1ee5ng \u0111\u00e1ng tin c\u1eady, c\u00f3 t\u00ednh m\u1edf r\u1ed9ng v\u00e0 ch\u1ed1ng ch\u1ecbu cao h\u01a1n trong th\u1eddi gian ng\u1eafn h\u01a1n.</p>"},{"location":"ByteByteGo/computer-memory-and-storage/","title":"B\u1ed9 nh\u1edb v\u00e0 \u1ed5 c\u1ee9ng trong m\u00e1y t\u00ednh","text":""},{"location":"ByteByteGo/computer-memory-and-storage/#nguon","title":"Ngu\u1ed3n","text":"<p> 10+ Key Memory &amp; Storage Systems: Crash Course System Design #5</p>"},{"location":"ByteByteGo/computer-memory-and-storage/#bo-nho","title":"B\u1ed9 nh\u1edb","text":"<p>\u0110\u1ea7u ti\u00ean ta c\u00f3 c\u1eb7p \u0111\u00f4i c\u01a1 b\u1ea3n l\u00e0 RAM v\u00e0 ROM</p> <p>RAM (Random Access Memory - b\u1ed9 nh\u1edb truy c\u1eadp ng\u1eabu nhi\u00ean) l\u00e0 lo\u1ea1i b\u1ed9 nh\u1edb ch\u1ec9 l\u01b0u data t\u1ea1m th\u1eddi khi m\u00e1y t\u00ednh \u0111ang ch\u1ea1y. RAM nhanh v\u00e0 c\u00f3 t\u00ednh linh \u0111\u1ed9ng, gi\u00fap chuy\u1ec3n \u0111\u1ed5i tr\u1ea1ng th\u00e1i gi\u1eefa t\u1ea5t c\u1ea3 c\u00e1c ch\u01b0\u01a1ng tr\u00ecnh \u0111ang ch\u1ea1y t\u1ea1i b\u1ea5t c\u1ee9 th\u1eddi \u0111i\u1ec3m n\u00e0o. Tuy nhi\u00ean, data trong RAM s\u1ebd m\u1ea5t \u0111i n\u1ebfu ta t\u1eaft m\u00e1y t\u00ednh.</p> <p>ROM (Read-Only Memory - b\u1ed9 nh\u1edb ch\u1ec9 \u0111\u1ecdc) l\u00e0 lo\u1ea1i b\u1ed9 nh\u1edb gi\u1eef data ngay c\u1ea3 khi t\u1eaft m\u00e1y. N\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u c\u00e1c th\u00f4ng tin quan tr\u1ecdng nh\u01b0 BIOS hay firmware m\u00e0 m\u00e1y t\u00ednh c\u1ea7n \u0111\u1ec3 kh\u1edfi \u0111\u1ed9ng.</p> <p>RAM c\u00f3 c\u00e1c lo\u1ea1i kh\u00e1c nhau bao g\u1ed3m SRAM, DRAM v\u00e0 nh\u1eefng th\u1ee9 kh\u00e1c n\u1eefa. </p> <ul> <li>SRAM (Static Random Access Memory - b\u1ed9 nh\u1edb truy c\u1eadp ng\u1eabu nhi\u00ean t\u0129nh) l\u00e0 m\u1ed9t lo\u1ea1i RAM nhanh v\u00e0 \u0111\u1eaft ti\u1ec1n, s\u1eed d\u1ee5ng c\u00e1c c\u00f4ng c\u1ee5 t\u1ed1c \u0111\u1ed9 cao nh\u01b0 CPU cache, n\u01a1i m\u00e0 th\u1eddi gian truy c\u1eadp l\u00e0 c\u1ef1c k\u1ef3 quan tr\u1ecdng.</li> <li>DRAM (Dynamic Random Access Memory - b\u1ed9 nh\u1edb truy c\u1eadp ng\u1eabu nhi\u00ean \u0111\u1ed9ng) l\u00e0 m\u1ed9t lo\u1ea1i RAM ch\u1eadm v\u00e0 r\u1ebb h\u01a1n so v\u1edbi SRAM. N\u00f3 c\u1ea7n \u0111\u01b0\u1ee3c refresh th\u01b0\u1eddng xuy\u00ean \u0111\u1ec3 l\u01b0u tr\u1eef data, l\u00e0m cho n\u00f3 c\u00f3 t\u00ednh b\u1ea3o d\u01b0\u1ee1ng cao. <ul> <li>C\u00f3 nhi\u1ec1u lo\u1ea1i DRAM nh\u01b0: FPM DRAM, EDO DRAM, SDRAM v\u00e0 DDR SDRAM, v\u1edbi m\u1ed7i th\u1ebf h\u1ec7 mang l\u1ea1i cho ng\u01b0\u1eddi d\u00f9ng t\u1ed1c \u0111\u1ed9 v\u00e0 \u0111\u1ed9 hi\u1ec7u qu\u1ea3 cao h\u01a1n. M\u1ed9t s\u1ed1 lo\u1ea1i \u0111\u00e3 l\u1ed7i th\u1eddi, nh\u01b0 FPM DRAM hay EDO DRAM, v\u00e0 c\u00e1c lo\u1ea1i ph\u1ed5 bi\u1ebfn b\u00e2y gi\u1edd l\u00e0 c\u00e1c th\u1ebf h\u1ec7 DDR nh\u01b0 DDR4 v\u00e0 DDR5. </li> <li>GDDR SDRAM c\u0169ng \u0111\u00e0ng \u0111\u01b0\u1ee3c nh\u1eafc \u0111\u1ebfn. N\u00f3 l\u00e0 m\u1ed9t lo\u1ea1i RAM chuy\u00ean bi\u1ec7t \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u cho vi\u1ec7c truy\u1ec1n d\u1eef li\u1ec7u t\u1ed1c \u0111\u1ed9 cao. GPU c\u1ea7n \u0111i\u1ec1u n\u00e0y \u0111\u1ec3 x\u1eed l\u00fd song song \u1edf quy m\u00f4 l\u1edbn. GDDR6 \u0111\u01b0\u1ee3c d\u00f9ng nhi\u1ec1u nh\u1ea5t hi\u1ec7n nay.</li> </ul> </li> </ul> <p>ROM th\u00ec bao g\u1ed3m firmware v\u00e0 BIOS.</p> <ul> <li>Firmware l\u00e0 ph\u1ea7n m\u1ec1m \u0111\u01b0\u1ee3c l\u01b0u trong ROM \u0111\u1ec3 \u0111i\u1ec1u khi\u1ec3n c\u00e1c thi\u1ebft b\u1ecb ph\u1ea7n c\u1ee9ng giao ti\u1ebfp v\u1edbi nhau.</li> <li>BIOS (Basic Input / Output System) l\u00e0 ph\u1ea7n m\u1ec1m \u0111\u1ea7u ti\u00ean m\u00e1y t\u00ednh ch\u1ea1y khi kh\u1edfi \u0111\u1ed9ng. N\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m kh\u1edfi \u0111\u1ed9ng m\u00e1y t\u00ednh, kh\u1edfi t\u1ea1o c\u00e1c th\u00e0nh ph\u1ea7n ph\u1ea7n c\u1ee9ng v\u00e0 giao l\u1ea1i quy\u1ec1n \u0111i\u1ec1u khi\u1ec3n cho h\u1ec7 \u0111i\u1ec1u h\u00e0nh.</li> </ul>"},{"location":"ByteByteGo/computer-memory-and-storage/#o-cung","title":"\u1ed4 c\u1ee9ng","text":"<p>HDD (Hard Disk Drive) \u0111\u01b0\u1ee3c IBM gi\u1edbi thi\u1ec7u l\u1ea7n \u0111\u1ea7u v\u00e0o n\u0103m 1956. N\u00f3 \u0111\u1ecdc d\u1eef li\u1ec7u b\u1eb1ng c\u00e1ch quay \u0111\u0129a t\u1eeb v\u00e0 \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn v\u1edbi kh\u1ea3 n\u0103ng l\u01b0u tr\u1eef \u00edt v\u1edbi gi\u00e1 th\u00e0nh r\u1ebb.</p> <p>SSD (Solid State Drive) s\u1eed d\u1ee5ng c\u00f4ng ngh\u1ec7 d\u1ef1a tr\u00ean b\u1ed9 nh\u1edb \u0111i\u1ec7n t\u0129nh flash (NAND) \u0111\u1ec3 cho ra t\u1ed1c \u0111\u1ed9 truy c\u1eadp data nhanh h\u01a1n, gi\u1ea3m hao ph\u00ed \u0111i\u1ec7n n\u0103ng v\u00e0 t\u0103ng c\u01b0\u1eddng tu\u1ed5i th\u1ecd \u1ed5 \u0111\u0129a so v\u1edbi HDD, nh\u01b0ng v\u1edbi gi\u00e1 cao h\u01a1n.</p> <ul> <li>NVMe (Non-Volatile Memory Express) l\u00e0 interface hi\u1ec7u su\u1ea5t cao d\u00e0nh cho SSD. NVMe k\u1ebft n\u1ed1i tr\u1ef1c ti\u1ebfp \u0111\u1ebfn CPU qua c\u00e1c li\u00ean k\u1ebft PCIe. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p \u0111\u1ed9 tr\u1ec5 th\u1ea5p v\u00e0 t\u1ed1c \u0111\u1ed9 truy\u1ec1n data t\u0103ng m\u1ed9t c\u00e1ch \u0111\u00e1ng k\u1ec3, so v\u1edbi SATA SSD.</li> </ul> <p></p> <p>\u1ed4 USB l\u00e0 m\u1ed9t thi\u1ebft b\u1ecb nh\u1ecf m\u00e0 b\u1ea1n c\u00f3 th\u1ec3 c\u1eafm v\u00e0o c\u1ed5ng USB \u0111\u1ec3 g\u1eedi / nh\u1eadn data \u0111\u1ebfn / t\u1eeb thi\u1ebft b\u1ecb c\u00f3 c\u1ed5ng USB \u0111\u00f3. N\u00f3 r\u1ea5t d\u1ec5 d\u00f9ng v\u00e0 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 truy\u1ec1n data gi\u1eefa c\u00e1c m\u00e1y t\u00ednh v\u1edbi nhau.</p> <p>Th\u1ebb nh\u1edb SD l\u00e0 m\u1ed9t lo\u1ea1i th\u1ebb nh\u1ecf b\u1eb1ng con tem (ho\u1eb7c nh\u1ecf h\u01a1n nh\u01b0 Mini SD hay Micro SD), c\u00f3 kh\u1ea3 n\u0103ng ch\u1ee9a data \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u tr\u1eef data trong m\u00e1y \u1ea3nh s\u1ed1 hay \u0111i\u1ec7n tho\u1ea1i th\u00f4ng minh. N\u00f3 c\u00f3 th\u1ec3 ch\u1ee9a h\u00e0ng tr\u0103m GB ho\u1eb7c th\u1eadm ch\u00ed v\u00e0i TB b\u1ed9 nh\u1edb.</p> <p></p>"},{"location":"ByteByteGo/consistent-hashing/","title":"Consistent Hashing l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/consistent-hashing/#nguon","title":"Ngu\u1ed3n","text":"<p> Consistent Hashing | Algorithms You Should Know #1</p>"},{"location":"ByteByteGo/consistent-hashing/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Trong m\u1ed9t h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n quy m\u00f4 l\u1edbn, d\u1eef li\u1ec7u th\u01b0\u1eddng kh\u00f4ng n\u1eb1m ho\u00e0n to\u00e0n trong m\u1ed9t server ri\u00eang l\u1ebb. Thay v\u00e0o \u0111\u00f3, ch\u00fang \u0111\u01b0\u1ee3c ph\u00e2n t\u00e1n tr\u00ean nhi\u1ec1u server. \u0110i\u1ec1u n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 horizontal scaling hay m\u1edf r\u1ed9ng quy m\u00f4 theo chi\u1ec1u ngang. \u0110\u1ec3 x\u00e2y d\u1ef1ng m\u1ed9t h\u1ec7 th\u1ed1ng nh\u01b0 v\u1eady v\u1edbi hi\u1ec7u su\u1ea5t \u0111\u01b0\u1ee3c ki\u1ec3m so\u00e1t t\u1ed1t, vi\u1ec7c ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u \u0111\u1ec1u tr\u00ean c\u00e1c server l\u00e0 r\u1ea5t quan tr\u1ecdng.</p>"},{"location":"ByteByteGo/consistent-hashing/#simple-hashing","title":"Simple hashing","text":"<p>M\u1ed9t c\u00e1ch ph\u1ed5 bi\u1ebfn \u0111\u1ec3 ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u \u0111\u1ec1u tr\u00ean c\u00e1c server l\u00e0 simple hashing hay hash \u0111\u01a1n gi\u1ea3n. Nguy\u00ean l\u00fd c\u1ee7a n\u00f3 nh\u01b0 sau.</p> <p>\u0110\u1ea7u ti\u00ean, v\u1edbi m\u1ed7i object, ta hash kh\u00f3a c\u1ee7a n\u00f3 v\u1edbi m\u1ed9t h\u00e0m hash nh\u01b0 MD5 ho\u1eb7c MurmurHash. Ta s\u1ebd \u00e1nh x\u1ea1 kho\u00e1 c\u1ee7a object th\u00e0nh m\u1ed9t ph\u1ea1m vi c\u00e1c gi\u00e1 tr\u1ecb s\u1ed1 \u0111\u00e3 bi\u1ebft. M\u1ed9t h\u00e0m hash t\u1ed1t s\u1ebd ph\u00e2n ph\u1ed1i c\u00e1c hash \u0111\u1ec1u tr\u00ean to\u00e0n b\u1ed9 ph\u1ea1m vi.</p> <p></p> <p>Th\u1ee9 hai, ta th\u1ef1c hi\u1ec7n ph\u00e9p chia l\u1ea5y d\u01b0 tr\u00ean hash v\u1edbi s\u1ed1 l\u01b0\u1ee3ng server. \u0110i\u1ec1u n\u00e0y gi\u00fap x\u00e1c \u0111\u1ecbnh object thu\u1ed9c v\u1ec1 server n\u00e0o. Mi\u1ec5n l\u00e0 s\u1ed1 l\u01b0\u1ee3ng server kh\u00f4ng thay \u0111\u1ed5i, m\u1ed9t kh\u00f3a object s\u1ebd lu\u00f4n \u00e1nh x\u1ea1 v\u00e0o c\u00f9ng m\u1ed9t server. </p> <p></p> <p>V\u00ed d\u1ee5, ta c\u00f3 4 server v\u00e0 8 kh\u00f3a (l\u00e0 c\u00e1c x\u00e2u). V\u1edbi simple hashing, \u0111\u00e2y l\u00e0 c\u00e1ch ta ph\u00e2n ph\u1ed1i t\u00e1m kh\u00f3a chu\u1ed7i tr\u00ean b\u1ed1n server.</p> <p></p> <p></p> <p>Ph\u01b0\u01a1ng ph\u00e1p n\u00e0y ho\u1ea1t \u0111\u1ed9ng t\u1ed1t khi s\u1ed1 server l\u00e0 c\u1ed1 \u0111\u1ecbnh v\u00e0 ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u \u0111\u1ec1u. Nh\u01b0ng n\u1ebfu c\u00f3 server m\u1edbi \u0111\u01b0\u1ee3c th\u00eam v\u00e0o \u0111\u1ec3 \u0111\u00e1p \u1ee9ng nhu c\u1ea7u m\u1edbi ho\u1eb7c m\u1ed9t s\u1ed1 server hi\u1ec7n t\u1ea1i b\u1ecb x\u00f3a \u0111i th\u00ec sao?</p> <p>Quay tr\u1edf l\u1ea1i v\u00ed d\u1ee5 c\u1ee7a ch\u00fang ta. N\u1ebfu server s1 b\u1ecb ng\u1eebng ho\u1ea1t \u0111\u1ed9ng, s\u1ed1 l\u01b0\u1ee3ng server gi\u1ea3m xu\u1ed1ng c\u00f2n 3. M\u1eb7c d\u00f9 hash c\u1ee7a c\u00e1c kh\u00f3a object v\u1eabn gi\u1eef nguy\u00ean, ta l\u1ea1i th\u1ef1c hi\u1ec7n ph\u00e9p chia l\u1ea5y d\u01b0 tr\u00ean m\u1ed9t t\u1eadp N kh\u00e1c. Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, N l\u00e0 3. T\u00e1c \u0111\u1ed9ng l\u00e0 kh\u00e1 nghi\u00eam tr\u1ecdng do h\u1ea7u h\u1ebft c\u00e1c kh\u00f3a b\u1ecb ph\u00e2n ph\u1ed1i l\u1ea1i. \u0110i\u1ec1u n\u00e0y \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn h\u1ea7u h\u1ebft c\u00e1c object ch\u1ee9 kh\u00f4ng ch\u1ec9 \u1ea3nh h\u01b0\u1edfng m\u1ed7i c\u00e1c object \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef tr\u00ean server ng\u1eebng ho\u1ea1t \u0111\u1ed9ng. N\u00f3 c\u00f2n g\u00e2y ra nhi\u1ec1u cache miss v\u00e0 nhi\u1ec1u object ph\u1ea3i \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i l\u1ea1i. V\u1edbi c\u00e1c t\u00ecnh hu\u1ed1ng m\u00e0 server li\u00ean t\u1ee5c \u0111\u01b0\u1ee3c th\u00eam v\u00e0o v\u00e0 b\u1ecb x\u00f3a \u0111i, thi\u1ebft k\u1ebf n\u00e0y \u0111\u01a1n gi\u1ea3n l\u00e0 kh\u00f4ng \u1ed5n.</p> <p></p>"},{"location":"ByteByteGo/consistent-hashing/#consistent-hashing","title":"Consistent hashing","text":"<p>Consistent hashing l\u00e0 m\u1ed9t k\u1ef9 thu\u1eadt hi\u1ec7u qu\u1ea3 \u0111\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y. M\u1ee5c ti\u00eau c\u1ee7a consistent hashing nh\u01b0 sau.</p> <p>Ta mu\u1ed1n h\u1ea7u h\u1ebft c\u00e1c object kh\u00f4ng thay d\u1ed5i server ngay c\u1ea3 khi s\u1ed1 l\u01b0\u1ee3ng server thay \u0111\u1ed5i. \u0110\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y, ta c\u1ea7n m\u1ed9t h\u00e0m hash ph\u00e2n ph\u1ed1i c\u00e1c object \u0111\u1ec1u tr\u00ean c\u00e1c server. \u0110\u00e2y l\u00e0 \u00fd t\u01b0\u1edfng c\u1ed1t l\u00f5i c\u1ee7a consistent hashing. Ngo\u00e0i vi\u1ec7c hash kh\u00f3a object nh\u01b0 tr\u01b0\u1edbc, ta c\u00f2n hash t\u00ean server. C\u1ea3 object v\u00e0 server \u0111\u1ec1u \u0111\u01b0\u1ee3c hash v\u1edbi c\u00f9ng m\u1ed9t h\u00e0m hash v\u00e0o c\u00f9ng m\u1ed9t ph\u1ea1m vi gi\u00e1 tr\u1ecb.</p> <p></p> <p>Trong v\u00ed d\u1ee5 c\u1ee7a ch\u00fang ta, ta c\u00f3 m\u1ed9t ph\u1ea1m vi t\u1eeb x_0 \u0111\u1ebfn x_n. Ph\u1ea1m vi n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 hash space. </p> <p></p> <p>Ti\u1ebfp theo, ta n\u1ed1i hai \u0111\u1ea7u c\u1ee7a hash space l\u1ea1i v\u1edbi nhau \u0111\u1ec3 t\u1ea1o th\u00e0nh m\u1ed9t v\u00f2ng tr\u00f2n. \u0110\u00e2y l\u00e0 m\u1ed9t hash ring. </p> <p></p> <p>S\u1eed d\u1ee5ng m\u1ed9t h\u00e0m hash, ta hash m\u1ed7i server b\u1eb1ng t\u00ean ho\u1eb7c \u0111\u1ecba ch\u1ec9 IP c\u1ee7a n\u00f3, v\u00e0 \u0111\u1eb7t server l\u00ean v\u00f2ng tr\u00f2n. Ta \u0111\u1eb7t b\u1ed1n server c\u1ee7a ch\u00fang ta l\u00ean v\u00f2ng tr\u00f2n. Ti\u1ebfp theo, ta hash m\u1ed7i object b\u1eb1ng kh\u00f3a c\u1ee7a n\u00f3 v\u1edbi c\u00f9ng m\u1ed9t h\u00e0m hash. Kh\u00e1c v\u1edbi simple hashing, \u1edf \u0111\u00e2y ta kh\u00f4ng th\u1ef1c hi\u1ec7n ph\u00e9p chia l\u1ea5y d\u01b0 tr\u00ean hash, m\u00e0 ta s\u1eed d\u1ee5ng hash tr\u1ef1c ti\u1ebfp \u0111\u1ec3 \u00e1nh x\u1ea1 kh\u00f3a object v\u00e0o v\u00f2ng tr\u00f2n. Tr\u00f4ng n\u00f3 s\u1ebd nh\u01b0 th\u1ebf n\u00e0y.</p> <p></p> <p>\u0110\u1ec3 x\u00e1c \u0111\u1ecbnh server cho m\u1ed9t object, ta \u0111i theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3 t\u1eeb v\u1ecb tr\u00ed c\u1ee7a kh\u00f3a object tr\u00ean v\u00f2ng tr\u00f2n cho \u0111\u1ebfn khi g\u1eb7p m\u1ed9t server. Ti\u1ebfp t\u1ee5c v\u1edbi v\u00ed d\u1ee5 n\u00eau tr\u00ean, kho\u00e1 k0 s\u1ebd n\u1eb1m trong server s0, v\u00e0 kho\u00e1 k1 s\u1ebd n\u1eb1m trong server s1.</p> <p></p> <p>B\u00e2y gi\u1edd, ta s\u1ebd xem x\u00e9t xem \u0111i\u1ec1u g\u00ec s\u1ebd x\u1ea3y ra khi ta th\u00eam m\u1ed9t server v\u00e0o h\u1ec7 th\u1ed1ng. Ta th\u00eam m\u1ed9t server m\u1edbi s4 v\u00e0o b\u00ean tr\u00e1i c\u1ee7a s0 tr\u00ean v\u00f2ng tr\u00f2n. L\u01b0u \u00fd r\u1eb1ng ch\u1ec9 c\u00f3 kho\u00e1 k0 c\u1ea7n \u0111\u01b0\u1ee3c di chuy\u1ec3n t\u1eeb s0 sang s4, v\u00ec s4 l\u00e0 server \u0111\u1ea7u ti\u00ean m\u00e0 kho\u00e1 k0 g\u1eb7p khi \u0111i theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3 t\u1eeb v\u1ecb tr\u00ed c\u1ee7a n\u00f3 tr\u00ean v\u00f2ng tr\u00f2n. C\u00e1c kho\u00e1 k1, k2 v\u00e0 k3 kh\u00f4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng. V\u1edbi simple hashing, khi th\u00eam m\u1ed9t server m\u1edbi, h\u1ea7u h\u1ebft c\u00e1c kho\u00e1 ph\u1ea3i \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i l\u1ea1i. V\u1edbi consistent hashing, khi th\u00eam m\u1ed9t server m\u1edbi, ch\u1ec9 m\u1ed9t ph\u1ea7n nh\u1ecf c\u00e1c kho\u00e1 c\u1ea7n \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i l\u1ea1i. Ta c\u00f3 th\u1ec3 th\u1ea5y r\u1eb1ng consistent hashing gi\u00fap gi\u1ea3m thi\u1ec3u s\u1ed1 l\u01b0\u1ee3ng kho\u00e1 c\u1ea7n ph\u00e2n ph\u1ed1i l\u1ea1i khi th\u00eam m\u1ed9t server m\u1edbi.</p> <p></p> <p>R\u1ed3i c\u00f2n khi t\u1eaft m\u1ed9t server th\u00ec sao. Khi s1 b\u1ecb t\u1eaft, ch\u1ec9 c\u00f3 k1 c\u1ea7n \u0111\u01b0\u1ee3c chuy\u1ec3n sang s2. C\u00e1c kho\u00e1 kh\u00e1c kh\u00f4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng.</p> <p></p> <p>T\u00f3m t\u1eaft l\u1ea1i nh\u00e9.</p> <ol> <li>Ta \u00e1nh x\u1ea1 c\u1ea3 server v\u00e0 object v\u00e0o c\u00f9ng m\u1ed9t ph\u1ea1m vi gi\u00e1 tr\u1ecb.</li> <li>\u0110\u1ec3 x\u00e1c \u0111\u1ecbnh m\u1ed9t server cho object, ta \u0111i theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3 t\u1eeb v\u1ecb tr\u00ed c\u1ee7a object tr\u00ean v\u00f2ng tr\u00f2n cho \u0111\u1ebfn khi g\u1eb7p m\u1ed9t server.</li> </ol> <p>Gi\u1edd ta h\u00e3y xem th\u1eed c\u00e1i thi\u1ebft k\u1ebf n\u00e0y c\u00f3 nh\u1eefng v\u1ea5n \u0111\u1ec1 g\u00ec. Vi\u1ec7c ph\u00e2n ph\u1ed1i c\u00e1c object v\u00e0o c\u00e1c server tr\u00ean v\u00f2ng tr\u00f2n kh\u1ea3 n\u0103ng l\u00e0 s\u1ebd kh\u00f4ng \u0111\u1ec1u. V\u1ec1 m\u1eb7t kh\u00e1i ni\u1ec7n, khi ta ch\u1ecdn N \u0111i\u1ec3m ng\u1eabu nhi\u00eau tr\u00ean v\u00f2ng tr\u00f2n, s\u1ebd r\u1ea5t kh\u00f3 \u0111\u1ec3 chia v\u00f2ng tr\u00f2n ra th\u00e0nh c\u00e1c ph\u1ea7n b\u1eb1ng nhau. V\u00ed d\u1ee5, n\u1ebfu c\u00e1c server \u0111\u01b0\u1ee3c \u00e1nh x\u1ea1 v\u00e0o v\u00f2ng tr\u00f2n nh\u01b0 th\u1ebf n\u00e0y, ph\u1ea7n l\u1edbn c\u00e1c object s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u tr\u00ean s2, trong khi s1 v\u00e0 s3 b\u1ecb \u1ebf. </p> <p></p> <p>V\u1ea5n \u0111\u1ec1 n\u00e0y c\u00e0ng tr\u1edf n\u00ean nghi\u00eam tr\u1ecdng h\u01a1n n\u1ebfu c\u00e1c server \u0111\u01b0\u1ee3c th\u00eam v\u00e0o v\u00e0 b\u1ecb x\u00f3a \u0111i th\u01b0\u1eddng xuy\u00ean. Trong v\u00ed d\u1ee5 c\u1ee7a ch\u00fang ta, ngay c\u1ea3 khi c\u00e1c server \u0111\u01b0\u1ee3c chia \u0111\u1ec1u nhau, n\u1ebfu s1 b\u1ecb x\u00f3a \u0111i, \u0111o\u1ea1n cho s2 s\u1ebd g\u1ea5p \u0111\u00f4i c\u00e1c \u0111o\u1ea1n cho s0 v\u00e0 s3.</p> <p></p> <p>Virtual node \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y. \u00dd t\u01b0\u1edfng l\u00e0 m\u1ed7i server s\u1ebd \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd nhi\u1ec1u \u0111\u1ec9nh tr\u00ean v\u00f2ng tr\u00f2n. M\u1ed7i \u0111\u1ec9nh l\u00e0 m\u1ed9t virtual node \u0111\u1ea1i di\u1ec7n cho m\u1ed9t server. Tr\u00ean v\u00f2ng tr\u00f2n n\u00e0y, ta c\u00f3 2 server, m\u1ed7i c\u00e1i c\u00f3 3 virtual node. Thay v\u00ec c\u00f3 s0 v\u00e0 s1, gi\u1edd ta c\u00f3 s0_0, s0_1 v\u00e0 s0_2 \u0111\u1ec3 \u0111\u1ea1i di\u1ec7n cho server s0, v\u00e0 s1_0, s1_1 v\u00e0 s1_2 \u0111\u1ec3 \u0111\u1ea1i di\u1ec7n cho server s1. V\u1edbi virtual node, m\u1ed7i server qu\u1ea3n l\u00fd nhi\u1ec1u \u0111o\u1ea1n tr\u00ean v\u00f2ng tr\u00f2n. Trong v\u00ed d\u1ee5 c\u1ee7a ch\u00fang ta, c\u00e1c \u0111o\u1ea1n \u0111\u01b0\u1ee3c g\u00e1n nh\u00e3n s0 \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd b\u1edfi server s0, v\u00e0 c\u00e1c \u0111o\u1ea1n \u0111\u01b0\u1ee3c g\u00e1n nh\u00e3n s1 \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd b\u1edfi server s1. </p> <p></p> <p>Trong th\u1ef1c t\u1ebf, s\u1ed1 l\u01b0\u1ee3ng virtual node l\u1edbn h\u01a1n nhi\u1ec1u so v\u1edbi 3. Khi s\u1ed1 l\u01b0\u1ee3ng virtual node t\u0103ng l\u00ean, vi\u1ec7c ph\u00e2n ph\u1ed1i c\u00e1c object tr\u1edf n\u00ean c\u00e2n b\u1eb1ng h\u01a1n. C\u00f3 nhi\u1ec1u virtual node h\u01a1n c\u00f3 ngh\u0129a l\u00e0 ta c\u1ea7n nhi\u1ec1u kh\u00f4ng gian h\u01a1n \u0111\u1ec3 l\u01b0u tr\u1eef c\u00e1c metadata c\u1ee7a virtual node. \u0110\u00e2y l\u00e0 m\u1ed9t s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i, v\u00e0 ta c\u00f3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh s\u1ed1 l\u01b0\u1ee3ng c\u00e1c virtual node \u0111\u1ec3 \u0111\u00e1p \u1ee9ng nhu c\u1ea7u ri\u00eang c\u1ee7a m\u1ed7i tr\u01b0\u1eddng h\u1ee3p.</p> <p>H\u00e3y xem th\u1eed consistent hashing \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong th\u1ebf gi\u1edbi th\u1ef1c nh\u01b0 th\u1ebf n\u00e0o. </p> <ul> <li>M\u1ed9t s\u1ed1 database NoSQL ph\u1ed5 bi\u1ebfn nh\u01b0 Amazon DynamoDB v\u00e0 Apache Cassandra s\u1eed d\u1ee5ng consistent hashing, trong \u0111\u00f3 n\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u. N\u00f3 gi\u00fap c\u00e1c c\u01a1 s\u1edf d\u1eef li\u1ec7u n\u00e0y gi\u1ea3m thi\u1ec3u vi\u1ec7c di chuy\u1ec3n d\u1eef li\u1ec7u khi c\u00e2n b\u1eb1ng l\u1ea1i. </li> <li>C\u00e1c CDN nh\u01b0 Akamai s\u1eed d\u1ee5ng consistent hashing \u0111\u1ec3 ph\u00e2n ph\u1ed1i n\u1ed9i dung web \u0111\u1ec1u \u0111\u1eb7n gi\u1eefa c\u00e1c edge server. </li> <li>C\u00e1c Load balancer nh\u01b0 Google Load Balancer d\u00f9ng consistent hashing \u0111\u1ec3 ph\u00e2n ph\u1ed1i c\u00e1c k\u1ebft n\u1ed1i li\u00ean t\u1ee5c \u0111\u1ec1u \u0111\u1eb7n gi\u1eefa c\u00e1c backend server. \u0110i\u1ec1u n\u00e0y gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng k\u1ebft n\u1ed1i c\u1ea7n \u0111\u01b0\u1ee3c thi\u1ebft l\u1eadp l\u1ea1i khi m\u1ed9t backend server b\u1ecb ng\u1eebng ho\u1ea1t \u0111\u1ed9ng.</li> </ul>"},{"location":"ByteByteGo/container-concepts/","title":"Nh\u1eefng hi\u1ec3u nh\u1ea7m v\u1ec1 Bare Metal, Virtual Machine v\u00e0 Container","text":""},{"location":"ByteByteGo/container-concepts/#nguon","title":"Ngu\u1ed3n","text":"<p> Big Misconceptions about Bare Metal, Virtual Machines, and Containers</p>"},{"location":"ByteByteGo/container-concepts/#bare-metal-machine","title":"Bare Metal Machine","text":"<p>M\u1ed9t Bare Metal Machine l\u00e0 m\u1ed9t m\u00e1y t\u00ednh v\u1eadt l\u00fd, m\u1ed9t m\u00e1y t\u00ednh \u0111\u1ed9c l\u1eadp. Ng\u00e0y x\u01b0a t\u1ea5t c\u1ea3 c\u00e1c server \u0111\u1ec1u l\u00e0 m\u00e1y v\u1eadt l\u00fd. M\u00e1y v\u1eadt l\u00fd cho ph\u00e9p ch\u00fang ta c\u00f3 to\u00e0n quy\u1ec1n ki\u1ec3m so\u00e1t c\u00e1c t\u00e0i nguy\u00ean ph\u1ea7n c\u1ee9ng v\u00e0 c\u00e1c ph\u1ea7n m\u1ec1m \u0111\u1ec3 ch\u1ea1y. \u0110\u1ed1i v\u1edbi c\u00e1c ph\u1ea7n m\u1ec1m c\u1ea7n hi\u1ec7u su\u1ea5t c\u1ef1c cao t\u1eeb ph\u1ea7n c\u1ee9ng, m\u00e1y v\u1eadt l\u00fd l\u00e0 m\u1ed9t l\u1ef1a ch\u1ecdn kh\u00e1 t\u1ed1t.</p> <p></p> <p>Bare Metal Server \u0111\u01b0\u1ee3c c\u00f4 l\u1eadp v\u1eadt l\u00fd. S\u1ef1 c\u00f4 l\u1eadp n\u00e0y mang \u0111\u1ebfn 2 c\u00e1i l\u1ee3i:</p> <ol> <li>M\u00e1y v\u1eadt l\u00fd kh\u00f4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng b\u1edfi noisy neighbor problem. Noisy neighbor problem x\u1ea3y ra khi hi\u1ec7u su\u1ea5t c\u1ee7a ng\u01b0\u1eddi thu\u00ea m\u00e1y b\u1ecb \u1ea3nh h\u01b0\u1edfng b\u1edfi ho\u1ea1t \u0111\u1ed9ng c\u1ee7a ng\u01b0\u1eddi thu\u00ea m\u00e1y kh\u00e1c d\u00f9ng chung ph\u1ea7n c\u1ee9ng.</li> <li>S\u1ef1 c\u00f4 l\u1eadp cung c\u1ea5p m\u1ee9c \u0111\u1ed9 b\u1ea3o m\u1eadt cao nh\u1ea5t. V\u00ed d\u1ee5, n\u00f3 mi\u1ec5n nhi\u1ec5m v\u1edbi side-channel attack. Side-channel attack t\u1eadn d\u1ee5ng c\u00e1c l\u1ed7 h\u1ed5ng thi\u1ebft k\u1ebf trong b\u1ed9 x\u1eed l\u00fd hi\u1ec7n \u0111\u1ea1i \u0111\u1ec3 cho ph\u00e9p m\u1ed9t ng\u01b0\u1eddi thu\u00ea m\u00e1y \u0111\u00e1nh c\u1eafp c\u00e1c th\u00f4ng tin nh\u1ea1y c\u1ea3m t\u1eeb nh\u1eefng m\u00e1y l\u00e2n c\u1eadn. \u0110\u00e2y c\u0169ng l\u00e0 m\u1ed9t l\u00fd do n\u1eefa \u0111\u1ec3 d\u00f9ng m\u00e1y v\u1eadt l\u00fd.</li> </ol> <p>Khi m\u1ed9t \u1ee9ng d\u1ee5ng c\u1ea7n \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u b\u1ea3o m\u1eadt, tu\u00e2n th\u1ee7 quy \u0111\u1ecbnh, ho\u1eb7c c\u00e1c y\u00eau c\u1ea7u nghi\u00eam ng\u1eb7t kh\u00e1c, m\u00e1y v\u1eadt l\u00fd c\u00f3 th\u1ec3 l\u00e0 l\u1ef1a ch\u1ecdn duy nh\u1ea5t c\u1ee7a b\u1ea1n. Tuy nhi\u00ean, \u0111i\u1ec3m y\u1ebfu c\u1ee7a n\u00f3 l\u00e0 g\u00ec?</p> <p>M\u00e1y v\u1eadt l\u00fd \u0111\u1eaft, kh\u00f3 qu\u1ea3n l\u00fd, v\u00e0 kh\u00f3 m\u1edf r\u1ed9ng quy m\u00f4. Vi\u1ec7c mua ph\u1ea7n c\u1ee9ng m\u1edbi kh\u00e1 m\u1ea5t th\u1eddi gian, v\u00e0 b\u1ea1n c\u1ea7n m\u1ed9t team c\u00f3 n\u0103ng l\u1ef1c \u0111\u1ec3 qu\u1ea3n l\u00fd t\u1ed1t c\u00e1c m\u00e1y n\u00e0y.</p>"},{"location":"ByteByteGo/container-concepts/#virtual-machine","title":"Virtual Machine","text":"<p>M\u00e1y \u1ea3o (virtual machine) l\u00e0 gi\u1ea3 l\u1eadp c\u1ee7a m\u1ed9t m\u00e1y v\u1eadt l\u00fd. \u0110\u00e2y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 \u1ea3o h\u00f3a (virtualization). Nhi\u1ec1u m\u00e1y \u1ea3o c\u00f3 th\u1ec3 ch\u1ea1y tr\u00ean m\u1ed9t m\u00e1y t\u00ednh v\u1eadt l\u00fd. Ph\u00eda tr\u00ean ph\u1ea7n c\u1ee9ng m\u00e1y t\u00ednh v\u1eadt l\u00fd l\u00e0 h\u1ec7 \u0111i\u1ec1u h\u00e0nh c\u1ee7a m\u00e1y v\u1eadt l\u00fd. B\u00ean tr\u00ean h\u1ec7 \u0111i\u1ec1u h\u00e0nh n\u00e0y ch\u1ea1y m\u1ed9t ph\u1ea7n m\u1ec1m \u0111\u1eb7c bi\u1ec7t g\u1ecdi l\u00e0 hypervisor. \u0110\u00e2y c\u0169ng \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 tr\u00ecnh gi\u00e1m s\u00e1t m\u00e1y \u1ea3o. Hypervisor qu\u1ea3n l\u00fd c\u00e1c m\u00e1y \u1ea3o. N\u00f3 t\u1ea1o ra m\u1ed9t l\u1edbp tr\u1eebu t\u01b0\u1ee3ng ph\u00eda tr\u00ean ph\u1ea7n c\u1ee9ng \u0111\u1ec3 nhi\u1ec1u h\u1ec7 \u0111i\u1ec1u h\u00e0nh c\u00f3 th\u1ec3 ch\u1ea1y song song v\u1edbi nhau. M\u1ed7i m\u00e1y \u1ea3o c\u00f3 h\u1ec7 \u0111i\u1ec1u h\u00e0nh ri\u00eang. Tr\u00ean m\u1ed7i h\u1ec7 \u0111i\u1ec1u h\u00e0nh m\u00e1y \u1ea3o, ta c\u00f3 c\u00e1c \u1ee9ng d\u1ee5ng cho m\u1ed9t ng\u01b0\u1eddi thu\u00ea m\u00e1y.</p> <p></p> <p>L\u01b0u \u00fd, c\u00f3 m\u1ed9t kh\u00e1i ni\u1ec7m g\u1ecdi l\u00e0 bare metal hypervisor, kh\u00f4ng n\u00ean nh\u1ea7m l\u1eabn v\u1edbi bare metal hardware. Bare metal hypervisor \u0111i\u1ec1u khi\u1ec3n ph\u1ea7n c\u1ee9ng tr\u1ef1c ti\u1ebfp m\u00e0 kh\u00f4ng ph\u1ee5 thu\u1ed9c v\u00e0o h\u1ec7 \u0111i\u1ec1u h\u00e0nh m\u00e1y v\u1eadt l\u00fd. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p hypervisor c\u00f3 to\u00e0n quy\u1ec1n ki\u1ec3m so\u00e1t ph\u1ea7n c\u1ee9ng v\u00e0 cung c\u1ea5p hi\u1ec7u su\u1ea5t cao h\u01a1n. Tuy nhi\u00ean, ph\u1ea7n c\u1ee9ng h\u1ed7 tr\u1ee3 bare metal hypervisor c\u0169ng \u0111\u1eaft h\u01a1n.</p> <p></p> <p>M\u00e1y \u1ea3o \u0111\u00e3 c\u00f3 \u0111\u01b0\u1ee3c b\u01b0\u1edbc ti\u1ebfn d\u00e0i v\u1ec1 hi\u1ec7u su\u1ea5t v\u00e0 quy m\u00f4. Ng\u00e0y nay ch\u00fang ta c\u00f3 th\u1ec3 ch\u1ecdn m\u00e1y \u1ea3o v\u1edbi b\u1ea5t k\u1ef3 k\u00edch th\u01b0\u1edbc n\u00e0o \u0111\u1ec3 ph\u00f9 h\u1ee3p v\u1edbi kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c c\u1ee7a ch\u00fang ta, t\u1eeb m\u00e1y \u1ea3o ki\u1ec3u \u0111\u01a1n gi\u1ea3n v\u1edbi v\u00e0i CPU core v\u00e0 v\u00e0i GB b\u1ed9 nh\u1edb, cho \u0111\u1ebfn m\u00e1y \u1ea3o hi\u1ec7u su\u1ea5t cao v\u1edbi h\u00e0ng tr\u0103m core v\u00e0 h\u00e0ng terabyte b\u1ed9 nh\u1edb. </p> <p>L\u1ee3i \u00edch c\u1ee7a m\u00e1y \u1ea3o l\u00e0 g\u00ec?</p> <ul> <li>M\u00e1y \u1ea3o v\u1eadn h\u00e0nh \u00edt t\u1ed1n k\u00e9m h\u01a1n.</li> <li>Ch\u00fang c\u00f3 th\u1ec3 chia s\u1ebb c\u00f9ng m\u1ed9t ph\u1ea7n c\u1ee9ng, cho ph\u00e9p t\u1eadn d\u1ee5ng t\u1ed1i \u0111a t\u00e0i nguy\u00ean ph\u1ea7n c\u1ee9ng.</li> <li>Ch\u00fang c\u0169ng d\u1ec5 m\u1edf r\u1ed9ng h\u01a1n, l\u00e0m t\u0103ng t\u00ednh linh ho\u1ea1t cho c\u00e1c c\u00f4ng ty, t\u1ed5 ch\u1ee9c s\u1eed d\u1ee5ng ch\u00fang. M\u1ed9t s\u1ed1 ph\u1ea7n m\u1ec1m \u1ea3o h\u00f3a c\u00f3 th\u1ec3 di chuy\u1ec3n m\u00e1y \u1ea3o \u0111ang ch\u1ea1y t\u1eeb m\u1ed9t ph\u1ea7n c\u1ee9ng m\u00e1y t\u00ednh v\u1eadt l\u00fd n\u00e0y sang m\u1ed9t ph\u1ea7n c\u1ee9ng kh\u00e1c m\u00e0 kh\u00f4ng c\u1ea7n t\u1eaft m\u00e1y \u1ea3o.</li> </ul> <p>R\u1ed3i th\u1ebf \u0111i\u1ec3m y\u1ebfu c\u1ee7a m\u00e1y \u1ea3o l\u00e0 g\u00ec?</p> <ul> <li>M\u00e1y \u1ea3o c\u00f3 th\u1ec3 b\u1ecb \u1ea3nh h\u01b0\u1edfng b\u1edfi noisy neighbor problem m\u00e0 ch\u00fang ta \u0111\u00e3 n\u00f3i \u1edf tr\u00ean. N\u1ebfu \u1ee9ng d\u1ee5ng c\u1ee7a ch\u00fang ta ch\u1ea1y c\u00f9ng v\u1edbi m\u1ed9t noisy neighbor, hi\u1ec7u su\u1ea5t c\u1ee7a \u1ee9ng d\u1ee5ng c\u00f3 th\u1ec3 b\u1ecb \u1ea3nh h\u01b0\u1edfng.</li> <li>H\u01a1n n\u1eefa, c\u00e1c m\u00e1y \u1ea3o ch\u1ea1y tr\u00ean c\u00f9ng m\u1ed9t ph\u1ea7n c\u1ee9ng v\u1eadt l\u00fd s\u1ebd d\u00f9ng chung c\u00e1c CPU core v\u1eadt l\u00fd. Ch\u00fang c\u0169ng c\u00f3 th\u1ec3 b\u1ecb t\u1ea5n c\u00f4ng b\u1edfi c\u00e1c l\u1ed7 h\u1ed5ng thi\u1ebft k\u1ebf trong b\u1ed9 x\u1eed l\u00fd hi\u1ec7n \u0111\u1ea1i. Side-channel attack nh\u01b0 Meltdown v\u00e0 Spectre l\u00e0 m\u1ed9t s\u1ed1 v\u00ed d\u1ee5 n\u1ed5i ti\u1ebfng.</li> </ul>"},{"location":"ByteByteGo/container-concepts/#container","title":"Container","text":"<p>Container l\u00e0 m\u1ed9t package nh\u1eb9 v\u00e0 \u0111\u1ed9c l\u1eadp c\u1ee7a m\u1ed9t \u1ee9ng d\u1ee5ng v\u1edbi t\u1ea5t c\u1ea3 c\u00e1c dependency c\u1ee7a n\u00f3 nh\u01b0 th\u01b0 vi\u1ec7n, framework, v\u00e0 runtime. Containerization \u0111\u01b0\u1ee3c coi l\u00e0 m\u1ed9t phi\u00ean b\u1ea3n nh\u1eb9 h\u01a1n c\u1ee7a \u1ea3o h\u00f3a.</p> <p>Gi\u1ed1ng nh\u01b0 \u1ea3o h\u00f3a, \u1edf \u0111\u00e2y ch\u00fang ta c\u00f3 ph\u1ea7n c\u1ee9ng bare metal v\u00e0 h\u1ec7 \u0111i\u1ec1u h\u00e0nh m\u00e1y v\u1eadt l\u00fd. Nh\u01b0ng thay v\u00ec \u1ea3o h\u00f3a ph\u1ea7n c\u1ee9ng v\u1edbi hypervisor, ch\u00fang ta \u1ea3o h\u00f3a h\u1ec7 \u0111i\u1ec1u h\u00e0nh ch\u00ednh v\u1edbi m\u1ed9t ph\u1ea7n m\u1ec1m \u0111\u1eb7c bi\u1ec7t g\u1ecdi l\u00e0 container engine, tr\u00ean \u0111\u00e2y ch\u1ea1y nhi\u1ec1u container. M\u1ed7i container l\u00e0 m\u1ed9t m\u00f4i tr\u01b0\u1eddng \u1ee9ng d\u1ee5ng \u0111\u1ed9c l\u1eadp v\u1edbi c\u00e1c container kh\u00e1c. Container engine cung c\u1ea5p vi\u1ec7c chia s\u1ebb t\u00e0i nguy\u00ean nhanh h\u01a1n. V\u00e0 t\u1ea5t c\u1ea3 c\u00e1c t\u00e0i nguy\u00ean c\u1ea7n thi\u1ebft \u0111\u1ec3 ch\u1ea1y \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i c\u00f9ng nhau \u0111\u1ec3 c\u00e1c \u1ee9ng d\u1ee5ng c\u00f3 th\u1ec3 ch\u1ea1y \u1edf b\u1ea5t c\u1ee9 \u0111\u00e2u. Container c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng v\u00e0 c\u00f3 th\u1ec3 di chuy\u1ec3n. Ch\u00fang nh\u1eb9 v\u00e0 c\u1ea7n \u00edt t\u00e0i nguy\u00ean ph\u1ea7n c\u1ee9ng h\u01a1n \u0111\u1ec3 ch\u1ea1y h\u01a1n m\u00e1y \u1ea3o. M\u1ed9t m\u00e1y v\u1eadt l\u00fd c\u00f3 th\u1ec3 ch\u1ee9a nhi\u1ec1u container h\u01a1n nhi\u1ec1u so v\u1edbi m\u00e1y \u1ea3o. Do m\u1ed7i container ch\u1ea1y nh\u01b0 m\u1ed9t ti\u1ebfn tr\u00ecnh b\u00ecnh th\u01b0\u1eddng c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh m\u00e1y v\u1eadt l\u00fd, ch\u00fang c\u0169ng kh\u1edfi \u0111\u1ed9ng nhanh h\u01a1n. T\u1ea5t c\u1ea3 nh\u1eefng \u0111i\u1ec1u n\u00e0y l\u00e0m cho vi\u1ec7c tri\u1ec3n khai v\u00e0 b\u1ea3o tr\u00ec c\u00e1c container d\u1ec5 d\u00e0ng h\u01a1n \u1edf quy m\u00f4 l\u1edbn.</p> <p></p> <p>Tuy nhi\u00ean, container c\u00f3 th\u1ec3 \u00edt an to\u00e0n h\u01a1n. Ch\u00fang chia s\u1ebb c\u00f9ng m\u1ed9t h\u1ec7 \u0111i\u1ec1u h\u00e0nh, v\u00e0 s\u1ef1 c\u00f4 l\u1eadp d\u1ef1a tr\u00ean c\u00e1c nguy\u00ean t\u1eafc c\u1ea5p th\u1ea5p c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh. \u0110i\u1ec1u n\u00e0y c\u00f3 ngh\u0129a l\u00e0 container d\u1ec5 b\u1ecb t\u1ea5n c\u00f4ng b\u1edfi c\u00e1c l\u1ed7 h\u1ed5ng b\u1ea3o m\u1eadt c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh. Ta c\u0169ng c\u00f3 th\u1ec3 ch\u1ea1y container b\u00ean trong m\u00e1y \u1ea3o. M\u00e0 sao ta l\u1ea1i mu\u1ed1n th\u1ec3 nh\u1ec9? L\u00fd do l\u00e0 n\u00f3 cung c\u1ea5p b\u1ea3o m\u1eadt t\u1ed1t h\u01a1n b\u1eb1ng c\u00e1ch gi\u1ea3m c\u00e1c kh\u1ea3 n\u0103ng t\u1ea5n c\u00f4ng c\u00f3 th\u1ec3 x\u1ea3y ra. \u0110\u00e2y l\u00e0 m\u1ed9t s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i gi\u1eefa t\u00ednh linh ho\u1ea1t v\u00e0 t\u00ednh b\u1ea3o m\u1eadt.</p> <p></p>"},{"location":"ByteByteGo/container-concepts/#ket-luan","title":"K\u1ebft lu\u1eadn","text":"<p>R\u1ed3i sau container ta s\u1ebd c\u00f3 g\u00ec n\u1eefa? Serverless v\u00e0 edge computing l\u00e0 hai c\u00e1i t\u00ean \u0111\u1ea7u ti\u00ean m\u00e0 ta c\u00f3 th\u1ec3 ngh\u0129 \u0111\u1ebfn. Ch\u00fang cung c\u1ea5p cho ch\u00fang ta m\u1ed9t c\u00e1ch ti\u1ebfp c\u1eadn tri\u1ec3n khai v\u00e0 b\u1ea3o tr\u00ec \u1ee9ng d\u1ee5ng d\u1ec5 d\u00e0ng h\u01a1n, nh\u01b0ng c\u0169ng c\u00f3 nh\u1eefng \u0111\u00e1nh \u0111\u1ed5i ri\u00eang c\u1ee7a ch\u00fang.</p> <p></p> <p></p> <p>K\u1ebft l\u1ea1i th\u00ec thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng l\u00e0 m\u1ed9t qu\u00e1 tr\u00ecnh \u0111\u00e1nh \u0111\u1ed5i. \u0110i\u1ec1u n\u00e0y c\u0169ng \u0111\u00fang v\u1edbi bare metal, m\u00e1y \u1ea3o, v\u00e0 container. Kh\u00f4ng c\u00f3 m\u1ed9t c\u00e2u tr\u1ea3 l\u1eddi \u0111\u00fang duy nh\u1ea5t n\u00e0o c\u1ea3.</p>"},{"location":"ByteByteGo/crack-system-design-interviews/","title":"L\u00e0m th\u1ebf n\u00e0o \u0111\u1ec3 c\u00f3 k\u1ebft qu\u1ea3 t\u1ed1t trong ph\u1ecfng v\u1ea5n System Design?","text":""},{"location":"ByteByteGo/crack-system-design-interviews/#nguon","title":"Ngu\u1ed3n","text":"<p> How to Crack Any System Design Interview</p>"},{"location":"ByteByteGo/crack-system-design-interviews/#phong-van-system-design-la-gi","title":"Ph\u1ecfng v\u1ea5n System Design l\u00e0 g\u00ec?","text":"<p>M\u1ee5c ti\u00eau ch\u00ednh c\u1ee7a lo\u1ea1i ph\u1ecfng v\u1ea5n n\u00e0y l\u00e0 \u0111\u1ec3 \u0111\u00e1nh gi\u00e1 kh\u1ea3 n\u0103ng c\u1ee7a b\u1ea1n trong vi\u1ec7c:</p> <ol> <li>Bi\u1ebfn \u0111\u1ed5i m\u1ed9t y\u00eau c\u1ea7u kh\u00f4ng r\u00f5 r\u00e0ng th\u00e0nh c\u00e1c y\u00eau c\u1ea7u k\u1ef9 thu\u1eadt c\u1ee5 th\u1ec3.</li> <li>Thi\u1ebft k\u1ebf ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u \u0111\u00f3.</li> <li>Tr\u00ecnh b\u00e0y v\u00e0 b\u1ea3o v\u1ec7 c\u00e1c quy\u1ebft \u0111\u1ecbnh thi\u1ebft k\u1ebf c\u1ee7a m\u00ecnh trong qu\u00e1 tr\u00ecnh ph\u1ecfng v\u1ea5n.</li> </ol> <p>B\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c y\u00eau c\u1ea7u thi\u1ebft k\u1ebf c\u00e1c h\u1ec7 th\u1ed1ng quy m\u00f4 l\u1edbn nh\u01b0 feed c\u1ee7a Instagram, d\u1ecbch v\u1ee5 chia s\u1ebb xe c\u1ee7a Uber, ho\u1eb7c th\u1eadm ch\u00ed l\u00e0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng ph\u00eda sau c\u00f4ng c\u1ee5 t\u00ecm ki\u1ebfm c\u1ee7a Google. Kh\u00f4ng c\u00f3 c\u00e1i g\u1ecdi l\u00e0 gi\u1ea3i ph\u00e1p \"\u0111\u00fang\" hay \"ho\u00e0n h\u1ea3o\". \u0110i\u1ec1u quan tr\u1ecdng l\u00e0 th\u1ec3 hi\u1ec7n s\u1ef1 hi\u1ec3u bi\u1ebft v\u1ec1 k\u1ef9 thu\u1eadt, c\u00e1ch ti\u1ebfp c\u1eadn v\u1ea5n \u0111\u1ec1 v\u00e0 kh\u1ea3 n\u0103ng giao ti\u1ebfp hi\u1ec7u qu\u1ea3 c\u1ee7a b\u1ea1n.</p>"},{"location":"ByteByteGo/crack-system-design-interviews/#tai-sao-phai-chuan-bi-cho-phong-van-system-design","title":"T\u1ea1i sao ph\u1ea3i chu\u1ea9n b\u1ecb cho ph\u1ecfng v\u1ea5n System Design?","text":"<p>Kh\u1ea3 n\u0103ng c\u1ee7a b\u1ea1n trong ph\u1ecfng v\u1ea5n System Design c\u00f3 th\u1ec3 quy\u1ebft \u0111\u1ecbnh b\u1ea1n c\u00f3 \u0111\u01b0\u1ee3c nh\u1eadn v\u00e0o c\u00e1c v\u1ecb tr\u00ed senior hay kh\u00f4ng. Khi b\u1ea1n \u0111\u00e3 c\u00f3 v\u00e0i n\u0103m kinh nghi\u1ec7m trong ng\u00e0nh, ph\u1ecfng v\u1ea5n thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng l\u00e0 c\u00e1ch m\u00e0 c\u00e1c c\u00f4ng ty \u0111\u00e1nh gi\u00e1 kh\u1ea3 n\u0103ng c\u1ee7a b\u1ea1n trong vi\u1ec7c x\u00e2y d\u1ef1ng c\u00e1c h\u1ec7 th\u1ed1ng ph\u1ee9c t\u1ea1p v\u00e0 c\u00f3 quy m\u00f4 l\u1edbn. B\u1ea1n l\u00e0m t\u1ed1t trong ph\u1ecfng v\u1ea5n System Design, b\u1ea1n \u0111ang tr\u00ean \u0111\u01b0\u1eddng h\u01b0\u1edbng t\u1edbi c\u00e1c v\u1ecb tr\u00ed senior, ng\u01b0\u1ee3c l\u1ea1i, b\u1ea1n ch\u1ec9 c\u00f3 th\u1ec3 nh\u1eadn \u0111\u01b0\u1ee3c offer cho c\u00e1c v\u1ecb tr\u00ed junior. V\u00ec v\u1eady, h\u00e3y chu\u1ea9n b\u1ecb k\u1ef9 l\u01b0\u1ee1ng v\u00e0 nghi\u00eam t\u00fac cho lo\u1ea1i ph\u1ecfng v\u1ea5n n\u00e0y.</p> <p>B\u1ea1n c\u00f3 th\u1ec3 cho r\u1eb1ng l\u00e0m sao ng\u01b0\u1eddi ta c\u00f3 th\u1ec3 \u0111\u00e1nh gi\u00e1 kh\u1ea3 n\u0103ng c\u1ee7a b\u1ea1n trong th\u1eddi gian ng\u1eafn v\u1eady \u0111\u01b0\u1ee3c? \u0110\u00fang v\u1eady, h\u1ecd kh\u00f4ng l\u00e0m th\u1ebf \u0111\u01b0\u1ee3c, nh\u01b0ng ch\u1ec9 l\u00e0 kh\u00f4ng ho\u00e0n to\u00e0n. Ph\u1ecfng v\u1ea5n System Design l\u00e0 m\u1ed9t c\u00e1ch \u0111\u1ec3 m\u00f4 ph\u1ecfng c\u00e1c t\u00ecnh hu\u1ed1ng th\u1ef1c t\u1ebf. B\u1ea1n c\u1ea7n gi\u00fap ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n th\u1ea5y \u0111\u01b0\u1ee3c v\u00ec sao h\u1ecd c\u1ea7n ph\u1ea3i tuy\u1ec3n b\u1ea1n. \u0110\u00e2y kh\u00f4ng ph\u1ea3i l\u00e0 c\u00e1ch t\u1ed1t nh\u1ea5t, nh\u01b0ng v\u1edbi c\u00e1c c\u00f4ng ty, \u0111\u00e2y l\u00e0 ph\u01b0\u01a1ng ph\u00e1p \u0111\u00e1nh gi\u00e1 s\u00e1t th\u1ef1c t\u1ebf nh\u1ea5t m\u00e0 h\u1ecd c\u00f3 \u0111\u1ec3 tr\u00e1nh tuy\u1ec3n nh\u1ea7m ng\u01b0\u1eddi.</p>"},{"location":"ByteByteGo/crack-system-design-interviews/#cach-chuan-bi-cho-phong-van-system-design","title":"C\u00e1ch chu\u1ea9n b\u1ecb cho ph\u1ecfng v\u1ea5n System Design","text":""},{"location":"ByteByteGo/crack-system-design-interviews/#luyen-tap-e","title":"Luy\u1ec7n t\u1eadp \u0111\u00ea","text":"<p>Th\u1ef1c h\u00e0nh thi\u1ebft k\u1ebf c\u00e1c \u1ee9ng d\u1ee5ng th\u1ef1c t\u1ebf m\u00e0 ta s\u1eed d\u1ee5ng h\u00e0ng ng\u00e0y nh\u01b0 Instagram, Uber hay Gmail. Ch\u1ec9 \u0111\u1ecdc v\u1ec1 ki\u1ebfn tr\u00fac th\u00f4i l\u00e0 ch\u01b0a \u0111\u1ee7. L\u1ea5y gi\u1ea5y b\u00fat ra v\u00e0 v\u1ebd c\u00e1c th\u00e0nh ph\u1ea7n ch\u00ednh c\u0169ng nh\u01b0 c\u00e1ch ch\u00fang t\u01b0\u01a1ng t\u00e1c v\u1edbi nhau.</p> <p></p> <p>V\u00ed d\u1ee5, h\u00e3y thi\u1ebft k\u1ebf ki\u1ebfn tr\u00fac backend cho Instagram. Li\u1ec7t k\u00ea c\u00e1c th\u00e0nh ph\u1ea7n ch\u00ednh nh\u01b0 c\u00e1c th\u00e0nh ph\u1ea7n frontend t\u01b0\u01a1ng t\u00e1c v\u1edbi ng\u01b0\u1eddi d\u00f9ng, c\u00e1c server x\u1eed l\u00fd h\u00e0ng tri\u1ec7u request, h\u1ec7 th\u1ed1ng cache t\u0103ng t\u1ed1c \u0111\u1ed9 ph\u1ea3n h\u1ed3i, c\u01a1 s\u1edf d\u1eef li\u1ec7u \u0111\u1ec3 l\u01b0u tr\u1eef b\u00e0i vi\u1ebft v\u00e0 b\u00ecnh lu\u1eadn, v\u00e0 kho l\u01b0u tr\u1eef ph\u00e2n t\u00e1n \u0111\u1ec3 l\u01b0u c\u00e1c h\u00ecnh \u1ea3nh v\u00e0 video. Sau \u0111\u00f3 v\u1ebd ra c\u00e1c lu\u1ed3ng d\u1eef li\u1ec7u ch\u00ednh ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o, nh\u01b0 h\u00ecnh \u1ea3nh ng\u01b0\u1eddi d\u00f9ng \u0111\u01b0\u1ee3c t\u1ea3i l\u00ean v\u00e0 l\u01b0u tr\u1eef nh\u01b0 th\u1ebf n\u00e0o, c\u00e1c thu\u1eadt to\u00e1n x\u00e1c \u0111\u1ecbnh th\u1ee9 t\u1ef1 b\u00e0i vi\u1ebft tr\u00ean feed ra sao, h\u1ec7 th\u1ed1ng s\u1eed d\u1ee5ng d\u1eef li\u1ec7u cache nh\u01b0 th\u1ebf n\u00e0o v\u00e0 khi n\u00e0o s\u1ebd g\u1ecdi v\u00e0o c\u01a1 s\u1edf d\u1eef li\u1ec7u. X\u00e2y d\u1ef1ng t\u1eebng ph\u1ea7n c\u1ee7a b\u1ee9c tranh kh\u00f4ng ch\u1ec9 gi\u00fap b\u1ea1n hi\u1ec3u s\u00e2u h\u01a1n m\u00e0 c\u00f2n gi\u00fap b\u1ea1n nh\u1edb l\u00e2u h\u01a1n.</p> <p></p>"},{"location":"ByteByteGo/crack-system-design-interviews/#nghien-cuu-cac-mo-hinh-thiet-ke-pho-bien","title":"Nghi\u00ean c\u1eefu c\u00e1c m\u00f4 h\u00ecnh thi\u1ebft k\u1ebf ph\u1ed5 bi\u1ebfn","text":"<p>H\u00e3y nghi\u00ean c\u1ee9u c\u00e1c m\u00f4 h\u00ecnh thi\u1ebft k\u1ebf nh\u01b0 c\u00e2n b\u1eb1ng t\u1ea3i (load balancing), ph\u00e2n chia c\u01a1 s\u1edf d\u1eef li\u1ec7u (database sharding), m\u1ea1ng ph\u00e2n ph\u1ed1i n\u1ed9i dung (CDN), cache d\u1eef li\u1ec7u, v\u00e2n v\u00e2n... Nghi\u00ean c\u1ee9u \u01b0u nh\u01b0\u1ee3c c\u1ee7a m\u1ed7i c\u00e1ch ti\u1ebfp c\u1eadn \u0111\u1ec3 c\u00e2n nh\u1eafc s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i trong thi\u1ebft k\u1ebf. Khi h\u1ecdc c\u00e1c m\u00f4 h\u00ecnh n\u00e0y, d\u1ef1 \u0111o\u00e1n lo\u1ea1i c\u00e2u h\u1ecfi n\u00e0o ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n c\u00f3 th\u1ec3 h\u1ecfi v\u00e0 t\u1eadp tr\u1ea3 l\u1eddi m\u1ed9t c\u00e1ch t\u1ef1 tin.</p> <p></p> <p>C\u00e2u h\u1ecfi v\u00ed d\u1ee5: t\u1ea1i sao b\u1ea1n l\u1ea1i ch\u1ecdn Redis \u0111\u1ec3 cache thay v\u00ec Memcached? H\u00e3y s\u1eb5n s\u00e0ng th\u1ea3o lu\u1eadn v\u1ec1 c\u00e1c chi ti\u1ebft nh\u01b0 c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u trong Redis v\u00e0 c\u00e1c t\u00f9y ch\u1ecdn l\u01b0u tr\u1eef d\u1eef li\u1ec7u \u0111\u1ec3 b\u1ea3o v\u1ec7 l\u1ef1a ch\u1ecdn c\u1ee7a b\u1ea1n.</p> <p></p>"},{"location":"ByteByteGo/crack-system-design-interviews/#tap-dung-whiteboard","title":"T\u1eadp d\u00f9ng whiteboard","text":"<p>Th\u00eam n\u1eefa, t\u1eadp d\u00f9ng whiteboard v\u00e0 c\u00e1c \u1ee9ng d\u1ee5ng v\u1ebd bi\u1ec3u \u0111\u1ed3 m\u1ed9t c\u00e1ch tho\u1ea3i m\u00e1i. Trong nhi\u1ec1u tr\u01b0\u1eddng h\u1ee3p, b\u1ea1n c\u1ea7n ph\u1ea3i d\u00f9ng ch\u00fang \u0111\u1ec3 bi\u1ec3u th\u1ecb \u0111i\u1ec1u b\u1ea1n mu\u1ed1n tr\u00ecnh b\u00e0y. H\u00e3y th\u00e0nh th\u1ea1o ch\u00fang \u0111\u1ec3 t\u1eadp trung v\u00e0o vi\u1ec7c giao ti\u1ebfp m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3, ch\u1ee9 kh\u00f4ng ph\u1ea3i b\u1ed1i r\u1ed1i khi s\u1eed d\u1ee5ng r\u1ed3i nh\u1eadn l\u1ea1i c\u00e1i k\u1ebft \u0111\u1eafng.</p> <p></p>"},{"location":"ByteByteGo/crack-system-design-interviews/#phong-van-thu","title":"Ph\u1ecfng v\u1ea5n th\u1eed","text":"<p>Cu\u1ed1i c\u00f9ng, ph\u1ecfng v\u1ea5n th\u1eed th\u01b0\u1eddng xuy\u00ean. Kh\u00f4ng c\u00f3 g\u00ec t\u1ed1t h\u01a1n ph\u1ecfng v\u1ea5n theo th\u1eddi gian th\u1ef1c \u0111\u1ec3 ki\u1ec3m tra k\u1ef9 n\u0103ng c\u1ee7a b\u1ea1n. Nh\u1eadn ph\u1ea3n h\u1ed3i t\u1eeb ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n th\u1eed, kh\u00f4ng ch\u1ec9 v\u1ec1 design m\u00e0 c\u00f2n v\u1ec1 c\u00e1ch giao ti\u1ebfp, kh\u1ea3 n\u0103ng suy lu\u1eadn v\u00e0 qu\u1ea3n l\u00fd th\u1eddi gian c\u1ee7a b\u1ea1n. D\u00f9ng ph\u1ecfng v\u1ea5n th\u1eed nh\u01b0 m\u1ed9t c\u00e1i g\u01b0\u01a1ng, ph\u1ea3n \u00e1nh nh\u1eefng \u0111i\u1ec3m m\u1ea1nh v\u00e0 y\u1ebfu c\u1ee7a b\u1ea1n.</p>"},{"location":"ByteByteGo/crack-system-design-interviews/#lam-gi-trong-phong-van-system-design","title":"L\u00e0m g\u00ec trong ph\u1ecfng v\u1ea5n System Design?","text":"<ol> <li>B\u1eaft \u0111\u1ea7u b\u1eb1ng vi\u1ec7c \u0111\u1eb7t c\u00e1c c\u00e2u h\u1ecfi \u0111\u1ec3 hi\u1ec3u r\u00f5 y\u00eau c\u1ea7u, ph\u1ea1m vi, c\u00e1c gi\u1edbi h\u1ea1n k\u1ef9 thu\u1eadt v\u00e0 c\u00e1c y\u00eau c\u1ea7u kh\u00e1c tr\u01b0\u1edbc khi b\u01b0\u1edbc v\u00e0o thi\u1ebft k\u1ebf. Tr\u00e1nh vi\u1ec7c lao v\u00e0o \u0111\u1ec1 xu\u1ea5t t\u00ednh n\u0103ng ngay t\u1eeb \u0111\u1ea7u, c\u1ee9 vi\u1ebft ra c\u00e1c y\u00eau c\u1ea7u c\u1ed1t l\u00f5i \u0111\u00e3. </li> <li>Ch\u00fa \u00fd qu\u1ea3n l\u00fd th\u1eddi gian h\u1ee3p l\u00fd. Th\u1eddi gian b\u1ea1n th\u1ef1c s\u1ef1 thi\u1ebft k\u1ebf s\u1ebd \u00edt h\u01a1n nhi\u1ec1u khi c\u00f3 s\u1ef1 xu\u1ea5t hi\u1ec7n c\u1ee7a c\u00e1c ph\u1ea7n nh\u01b0 gi\u1edbi thi\u1ec7u, \u0111\u1eb7t c\u00e2u h\u1ecfi, v\u1ebd bi\u1ec3u \u0111\u1ed3, v\u00e0 nh\u1eefng l\u1ea7n gi\u00e1n \u0111o\u1ea1n nh\u1ecf. M\u1ed7i ph\u00fat gi\u00e2y \u0111\u1ec1u r\u1ea5t quan tr\u1ecdng, cho n\u00ean h\u00e3y \u0111i\u1ec1u ch\u1ec9nh t\u1ed1c \u0111\u1ed9 v\u00e0 ti\u1ebfn b\u01b0\u1edbc. X\u00e1c \u0111\u1ecbnh c\u00e1c ch\u1ed7 b\u1ea1n c\u00f3 th\u1ec3 b\u00ed. </li> <li>Khi b\u1ea1n v\u1ebd bi\u1ec3u \u0111\u1ed3 c\u00e1c th\u00e0nh ph\u1ea7n h\u1ec7 th\u1ed1ng, n\u00f3i ra suy ngh\u0129 c\u1ee7a m\u00ecnh v\u00e0 gi\u1ea3i th\u00edch l\u00fd do cho c\u00e1c l\u1ef1a ch\u1ecdn c\u1ee7a b\u1ea3n th\u00e2n, \u0111\u1eebng \u0111\u1ec3 ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n ph\u1ea3i \u0111o\u00e1n b\u1ea1n \u0111ang ngh\u0129 g\u00ec. Nh\u1edb n\u00f3i ra c\u00e1c gi\u1ea3 thi\u1ebft n\u1eefa. </li> <li>Ghi l\u1ea1i c\u00e1c kh\u00eda c\u1ea1nh quan tr\u1ecdng tr\u00ean whiteboard \u0111\u1ec3 ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n c\u00f3 th\u1ec3 theo \u0111\u01b0\u1ee3c b\u1ea1n. Chia h\u1ec7 th\u1ed1ng th\u00e0nh c\u00e1c th\u00e0nh ph\u1ea7n logic. \u0110\u00e1nh d\u1ea5u c\u00e1c lu\u1ed3ng d\u1eef li\u1ec7u ch\u00ednh v\u00e0 c\u00e1c dependency gi\u1eefa ch\u00fang. Tr\u00e1nh vi\u1ec7c sa \u0111\u00e0 v\u00e0o low-level design, t\u1eadp trung v\u00e0o high-level v\u00e0 c\u00e1c tradeoff r\u1ed9ng h\u01a1n.</li> <li>N\u1ebfu b\u00ed, h\u00e3y th\u1edf \u0111\u1ec1u v\u00e0 \u0111\u1eebng ho\u1ea3ng. H\u1ecfi ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n \u0111\u1ec3 gi\u1ea3i quy\u1ebft nh\u1eefng \u0111i\u1ec1u kh\u00f4ng r\u00f5 r\u00e0ng. Suy ngh\u0129 t\u1eebng b\u01b0\u1edbc m\u1ed9t \u0111\u1ec3 gi\u1ea3i quy\u1ebft th\u1ebf b\u00ed. Vi\u1ec7c v\u01b0\u1ee3t qua c\u00e1c tr\u1edf ng\u1ea1i v\u00e0 ti\u1ebfn l\u00ean khi kh\u00f4ng c\u00f3 \u0111\u1ea7y \u0111\u1ee7 th\u00f4ng tin c\u0169ng l\u00e0 m\u1ed9t ph\u1ea7n c\u1ee7a th\u1eed th\u00e1ch n\u00e0y.</li> </ol> <p>Ch\u00fac c\u00e1c b\u1ea1n th\u00e0nh c\u00f4ng!</p>"},{"location":"ByteByteGo/debugging-techniques/","title":"C\u00e1c k\u0129 thu\u1eadt debug","text":""},{"location":"ByteByteGo/debugging-techniques/#nguon","title":"Ngu\u1ed3n","text":"<p> Debugging Like A Pro</p>"},{"location":"ByteByteGo/debugging-techniques/#mo-au","title":"M\u1edf \u0111\u1ea7u","text":"<p>B\u1ea1n c\u00f3 bao gi\u1edd t\u1ef1 h\u1ecfi v\u00ec sao \u1edf tr\u01b0\u1eddng ng\u01b0\u1eddi ta kh\u00f4ng d\u1ea1y g\u1ee1 l\u1ed7i (debug) hay kh\u00f4ng? Ph\u1ea7n l\u1edbn l\u1eadp tr\u00ecnh vi\u00ean h\u1ecdc debug th\u00f4ng qua c\u00f4ng vi\u1ec7c, v\u00e0 ch\u1ec9 c\u00f3 m\u1ed9t v\u00e0i thanh ni\u00ean may m\u1eafn c\u00f3 ng\u01b0\u1eddi h\u01b0\u1edbng d\u1eabn \u0111\u1ec3 ch\u1ec9 cho h\u1ecd debug nh\u01b0 n\u00e0o cho chu\u1ea9n.</p> <p>H\u00f4m nay, ta s\u1ebd nghi\u00ean c\u1ee9u m\u1ed9t c\u00e1ch ti\u1ebfp c\u1eadn c\u00f3 h\u1ec7 th\u1ed1ng cho vi\u1ec7c debug, b\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng n\u00f3 nh\u01b0 m\u1ed9t checklist trong qu\u00e1 tr\u00ecnh debug c\u1ee7a ch\u00ednh b\u1ea3n th\u00e2n b\u1ea1n. Debug \u0111\u00f2i h\u1ecfi k\u1ec9 lu\u1eadt, b\u1ea1n c\u00f3 th\u1ec3 d\u1ec5 d\u00e0ng xao nh\u00e3ng v\u00e0 ph\u00ed ph\u1ea1m th\u1eddi gian qu\u00fd gi\u00e1. Ta s\u1ebd nghi\u00ean c\u1ee9u l\u00e0m sao \u0111\u1ec3 c\u00f3 tr\u1ef1c gi\u00e1c t\u1ed1t v\u00e0 nh\u1eefng s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i c\u1ea7n thi\u1ebft trong vi\u1ec7c debug. H\u00e3y nh\u1edb r\u1eb1ng, b\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng nh\u1eefng k\u0129 thu\u1eadt n\u00e0y theo th\u1ee9 t\u1ef1 n\u00e0o c\u0169ng \u0111\u01b0\u1ee3c, kh\u00f4ng c\u00f3 c\u00e1ch \u0111\u00fang ho\u1eb7c sai g\u00ec \u0111\u1ec3 debug.</p> <p>Ta b\u1eaft \u0111\u1ea7u v\u1edbi t\u1ea7m quan tr\u1ecdng c\u1ee7a vi\u1ec7c c\u00f3 m\u1ed9t t\u01b0 duy \u0111\u00fang \u0111\u1eafn khi debug. N\u00f3 c\u0169ng c\u00f3 ngh\u0129a l\u00e0 s\u1ef1 kh\u00e1c nhau gi\u1eefa vi\u1ec7c \u0111\u1ea7u h\u00e0ng qu\u00e1 s\u1edbm ho\u1eb7c gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 ho\u00e0n to\u00e0n. Khi g\u1eb7p nh\u1eefng l\u1ed7i kh\u00f3 debug, vi\u1ec7c gi\u1eef \u0111\u01b0\u1ee3c nh\u1eefng t\u01b0 duy nh\u01b0 sau r\u1ea5t quan tr\u1ecdng: </p> <ol> <li>Nh\u1edb r\u1eb1ng m\u00e1y t\u00ednh ho\u1ea1t \u0111\u1ed9ng theo logic, v\u00e0 lu\u00f4n c\u00f3 m\u1ed9t c\u00e1ch gi\u1ea3i th\u00edch logic cho v\u1ea5n \u0111\u1ec1 m\u00e0 b\u1ea1n \u0111ang g\u1eb7p ph\u1ea3i, ngay c\u1ea3 khi nghe n\u00f3 th\u1eadt v\u00f4 l\u00fd trong th\u1eddi \u0111i\u1ec3m b\u1ea1n \u0111\u00e1nh gi\u00e1.</li> <li>Kh\u00f3 kh\u0103n ch\u1ec9 l\u00e0 t\u1ea1m th\u1eddi, v\u00e0 v\u1edbi s\u1ef1 ki\u00ean nh\u1eabn v\u00e0 n\u1ed7 l\u1ef1c, v\u1ea5n \u0111\u1ec1 r\u1ed3i s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft.</li> <li>Bi\u1ebft \u0111\u01b0\u1ee3c gi\u1edbi h\u1ea1n c\u1ee7a b\u1ea3n th\u00e2n v\u00e0 nh\u1eadn ra khi n\u00e0o c\u1ea7n \u0111\u1ebfn s\u1ef1 gi\u00fap \u0111\u1ee1 t\u1eeb ng\u01b0\u1eddi chuy\u00ean nghi\u1ec7p h\u01a1n l\u00e0 \u0111i\u1ec1u r\u1ea5t quan tr\u1ecdng</li> <li>Kh\u00f4ng ph\u1ea3i l\u00fac n\u00e0o ta c\u0169ng c\u1ea7n n\u1ed7 l\u1ef1c l\u1edbn \u0111\u1ec3 gi\u1ea3i quy\u1ebft m\u1ecdi lo\u1ea1i bug. Ta c\u1ea7n s\u1eafp x\u1ebfp ch\u00fang theo th\u1ee9 t\u1ef1 \u01b0u ti\u00ean d\u1ef1a v\u00e0o \u0111\u1ed9 nghi\u00eam tr\u1ecdng v\u00e0 s\u1ef1 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn h\u1ec7 th\u1ed1ng ho\u1eb7c ch\u01b0\u01a1ng tr\u00ecnh. Ta c\u1ea7n ch\u1ea5p nh\u1eadn m\u1ed9t th\u1ef1c t\u1ebf r\u1eb1ng m\u1ed9t s\u1ed1 bug th\u1ef1c s\u1ef1 kh\u00f4ng \u0111\u00e1ng \u0111\u1ec3 ta b\u1ecf nhi\u1ec1u c\u00f4ng s\u1ee9c \u0111\u1ebfn nh\u01b0 th\u1ebf.</li> </ol> <p></p>"},{"location":"ByteByteGo/debugging-techniques/#nhung-ieu-co-ban","title":"Nh\u1eefng \u0111i\u1ec1u c\u01a1 b\u1ea3n","text":"<p>Khi ta nh\u1eadn \u0111\u01b0\u1ee3c b\u00e1o c\u00e1o l\u1ed7i t\u1eeb kh\u00e1ch h\u00e0ng, ta c\u1ea7n ph\u1ea3i thu th\u1eadp nhi\u1ec1u th\u00f4ng tin nh\u1ea5t c\u00f3 th\u1ec3. Xin \u1ea3nh ch\u1ee5p m\u00e0n h\u00ecnh ho\u1eb7c video m\u00f4 t\u1ea3 l\u1ed7i t\u1eeb kh\u00e1ch h\u00e0ng n\u1ebfu c\u00f3 th\u1ec3. Th\u00eam v\u00e0o \u0111\u00f3, thu th\u1eadp c\u00e1c b\u01b0\u1edbc \u0111\u1ec3 t\u00e1i t\u1ea1o l\u1ea1i l\u1ed7i v\u00e0 c\u00e1c log c\u00f3 li\u00ean quan, k\u1ec3 c\u1ea3 c\u00e1c error message li\u00ean quan \u0111\u1ebfn l\u1ed7i. M\u1ee5c ti\u00eau l\u00e0 \u0111\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c nhi\u1ec1u th\u00f4ng tin nh\u1ea5t c\u00f3 th\u1ec3 \u0111\u1ec3 gi\u00fap ch\u00fang ta t\u00e1i t\u1ea1o l\u1ea1i l\u1ed7i.</p> <p>N\u1ebfu ta c\u00f3 th\u1ec3 c\u00f4 l\u1eadp m\u00f4i tr\u01b0\u1eddng v\u00e0 ho\u00e0n c\u1ea3nh n\u01a1i m\u00e0 l\u1ed7i x\u1ea3y ra, ta c\u00f3 th\u1ec3 th\u1eed t\u1ea1o l\u1ea1i l\u1ed7i \u0111\u00f3 tr\u00ean m\u1ed9t server test v\u00e0 xem th\u1eed n\u00f3 c\u00f3 hi\u1ec7n ra hay kh\u00f4ng. C\u00f3 \u0111\u01b0\u1ee3c m\u1ed9t m\u00f4i tr\u01b0\u1eddng \u0111\u1ec3 t\u1ea1o l\u1ea1i l\u1ed7i \u0111\u00e3 l\u00e0 \u0111i \u0111\u01b0\u1ee3c n\u1eeda ch\u1eb3ng \u0111\u01b0\u1eddng.</p> <p>Gi\u1edd t\u1ea1o \u0111\u01b0\u1ee3c l\u1ed7i l\u1ea1i r\u1ed3i th\u00ec l\u00e0m g\u00ec n\u1eefa. \u0110\u00e2y l\u00e0 m\u1ed9t s\u1ed1 ph\u01b0\u01a1ng ph\u00e1p \u0111\u1ec3 b\u1ea1n c\u00e2n nh\u1eafc:</p> <p>Th\u1ee9 nh\u1ea5t, d\u00f9ng print m\u1ed9t c\u00e1ch t\u1ef1 do. Ch\u00fang c\u00f3 th\u1ec3 gi\u00fap ta t\u1ea1o ra \u0111\u01b0\u1ee3c m\u1ed9t timeline v\u1ec1 nh\u1eefng g\u00ec \u0111\u00e3 x\u1ea3y ra v\u00e0 xem th\u1eed code c\u00f3 ch\u1ea1y theo th\u1ee9 t\u1ef1 nh\u01b0 ta print ra hay kh\u00f4ng. V\u1edbi m\u1ed9t s\u1ed1 h\u1ec7 sinh th\u00e1i ng\u00f4n ng\u1eef, setup m\u1ed9t debugger c\u00f3 v\u1ebb nh\u01b0 kh\u1ea3 thi h\u01a1n. V\u00ed d\u1ee5, c\u00e1c h\u1ec7 th\u1ed1ng nh\u01b0 Erlang/OTP c\u00f3 debugger r\u1ea5t m\u1ea1nh, gi\u00fap \u00edch nhi\u1ec1u cho l\u1eadp tr\u00ecnh vi\u00ean khi g\u1eb7p kh\u00f3 kh\u0103n. N\u00f3i chung, n\u1ebfu c\u00f3 th\u1ec3 t\u00e1i t\u1ea1o l\u1ea1i l\u1ed7i, s\u1ebd kh\u00f4ng qu\u00e1 kh\u00f3 \u0111\u1ec3 debug. N\u00f3 c\u00f3 th\u1ec3 m\u1ea5t ch\u00fat th\u1eddi gian v\u00e0 s\u1ef1 ki\u00ean nh\u1eabn, nh\u01b0ng n\u1ebfu l\u00e0m theo nh\u1eefng ph\u01b0\u01a1ng ph\u00e1p \u1edf tr\u00ean th\u00ec cu\u1ed1i c\u00f9ng l\u1ed7i c\u0169ng s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft.</p> <p>C\u01a1 m\u00e0 n\u1ebfu kh\u00f4ng t\u00e1i t\u1ea1o l\u1ea1i \u0111\u01b0\u1ee3c l\u1ed7i th\u00ec sao? Kh\u00e1 l\u00e0 kh\u00f3 \u0111\u1ea5y. Ta c\u1ea7n ch\u00fat may m\u1eafn c\u00f9ng v\u1edbi r\u1ea5t nhi\u1ec1u s\u1ef1 ki\u00ean nh\u1eabn. H\u00e3y xem th\u1eed v\u00ec sao \u0111\u00f4i khi t\u00e1i t\u1ea1o l\u1ed7i l\u1ea1i r\u1ea5t kh\u00f3. M\u1ed9t s\u1ed1 tr\u01b0\u1eddng h\u1ee3p th\u01b0\u1eddng g\u1eb7p l\u00e0:</p> <p>Th\u1ee9 nh\u1ea5t, m\u1ed9t s\u1ed1 l\u1ed7i ch\u1ec9 ph\u00e1t sinh tr\u00ean m\u00f4i tr\u01b0\u1eddng live.</p> <p>Th\u1ee9 hai, m\u1ed9t s\u1ed1 l\u1ed7i ch\u1ec9 ph\u00e1t sinh tr\u00ean m\u00f4i tr\u01b0\u1eddng live trong m\u1ed9t s\u1ed1 race condition c\u1ee5 th\u1ec3. </p> <p></p> <p>Th\u1ee9 ba, m\u1ed9t s\u1ed1 ho\u00e0n c\u1ea3nh ho\u1eb7c m\u00f4i tr\u01b0\u1eddng tr\u00ean thi\u1ebft b\u1ecb c\u1ee7a ng\u01b0\u1eddi d\u00f9ng g\u00e2y ph\u00e1t sinh l\u1ed7i, nh\u01b0 l\u00e0 khi m\u1ed9t ng\u01b0\u1eddi d\u00f9ng twitter c\u00f3 qu\u00e1 nhi\u1ec1u followers ch\u1eb3ng h\u1ea1n.</p> <p>R\u1ed3i l\u00e0m g\u00ec n\u1eefa? M\u1ed9t s\u1ed1 c\u00e1ch b\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng l\u00e0:</p> <p>N\u1ebfu c\u00f3 m\u1ed9t l\u1ed7i c\u1ee5 th\u1ec3 n\u00e0o \u0111\u00f3, traceback code v\u1edbi call stack.</p> <p></p> <p>Thu th\u1eadp h\u1ebft c\u00e1c log v\u00e0 x\u00e2y d\u1ef1ng timeline b\u1eb1ng c\u00e1ch theo m\u1ed9t request th\u1ea5t b\u1ea1i qua h\u1ebft to\u00e0n b\u1ed9 v\u00f2ng \u0111\u1eddi c\u1ee7a request. N\u1ebfu may m\u1eafn, ta c\u00f3 th\u1ec3 suy ra chuy\u1ec7n g\u00ec \u0111\u00e3 x\u1ea3y ra.</p> <p></p> <p>Sau \u0111\u00f3, ta c\u00f3 th\u1ec3 th\u00eam log v\u00e0o code \u0111\u1ec3 ch\u1ee9ng minh lu\u1eadn \u0111i\u1ec3m tr\u00ean v\u00e0 push l\u00ean m\u00f4i tr\u01b0\u1eddng live. L\u1eb7p l\u1ea1i quy tr\u00ecnh n\u00e0y cho \u0111\u1ebfn khi ta c\u00f3 th\u00eam th\u00f4ng tin v\u00e0 cu\u1ed1i c\u00f9ng gi\u1ea3i quy\u1ebft \u0111\u01b0\u1ee3c l\u1ed7i. L\u01b0u \u00fd r\u1eb1ng qu\u00e1 tr\u00ecnh n\u00e0y c\u00f3 th\u1ec3 d\u00e0i v\u00e0 m\u1ec7t m\u1ecfi, nh\u01b0ng s\u1ef1 ki\u00ean nh\u1eabn r\u1ea5t quan tr\u1ecdng.</p> <p>Cu\u1ed1i c\u00f9ng, ta h\u00e3y review m\u1ed9t s\u1ed1 ph\u01b0\u01a1ng ph\u00e1p chung \u0111\u1ec3 c\u00e2n nh\u1eafc khi ta th\u1ef1c s\u1ef1 b\u1ebf t\u1eafc: </p> <ol> <li>Ngh\u1ec9 t\u00ed \u0111i. \u0110\u00f4i khi r\u1eddi m\u00e1y t\u00ednh m\u1ed9t l\u00e1t v\u00e0 quay l\u1ea1i v\u1edbi t\u00e2m h\u1ed3n t\u01b0\u01a1i m\u1edbi c\u00f3 th\u1ec3 cho b\u1ea1n nhi\u1ec1u \u00fd t\u01b0\u1edfng. Ng\u1ee7 m\u1ed9t gi\u1ea5c, t\u1eadp th\u1ec3 d\u1ee5c, hay l\u00e0m g\u00ec \u0111\u00f3 kh\u00e1c \u0111\u1ec3 thanh t\u1ea9y t\u00e2m tr\u00ed b\u1ea1n.</li> <li>\u0110\u1ed9c tho\u1ea1i. \u0110\u00f4i khi n\u00f3i ra c\u00e1i v\u1ea5n \u0111\u1ec1 b\u1ea1n \u0111ang g\u1eb7p ph\u1ea3i c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn m\u1ed9t kho\u1ea3nh kh\u1eafc Eureka n\u00e0o \u0111\u00f3. V\u1edbi m\u1ed9t s\u1ed1 ng\u01b0\u1eddi kh\u00e1c, vi\u1ebft v\u1ea5n \u0111\u1ec1 ra gi\u1ea5y ho\u1eb7c g\u1eedi email cho m\u1ed9t ng\u01b0\u1eddi b\u1ea1n t\u01b0\u1edfng t\u01b0\u1ee3ng c\u00f3 th\u1ec3 gi\u00fap h\u1ecd c\u00f3 m\u1ed9t s\u1ed1 \u00fd t\u01b0\u1edfng ho\u1eb7c g\u00f3c nh\u00ecn m\u1edbi. </li> <li>Nh\u1edd gi\u00fap \u0111\u1ee1. \u0110\u1eebng ng\u1ea7n ng\u1ea1i nh\u1edd ai \u0111\u00f3 gi\u00fap b\u1ea1n. Hai c\u00e1i \u0111\u1ea7u th\u00ec t\u1ed1t h\u01a1n m\u1ed9t. M\u1ed9t g\u00f3c nh\u00ecn kh\u00e1c b\u1ea1n th\u01b0\u1eddng gi\u00fap b\u1ea1n r\u1ea5t nhi\u1ec1u trong vi\u1ec7c gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1.</li> </ol> <p>Debug c\u00f3 th\u1ec3 kh\u00f3, nh\u01b0ng v\u1edbi m\u1ed9t t\u01b0 duy v\u00e0 chi\u1ebfn l\u01b0\u1ee3c \u0111\u00fang \u0111\u1eafn, b\u1ea1n c\u00f3 th\u1ec3 v\u01b0\u1ee3t qua m\u1ecdi tr\u1edf ng\u1ea1i. Ch\u00fac b\u1ea1n th\u00e0nh c\u00f4ng! </p>"},{"location":"ByteByteGo/design-location-based-service/","title":"Thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng: Thi\u1ebft k\u1ebf Location Based Service","text":""},{"location":"ByteByteGo/design-location-based-service/#nguon","title":"Ngu\u1ed3n","text":"<p> FAANG System Design Interview: Design A Location Based Service (Yelp, Google Places)</p>"},{"location":"ByteByteGo/design-location-based-service/#inh-nghia-va-yeu-cau","title":"\u0110\u1ecbnh ngh\u0129a v\u00e0 y\u00eau c\u1ea7u","text":"<p>D\u1ecbch v\u1ee5 l\u00e2n c\u1eadn (proximity service) l\u00e0 g\u00ec? \u0110\u00e2y l\u00e0 m\u1ed9t service th\u01b0\u1eddng \u0111\u01b0\u1ee3c th\u1ea5y trong c\u00e1c th\u00e0nh ph\u1ea7n backend c\u1ee7a m\u1ed9t \u1ee9ng d\u1ee5ng nh\u01b0 Yelp \u0111\u1ec3 t\u00ecm nh\u00e0 h\u00e0ng x\u1ecbn nh\u1ea5t \u1edf g\u1ea7n v\u1ecb tr\u00ed c\u1ee7a b\u1ea1n, ho\u1eb7c trong \u1ee9ng d\u1ee5ng b\u1ea3n \u0111\u1ed3 \u0111\u1ec3 t\u00ecm tr\u1ea1m x\u0103ng g\u1ea7n nh\u1ea5t.</p>"},{"location":"ByteByteGo/design-location-based-service/#functional-requirements","title":"Functional requirements","text":"<p>\u0110\u1ea7u ti\u00ean ta h\u00e3y \u0111i v\u00e0o vi\u1ec7c hi\u1ec3u b\u00e0i to\u00e1n v\u00e0 thi\u1ebft l\u1eadp ph\u1ea1m vi thi\u1ebft k\u1ebf \u1ee9ng d\u1ee5ng. C\u00e1c \u1ee9ng d\u1ee5ng kh\u00e1c nhau s\u1ebd c\u00f3 c\u00e1c y\u00eau c\u1ea7u kh\u00e1c nhau v\u1edbi proximity service. Ta s\u1ebd ch\u1ec9 xem x\u00e9t c\u00e1c functional requirement (y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng) c\u01a1 b\u1ea3n nh\u1ea5t.</p> <ol> <li>Cho v\u1ecb tr\u00ed c\u1ee7a ng\u01b0\u1eddi d\u00f9ng v\u00e0 b\u00e1n k\u00ednh, tr\u1ea3 v\u1ec1 t\u1ea5t c\u1ea3 c\u00e1c doanh nghi\u1ec7p ho\u1ea1t \u0111\u1ed9ng trong v\u00f2ng b\u00e1n k\u00ednh \u0111\u00f3.</li> <li>Ng\u01b0\u1eddi qu\u1ea3n l\u00fd doanh nghi\u1ec7p c\u00f3 th\u1ec3 th\u00eam, xo\u00e1 ho\u1eb7c s\u1eeda th\u00f4ng tin doanh nghi\u1ec7p c\u1ee7a m\u00ecnh. Nh\u1eefng thay \u0111\u1ed5i n\u00e0y kh\u00f4ng nh\u1ea5t thi\u1ebft ph\u1ea3i xu\u1ea5t hi\u1ec7n trong th\u1eddi gian th\u1ef1c, c\u00f3 th\u1ec3 ng\u00e0y h\u00f4m sau xu\u1ea5t hi\u1ec7n c\u0169ng \u0111\u01b0\u1ee3c.</li> <li>Ng\u01b0\u1eddi d\u00f9ng \u1ee9ng d\u1ee5ng c\u00f3 th\u1ec3 xem th\u00f4ng tin chi ti\u1ebft v\u1ec1 m\u1ed9t doanh nghi\u1ec7p n\u00e0o \u0111\u00f3.</li> </ol>"},{"location":"ByteByteGo/design-location-based-service/#non-functional-requirements","title":"Non-functional requirements","text":"<p>Ti\u1ebfp \u0111\u1ebfn l\u00e0 c\u00e1c non-functional requirement (y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng). C\u00e1c non-functional requirement \u0111\u1eb7t ra c\u00e1c r\u00e0ng bu\u1ed9c kh\u00e1c nhau \u0111\u1ed1i v\u1edbi thi\u1ebft k\u1ebf. Nh\u1eefng y\u00eau c\u1ea7u n\u00e0y l\u00e0m cho vi\u1ec7c thi\u1ebft k\u1ebf tr\u1edf n\u00ean th\u00fa v\u1ecb v\u00e0 c\u00f3 t\u00ednh th\u1eed th\u00e1ch cao. Gi\u1ea3 s\u1eed \u1ee9ng d\u1ee5ng \u0111\u00e1nh gi\u00e1 n\u00e0y c\u00f3 100 tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng h\u1eb1ng ng\u00e0y (DAU - Daily Active Users) v\u00e0 200 tri\u1ec7u doanh nghi\u1ec7p. Ta s\u1ebd c\u00f3 nh\u1eefng non-functional requirement sau:</p> <ol> <li>\u0110\u1ed9 tr\u1ec5 ph\u1ea3i th\u1ea5p (low latency). Ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 t\u00ecm th\u1ea5y c\u00e1c doanh nghi\u1ec7p l\u00e2n c\u1eadn m\u1ed9t c\u00e1ch nhanh ch\u00f3ng.</li> <li>Service ph\u1ea3i c\u00f3 t\u00ednh s\u1eb5n s\u00e0ng cao (high availability). N\u00f3 c\u00f3 th\u1ec3 x\u1eed l\u00fd l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp t\u0103ng \u0111\u1ed9t bi\u1ebfn trong gi\u1edd cao \u0111i\u1ec3m.</li> </ol>"},{"location":"ByteByteGo/design-location-based-service/#tinh-toan","title":"T\u00ednh to\u00e1n","text":"<p>Gi\u1edd ta s\u1ebd th\u1ef1c hi\u1ec7n m\u1ed9t s\u1ed1 t\u00ednh to\u00e1n t\u1ed5ng quan d\u1ef1a tr\u00ean c\u00e1c requirement \u1edf tr\u00ean. N\u00f3 s\u1ebd cho ta nh\u1eefng \u00fd t\u01b0\u1edfng s\u01a1 b\u1ed9 v\u1ec1 nh\u1eefng th\u00e1ch th\u1ee9c m\u00e0 ta c\u00f3 th\u1ec3 g\u1eb7p v\u00e0 nh\u1eefng s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i ta c\u00f3 th\u1ec3 l\u00e0m. Trong n\u00e0y ta c\u00f3 th\u1ec3 \u0111\u01b0a ra m\u1ed9t s\u1ed1 gi\u1ea3 \u0111\u1ecbnh h\u1ee3p l\u00fd \u0111\u1ec3 d\u1ec5 t\u00ednh to\u00e1n h\u01a1n.</p> <p>Gi\u1ea3 s\u1eed, v\u1edbi m\u1ed9t ng\u01b0\u1eddi d\u00f9ng h\u00e0ng ng\u00e0y, trung b\u00ecnh ng\u01b0\u1eddi \u0111\u00f3 c\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n 5 truy v\u1ea5n t\u00ecm ki\u1ebfm. V\u1edbi 100 tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng h\u00e0ng ng\u00e0y v\u00e0 5 truy v\u1ea5n cho m\u1ed9t ng\u01b0\u1eddi / ng\u00e0y, s\u1ebd c\u00f3 t\u1ea7m 5000 truy v\u1ea5n m\u1ed9t gi\u00e2y. Ta c\u0169ng c\u1ea7n bi\u1ebft dung l\u01b0\u1ee3ng l\u01b0u tr\u1eef c\u1ea7n \u0111\u1ec3 l\u01b0u 200 tri\u1ec7u doanh nghi\u1ec7p. Ta s\u1ebd d\u1eebng \u1edf \u0111\u00e2y m\u1ed9t t\u00ed \u0111\u1ec3 xem ta s\u1ebd l\u01b0u data nh\u01b0 th\u1ebf n\u00e0o \u0111\u00e3.</p>"},{"location":"ByteByteGo/design-location-based-service/#thiet-ke","title":"Thi\u1ebft k\u1ebf","text":""},{"location":"ByteByteGo/design-location-based-service/#api-design","title":"API design","text":"<p>Gi\u1edd ta h\u00e3y xem thi\u1ebft k\u1ebf API nh\u01b0 th\u1ebf n\u00e0o nh\u00e9. \u1ede \u0111\u00e2y ta s\u1ebd d\u00f9ng quy \u01b0\u1edbc RESTful API cho \u0111\u01a1n gi\u1ea3n. D\u1ef1a v\u00e0o functional requirement \u1edf tr\u00ean, ta s\u1ebd c\u00f3 hai lo\u1ea1i API. Lo\u1ea1i 1 s\u1ebd l\u00e0 \u0111\u1ec3 t\u00ecm doanh nghi\u1ec7p l\u00e2n c\u1eadn. \u0110\u00e2y l\u00e0 m\u1ed9t GET request nh\u1eadn v\u00e0o kinh \u0111\u1ed9 v\u00e0 v\u0129 \u0111\u1ed9 c\u1ee7a v\u1ecb tr\u00ed ng\u01b0\u1eddi d\u00f9ng, v\u00e0 m\u1ed9t tu\u1ef3 ch\u1ecdn b\u00e1n k\u00ednh. API n\u00e0y tr\u1ea3 v\u1ec1 c\u00e1c doanh nghi\u1ec7p trong m\u1ed9t m\u1ea3ng \u0111\u1ed1i t\u01b0\u1ee3ng doanh nghi\u1ec7p, c\u00f9ng t\u1ed5ng s\u1ed1 doanh nghi\u1ec7p tr\u1ea3 v\u1ec1. C\u00f3 hai \u0111i\u1ec3m c\u1ea7n l\u01b0u \u00fd:</p> <ul> <li>Ta s\u1ebd \u0111\u01a1n gi\u1ea3n ho\u00e1 API \u1edf \u0111\u00e2y b\u1eb1ng c\u00e1ch b\u1ecf qua ph\u00e2n trang. Tuy nhi\u00ean, trong th\u1ef1c t\u1ebf, ta n\u00ean \u0111\u01b0a ph\u00e2n trang v\u00e0o API</li> <li>C\u00e1c \u0111\u1ed1i t\u01b0\u1ee3ng doanh nghi\u1ec7p trong API response ch\u1ec9 ch\u1ee9a v\u1eeba \u0111\u1ee7 th\u00f4ng tin \u0111\u1ec3 cho ra k\u1ebft qu\u1ea3 t\u00ecm ki\u1ebfm. N\u00f3 kh\u00f4ng ch\u1ee9a th\u00f4ng tin \u0111\u1ec3 t\u1ea1o ra \u0111\u01b0\u1ee3c trang chi ti\u1ebft c\u1ee7a doanh nghi\u1ec7p. \u0110\u1ec3 render trang chi ti\u1ebft, ta c\u1ea7n m\u1ed9t API kh\u00e1c.</li> </ul> <p></p> <p>Lo\u1ea1i API th\u1ee9 hai qu\u1ea3n l\u00fd c\u00e1c \u0111\u1ed1i t\u01b0\u1ee3ng doanh nghi\u1ec7p. N\u00f3 bao g\u1ed3m c\u00e1c CRUD endpoint \u0111\u1ec3 th\u00eam, \u0111\u1ecdc, s\u1eeda v\u00e0 xo\u00e1 m\u1ed9t doanh nghi\u1ec7p. Ta kh\u00f4ng \u0111i v\u00e0o chi ti\u1ebft ph\u1ea7n n\u00e0y v\u00ec n\u00f3 kh\u00e1 \u0111\u01a1n gi\u1ea3n.</p> <p></p>"},{"location":"ByteByteGo/design-location-based-service/#data-schema","title":"Data schema","text":"<p>C\u00f3 hai b\u1ea3ng ch\u00ednh \u1edf \u0111\u00e2y. \u0110\u1ea7u ti\u00ean l\u00e0 b\u1ea3ng doanh nghi\u1ec7p, ch\u1ee9a th\u00f4ng tin doanh nghi\u1ec7p. Kho\u00e1 ch\u00ednh l\u00e0 business ID. B\u1ea3ng n\u00e0y h\u1ed7 tr\u1ee3 c\u00e1c thao t\u00e1c CRUD cho API ta v\u1eeba n\u00f3i \u1edf tr\u00ean.</p> <p>B\u1ea3ng th\u1ee9 hai th\u00fa v\u1ecb h\u01a1n. N\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng b\u1edfi API t\u00ecm ki\u1ebfm doanh nghi\u1ec7p \u0111\u1ec3 tr\u1ea3 v\u1ec1 doanh nghi\u1ec7p nhanh ch\u00f3ng. B\u1ea3ng n\u00e0y t\u1ed1i thi\u1ec3u ph\u1ea3i c\u00f3 business ID v\u00e0 v\u1ecb tr\u00ed doanh nghi\u1ec7p. C\u00e1c v\u1ecb tr\u00ed n\u00e0y ph\u1ea3i \u0111\u01b0\u1ee3c index theo m\u1ed9t c\u00e1ch n\u00e0o \u0111\u00f3 \u0111\u1ec3 gi\u00fap tr\u1ea3 v\u1ec1 k\u1ebft qu\u1ea3 nhanh ch\u00f3ng. Vi\u1ec7c ch\u1ecdn b\u1ea3ng v\u00e0 c\u01a1 s\u1edf d\u1eef li\u1ec7u \u0111\u00f2i h\u1ecfi m\u1ed9t s\u1ed1 ki\u1ebfn th\u1ee9c v\u1ec1 t\u00ecm ki\u1ebfm kh\u00f4ng gian \u0111\u1ecba l\u00fd (geospatial search).</p> <p></p> <p>Ta c\u00f3 schema r\u1ed3i, gi\u1edd ta c\u00f3 th\u1ec3 t\u00ednh to\u00e1n kh\u00f4ng gian l\u01b0u tr\u1eef. C\u00f3 200 tri\u1ec7u doanh nghi\u1ec7p. V\u1edbi b\u1ea3ng doanh nghi\u1ec7p n\u00e0y, ta \u01b0\u1edbc t\u00ednh r\u1eb1ng th\u00f4ng tin m\u1ed9t doanh nghi\u1ec7p s\u1ebd chi\u1ebfm kh\u00f4ng qu\u00e1 10 kilobyte, th\u1ef1c ra trung b\u00ecnh s\u1ebd l\u00e0 t\u1ea7m 1 kilobyte. V\u00ec v\u1eady n\u00ean b\u1ea3ng n\u00e0y s\u1ebd chi\u1ebfm t\u1ea7m d\u01b0\u1edbi 1 terabyte g\u00ec \u0111\u1ea5y.</p> <p></p> <p>C\u00f2n b\u1ea3ng t\u00ecm ki\u1ebfm v\u1ecb tr\u00ed th\u00ec sao? B\u1ea3ng n\u00e0y s\u1ebd l\u01b0u business ID, kinh \u0111\u1ed9 v\u0129 \u0111\u1ed9 c\u1ee7a m\u1ed7i doanh nghi\u1ec7p. M\u1ed7i th\u1ee9 s\u1ebd t\u1ea7m 8 byte, ngh\u0129a l\u00e0 kho\u1ea3ng 200 tri\u1ec7u l\u1ea7n 24 byte, l\u00e0 kho\u1ea3ng 5 gigabyte. \u0110i\u1ec1u n\u00e0y cho th\u1ea5y t\u1eadp d\u1eef li\u1ec7u t\u00ecm ki\u1ebfm v\u1ecb tr\u00ed n\u00e0y r\u1ea5t nh\u1ecf. Khi t\u1eadp d\u1eef li\u1ec7u nh\u1ecf nh\u01b0 v\u1eady, ta c\u00f3 r\u1ea5t nhi\u1ec1u l\u1ef1a ch\u1ecdn thi\u1ebft k\u1ebf, k\u1ec3 c\u1ea3 nh\u1eefng l\u1ef1a ch\u1ecdn n\u1eb1m ho\u00e0n to\u00e0n trong b\u1ed9 nh\u1edb.</p>"},{"location":"ByteByteGo/design-location-based-service/#high-level-design","title":"High-level design","text":"<p>Gi\u1edd ta \u0111\u00e3 bi\u1ebft \u0111\u1ee7 nhi\u1ec1u \u0111\u1ec3 c\u00f3 m\u1ed9t s\u01a1 \u0111\u1ed3 thi\u1ebft k\u1ebf t\u1ed5ng qu\u00e1t. Trong h\u1ec7 th\u1ed1ng n\u00e0y, ta c\u00f3 2 ph\u1ea7n. M\u1ed7i c\u00e1i th\u00ec \u00e1nh x\u1ea1 t\u1edbi m\u1ed9t danh m\u1ee5c API \u0111\u00e3 n\u00f3i \u1edf tr\u00ean. Ta g\u1ecdi ph\u1ea7n \u0111\u1ea7u ti\u00ean l\u00e0 \"service d\u1ef1a tr\u00ean v\u1ecb tr\u00ed\" (Location-Based Service - LBS), v\u00e0 ph\u1ea7n hai l\u00e0 \"service doanh nghi\u1ec7p\" (business service). Ta s\u1ebd xem x\u00e9t t\u1eebng th\u00e0nh ph\u1ea7n trong thi\u1ebft k\u1ebf t\u1ed5ng qu\u00e1t n\u00e0y.</p> <p></p> <p>\u0110\u1ea7u ti\u00ean l\u00e0 load balancer. Trong thi\u1ebft k\u1ebf, load balancer s\u1ebd ph\u00e2n ph\u1ed1i l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp \u0111\u1ebfn hai service tr\u00ean, d\u1ef1a v\u00e0o c\u00e1c tuy\u1ebfn API. C\u00e1c service n\u00e0y \u0111\u1ec1u l\u00e0 stateless (kh\u00f4ng tr\u1ea1ng th\u00e1i). Vi\u1ec7c tri\u1ec3n khai c\u00e1c service phi tr\u1ea1ng th\u00e1i sau load balancer kh\u00e1 l\u00e0 ph\u1ed5 bi\u1ebfn v\u00e0 ta s\u1ebd kh\u00f4ng \u0111i s\u00e2u h\u01a1n \u1edf \u0111\u00e2y. L\u01b0u \u00fd r\u1eb1ng trong th\u1ef1c t\u1ebf, ta c\u00f3 th\u1ec3 c\u00f3 nh\u1eefng thi\u1ebft l\u1eadp kh\u00e1c \u0111\u1ec3 ph\u00e2n ph\u1ed1i truy c\u1eadp \u0111\u1ebfn c\u00e1c service (nh\u01b0 API Gateway tr\u00ean AWS hay envoy tr\u00ean c\u1ee5m Kubernetes).</p> <p>Sau load balancer, ta c\u00f3 hai service n\u00f3i tr\u00ean. LBS l\u00e0 ph\u1ea7n c\u1ed1t l\u00f5i c\u1ee7a h\u1ec7 th\u1ed1ng. N\u00f3 t\u00ecm c\u00e1c doanh nghi\u1ec7p l\u00e2n c\u1eadn d\u1ef1a v\u00e0o b\u00e1n k\u00ednh v\u00e0 v\u1ecb tr\u00ed m\u1ed9t c\u00e1ch nhanh ch\u00f3ng. LBS c\u00f3 v\u00e0i \u0111i\u1ec3m th\u00fa v\u1ecb. </p> <ol> <li>Ta s\u1ebd \u0111\u1ecdc d\u1eef li\u1ec7u nhi\u1ec1u h\u01a1n ghi d\u1eef li\u1ec7u r\u1ea5t nhi\u1ec1u. </li> <li>QPS cao, kho\u1ea3ng 5000 QPS. </li> <li>Service n\u00e0y l\u00e0 stateless. N\u00f3 c\u00f3 th\u1ec3 d\u1ec5 d\u00e0ng \u0111\u01b0\u1ee3c m\u1edf r\u1ed9ng theo chi\u1ec1u ngang.</li> </ol> <p>Ti\u1ebfp theo l\u00e0 service doanh nghi\u1ec7p. Service n\u00e0y x\u1eed l\u00fd c\u00e1c request CRUD \u0111\u1ec3 qu\u1ea3n l\u00fd c\u00e1c \u0111\u1ed1i t\u01b0\u1ee3ng doanh nghi\u1ec7p. QPS cho vi\u1ec7c t\u1ea1o, s\u1eeda v\u00e0 xo\u00e1 \u1edf \u0111\u00e2y kh\u00f4ng cao. V\u00e0 d\u1ef1a v\u00e0o functional requirement, c\u00e1c thay \u0111\u1ed5i kh\u00f4ng c\u1ea7n ph\u1ea3i ngay l\u1eadp t\u1ee9c. \u0110i\u1ec1u n\u00e0y cho ta nhi\u1ec1u s\u1ef1 linh ho\u1ea1t trong thi\u1ebft k\u1ebf. Tuy nhi\u00ean, v\u1edbi thao t\u00e1c \u0111\u1ecdc, QPS c\u00f3 th\u1ec3 cao trong gi\u1edd cao \u0111i\u1ec3m. V\u00ec d\u1eef li\u1ec7u n\u00e0y kh\u00f4ng thay \u0111\u1ed5i th\u01b0\u1eddng xuy\u00ean n\u00ean n\u00f3 l\u00e0 m\u1ed9t \u1ee9ng vi\u00ean ti\u1ec1m n\u0103ng \u0111\u1ec3 cache n\u1ebfu c\u1ea7n.</p> <p>Ti\u1ebfp theo l\u00e0 c\u1ee5m database. Ta ch\u01b0a n\u00f3i v\u1ec1 lo\u1ea1i database n\u00e0o ta s\u1ebd d\u00f9ng, nh\u01b0ng s\u1ebd \u0111i s\u00e2u v\u00e0o sau. Tuy nhi\u00ean, d\u1ef1a tr\u00ean c\u00e1c pattern truy c\u1eadp v\u00e0 l\u01b0u l\u01b0\u1ee3ng \u0111\u1ecdc / ghi, ta \u0111\u00e3 bi\u1ebft \u0111\u1ee7 nhi\u1ec1u \u0111\u1ec3 quy\u1ebft \u0111\u1ecbnh d\u00f9ng database n\u00e0o. </p> <p>C\u01a1 b\u1ea3n th\u00ec ta \u0111\u00e3 bi\u1ebft r\u1eb1ng: </p> <ul> <li>Service n\u1eb7ng v\u1ec1 \u0111\u1ecdc d\u1eef li\u1ec7u. </li> <li>QPS \u0111\u1ecdc s\u1ebd l\u1edbn h\u01a1n nhi\u1ec1u so v\u1edbi QPS ghi. </li> <li>Vi\u1ec7c ghi d\u1eef li\u1ec7u kh\u00f4ng c\u1ea7n ph\u1ea3i ngay l\u1eadp t\u1ee9c. </li> </ul> <p>T\u1eadp d\u1eef li\u1ec7u t\u00ecm ki\u1ebfm kh\u00f4ng l\u1edbn l\u1eafm. T\u1eadp d\u1eef li\u1ec7u doanh nghi\u1ec7p to h\u01a1n m\u1ed9t ch\u00fat v\u00e0 ta c\u00f3 th\u1ec3 c\u1ea7n ph\u1ea3i t\u1ed1i \u01b0u n\u00f3. D\u1ef1a v\u00e0o c\u00e1c y\u1ebfu t\u1ed1 n\u00e0y, vi\u1ec7c s\u1eed d\u1ee5ng c\u1ee5m database v\u1edbi primary-secondary setup c\u00f3 th\u1ec3 l\u00e0 m\u1ed9t n\u01b0\u1edbc \u0111i hay.</p> <p>V\u1edbi setup n\u00e0y, database ch\u00ednh s\u1ebd x\u1eed l\u00fd t\u1ea5t c\u1ea3 c\u00e1c y\u00eau c\u1ea7u ghi, v\u00e0 c\u00e1c b\u1ea3n sao s\u1ebd ch\u1ec9 cho c\u00e1c y\u00eau c\u1ea7u \u0111\u1ecdc. D\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u v\u00e0o database ch\u00ednh tr\u01b0\u1edbc v\u00e0 sau \u0111\u00f3 \u0111\u01b0\u1ee3c sao ch\u00e9p qua c\u00e1c b\u1ea3n sao. S\u1ebd c\u00f3 m\u1ed9t s\u1ed1 d\u1eef li\u1ec7u b\u1ecb tr\u1ec5 khi \u0111\u1ecdc do c\u00f3 \u0111\u1ed9 tr\u1ec5 khi sao ch\u00e9p, nh\u01b0ng c\u0169ng kh\u00f4ng quan tr\u1ecdng l\u1eafm v\u00ec ta bi\u1ebft r\u1eb1ng thay \u0111\u1ed5i kh\u00f4ng c\u1ea7n xu\u1ea5t hi\u1ec7n ngay l\u1eadp t\u1ee9c.</p>"},{"location":"ByteByteGo/design-location-based-service/#thiet-ke-chuyen-sau","title":"Thi\u1ebft k\u1ebf chuy\u00ean s\u00e2u","text":""},{"location":"ByteByteGo/design-location-based-service/#database-khong-gian-ia-ly","title":"Database kh\u00f4ng gian \u0111\u1ecba l\u00fd","text":"<p>\u0110\u1ebfn \u0111\u00e2y ta \u0111\u00e3 c\u00f3 nhi\u1ec1u \u00fd hay v\u1ec1 vi\u1ec7c h\u1ec7 th\u1ed1ng ban \u0111\u1ea7u s\u1ebd tr\u00f4ng nh\u01b0 th\u1ebf n\u00e0o. Gi\u1edd h\u00e3y \u0111i s\u00e2u v\u00e0o m\u1ed9t s\u1ed1 chi ti\u1ebft th\u00fa v\u1ecb. Ta h\u00e3y c\u00f9ng xem database n\u00e0o c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 t\u00ecm v\u1ecb tr\u00ed nhanh. C\u00f3 m\u1ed9t l\u1edbp database \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 geospatial database (c\u01a1 s\u1edf d\u1eef li\u1ec7u v\u1ec1 kh\u00f4ng gian \u0111\u1ecba l\u00fd), n\u00f3 \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u \u0111\u1ec3 l\u01b0u v\u00e0 truy v\u1ea5n data trong kh\u00f4ng gian h\u00ecnh h\u1ecdc nh\u01b0 d\u1eef li\u1ec7u v\u1ecb tr\u00ed. M\u1ed9t s\u1ed1 v\u00ed d\u1ee5 l\u00e0 Redis GEOHASH v\u00e0 PostgreSQL v\u1edbi PostGIS extension.</p> <p>\u0110\u1ec3 hi\u1ec3u s\u01a1 b\u1ed9 v\u1ec1 c\u00e1ch th\u1ee9c ho\u1ea1t \u0111\u1ed9ng c\u1ee7a c\u00e1c database n\u00e0y, ta s\u1ebd n\u00f3i v\u1ec1 c\u00e1c thu\u1eadt to\u00e1n \u0111\u1ec3 index kh\u00f4ng gian \u0111\u1ecba l\u00fd c\u1ee7a ch\u00fang. Ki\u1ebfn th\u1ee9c n\u00e0y c\u00f3 th\u1ec3 gi\u00fap ta ch\u1ecdn \u0111\u00fang th\u1ee9 ta c\u1ea7n \u0111\u1ec3 tri\u1ec3n khai.</p>"},{"location":"ByteByteGo/design-location-based-service/#y-tuong-trau-bo","title":"\u00dd t\u01b0\u1edfng tr\u00e2u b\u00f2","text":"<p>C\u00e1ch \u0111\u01a1n gi\u1ea3n nh\u1ea5t nh\u01b0ng c\u0169ng k\u00e9m hi\u1ec7u qu\u1ea3 nh\u1ea5t l\u00e0 v\u1ebd m\u1ed9t h\u00ecnh tr\u00f2n v\u00e0 t\u00ecm t\u1ea5t c\u1ea3 doanh nghi\u1ec7p trong h\u00ecnh tr\u00f2n \u0111\u00f3. M\u00e3 SQL gi\u1ea3 n\u00e0y cho th\u1ea5y c\u00e1ch ta c\u00f3 th\u1ec3 c\u00e0i trong \u0111i\u1ec1u ki\u1ec7n WHERE. </p> <p></p> <p>\u0110i\u1ec1u ki\u1ec7n trong WHERE h\u01a1i ph\u00fac t\u1ea1p, nh\u01b0ng v\u1ec1 c\u01a1 b\u1ea3n, n\u00f3 t\u00ecm t\u1ea5t c\u1ea3 c\u00e1c do\u1ea1nh nghi\u1ec7p trong gi\u1edbi h\u1ea1n c\u1ee7a \u0111i\u1ec1u ki\u1ec7n \u0111\u00f3. R\u00f5 r\u00e0ng l\u00e0 n\u00f3 tr\u00f4ng kh\u00f4ng hi\u1ec7u qu\u1ea3 l\u1eafm. Truy v\u1ea5n n\u00e0y c\u1ea7n ph\u1ea3i qu\u00e9t b\u1ea3ng. V\u1edbi 200 tri\u1ec7u doanh nghi\u1ec7p, qu\u00e9t b\u1ea3ng th\u1ef1c s\u1ef1 r\u1ea5t ch\u1eadm. </p> <p>V\u1eady ta c\u1ea3i ti\u1ebfn n\u00f3 nh\u01b0 n\u00e0o? \u00dd t\u01b0\u1edfng s\u1ebd l\u00e0 t\u1ea1o index cho c\u1ed9t kinh \u0111\u1ed9 v\u00e0 v\u0129 \u0111\u1ed9. Nh\u01b0ng ch\u1eebng \u0111\u00f3 c\u0169ng kh\u00f4ng c\u1ea3i thi\u1ec7n nhi\u1ec1u \u0111\u1ed9 hi\u1ec7u qu\u1ea3. \u1ede \u0111\u00e2y ta c\u00f3 d\u1eef li\u1ec7u hai chi\u1ec1u. T\u1eadp d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 cho m\u1ed7i chi\u1ec1u l\u00e0 r\u1ea5t l\u1edbn. Ta c\u00f3 th\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c t\u1ea5t c\u1ea3 doanh nghi\u1ec7p trong kho\u1ea3ng v\u0129 \u0111\u1ed9 ho\u1eb7c kho\u1ea3ng kinh \u0111\u1ed9. Nh\u01b0ng \u0111\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c data trong b\u00e1n k\u00ednh, ta c\u1ea7n giao hai kho\u1ea3ng \u0111\u00f3 l\u1ea1i. M\u1ed7i kho\u1ea3ng kh\u00f4ng gian l\u1ea1i c\u00f3 r\u1ea5t nhi\u1ec1u data n\u00ean \u0111i\u1ec1u n\u00e0y th\u1ef1c s\u1ef1 kh\u00f4ng hi\u1ec7u qu\u1ea3. N\u00f3i c\u00e1ch kh\u00e1c, v\u1ea5n \u0111\u1ec1 c\u1ed1t l\u00f5i v\u1edbi c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0y l\u00e0 index ch\u1ec9 c\u00f3 th\u1ec3 c\u1ea3i thi\u1ec7n t\u1ed1c \u0111\u1ed9 truy v\u1ea5n tr\u00ean m\u1ed9t chi\u1ec1u th\u00f4i. </p> <p></p> <p>Nh\u01b0 v\u1eady, c\u00e2u h\u1ecfi ti\u1ebfp theo s\u1ebd l\u00e0: Ta c\u00f3 th\u1ec3 l\u00e0m sao \u0111\u1ec3 bi\u1ebfn kh\u00f4ng gian hai chi\u1ec1u th\u00e0nh m\u1ed9t chi\u1ec1u, t\u1eeb \u0111\u00f3 x\u00e2y d\u1ef1ng index tr\u00ean m\u1ed9t chi\u1ec1u \u0111\u00f3 \u0111\u01b0\u1ee3c kh\u00f4ng? C\u00e2u tr\u1ea3 l\u1eddi l\u00e0 C\u00d3.</p> <p>C\u00f3 hai c\u00e1ch ti\u1ebfp c\u1eadn khi d\u00f9ng index kh\u00f4ng gian \u0111\u1ecba l\u00fd. C\u00e1ch \u0111\u1ea7u ti\u00ean l\u00e0 d\u1ef1a v\u00e0o hash. M\u1ed9t s\u1ed1 v\u00ed d\u1ee5 \u1edf \u0111\u00e2y l\u00e0 Even Grid v\u00e0 Geohash. C\u00e1ch th\u1ee9 hai l\u00e0 d\u1ef1a tr\u00ean c\u00e2y, bao g\u1ed3m Quadtree, Google S2 v\u00e0 RTree. M\u1eb7c d\u00f9 c\u00e1ch tri\u1ec3n khai c\u01a1 b\u1ea3n c\u1ee7a hai c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0y l\u00e0 kh\u00e1c nhau, nh\u01b0ng \u00fd t\u01b0\u1edfng s\u01a1 b\u1ed9 l\u00e0 nh\u01b0 nhau. N\u00f3 s\u1ebd chia b\u1ea3n \u0111\u1ed3 th\u00e0nh c\u00e1c khu v\u1ef1c nh\u1ecf h\u01a1n v\u00e0 t\u1ea1o index \u0111\u1ec3 t\u00ecm nhanh.</p>"},{"location":"ByteByteGo/design-location-based-service/#index-dua-tren-hash","title":"Index d\u1ef1a tr\u00ean hash","text":"<p>Ta \u0111i v\u00e0o c\u00e1ch ti\u1ebfp c\u1eadn d\u1ef1a tr\u00ean hash tr\u01b0\u1edbc. Ta s\u1ebd chia th\u1ebf gi\u1edbi th\u00e0nh c\u00e1c \u00f4 b\u1eb1ng nhau. M\u1ed9t \u00f4 c\u00f3 th\u1ec3 c\u00f3 nhi\u1ec1u doanh nghi\u1ec7p, v\u00e0 m\u1ed9t doanh nghi\u1ec7p n\u1eb1m trong m\u1ed9t \u00f4. </p> <p></p> <p>C\u00e1ch n\u00e0y c\u00f3 m\u1ed9t \u0111i\u1ec3m y\u1ebfu l\u1edbn. Ph\u00e2n b\u1ed1 doanh nghi\u1ec7p s\u1ebd kh\u00f4ng \u0111\u1ec1u. S\u1ebd c\u00f3 nhi\u1ec1u doanh nghi\u1ec7p \u1edf khu downtown New York, nh\u01b0ng s\u1ebd c\u00f3 \u00edt \u1edf v\u00f9ng n\u00f4ng th\u00f4n, v\u00ed d\u1ee5 th\u1ebf. </p> <p></p> <p>L\u00fd t\u01b0\u1edfng nh\u1ea5t l\u00e0 ta mu\u1ed1n s\u1eed d\u1ee5ng c\u00e1c \u00f4 nh\u1ecf h\u01a1n cho c\u00e1c khu v\u1ef1c d\u00e0y \u0111\u1eb7c v\u00e0 c\u00e1c \u00f4 l\u1edbn h\u01a1n cho c\u00e1c khu v\u1ef1c th\u01b0a th\u1edbt. </p> <p></p> <p>Geohash l\u00e0 m\u1ed9t c\u1ea3i ti\u1ebfn v\u1edbi \u00f4 chia \u0111\u1ec1u. C\u01a1 ch\u1ebf c\u1ee7a Geohash s\u1ebd l\u00e0 bi\u1ebfn th\u00f4ng tin \u0111\u1ecba \u0111i\u1ec3m hai chi\u1ec1u th\u00e0nh m\u1ed9t chi\u1ec1u d\u01b0\u1edbi d\u1ea1ng x\u00e2u ch\u1ee9a c\u00e1c ch\u1eef c\u00e1i v\u00e0 ch\u1eef s\u1ed1. Th\u1ebf ngh\u0129a l\u00e0 sao? </p> <p>\u0110\u1ea7u ti\u00ean, n\u00f3 chia th\u1ebf gi\u1edbi th\u00e0nh 4 g\u00f3c ph\u1ea7n t\u01b0 d\u1ecdc theo kinh tuy\u1ebfn g\u1ed1c v\u00e0 \u0111\u01b0\u1eddng x\u00edch \u0111\u1ea1o. B\u1ed1n g\u00f3c ph\u1ea7n t\u01b0 n\u00e0y \u0111\u01b0\u1ee3c bi\u1ec3u di\u1ec5n b\u1eb1ng hai bit. V\u1edbi bit \u0111\u1ea7u ti\u00ean, n\u1eeda b\u00ean tr\u00e1i b\u1eb1ng 0 v\u00e0 n\u1ee7a b\u00ean ph\u1ea3i b\u1eb1ng 1. V\u1edbi bit th\u1ee9 hai, n\u1eeda tr\u00ean b\u1eb1ng 1 v\u00e0 n\u1eeda d\u01b0\u1edbi b\u1eb1ng 0. </p> <p></p> <p>Ti\u1ebfp theo, n\u00f3 chia m\u1ed7i \u00f4 th\u00e0nh 4 \u00f4 nh\u1ecf h\u01a1n. M\u1ed7i \u00f4 nh\u1ecf h\u01a1n l\u1ea1i \u0111\u01b0\u1ee3c bi\u1ec3u di\u1ec5n b\u1eb1ng hai bit kh\u00e1c. C\u00e1c bit cho c\u00e1c \u00f4 con \u0111\u01b0\u1ee3c th\u00eam v\u00e0o c\u00e1c bit hi\u1ec7n c\u00f3. Ta l\u1eb7p l\u1ea1i ph\u1ea7n chia nh\u1ecf n\u00e0y v\u00e0 ti\u1ebfp t\u1ee5c th\u00eam nhi\u1ec1u bit h\u01a1n v\u00e0o geohash. Ta d\u1eebng chia khi \u00f4 \u0111\u1ea1t \u0111\u01b0\u1ee3c k\u00edch th\u01b0\u1edbc mong mu\u1ed1n.</p> <p></p> <p>\u1ede \u0111\u00e2y ta c\u00f3 m\u1ed9t v\u00ed d\u1ee5 v\u1ec1 \u00f4 ch\u1ee9a tr\u1ee5 s\u1edf ch\u00ednh c\u1ee7a Google. K\u00edch th\u01b0\u1edbc \u00f4 \u1edf \u0111\u00e2y s\u1ebd l\u00e0 1200m x 600m. Thay v\u00ec d\u00f9ng x\u00e2u d\u00e0i g\u1ed3m 0 v\u00e0 1 \u0111\u1ec3 bi\u1ec3u th\u1ecb geohash, n\u00f3 \u0111\u01b0\u1ee3c m\u00e3 ho\u00e1 d\u01b0\u1edbi d\u1ea1ng x\u00e2u base32. \u1ede \u0111\u00e2y, s\u1ed1 nh\u1ecb ph\u00e2n d\u00e0i \u0111\u00f3 \u0111\u01b0\u1ee3c chuy\u1ec3n th\u00e0nh x\u00e2u base32 c\u00f3 6 ch\u1eef c\u00e1i. </p> <p></p> <p>N\u00f3i c\u00e1ch kh\u00e1c, \u0111\u1ed9 d\u00e0i x\u00e2u \u0111\u01b0\u1ee3c m\u00e3 ho\u00e1 base32 s\u1ebd x\u00e1c d\u1ecbnh k\u00edch th\u01b0\u1edbc \u00f4. Ch\u00fang \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 \u0111\u1ed9 ch\u00ednh x\u00e1c hay level. C\u00f3 12 level nh\u01b0 v\u1eady. \u0110\u1ed1i v\u1edbi LBS, ta ch\u1ec9 c\u1ea7n quan t\u00e2m \u0111\u1ebfn \u0111\u1ed9 d\u00e0i 4 \u0111\u1ebfn 6. \u00d4 l\u1edbn h\u01a1n 6 s\u1ebd qu\u00e1 nh\u1ecf, c\u00f2n \u00f4 nh\u1ecf h\u01a1n 4 s\u1ebd qu\u00e1 to. L\u01b0u \u00fd l\u00e0 b\u1ea3ng \u1edf d\u01b0\u1edbi c\u00f3 v\u00e0i sai s\u00f3t v\u1ec1 m\u1eb7t \u0111\u01a1n v\u1ecb.</p> <p></p> <p>Gi\u1edd l\u00e0m sao \u0111\u1ec3 ch\u1ecdn level ph\u00f9 h\u1ee3p v\u1edbi b\u00e1n k\u00ednh \u0111\u00e2y? Ta mu\u1ed1n t\u00ecm \u0111\u1ed9 d\u00e0i geohash t\u1ed1i thi\u1ec3u \u0111\u1ec3 n\u00f3 bao ph\u1ee7 to\u00e0n b\u1ed9 v\u00f2ng tr\u00f2ng. V\u00ed d\u1ee5, n\u1ebfu b\u00e1n k\u00ednh l\u00e0 2km, th\u00ec \u0111\u1ed9 d\u00e0i geohash ph\u1ea3i l\u00e0 5. M\u1ed9t c\u00e1i hay kh\u00e1c c\u1ee7a geohash l\u00e0 n\u00f3 ch\u1ec9 l\u00e0 m\u1ed9t x\u00e2u. T\u00ecm t\u1ea5t c\u1ea3 doanh nghi\u1ec7p trong m\u1ed9t geohash r\u1ea5t \u0111\u01a1n gi\u1ea3n. Ngh\u0129a l\u00e0 d\u00f9ng database n\u00e0o c\u0169ng \u1ed5n. Ta kh\u00f4ng c\u1ea7n ph\u1ea3i s\u1eed d\u1ee5ng m\u1ed9t database kh\u00f4ng gian \u0111\u1ecba l\u00fd n\u00e0o \u0111\u1eb7c bi\u1ec7t c\u1ea3. </p> <p>Geohash ho\u1ea1t \u0111\u1ed9ng t\u1ed1t trong ph\u1ea7n l\u1edbn th\u1eddi gian, nh\u01b0ng c\u00f3 m\u1ed9t v\u00e0i tr\u01b0\u1eddng h\u1ee3p m\u00e0 ta c\u1ea7n ch\u00fa \u00fd. C\u00e1c tr\u01b0\u1eddng h\u1ee3p n\u00e0y li\u00ean quan \u0111\u1ebfn vi\u1ec7c x\u1eed l\u00fd ph\u1ea7n bi\u00ean c\u1ee7a geohash. N\u1ebfu hai geohash c\u00f3 c\u00f9ng ti\u1ec1n t\u1ed1, ta bi\u1ebft ch\u00fang g\u1ea7n nhau. V\u00ed d\u1ee5, \u0111\u00e2y l\u00e0 m\u1ed9t s\u1ed1 \u00f4 c\u00f3 c\u00f9ng prefix <code>9q8zn</code>. </p> <p></p> <p>Tuy nhi\u00ean, \u0111i\u1ec1u ng\u01b0\u1ee3c l\u1ea1i kh\u00f4ng \u0111\u00fang. Hai \u00f4 c\u00f3 th\u1ec3 n\u1eb1m c\u1ea1nh nhau nh\u01b0ng l\u1ea1i kh\u00f4ng c\u00f3 ti\u1ec1n t\u1ed1 chung. \u0110\u00f3 l\u00e0 v\u00ec c\u00e1c \u00f4 n\u1eb1m hai b\u00ean \u0111\u01b0\u1eddng x\u00edch \u0111\u1ea1o ho\u1eb7c kinh tuy\u1ebfn g\u1ed1c n\u1eb1m \u1edf hai n\u1eeda kh\u00e1c nhau c\u1ee7a th\u1ebf gi\u1edbi. V\u00ed d\u1ee5, hai th\u00e0nh ph\u1ed1 Ph\u00e1p n\u00e0y ch\u1ec9 c\u00e1ch nhau 30km, nh\u01b0ng geohash c\u1ee7a ch\u00fang l\u1ea1i kh\u00f4ng c\u00f3 ti\u1ec1n t\u1ed1 chung. M\u1ed9t v\u1ea5n \u0111\u1ec1 kh\u00e1c l\u00e0 hai \u0111\u1ecba \u0111i\u1ec3m c\u00f3 th\u1ec3 c\u00f3 chung m\u1ed9t ti\u1ec1n t\u1ed1 d\u00e0i, nh\u01b0ng l\u1ea1i n\u1eb1m trong c\u00e1c geohash kh\u00e1c nhau. Trong v\u00ed d\u1ee5 n\u00e0y, hai ch\u1ea5m xanh v\u00e0 \u0111\u1ecf c\u00f3 ti\u1ec1n t\u1ed1 chung \u0111\u1ed9 d\u00e0i 5, nh\u01b0ng ch\u00fang l\u1ea1i n\u1eb1m trong hai \u00f4 kh\u00e1c nhau. </p> <p></p> <p>M\u1ed9t gi\u1ea3i ph\u00e1p \u0111\u1ec3 gi\u1ea3i quy\u1ebft c\u1ea3 hai v\u1ea5n \u0111\u1ec1 n\u00e0y l\u00e0 t\u00ecm k\u1ebft qu\u1ea3 kh\u00f4ng ch\u1ec9 trong \u00f4 hi\u1ec7n t\u1ea1i, m\u00e0 c\u00f2n trong 8 \u00f4 g\u1ea7n k\u1ec1 n\u1eefa. T\u00ecm c\u00e1c geohash l\u00e2n c\u1eadn kh\u00f4ng kh\u00f3, c\u00f3 nhi\u1ec1u th\u01b0 vi\u1ec7n h\u1ed7 tr\u1ee3 t\u00ednh to\u00e1n trong th\u1eddi gian h\u1eb1ng s\u1ed1.</p>"},{"location":"ByteByteGo/design-location-based-service/#index-dua-tren-cay","title":"Index d\u1ef1a tr\u00ean c\u00e2y","text":"<p>Th\u1ebf c\u00f2n c\u00e1ch ti\u1ebfp c\u1eadn d\u1ef1a tr\u00ean c\u00e2y th\u00ec sao? Ta s\u1ebd kh\u00f4ng \u0111i s\u00e2u v\u00e0o c\u00e0i \u0111\u1eb7t nh\u01b0ng bi\u1ebft th\u00eam n\u00f3 ho\u1ea1t \u0111\u1ed9ng s\u01b0\u01a1ng s\u01b0\u01a1ng ra sao c\u0169ng r\u1ea5t t\u1ed1t. C\u00e1ch n\u00e0y bao g\u1ed3m Quadtree v\u00e0 Google S2. M\u1ed9t quadtree l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u chia kh\u00f4ng gian hai chi\u1ec1u b\u1eb1ng chia n\u00f3 th\u00e0nh 4 g\u00f3c ph\u1ea7n t\u01b0. </p> <p></p> <p>Vi\u1ec7c chia k\u1ebft th\u00fac khi \u00f4 \u0111\u00e1p \u1ee9ng nh\u1eefng ti\u00eau ch\u00ed nh\u1ea5t \u0111\u1ecbnh. Trong tr\u01b0\u1eddng h\u1ee3p c\u1ee7a ch\u00fang ta, ti\u00eau ch\u00ed c\u00f3 th\u1ec3 l\u00e0 chia cho \u0111\u1ebfn khi s\u1ed1 doanh nghi\u1ec7p trong \u00f4 kh\u00f4ng l\u1edbn h\u01a1n s\u1ed1 n\u00e0o \u0111\u00f3, ch\u1eb3ng h\u1ea1n nh\u01b0 100. </p> <p></p> <p>M\u1ea5u ch\u1ed1t c\u1ee7a quadtree - hay b\u1ea5t k\u1ef3 c\u00e1ch d\u1ef1a tr\u00ean c\u00e2y n\u00e0o - l\u00e0 n\u00f3 l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u in-memory. N\u00f3 kh\u00f4ng ph\u1ea3i l\u00e0 gi\u1ea3i ph\u00e1p v\u1edbi database. N\u00f3 c\u00f3 ngh\u0129a l\u00e0 index \u0111\u01b0\u1ee3c t\u1ea1o ra b\u1edfi code c\u1ee7a ch\u00fang ta v\u00e0 ch\u1ea1y tr\u00ean c\u00e1c server. \u0110\u00e2y l\u00e0 c\u00e1ch ti\u1ebfp c\u1eadn r\u1ea5t r\u1ea5t kh\u00e1c v\u1edbi t\u1eadp tri\u1ec3n khai v\u00e0 v\u1eadn h\u00e0nh c\u0169ng r\u1ea5t kh\u00e1c. V\u1edbi thi\u1ebft k\u1ebf c\u1ee7a ch\u00fang ta, ta s\u1ebd ch\u1ec9 t\u1eadp trung v\u00e0o geohash th\u00f4i.</p>"},{"location":"ByteByteGo/design-location-based-service/#them-geohash-vao-thiet-ke","title":"Th\u00eam geohash v\u00e0o thi\u1ebft k\u1ebf","text":"<p>Ok, quay l\u1ea1i geohash. Ta mu\u1ed1n d\u00f9ng geohash \u0111\u1ec3 index kh\u00f4ng gian \u0111\u1ecba l\u00fd \u0111\u1ec3 t\u0103ng t\u1ed1c t\u00ecm ki\u1ebfm. Ta c\u1ea5u tr\u00fac b\u1ea3ng nh\u01b0 th\u1ebf n\u00e0o? V\u1ec1 c\u01a1 b\u1ea3n, b\u1ea3ng ch\u1ec9 c\u1ea7n 2 c\u1ed9t - geohash v\u00e0 business ID. </p> <p></p> <p>B\u1ea5t k\u1ef3 database quan h\u1ec7 n\u00e0o c\u0169ng c\u00f3 th\u1ec3 x\u1eed l\u00fd geohash. Ta kh\u00f4ng c\u1ea7n database g\u00ec \u0111\u1eb7c bi\u1ec7t c\u1ea3. C\u1ed9t geohash ch\u1ee9a geohash \u1edf level th\u00edch h\u1ee3p cho m\u1ed7i doanh nghi\u1ec7p. Chuy\u1ec3n \u0111\u1ed5i m\u1ed9t to\u1ea1 \u0111\u1ed9 th\u00e0nh geohash kh\u00e1 \u0111\u01a1n gi\u1ea3n, c\u00f3 nhi\u1ec1u th\u01b0 vi\u1ec7n l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u \u0111\u00f3. </p> <p>C\u00f3 hai \u0111i\u1ec1u c\u1ea7n ch\u00fa \u00fd \u1edf \u0111\u00e2y. </p> <ul> <li>Nhi\u1ec1u doanh nghi\u1ec7p c\u00f3 th\u1ec3 n\u1eb1m trong c\u00f9ng geohash. Ngh\u0129a l\u00e0 c\u00e1c business ID kh\u00e1c nhau trong m\u1ed9t geohash \u0111\u01b0\u1ee3c l\u01b0u tr\u00ean nhi\u1ec1u h\u00e0ng kh\u00e1c nhau trong database. V\u00e0 c\u00e1c c\u1ed9t geohash v\u00e0 business ID s\u1ebd t\u1ea1o ra m\u1ed9t kho\u00e1 gh\u00e9p. V\u1edbi kho\u00e1 gh\u00e9p n\u00e0y, vi\u1ec7c xo\u00e1 doanh nghi\u1ec7p kh\u1ecfi b\u1ea3ng r\u1ea5t d\u1ec5 d\u00e0ng. </li> <li>Nh\u01b0 \u0111\u00e3 n\u00f3i \u1edf tr\u00ean, ta quan t\u00e2m \u0111\u1ebfn geohash level 4 \u0111\u1ebfn 6. Ch\u00fang t\u01b0\u01a1ng \u1ee9ng v\u1edbi b\u00e1n k\u00ednh t\u00ecm ki\u1ebfm t\u1eeb 0.5 km \u0111\u1ebfn 20 km. C\u1ed9t geohash trong b\u1ea3ng s\u1ebd l\u01b0u geohash level 6. Ta s\u1ebd d\u00f9ng to\u00e1n t\u1eed LIKE trong SQL \u0111\u1ec3 t\u00ecm geohash level ng\u1eafn h\u01a1n. \u0110\u00e2y l\u00e0 m\u1ed9t v\u00ed d\u1ee5. V\u1edbi truy v\u1ea5n n\u00e0y, ta s\u1ebd t\u00ecm t\u1ea5t c\u1ea3 doanh nghi\u1ec7p trong v\u00f2ng geohash <code>9q8zn</code>.</li> </ul> <p></p>"},{"location":"ByteByteGo/design-location-based-service/#scale-bang-tim-kiem","title":"Scale b\u1ea3ng t\u00ecm ki\u1ebfm","text":"<p>Ti\u1ebfp theo, c\u00f9ng \u0111i v\u00e0o l\u00e0m sao \u0111\u1ec3 scale c\u00e1i b\u1ea3ng n\u00e0y. Ta c\u00f3 th\u1ef1c s\u1ef1 c\u1ea7n scale l\u00ean h\u01a1n 1 database kh\u00f4ng? T\u00ednh nhanh nh\u00e9, m\u1ed7i geohash d\u00e0i 6 k\u00fd t\u1ef1, gi\u1ea3 s\u1eed business ID d\u00e0i 64 bit, ngh\u0129a l\u00e0 8 byte \u0111\u00f3. Ngo\u00e0i ra, ta c\u0169ng mu\u1ed1n l\u01b0u kinh \u0111\u1ed9 v\u0129 \u0111\u1ed9 cho m\u1ed7i doanh nghi\u1ec7p \u0111\u1ec3 t\u00ednh kho\u1ea3ng c\u00e1ch t\u1eeb ng\u01b0\u1eddi d\u00f9ng \u0111\u1ebfn doanh nghi\u1ec7p, th\u00eam 16 byte v\u00f4. V\u00e2y m\u1ed7i h\u00e0ng s\u1ebd t\u1ed1n 30 byte. V\u1edbi 200 tri\u1ec7u doanh nghi\u1ec7p, k\u00edch th\u01b0\u1edbc b\u1ea3ng l\u00e0 kho\u1ea3ng 6GB, kh\u00e1 nh\u1ecf so v\u1edbi ph\u1ea7n c\u1ee9ng b\u00e2y gi\u1edd. </p> <p></p> <p>To\u00e0n b\u1ed9 dataset c\u00f3 th\u1ec3 n\u1eb1m trong m\u1ed9t server database. Tuy nhi\u00ean, QPS \u0111\u1ecdc kh\u00e1 cao, kho\u1ea3ng 5000. Trong gi\u1edd cao \u0111i\u1ec3m, m\u1ed9t database c\u00f3 l\u1ebd l\u00e0 kh\u00f4ng \u0111\u1ee7. C\u00f3 hai c\u00e1ch gi\u1ea3i quy\u1ebft, m\u1ed9t l\u00e0 th\u00eam b\u1ea3n sao \u0111\u1ec3 ph\u1ee5c v\u1ee5 vi\u1ec7c \u0111\u1ecdc, ho\u1eb7c hai l\u00e0 shard database. Shard kh\u00e1 l\u00e0 ph\u1ee9c t\u1ea1p. N\u00f3 c\u1ea7n sharding logic trong code. Th\u1ef1c s\u1ef1 ta kh\u00f4ng c\u00f3 l\u00fd do \u0111\u1ee7 thuy\u1ebft ph\u1ee5c g\u00ec \u0111\u1ec3 shard, v\u00ec dataset c\u00f3 th\u1ec3 n\u1eb1m trong m\u1ed9t m\u00e1y. Ta s\u1ebd ch\u1ecdn c\u00f3 m\u1ed9t \u0111\u1ed1ng b\u1ea3n sao database \u0111\u1ec3 ph\u1ee5c v\u1ee5 request \u0111\u1ecdc, c\u00e1ch n\u00e0y d\u1ec5 h\u01a1n.</p>"},{"location":"ByteByteGo/design-location-based-service/#caching","title":"Caching","text":"<p>\u0110i\u1ec3m cu\u1ed1i c\u00f9ng l\u00e0 caching. Ta c\u00f3 c\u1ea7n caching kh\u00f4ng? Thi\u1ebft k\u1ebf n\u1eb7ng v\u1ec1 \u0111\u1ecdc, v\u00e0 dataset c\u0169ng nh\u1ecf. Nh\u01b0 \u0111\u00e3 n\u00f3i, ta c\u1ea7n scale vi\u1ec7c \u0111\u1ecdc data, v\u00e0 \u0111\u00e3 th\u00eam b\u1ea3n sao database. Tuy nhi\u00ean c\u00f3 m\u1ed9t dataset kh\u00e1c n\u1eefa, l\u00e0 b\u1ea3ng doanh nghi\u1ec7p. B\u1ea3ng n\u00e0y n\u1eb1m trong ph\u1ea1m vi terabyte, kh\u00f4ng l\u1edbn l\u1eafm. K\u00edch th\u01b0\u1edbc dataset n\u1eb1m tr\u00ean ranh gi\u1edbi m\u00e0 ta c\u00f3 th\u1ec3 c\u00e2n nh\u1eafc sharding. V\u00ec ta kh\u00f4ng update c\u00e1i b\u1ea3ng n\u00e0y nhi\u1ec1u l\u1eafm, v\u00e0 n\u00f3 n\u1eb7ng v\u1ec1 \u0111\u1ecdc, ta c\u00f3 th\u1ec3 tr\u00e1nh sharding n\u1ebfu ta d\u00f9ng cache. N\u00f3 s\u1ebd ch\u1ecbu nhi\u1ec1u request \u0111\u1ecdc v\u00e0 cho ta kh\u00f4ng gian \u0111\u1ec3 scale b\u1ea3ng doanh nghi\u1ec7p. Ta c\u00f3 nhi\u1ec1u l\u1ef1a ch\u1ecdn cho b\u1ea3ng n\u00e0y, nh\u01b0ng ta s\u1ebd gi\u1eef n\u00f3 \u1edf 1 database th\u00f4i. Ta s\u1ebd th\u00eam monitoring \u0111\u1ec3 shard, th\u00eam b\u1ea3n sao hay th\u00eam cache v\u00e0o sau.</p> <p></p> <p></p>"},{"location":"ByteByteGo/design-location-based-service/#tong-ket","title":"T\u1ed5ng k\u1ebft","text":"<p>Cu\u1ed1i c\u00f9ng, ta t\u00f3m t\u1eaft v\u00f2ng \u0111\u1eddi c\u1ee7a m\u1ed9t request t\u00ecm ki\u1ebfm. </p> <p>(1) Bob th\u1eed t\u00ecm m\u1ed9t nh\u00e0 h\u00e0ng trong b\u00e1n k\u00ednh 500m. Client g\u1eedi v\u1ecb tr\u00ed v\u00e0 b\u00e1n k\u00ednh \u0111\u1ebfn load balancer. </p> <p>(2) Load balancer chuy\u1ec3n ti\u1ebfp request \u0111\u1ebfn LBS. </p> <p>(3) D\u1ef1a v\u00e0o th\u00f4ng tin t\u1eeb request, service t\u00ecm geohash level \u1ee9ng v\u1edbi request t\u00ecm ki\u1ebfm, \u0111\u00f3 l\u00e0 level 6. </p> <p>(4) Service t\u00ednh to\u00e1n c\u00e1c geohash l\u00e2n c\u1eadn. S\u1ebd c\u00f3 9 geohash \u0111\u1ec3 truy v\u1ea5n. </p> <p>(5) Service g\u1eedi truy v\u1ea5n \u0111\u1ebfn database \u0111\u1ec3 t\u00ecm c\u00e1c business ID v\u00e0 kinh \u0111\u1ed9 v\u0129 \u0111\u1ed9 t\u01b0\u01a1ng \u1ee9ng trong c\u00e1c geohash \u0111\u00f3. </p> <p>(6) Service d\u00f9ng kinh \u0111\u1ed9 v\u0129 \u0111\u1ed9 \u0111\u1ec3 t\u00ednh kho\u1ea3ng c\u00e1ch t\u1eeb ng\u01b0\u1eddi d\u00f9ng \u0111\u1ebfn c\u00e1c nh\u00e0 h\u00e0ng, x\u1ebfp h\u1ea1ng ch\u00fang, v\u00e0 g\u1eedi tr\u1ea3 k\u1ebft qu\u1ea3 l\u1ea1i client.</p> <p></p>"},{"location":"ByteByteGo/development-strategies/","title":"5 chi\u1ebfn l\u01b0\u1ee3c tri\u1ec3n khai ph\u1ea7n m\u1ec1m ph\u1ed5 bi\u1ebfn","text":""},{"location":"ByteByteGo/development-strategies/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 5 Most-Used Deployment Strategies</p>"},{"location":"ByteByteGo/development-strategies/#big-bang-deployment","title":"Big Bang Deployment","text":"<p>M\u1ed9t trong nh\u1eefng c\u00e1ch tri\u1ec3n khai s\u1edbm nh\u1ea5t l\u00e0 Big Bang Deployment. Ta s\u1ebd \u0111\u1ea9y t\u1ea5t c\u1ea3 c\u00e1c thay \u0111\u1ed5i l\u00ean production c\u00f9ng m\u1ed9t l\u00fac. Ng\u01b0\u1eddi d\u00f9ng s\u1ebd ph\u1ea3i tr\u1ea3i nghi\u1ec7m m\u1ed9t ch\u00fat downtime v\u00ec ta ph\u1ea3i t\u1eaft h\u1ec7 th\u1ed1ng c\u0169 \u0111\u1ec3 chuy\u1ec3n sang h\u1ec7 th\u1ed1ng m\u1edbi, m\u00e0 downtime n\u00e0y th\u01b0\u1eddng ng\u1eafn th\u00f4i, nh\u01b0ng ph\u1ea3i c\u1ea9n th\u1eadn, m\u1ecdi chuy\u1ec7n s\u1ebd r\u1ea5t t\u1ec7 n\u1ebfu vi\u1ec7c deploy kh\u00f4ng nh\u01b0 \u00fd. H\u00e3y chu\u1ea9n b\u1ecb t\u1ed1t v\u00e0 test th\u1eadt k\u1ef9 c\u00e0ng.</p> <p></p> <p>N\u1ebfu c\u00f3 v\u1ea5n \u0111\u1ec1 th\u00ec sao? Ta s\u1ebd rollback v\u1ec1 phi\u00ean b\u1ea3n tr\u01b0\u1edbc. Nh\u01b0ng rollback kh\u00f4ng ph\u1ea3i l\u00fac n\u00e0o c\u0169ng m\u01b0\u1ee3t. Rollback v\u1eabn c\u00f3 th\u1ec3 g\u00e2y gi\u00e1n \u0111o\u1ea1n cho ng\u01b0\u1eddi d\u00f9ng v\u00e0 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn d\u1eef li\u1ec7u. Ta c\u1ea7n c\u00f3 m\u1ed9t k\u1ebf ho\u1ea1ch rollback ch\u1eafc ch\u1eafn. Big Bang \u0111\u00f4i khi l\u00e0 l\u1ef1a ch\u1ecdn duy nh\u1ea5t, ch\u1eb3ng h\u1ea1n khi th\u1ef1c hi\u1ec7n n\u00e2ng c\u1ea5p database ph\u1ee9c t\u1ea1p.</p>"},{"location":"ByteByteGo/development-strategies/#rolling-deployment","title":"Rolling Deployment","text":"<p>Ti\u1ebfp theo ta c\u00f3 Rolling Deployment, gi\u1ed1ng nh\u01b0 ch\u1ea1y marathon h\u01a1n l\u00e0 ch\u1ea1y nhanh nh\u01b0 Big Bang. Ph\u01b0\u01a1ng ph\u00e1p n\u00e0y cho ph\u00e9p ta c\u1eadp nh\u1eadt d\u1ea7n d\u1ea7n t\u1eebng ph\u1ea7n c\u1ee7a h\u1ec7 th\u1ed1ng theo th\u1eddi gian. \u0110\u00e2y l\u00e0 c\u00e1ch tri\u1ec3n khai t\u1eebng b\u01b0\u1edbc, n\u01a1i ta tri\u1ec3n khai phi\u00ean b\u1ea3n m\u1edbi c\u1ee7a \u1ee9ng d\u1ee5ng t\u1edbi m\u00f4i tr\u01b0\u1eddng production. </p> <p></p> <p>V\u00ed d\u1ee5, n\u1ebfu c\u00f3 10 server ch\u1ea1y \u1ee9ng d\u1ee5ng, khi d\u00f9ng Rolling Deployment, ta s\u1ebd t\u1eaft server \u0111\u1ea7u ti\u00ean, tri\u1ec3n khai phi\u00ean b\u1ea3n m\u1edbi trong server \u0111\u00f3, b\u1eadt server l\u00ean l\u1ea1i. Khi m\u1ecdi th\u1ee9 ok, ta chuy\u1ec3n sang server th\u1ee9 hai, v\u00e0 c\u1ee9 nh\u01b0 v\u1eady. C\u00e1ch n\u00e0y cho ph\u00e9p phi\u00ean b\u1ea3n m\u1edbi d\u1ea7n d\u1ea7n thay th\u1ebf phi\u00ean b\u1ea3n c\u0169, t\u1eebng c\u00e1i server m\u1ed9t, cho \u0111\u1ebfn khi c\u1ea3 h\u1ec7 th\u1ed1ng \u0111\u01b0\u1ee3c update.</p> <p>\u01afu \u0111i\u1ec3m l\u1edbn c\u1ee7a Rolling Deployment l\u00e0 th\u01b0\u1eddng tr\u00e1nh \u0111\u01b0\u1ee3c downtime. Khi ta \u0111ang update m\u1ed9t server, c\u00e1c server kh\u00e1c v\u1eabn \u0111ang ch\u1ea1y, v\u1eabn \u0111ang ph\u1ee5c v\u1ee5 ng\u01b0\u1eddi d\u00f9ng. M\u1ed9t \u01b0u \u0111i\u1ec3m kh\u00e1c l\u00e0 ta c\u00f3 th\u1ec3 ph\u00e1t hi\u1ec7n v\u00e0 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 s\u1edbm khi \u0111ang rollout, gi\u00fap gi\u1ea3m nguy c\u01a1 v\u1ea5n \u0111\u1ec1 \u0111\u00f3 lan r\u1ed9ng. Ta ch\u1ec9 deploy m\u1ed9t ph\u1ea7n nh\u1ecf c\u1ee7a h\u1ec7 th\u1ed1ng v\u1edbi phi\u00ean b\u1ea3n m\u1edbi trong m\u1ed9t th\u1eddi \u0111i\u1ec3m.</p> <p>Tuy nhi\u00ean, Rolling Deployment th\u01b0\u1eddng ch\u1eadm h\u01a1n. V\u00e0 m\u1eb7c d\u00f9 gi\u1ea3m nguy c\u01a1 v\u1ea5n \u0111\u1ec1 h\u1ec7 th\u1ed1ng, nh\u01b0ng kh\u00f4ng lo\u1ea1i tr\u1eeb ho\u00e0n to\u00e0n. N\u1ebfu c\u00e1i v\u1ea5n \u0111\u1ec1 \u0111\u00f3 qua \u0111\u01b0\u1ee3c h\u1ebft c\u00e1c test khi rollout, n\u00f3 v\u1eabn c\u00f3 th\u1ec3 lan r\u1ed9ng khi ta update nhi\u1ec1u server h\u01a1n. Rolling Deployment kh\u00f4ng h\u1ed7 tr\u1ee3 tri\u1ec3n khai cho t\u1eebng nh\u00f3m ng\u01b0\u1eddi d\u00f9ng c\u1ee5 th\u1ec3. Ta kh\u00f4ng th\u1ec3 ki\u1ec3m so\u00e1t \u0111\u01b0\u1ee3c phi\u00ean b\u1ea3n m\u1edbi s\u1ebd \u0111\u1ebfn v\u1edbi ng\u01b0\u1eddi d\u00f9ng n\u00e0o trong qu\u00e1 tr\u00ecnh rollout. T\u1ea5t c\u1ea3 ng\u01b0\u1eddi d\u00f9ng s\u1ebd d\u1ea7n th\u1ea5y phi\u00ean b\u1ea3n m\u1edbi khi ta update c\u00e1c server. Ta kh\u00f4ng th\u1ec3 ch\u1ec9 \u0111\u1ecbnh phi\u00ean b\u1ea3n m\u1edbi cho ng\u01b0\u1eddi d\u00f9ng d\u1ef1a tr\u00ean ti\u00eau ch\u00ed nh\u01b0 v\u1ecb tr\u00ed, lo\u1ea1i thi\u1ebft b\u1ecb, v.v. Rolling Deployment v\u1eabn l\u00e0 l\u1ef1a ch\u1ecdn ph\u1ed5 bi\u1ebfn cho nhi\u1ec1u team. N\u00f3 c\u00e2n b\u1eb1ng gi\u1eefa r\u1ee7i ro v\u00e0 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn ng\u01b0\u1eddi d\u00f9ng m\u1ed9t c\u00e1ch c\u00f3 tr\u1eadt t\u1ef1.</p>"},{"location":"ByteByteGo/development-strategies/#blue-green-deployment","title":"Blue-Green Deployment","text":"<p>Gi\u1edd ta \u0111\u1ebfn v\u1edbi Blue-Green Deployment. Ta s\u1ebd duy tr\u00ec hai m\u00f4i tr\u01b0\u1eddng production gi\u1ed1ng nhau, \u0111\u1eb7t t\u00ean l\u1ea7n l\u01b0\u1ee3t l\u00e0 Blue v\u00e0 Green. T\u1ea1i b\u1ea5t k\u1ef3 th\u1eddi \u0111i\u1ec3m n\u00e0o, ch\u1ec9 c\u00f3 m\u1ed9t trong hai m\u00f4i tr\u01b0\u1eddng ho\u1ea1t \u0111\u1ed9ng, c\u00e1i c\u00f2n l\u1ea1i th\u00ec kh\u00f4ng. M\u00f4i tr\u01b0\u1eddng ho\u1ea1t \u0111\u1ed9ng (v\u00ed d\u1ee5 Blue) ph\u1ee5c v\u1ee5 phi\u00ean b\u1ea3n hi\u1ec7n t\u1ea1i c\u1ee7a \u1ee9ng d\u1ee5ng cho ng\u01b0\u1eddi d\u00f9ng. M\u00f4i tr\u01b0\u1eddng kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng (v\u00ed d\u1ee5 Green) l\u00e0 n\u01a1i ta tri\u1ec3n khai v\u00e0 test phi\u00ean b\u1ea3n m\u1edbi.</p> <p></p> <p>C\u00e1ch l\u00e0m c\u00f3 th\u1ec3 nh\u01b0 sau. Khi ta c\u00f3 phi\u00ean b\u1ea3n m\u1edbi, ta s\u1ebd deploy n\u00f3 l\u00ean Green. Trong khi \u0111\u00f3, Blue v\u1eabn \u0111ang ph\u1ee5c v\u1ee5 phi\u00ean b\u1ea3n hi\u1ec7n t\u1ea1i cho ng\u01b0\u1eddi d\u00f9ng. </p> <p></p> <p>QA team s\u1ebd test phi\u00ean b\u1ea3n m\u1edbi trong m\u00f4i tr\u01b0\u1eddng Green. \u0110i\u1ec1u n\u00e0y gi\u00fap ta ph\u00e1t hi\u1ec7n v\u00e0 s\u1eeda l\u1ed7i tr\u01b0\u1edbc khi n\u00f3 \u0111\u1ebfn v\u1edbi ng\u01b0\u1eddi d\u00f9ng. Khi phi\u00ean b\u1ea3n m\u1edbi trong m\u00f4i tr\u01b0\u1eddng Green \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh l\u00e0 \u1ed5n, ta ch\u1ec9 c\u1ea7n chuy\u1ec3n load balancer \u0111\u1ec3 chuy\u1ec3n traffic t\u1eeb Blue sang Green. Ng\u01b0\u1eddi d\u00f9ng s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n sang phi\u00ean b\u1ea3n m\u1edbi c\u1ee7a \u1ee9ng d\u1ee5ng m\u00e0 kh\u00f4ng g\u1eb7p downtime. B\u00e2y gi\u1edd Blue tr\u1edf th\u00e0nh m\u00f4i tr\u01b0\u1eddng kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng, l\u00e0 m\u00f4i tr\u01b0\u1eddng d\u1ef1 b\u1ecb c\u1ee7a ta. N\u1ebfu g\u1eb7p v\u1ea5n \u0111\u1ec1 v\u1edbi phi\u00ean b\u1ea3n m\u1edbi, ta c\u00f3 th\u1ec3 chuy\u1ec3n ngay v\u1ec1 Blue, n\u01a1i ch\u1ee9a phi\u00ean b\u1ea3n c\u0169.</p> <p></p> <p>M\u1eb7c d\u00f9 Blue-Green Deployment cho ph\u00e9p chuy\u1ec3n \u0111\u1ed5i m\u01b0\u1ee3t m\u00e0 v\u00e0 rollback d\u1ec5 d\u00e0ng, nh\u01b0ng n\u00f3 c\u0169ng c\u00f3 nh\u01b0\u1ee3c \u0111i\u1ec3m. Gi\u1ed1ng nh\u01b0 Rolling Deployment, ta kh\u00f4ng th\u1ec3 ch\u1ec9 \u0111\u1ecbnh phi\u00ean b\u1ea3n m\u1edbi cho t\u1eebng ng\u01b0\u1eddi d\u00f9ng. Vi\u1ec7c chuy\u1ec3n t\u1eeb Blue sang Green \u1ea3nh h\u01b0\u1eddng \u0111\u1ebfn t\u1ea5t c\u1ea3 ng\u01b0\u1eddi d\u00f9ng c\u00f9ng m\u1ed9t l\u00fac. N\u00f3 c\u0169ng t\u1ed1n nhi\u1ec1u t\u00e0i nguy\u00ean. Duy tr\u00ec hai m\u00f4i tr\u01b0\u1eddng production gi\u1ed1ng nhau t\u0103ng g\u1ea5p \u0111\u00f4i c\u1ea7n t\u00e0i nguy\u00ean v\u00e0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng. Ta c\u00f3 th\u1ec3 t\u1eaft m\u00f4i tr\u01b0\u1eddng kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng gi\u1eefa c\u00e1c l\u1ea7n tri\u1ec3n khai, nh\u01b0ng \u0111i\u1ec1u n\u00e0y t\u0103ng \u0111\u1ed9 ph\u1ee9c t\u1ea1p. Qu\u1ea3n l\u00fd hai m\u00f4i tr\u01b0\u1eddng production song song v\u00e0 \u0111\u1ea3m b\u1ea3o \u0111\u1ed3ng b\u1ed9 d\u1eef li\u1ec7u c\u00f3 th\u1ec3 t\u0103ng \u0111\u00e1ng k\u1ec3 \u0111\u1ed9 ph\u1ee9c t\u1ea1p c\u1ee7a qu\u00e1 tr\u00ecnh tri\u1ec3n khai. C\u1ea7n c\u00f3 c\u00f4ng c\u1ee5 v\u00e0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng qu\u1ea3n l\u00fd ph\u1ee9c t\u1ea1p. Tuy nhi\u00ean, v\u1edbi m\u1ee9c \u0111\u1ed9 ki\u1ec3m so\u00e1t cao v\u00e0 r\u1ee7i ro \u00edt, Blue-Green Deployment v\u1eabn l\u00e0 m\u1ed9t chi\u1ebfn l\u01b0\u1ee3c ph\u1ed5 bi\u1ebfn \u0111\u1ec3 h\u01b0\u1eddng \u0111\u1ebfn tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\u00f9ng m\u01b0\u1ee3t m\u00e0 v\u00e0 rollback uy t\u00edn.</p>"},{"location":"ByteByteGo/development-strategies/#canary-deployment","title":"Canary Deployment","text":"<p>Ti\u1ebfp theo l\u00e0 Canary Deployment, l\u1ea5y c\u1ea3m h\u1ee9ng t\u1eeb vi\u1ec7c d\u00f9ng chim ho\u00e0ng y\u1ebfn (canary) \u0111\u1ec3 ph\u00e1t hi\u1ec7n kh\u00ed \u0111\u1ed9c trong h\u1ea7m m\u1ecf. N\u1ebfu chim ho\u00e0ng y\u1ebfn c\u00f3 v\u1ea5n \u0111\u1ec1, th\u1ee3 m\u1ecf bi\u1ebft r\u1eb1ng c\u1ea7n ph\u1ea3i s\u01a1 t\u00e1n kh\u1ecfi m\u1ecf. T\u01b0\u01a1ng t\u1ef1, trong ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m, ta d\u00f9ng chi\u1ebfn l\u01b0\u1ee3c n\u00e0y \u0111\u1ec3 \"ph\u00e1t hi\u1ec7n kh\u00ed \u0111\u1ed9c\" tr\u01b0\u1edbc khi rollout to\u00e0n b\u1ed9.</p> <p>C\u00e1ch l\u00e0m nh\u01b0 sau. Thay v\u00ec tri\u1ec3n khai phi\u00ean b\u1ea3n m\u1edbi cho t\u1ea5t c\u1ea3 server hay ng\u01b0\u1eddi d\u00f9ng, ta ch\u1ecdn m\u1ed9t t\u1eadp nh\u1ecf, l\u00e0 m\u1ea5y con canary \u0111\u1ea5y. \u0110\u00f3 c\u00f3 th\u1ec3 l\u00e0 v\u00e0i ph\u1ea7n tr\u0103m server hay m\u1ed9t nh\u00f3m ng\u01b0\u1eddi d\u00f9ng, th\u01b0\u1eddng \u0111\u01b0\u1ee3c ch\u1ecdn d\u1ef1a tr\u00ean m\u1ed9t s\u1ed1 ti\u00eau ch\u00ed g\u00ec \u0111\u00f3. </p> <p></p> <p>V\u00ed d\u1ee5, ta b\u1eaft \u0111\u1ea7u b\u1eb1ng vi\u1ec7c tri\u1ec3n khai l\u00ean m\u1ed9t server, ho\u1eb7c m\u1ed9t cluster nh\u1ecf, hay th\u1eadm ch\u00ed m\u1ed9t khu v\u1ef1c \u0111\u1ecba l\u00fd c\u1ee5 th\u1ec3. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p ta theo d\u00f5i hi\u1ec7u su\u1ea5t c\u1ee7a phi\u00ean b\u1ea3n m\u1edbi d\u01b0\u1edbi \u0111i\u1ec1u ki\u1ec7n th\u1ef1c t\u1ebf, nh\u01b0ng tr\u00ean quy m\u00f4 nh\u1ecf h\u01a1n. N\u1ebfu m\u1ecdi th\u1ee9 \u1ed5n v\u00e0 phi\u00ean b\u1ea3n m\u1edbi ho\u1ea1t \u0111\u1ed9ng nh\u01b0 \u00fd, ta c\u00f3 th\u1ec3 d\u1ea7n d\u1ea7n tri\u1ec3n khai n\u00f3 cho to\u00e0n b\u1ed9 server hay ng\u01b0\u1eddi d\u00f9ng. </p> <p></p> <p></p> <p>Nh\u01b0ng n\u1ebfu c\u00f3 v\u1ea5n \u0111\u1ec1, ta c\u00f3 th\u1ec3 d\u1eebng tri\u1ec3n khai, s\u1eeda l\u1ed7i, v\u00e0 th\u1eed l\u1ea1i, m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn ph\u1ea7n l\u1edbn ng\u01b0\u1eddi d\u00f9ng. C\u00e1ch ti\u1ebfp c\u1eadn t\u1eebng b\u01b0\u1edbc n\u00e0y mang l\u1ea1i t\u00ednh an to\u00e0n v\u00e0 c\u00f3 tr\u1eadt t\u1ef1. </p> <p></p> <p>Canary Deployment c\u0169ng cho ta kh\u1ea3 n\u0103ng tri\u1ec3n khai tr\u00ean t\u1eebng m\u1ee5c ti\u00eau c\u1ee5 th\u1ec3. Kh\u00e1c v\u1edbi Rolling hay Blue-Green Deployment, ta c\u00f3 th\u1ec3 \u0111i\u1ec1u h\u01b0\u1edbng c\u00e1c canary d\u1ef1a tr\u00ean m\u1ed9t s\u1ed1 ti\u00eau ch\u00ed nh\u1ea5t \u0111\u1ecbnh, nh\u01b0 v\u1ecb tr\u00ed \u0111\u1ecba l\u00fd hay lo\u1ea1i thi\u1ebft b\u1ecb. Tuy nhi\u00ean, Canary Deployment c\u0169ng \u0111\u1ebfn v\u1edbi nh\u1eefng th\u00e1ch th\u1ee9c ri\u00eang. N\u00f3 y\u00eau c\u1ea7u theo d\u00f5i c\u1ea9n th\u1eadn v\u00e0 test t\u1ef1 \u0111\u1ed9ng cho c\u00e1c canary. N\u00f3 y\u00eau c\u1ea7u c\u00f4ng c\u1ee5 infra ph\u1ee9c t\u1ea1p h\u01a1n \u0111\u1ec3 t\u0103ng gi\u1ea3m ho\u1eb7c d\u1eebng tri\u1ec3n khai khi c\u1ea7n. Chi\u1ebfn l\u01b0\u1ee3c n\u00e0y c\u00f3 th\u1ec3 ph\u1ee9c t\u1ea1p \u0111\u1ec3 tri\u1ec3n khai v\u00e0 qu\u1ea3n l\u00fd, \u0111\u1eb7c bi\u1ec7t khi x\u1eed l\u00fd c\u00e1c thay \u0111\u1ed5i schema database hay v\u1ea5n \u0111\u1ec1 t\u01b0\u01a1ng th\u00edch API. Canary Deployment th\u01b0\u1eddng kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t chi\u1ebfn l\u01b0\u1ee3c \u0111\u1ed9c l\u1eadp. N\u00f3 th\u01b0\u1eddng \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p v\u1edbi Rolling Deployment \u0111\u1ec3 t\u1ea1o ra m\u1ed9t chi\u1ebfn l\u01b0\u1ee3c k\u1ebft h\u1ee3p mang l\u1ea1i nh\u1eefng l\u1ee3i \u00edch t\u1ed1t nh\u1ea5t t\u1eeb c\u1ea3 hai.</p> <p></p>"},{"location":"ByteByteGo/development-strategies/#feature-toggle","title":"Feature Toggle","text":"<p>Cu\u1ed1i c\u00f9ng, ta c\u00f3 Feature Toggle. Thay v\u00ec tri\u1ec3n khai m\u1ed9t phi\u00ean b\u1ea3n m\u1edbi c\u1ee7a to\u00e0n b\u1ed9 \u1ee9ng d\u1ee5ng, Feature Toggle qu\u1ea3n l\u00fd t\u1eebng t\u00ednh n\u0103ng c\u1ee5 th\u1ec3 trong \u1ee9ng d\u1ee5ng \u0111\u00f3. Ta th\u00eam m\u1ed9t 'toggle' hay 'switch' (c\u00f4ng t\u1eafc) trong code cho t\u00ednh n\u0103ng m\u1edbi, cho ph\u00e9p ta b\u1eadt ho\u1eb7c t\u1eaft t\u00ednh n\u0103ng cho m\u1ed9t s\u1ed1 ng\u01b0\u1eddi d\u00f9ng hay \u0111i\u1ec1u ki\u1ec7n c\u1ee5 th\u1ec3. N\u00f3 gi\u1ed1ng nh\u01b0 m\u1ed9t c\u00e1i c\u1ed5ng c\u00f3 th\u1ec3 \u0111\u00f3ng m\u1edf. Ta c\u00f3 th\u1ec3 ki\u1ec3m so\u00e1t ai th\u1ea5y \u0111\u01b0\u1ee3c t\u00ednh n\u0103ng m\u1edbi.</p> <p></p> <p>Feature Toggle c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p v\u1edbi b\u1ea5t k\u1ef3 chi\u1ebfn l\u01b0\u1ee3c n\u00e0o \u1edf tr\u00ean. V\u00ed d\u1ee5 ta k\u1ebfp h\u1ee3p v\u1edbi Canary \u0111i. Ta c\u00f3 th\u1ec3 b\u1eadt t\u00ednh n\u0103ng v\u1edbi nh\u1eefng ng\u01b0\u1eddi d\u00f9ng canary, cho ph\u00e9p h\u1ecd test t\u00ednh n\u0103ng n\u00e0y, trong khi nh\u1eefng ng\u01b0\u1eddi d\u00f9ng c\u00f2n l\u1ea1i v\u1eabn s\u1eed d\u1ee5ng phi\u00ean b\u1ea3n c\u0169. Feature Toggle cung c\u1ea5p kh\u1ea3 n\u0103ng ki\u1ec3m so\u00e1t tuy\u1ec7t v\u1eddi cho t\u00ednh n\u0103ng m\u1edbi v\u00e0 cho ph\u00e9p tri\u1ec3n khai tr\u00ean t\u1eebng m\u1ee5c ti\u00eau. Feature Toggle r\u1ea5t ph\u00f9 h\u1ee3p v\u1edbi A/B testing hay tri\u1ec3n khai t\u1eebng b\u01b0\u1edbc \u0111\u1ec3 xem hi\u1ec7u su\u1ea5t. Tuy nhi\u00ean, Feature Toggle c\u0169ng c\u00f3 nh\u01b0\u1ee3c \u0111i\u1ec3m. N\u1ebfu kh\u00f4ng qu\u1ea3n l\u00fd c\u1ea9n th\u1eadn, toggle c\u00f3 th\u1ec3 l\u00e0m ph\u1ee9c t\u1ea1p codebase v\u00e0 l\u00e0m cho vi\u1ec7c test kh\u00f3 kh\u0103n h\u01a1n. Ta c\u0169ng c\u1ea7n ph\u1ea3i d\u1ecdn d\u1eb9p nh\u1eefng toggle c\u0169 ho\u1eb7c kh\u00f4ng c\u1ea7n thi\u1ebft \u0111\u1ec3 tr\u00e1nh 'toggle debt', l\u00e0m cho h\u1ec7 th\u1ed1ng ng\u00e0y c\u00e0ng kh\u00f3 b\u1ea3o tr\u00ec.</p> <p></p>"},{"location":"ByteByteGo/devops-sre-platform-engineering/","title":"DevOps, SRE, v\u00e0 Platform Engineering l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/devops-sre-platform-engineering/#nguon","title":"Ngu\u1ed3n","text":"<p> DevOps vs SRE vs Platform Engineering | Clear Big Misconceptions</p>"},{"location":"ByteByteGo/devops-sre-platform-engineering/#devops","title":"DevOps","text":"<p>DevOps l\u00e0 kh\u00e1i ni\u1ec7m \u0111\u01b0\u1ee3c ra \u0111\u1eddi v\u00e0o n\u0103m 2009 b\u1edfi Patrick Debois v\u00e0 Andrew Shafer, v\u1edbi m\u1ee5c ti\u00eau k\u1ebft n\u1ed1i hai team v\u1ed1n t\u00e1ch bi\u1ec7t nhau - Development v\u00e0 Operations.</p> <p></p> <p>N\u00f3 t\u1eadp trung v\u00e0o vi\u1ec7c x\u00e2y d\u1ef1ng m\u1ed9t v\u0103n h\u00f3a m\u00e0 hai team n\u00e0y l\u00e0m vi\u1ec7c c\u00f9ng nhau xuy\u00ean su\u1ed1t v\u00f2ng \u0111\u1eddi ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m, t\u1eeb thi\u1ebft k\u1ebf \u0111\u1ebfn tri\u1ec3n khai v\u00e0 h\u1ed7 tr\u1ee3 s\u1ea3n xu\u1ea5t. </p> <p></p> <p>V\u00ed d\u1ee5 \u0111i\u1ec3n h\u00ecnh l\u00e0 nguy\u00ean t\u1eafc \"You build it, you run it\" c\u1ee7a Amazon, n\u01a1i c\u00e1c team dev c\u0169ng ch\u1ecbu tr\u00e1ch nhi\u1ec7m deploy v\u00e0 duy tr\u00ec s\u1ea3n ph\u1ea9m. Vi\u1ec7c n\u00e0y gi\u00fap \u0111\u1ea9y nhanh qu\u00e1 tr\u00ecnh cung c\u1ea5p c\u00e1c t\u00ednh n\u0103ng m\u1edbi \u0111\u1ebfn ng\u01b0\u1eddi d\u00f9ng.</p> <p></p> <p>Nh\u01b0ng ta c\u1ea7n ph\u1ea3i th\u1eeba nh\u1eadn r\u1eb1ng trong b\u1ed1i c\u1ea3nh linh \u0111\u1ed9ng c\u1ee7a ng\u00e0nh c\u00f4ng ngh\u1ec7 hi\u1ec7n nay, c\u00e1i vai tr\u00f2 trong ng\u00e0nh th\u01b0\u1eddng h\u00f2a tr\u1ed9n v\u00e0 ti\u1ebfn h\u00f3a. M\u1ed9t cloud engineer t\u1ef1 kh\u1edfi t\u1ea1o m\u00e1y \u1ea3o v\u1edbi Ansible v\u00e0 ch\u1ea1y Kubernetes c\u00f3 th\u1ec3 tr\u00f4ng gi\u1ed1ng m\u1ed9t chuy\u00ean gia DevOps. T\u01b0\u01a1ng t\u1ef1, m\u1ed9t sysadmin x\u00e2y d\u1ef1ng c\u00f4ng c\u1ee5 v\u00e0 s\u1eed d\u1ee5ng h\u1ec7 th\u1ed1ng gi\u00e1m s\u00e1t c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c coi l\u00e0 m\u1ed9t Site Reliability Engineer (SRE). \u0110i\u1ec1u n\u00e0y t\u1ea1o n\u00ean s\u1ef1 th\u00fa v\u1ecb v\u00e0 \u0111\u1ed9ng l\u1ef1c trong ng\u00e0nh.</p>"},{"location":"ByteByteGo/devops-sre-platform-engineering/#sre","title":"SRE","text":"<p>SRE, hay Site Reliability Engineering, l\u00e0 m\u1ed9t \u00fd t\u01b0\u1edfng c\u1ee7a Google, v\u1edbi m\u1ee5c ti\u00eau x\u00e2y d\u1ef1ng s\u1ef1 t\u00ednh b\u1ec1n b\u1ec9 cho c\u00e1c h\u1ec7 th\u1ed1ng l\u1edbn v\u00e0 ph\u1ee9c t\u1ea1p. C\u00e1c SRE ph\u00e1t tri\u1ec3n c\u00e1c c\u00f4ng c\u1ee5 v\u00e0 quy tr\u00ecnh \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o ph\u1ea7n m\u1ec1m c\u00f3 th\u1ec3 ch\u1ecbu \u0111\u01b0\u1ee3c \u00e1p l\u1ef1c c\u1ee7a y\u00eau c\u1ea7u th\u1ef1c t\u1ebf, nh\u01b0 h\u1ec7 th\u1ed1ng qu\u1ea3n l\u00fd c\u00e1c Borg cluster v\u00e0 h\u1ec7 th\u1ed1ng gi\u00e1m s\u00e1t Monarch. </p> <p></p> <p>H\u1ecd kh\u00f4ng ch\u1ec9 \u0111\u1ea3m b\u1ea3o ph\u1ea7n m\u1ec1m ho\u1ea1t \u0111\u1ed9ng \u0111\u00fang c\u00e1ch m\u00e0 c\u00f2n s\u1eed d\u1ee5ng c\u00e1c ph\u01b0\u01a1ng ph\u00e1p k\u1ef9 thu\u1eadt ph\u1ea7n m\u1ec1m \u0111\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 v\u1eadn h\u00e0nh. M\u1ee5c ti\u00eau c\u1ee7a h\u1ecd l\u00e0 t\u1ea1o ra c\u00e1c h\u1ec7 th\u1ed1ng ph\u1ea7n m\u1ec1m c\u00f3 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng v\u00e0 \u0111\u1ed9 tin c\u1eady cao.</p> <p></p>"},{"location":"ByteByteGo/devops-sre-platform-engineering/#platform-engineering","title":"Platform Engineering","text":"<p>SRE c\u0169ng c\u00f3 th\u1ec3 \u0111\u1ea3m nhi\u1ec7m vai tr\u00f2 c\u1ee7a m\u1ed9t Platform Engineer, khi h\u1ecd x\u00e2y d\u1ef1ng c\u00e1c c\u00f4ng c\u1ee5 \u0111\u1ec3 \u0111\u01a1n gi\u1ea3n h\u00f3a quy tr\u00ecnh cho dev. V\u1eady Platform Engineering l\u00e0 g\u00ec? </p> <p>Netflix l\u00e0 m\u1ed9t v\u00ed d\u1ee5 \u0111i\u1ec3n h\u00ecnh, v\u1edbi \u0111\u1ed9i ng\u0169 Platform Engineer ph\u00e1t tri\u1ec3n m\u1ed9t h\u1ec7 th\u1ed1ng h\u1ea1 t\u1ea7ng m\u1ea1nh m\u1ebd, cho ph\u00e9p dev t\u1ea1o ra ph\u1ea7n m\u1ec1m ch\u1ea5t l\u01b0\u1ee3ng cao m\u1ed9t c\u00e1ch nhanh ch\u00f3ng. H\u1ecd kh\u00f4ng ch\u1ec9 t\u1eadp trung v\u00e0o c\u00f4ng ngh\u1ec7 m\u00e0 c\u00f2n k\u1ebft n\u1ed1i qu\u00e1 tr\u00ecnh ph\u00e1t tri\u1ec3n s\u1ea3n ph\u1ea9m v\u1edbi m\u1ee5c ti\u00eau kinh doanh. Platform Engineering ch\u00ednh l\u00e0 m\u1ed1i li\u00ean k\u1ebft gi\u1eefa c\u00e1c th\u00e0nh ph\u1ea7n trong ph\u00e1t tri\u1ec3n v\u00e0 v\u1eadn h\u00e0nh ph\u1ea7n m\u1ec1m.</p>"},{"location":"ByteByteGo/devops-sre-platform-engineering/#ket-luan","title":"K\u1ebft lu\u1eadn","text":"<p>M\u1eb7c d\u00f9 DevOps, SRE, v\u00e0 Platform Engineering c\u00f3 nh\u1eefng vai tr\u00f2 kh\u00e1c nhau, nh\u01b0ng t\u1ea5t c\u1ea3 \u0111\u1ec1u chia s\u1ebb chung m\u1ed9t t\u1ea7m nh\u00ecn: t\u0103ng c\u01b0\u1eddng s\u1ef1 h\u1ee3p t\u00e1c, t\u1ef1 \u0111\u1ed9ng h\u00f3a v\u00e0 hi\u1ec7u qu\u1ea3 trong ph\u00e1t tri\u1ec3n v\u00e0 v\u1eadn h\u00e0nh ph\u1ea7n m\u1ec1m. \u0110i\u1ec1u quan tr\u1ecdng kh\u00f4ng ph\u1ea3i l\u00e0 b\u00e1m v\u00e0o c\u00e1c ch\u1ee9c danh c\u00f4ng vi\u1ec7c c\u1ee9ng nh\u1eafc, m\u00e0 l\u00e0 s\u1ef1 th\u00edch nghi v\u00e0 ti\u1ebfn h\u00f3a c\u1ee7a c\u00e1c chuy\u00ean gia trong ng\u00e0nh \u0111\u1ec3 x\u00e2y d\u1ef1ng m\u1ed9t h\u1ec7 sinh th\u00e1i c\u00f4ng ngh\u1ec7 m\u1ea1nh m\u1ebd h\u01a1n.</p>"},{"location":"ByteByteGo/diagramming-with-code/","title":"6 c\u00f4ng c\u1ee5 v\u1ebd bi\u1ec3u \u0111\u1ed3 ki\u1ebfn tr\u00fac b\u1eb1ng code","text":""},{"location":"ByteByteGo/diagramming-with-code/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 6 Tools to Turn Code into Beautiful Diagrams</p>"},{"location":"ByteByteGo/diagramming-with-code/#diagrams-va-go-diagrams","title":"Diagrams v\u00e0 Go-Diagrams","text":"<p>Diagrams l\u00e0 m\u1ed9t th\u01b0 vi\u1ec7n Python cho ph\u00e9p b\u1ea1n v\u1ebd ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng cloud b\u1eb1ng code. C\u00f4ng c\u1ee5 n\u00e0y \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 t\u1ea1o nguy\u00ean m\u1eabu nhanh ch\u00f3ng m\u00e0 kh\u00f4ng c\u1ea7n c\u00e1c c\u00f4ng c\u1ee5 v\u1ebd s\u01a1 \u0111\u1ed3 ri\u00eang bi\u1ec7t. Diagrams h\u1ed7 tr\u1ee3 vi\u1ec7c theo d\u00f5i thay \u0111\u1ed5i c\u1ee7a s\u01a1 \u0111\u1ed3 trong c\u00e1c h\u1ec7 th\u1ed1ng qu\u1ea3n l\u00fd phi\u00ean b\u1ea3n, gi\u00fap k\u1ebft n\u1ed1i t\u00e0i li\u1ec7u v\u1edbi vi\u1ec7c tri\u1ec3n khai h\u1ec7 th\u1ed1ng. N\u00f3 h\u1ed7 tr\u1ee3 hi\u1ec3n th\u1ecb icon c\u1ee7a h\u1ea1 t\u1ea7ng c\u1ee7a c\u00e1c nh\u00e0 cung c\u1ea5p l\u1edbn nh\u01b0 AWS, Azure, GCP, Kubernetes, c\u0169ng nh\u01b0 c\u00e1c d\u1ecbch v\u1ee5 SaaS v\u00e0 framework ph\u1ed5 bi\u1ebfn.</p> <p></p> <p>N\u1ebfu b\u1ea1n th\u00edch Go th\u00ec ta c\u00f3 Go-Diagrams. \u0110\u00e2y l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 t\u01b0\u01a1ng t\u1ef1 nh\u01b0 phi\u00ean b\u1ea3n Python, nh\u01b0ng cho ph\u00e9p b\u1ea1n vi\u1ebft b\u1eb1ng Go.</p> <p></p>"},{"location":"ByteByteGo/diagramming-with-code/#mermaid","title":"Mermaid","text":"<p>Ti\u1ebfp theo l\u00e0 Mermaid \u2013 m\u1ed9t th\u01b0 vi\u1ec7n JavaScript cho ph\u00e9p v\u1ebd s\u01a1 \u0111\u1ed3 b\u1eb1ng v\u0103n b\u1ea3n. Mermaid s\u1eed d\u1ee5ng c\u00fa ph\u00e1p gi\u1ed1ng Markdown \u0111\u1ec3 \u0111\u1ecbnh ngh\u0129a s\u01a1 \u0111\u1ed3 v\u00e0 cung c\u1ea5p c\u00f4ng c\u1ee5 ch\u1ec9nh s\u1eeda tr\u1ef1c ti\u1ebfp (Mermaid Live Editor). C\u00f4ng c\u1ee5 n\u00e0y gi\u00fap gi\u1ea3m thi\u1ec3u t\u00ecnh tr\u1ea1ng \"doc-rot\" (t\u00e0i li\u1ec7u b\u1ecb l\u1ed7i th\u1eddi nhanh ch\u00f3ng), v\u00ec qu\u00e1 tr\u00ecnh c\u1eadp nh\u1eadt d\u1ec5 d\u00e0ng v\u00e0 nhanh ch\u00f3ng.</p> <p></p> <p></p>"},{"location":"ByteByteGo/diagramming-with-code/#plantuml","title":"PlantUML","text":"<p>N\u1ebfu b\u1ea1n c\u1ea7n m\u1ed9t c\u00f4ng c\u1ee5 m\u1ea1nh m\u1ebd h\u01a1n, h\u00e3y th\u1eed PlantUML. N\u00f3 cung c\u1ea5p m\u1ed9t ng\u00f4n ng\u1eef \u0111\u1eb7c th\u00f9 cho vi\u1ec7c t\u1ea1o ra nhi\u1ec1u lo\u1ea1i s\u01a1 \u0111\u1ed3 kh\u00e1c nhau: t\u1eeb s\u01a1 \u0111\u1ed3 tr\u00ecnh t\u1ef1, s\u01a1 \u0111\u1ed3 ki\u1ebfn tr\u00fac, t\u1edbi s\u01a1 \u0111\u1ed3 m\u1ea1ng v\u00e0 bi\u1ec3u \u0111\u1ed3 Gantt. M\u1eb7c d\u00f9 PlantUML c\u00f3 ch\u00fat h\u01a1i kh\u00f3 h\u1ecdc, nh\u01b0ng t\u00ednh linh ho\u1ea1t c\u1ee7a n\u00f3 l\u1ea1i r\u1ea5t \u1ea5n t\u01b0\u1ee3ng.</p> <p></p>"},{"location":"ByteByteGo/diagramming-with-code/#ascii-diagram-editors","title":"ASCII Diagram Editors","text":"<p>M\u1ed9t lo\u1ea1i c\u00f4ng c\u1ee5 kh\u00e1c ho\u00e0n to\u00e0n l\u00e0 c\u00e1c tr\u00ecnh ch\u1ec9nh s\u1eeda s\u01a1 \u0111\u1ed3 ASCII. Nh\u1eefng c\u00f4ng c\u1ee5 n\u00e0y cho ph\u00e9p b\u1ea1n v\u1ebd s\u01a1 \u0111\u1ed3 ho\u1eb7c b\u1eb1ng v\u0103n b\u1ea3n v\u00e0 sau \u0111\u00f3 hi\u1ec3n th\u1ecb ch\u00fang d\u01b0\u1edbi d\u1ea1ng ASCII (ngh\u1ec7 vl), m\u1ed9t \u0111\u1ecbnh d\u1ea1ng v\u0103n b\u1ea3n thu\u1ea7n t\u00fay d\u1ec5 nh\u00fang v\u00e0o b\u1ea5t k\u1ef3 n\u01a1i n\u00e0o. M\u1ed9t s\u1ed1 v\u00ed d\u1ee5 \u0111i\u1ec3n h\u00ecnh l\u00e0 asciiflow (d\u1ef1a tr\u00ean web) v\u00e0 Monodraw (ch\u1ec9 d\u00e0nh cho Mac).</p> <p></p> <p></p>"},{"location":"ByteByteGo/diagramming-with-code/#markmap","title":"Markmap","text":"<p>Cu\u1ed1i c\u00f9ng l\u00e0 Markmap, gi\u00fap t\u1ea1o v\u00e0 tr\u1ef1c quan h\u00f3a b\u1ea3n \u0111\u1ed3 t\u01b0 duy t\u1eeb c\u00e1c t\u00e0i li\u1ec7u Markdown. C\u00f4ng c\u1ee5 n\u00e0y ph\u00e2n t\u00edch n\u1ed9i dung Markdown v\u00e0 tr\u00edch xu\u1ea5t c\u00e1c c\u1ea5u tr\u00fac ph\u00e2n c\u1ea5p \u0111\u1ec3 hi\u1ec3n th\u1ecb th\u00e0nh b\u1ea3n \u0111\u1ed3 t\u01b0 duy. Markmap ph\u00f9 h\u1ee3p \u0111\u1ec3 k\u1ebft n\u1ed1i c\u00e1c \u00fd t\u01b0\u1edfng v\u00e0 m\u1ed1i quan h\u1ec7 \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a trong v\u0103n b\u1ea3n. N\u00f3 h\u1ed7 tr\u1ee3 nhi\u1ec1u n\u1ec1n t\u1ea3ng nh\u01b0ng c\u00f3 th\u1ec3 kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng t\u1ed1t tr\u00ean c\u00e1c lo\u1ea1i b\u1ea3n \u0111\u1ed3 t\u01b0 duy l\u1edbn ho\u1eb7c ph\u1ee9c t\u1ea1p.</p> <p></p>"},{"location":"ByteByteGo/discord-messages-migration/","title":"Discord l\u01b0u h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/discord-messages-migration/#nguon","title":"Ngu\u1ed3n","text":"<p> How Discord Stores TRILLIONS of Messages</p>"},{"location":"ByteByteGo/discord-messages-migration/#loi-tua","title":"L\u1eddi t\u1ef1a","text":"<p>Trong b\u00e0i n\u00e0y, ta s\u1ebd kh\u00f4ng ch\u1ec9 n\u00f3i v\u1ec1 database migration (di chuy\u1ec3n d\u1eef li\u1ec7u t\u1eeb database n\u00e0y sang database kh\u00e1c), m\u00e0 c\u00f2n n\u00f3i v\u1ec1 m\u1ed9t task si\u00eau to kh\u1ed5ng l\u1ed3 m\u00e0 c\u00e1c dev c\u1ee7a Discord \u0111\u00e3 l\u00e0m \u0111\u01b0\u1ee3c - chuy\u1ec3n h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn t\u1eeb m\u1ed9t database n\u00e0y sang database kh\u00e1c. N\u1ebfu b\u1ea1n t\u1ef1 h\u1ecfi r\u1eb1ng s\u1ebd t\u1ed1n bao nhi\u00eau c\u00f4ng s\u1ee9c \u0111\u1ec3 di chuy\u1ec3n data v\u1edbi quy m\u00f4 kh\u00f3 t\u01b0\u1edfng t\u01b0\u1ee3ng ra nh\u01b0 v\u1eady, b\u1ea1n s\u1ebd th\u00edch b\u00e0i vi\u1ebft n\u00e0y.</p> <p>Discord g\u1ea7n \u0111\u00e2y \u0111\u00e3 v\u00e9n b\u1ee9c m\u00e0n v\u1ec1 c\u00e1ch c\u00f4ng ty n\u00e0y di chuy\u1ec3n h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn t\u1eeb Cassandra - database ch\u1ee9a c\u00e1c cu\u1ed9c tr\u00f2 chuy\u1ec7n v\u00e0 h\u1ed9i tho\u1ea1i c\u1ee7a b\u1ea1n, sang ScyllaDB - m\u1ed9t gi\u1ea3i ph\u00e1p thay th\u1ebf nhanh h\u01a1n v\u00e0 \u0111\u00e1ng tin c\u1eady h\u01a1n. B\u00ed m\u1eadt n\u00e0y \u0111\u01b0\u1ee3c chia s\u1ebb l\u1ea7n \u0111\u1ea7u t\u1ea1i ScyllaDB Summit 2023 b\u1edfi Bo Ingram (video t\u1ea1i \u0111\u00e2y), v\u1edbi m\u1ed9t b\u00e0i blog chi ti\u1ebft t\u1ea1i \u0111\u00e2y. M\u00ecnh s\u1ebd t\u00f3m t\u1eaft \u00fd t\u01b0\u1edfng c\u00f9ng b\u00e0i h\u1ecdc r\u00fat ra ngay sau \u0111\u00e2y.</p>"},{"location":"ByteByteGo/discord-messages-migration/#van-e-cua-cassandra","title":"V\u1ea5n \u0111\u1ec1 c\u1ee7a Cassandra","text":"<p>H\u00e3y quay tr\u1edf l\u1ea1i th\u1eddi gian t\u1ea7m v\u00e0i n\u0103m tr\u01b0\u1edbc. Discord l\u00fac n\u00e0y \u0111ang h\u01a1i kh\u00f3 x\u1eed v\u1edbi vi\u1ec7c ch\u1ecdn database. H\u1ecd \u0111ang d\u00f9ng Cassandra, nh\u01b0ng khi n\u1ec1n t\u1ea3ng n\u00e0y ti\u1ebfp t\u1ee5c ph\u00e1t tri\u1ec3n, h\u1ecd ph\u1ea3i \u0111\u1ed1i m\u1eb7t v\u1edbi c\u00e1c v\u1ea5n \u0111\u1ec1 nghi\u00eam tr\u1ecdng v\u1ec1 hi\u1ec7u su\u1ea5t. Vi\u1ec7c duy tr\u00ec cluster Cassandra ch\u00ednh (n\u01a1i l\u01b0u tr\u1eef tin nh\u1eafn) m\u1ea5t r\u1ea5t nhi\u1ec1u c\u00f4ng s\u1ee9c. \u0110\u1ed9 tr\u1ec5 kh\u00f3 \u0111o\u00e1n v\u00e0 c\u00e1c s\u1ef1 c\u1ed1 th\u01b0\u1eddng xuy\u00ean x\u1ea3y ra khi on-call g\u00e2y n\u00ean c\u0103ng th\u1eb3ng r\u1ea5t l\u1edbn cho team.</p> <p>\u0110\u1ebfn n\u0103m 2022, cluster Cassandra ch\u1ee9a h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn tr\u00ean 177 node. H\u1ecd hi\u1ec3u r\u1eb1ng h\u1ecd c\u1ea7n m\u1ed9t s\u1ef1 kh\u00e1c bi\u1ec7t, nh\u01b0ng cluster tin nh\u1eafn n\u00e0y r\u1ea5t quan tr\u1ecdng v\u1edbi Discord. N\u1ebfu cluster n\u00e0y ch\u1eadm, Discord c\u0169ng s\u1ebd ch\u1eadm. N\u1ebfu cluster ng\u1eebng ho\u1ea1t \u0111\u1ed9ng, Discord c\u0169ng ch\u1ebft lu\u00f4n.</p> <p></p>"},{"location":"ByteByteGo/discord-messages-migration/#scylladb-va-qua-trinh-di-chuyen","title":"ScyllaDB v\u00e0 qu\u00e1 tr\u00ecnh di chuy\u1ec3n","text":"<p>Gi\u1ea3i ph\u00e1p l\u00e0 g\u00ec? ScyllaDB, m\u1ed9t database t\u01b0\u01a1ng th\u00edch v\u1edbi Cassandra, nh\u01b0ng v\u1edbi m\u1ed9t engine d\u1ef1a tr\u00ean C++ m\u1ea1nh m\u1ebd h\u01a1n.</p>"},{"location":"ByteByteGo/discord-messages-migration/#cac-giai-oan-trong-qua-trinh-di-chuyen","title":"C\u00e1c giai \u0111o\u1ea1n trong qu\u00e1 tr\u00ecnh di chuy\u1ec3n","text":"<p>Thay v\u00ec lao v\u00e0o gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 r\u1ee7i ro nh\u1ea5t v\u00e0 l\u1edbn nh\u1ea5t, h\u1ecd b\u1eaft \u0111\u1ea7u di chuy\u1ec3n v\u1edbi c\u00e1c database nh\u1ecf h\u01a1n. V\u00e0 \u0111\u00e2y ch\u00ednh l\u00e0 b\u00e0i h\u1ecdc \u0111\u1ea7u ti\u00ean. \u1ede Discord, dev s\u1ebd h\u00e0nh \u0111\u1ed9ng nhanh ch\u00f3ng khi sai l\u1ea7m c\u00f3 th\u1ec3 kh\u1eafc ph\u1ee5c \u0111\u01b0\u1ee3c, nh\u01b0ng n\u1ebfu gi\u1ea3i ph\u00e1p kh\u00f4ng th\u1ec3 \u0111\u1ea3o ng\u01b0\u1ee3c khi c\u00f3 v\u1ea5n \u0111\u1ec1, h\u1ecd s\u1ebd d\u00e0nh th\u00eam th\u1eddi gian \u0111\u1ec3 nghi\u00ean c\u1ee9u l\u00e0m sao cho \u0111\u00fang. H\u1ecd di chuy\u1ec3n nh\u1eefng database nh\u1ecf \u0111\u1ec3 ki\u1ec3m tra v\u00e0 gi\u1ea3i quy\u1ebft nhi\u1ec1u v\u1ea5n \u0111\u1ec1 nh\u1ea5t c\u00f3 th\u1ec3 tr\u01b0\u1edbc khi di chuy\u1ec3n con qu\u00e1i v\u1eadt ngh\u00ecn t\u1ec9 tin nh\u1eafn.</p> <p></p> <p>N\u00f3i th\u00eam m\u1ed9t ch\u00fat v\u1ec1 ScyllaDB. N\u00f3 \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng C++ v\u00e0 h\u1ee9a h\u1eb9n hi\u1ec7u su\u1ea5t t\u1ed1t h\u01a1n, s\u1eeda ch\u1eefa nhanh h\u01a1n, v\u00e0 quan tr\u1ecdng nh\u1ea5t l\u00e0 kh\u00f4ng c\u00f3 garbage collection. V\u1edbi m\u1ed9t team c\u00f3 qu\u00e1 nhi\u1ec1u v\u1ea5n \u0111\u1ec1 v\u1edbi garbage collector c\u1ee7a Cassandra, \u0111\u00e2y th\u1ef1c s\u1ef1 l\u00e0 m\u1ed9t lu\u1ed3ng gi\u00f3 m\u1edbi. </p> <p></p>"},{"location":"ByteByteGo/discord-messages-migration/#data-service","title":"Data service","text":"<p>B\u01b0\u1edbc quan tr\u1ecdng ti\u1ebfp theo l\u00e0 t\u1ea1o m\u1ed9t l\u1edbp trung gian gi\u1eefa kh\u1ed1i API v\u00e0 c\u00e1c cluster database \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 c\u00e1c data service. L\u1edbp n\u00e0y \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng Rust, m\u1ed9t ng\u00f4n ng\u1eef an to\u00e0n v\u00e0 c\u00f3 hi\u1ec7u su\u1ea5t cao.</p> <p></p> <p>\u00dd t\u01b0\u1edfng c\u1ef1c hay v\u1ec1 l\u1edbp data service n\u00e0y l\u00e0 th\u1ee9 \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 request coalescing (h\u1ee3p nh\u1ea5t request). N\u1ebfu nhi\u1ec1u ng\u01b0\u1eddi d\u00f9ng c\u00f9ng request m\u1ed9t d\u1eef li\u1ec7u, database ch\u1ec9 c\u1ea7n \u0111\u01b0\u1ee3c truy v\u1ea5n m\u1ed9t l\u1ea7n duy nh\u1ea5t.</p> <p></p> <p>\u0110i\u1ec1u n\u00e0y l\u00e0m gi\u1ea3m kh\u1ea3 n\u0103ng t\u1ea1o ra c\u00e1c hot partition (l\u00e0 c\u00e1c partition b\u1ecb truy c\u1eadp qu\u00e1 nhi\u1ec1u, \u0111\u1eb7c bi\u1ec7t trong gi\u1edd cao \u0111i\u1ec3m). H\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng t\u1ea5t c\u1ea3 nh\u1eefng tin nh\u1eafn <code>@everyone</code> ngo\u00e0i \u00fd mu\u1ed1n \u0111\u00f3 trong c\u00e1c server Discord c\u1ef1c to \u0111i. V\u1edbi l\u1edbp n\u00e0y \u1edf gi\u1eefa, s\u1ebd kh\u00f4ng c\u00f3 v\u1ea5n \u0111\u1ec1 g\u00ec \u0111\u1ed1i v\u1edbi database. </p>"},{"location":"ByteByteGo/discord-messages-migration/#super-disk","title":"Super-Disk","text":"<p>Sau \u0111\u00f3, h\u1ecd \u0111\u01b0a ra kh\u00e1i ni\u1ec7m v\u1ec1 Super-Disk. C\u00e1c cluster database ch\u1ea1y tr\u00ean Google Cloud. Khi g\u1eb7p c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u1ed9 tr\u1ec5 tr\u00ean \u0111\u0129a c\u1ee9ng, h\u1ecd kh\u00f4ng th\u1ec3 d\u1ef1a v\u00e0o \u1ed5 SSD NVMe c\u1ee5c b\u1ed9 tr\u00ean m\u00e1y \u1ea3o \u0111\u1ec3 l\u01b0u tr\u1eef d\u1eef li\u1ec7u quan tr\u1ecdng do c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u1ed9 tin c\u1eady v\u00e0 \u0111\u1ed9 b\u1ec1n. </p> <p>Gi\u1ea3i ph\u00e1p thay th\u1ebf l\u00e0 c\u00e1c Persistent Disk c\u1ee7a Google Cloud. M\u1eb7c d\u00f9 n\u00f3 \u0111\u00e1ng tin c\u1eady v\u00e0 linh ho\u1ea1t, n\u00f3 c\u00f3 m\u1ed9t nh\u01b0\u1ee3c di\u1ec3m l\u00e0 \u0111\u1ed9 tr\u1ec5 cao h\u01a1n do ch\u00fang \u0111\u01b0\u1ee3c g\u1eafn th\u00f4ng qua m\u1ea1ng thay v\u00ec \u0111\u01b0\u1ee3c g\u00e1n tr\u1ef1c ti\u1ebfp.</p> <p></p> <p>V\u1eady Discord \u0111\u00e3 l\u00e0m g\u00ec? H\u1ecd quay l\u1ea1i b\u1ea3n v\u1ebd v\u00e0 t\u1eadp trung t\u1ea1o ra m\u1ed9t gi\u1ea3i ph\u00e1p ph\u00f9 h\u1ee3p v\u1edbi nhu c\u1ea7u c\u1ee5 th\u1ec3 c\u1ee7a h\u1ecd. H\u1ecd ch\u1ecdn \u01b0u ti\u00ean c\u00e1c l\u1ea7n \u0111\u1ecdc \u0111\u0129a c\u00f3 \u0111\u1ed9 tr\u1ec5 th\u1ea5p, \u01b0u ti\u00ean h\u01a1n t\u1ea5t c\u1ea3 c\u00e1c ch\u1ec9 s\u1ed1 kh\u00e1c c\u1ee7a \u0111\u0129a c\u1ee9ng, trong khi v\u1eabn duy tr\u00ec b\u1ea3o \u0111\u1ea3m th\u1eddi gian ho\u1ea1t \u0111\u1ed9ng c\u1ee7a database hi\u1ec7n c\u00f3. H\u1ecd \u0111\u00e3 ngh\u0129 ra m\u1ed9t Super-Disk k\u1ebft h\u1ee3p nh\u1eefng g\u00ec t\u1ed1t nh\u1ea5t c\u1ee7a c\u00e1c SSD c\u1ee5c b\u1ed9 v\u00e0 c\u00e1c Persistent Disk \u1edf c\u1ea5p \u0111\u1ed9 ph\u1ea7n m\u1ec1m. </p> <p></p> <p>Super-Disk n\u00e0y l\u00e0 m\u1ed9t gi\u1ea3i ph\u00e1p RAID hai l\u1edbp. H\u1ecd d\u00f9ng RAID0 \u0111\u1ec3 k\u1ebft h\u1ee3p nhi\u1ec1u SSD c\u1ee5c b\u1ed9 th\u00e0nh m\u1ed9t \u0111\u0129a \u1ea3o c\u00f3 \u0111\u1ed9 tr\u1ec5 th\u1ea5p, v\u00e0 sau \u0111\u00f3 RAID1 \u0111\u1ec3 mirror RAID0 n\u00e0y v\u00e0o Persistent Disk. Sau \u0111\u00f3, h\u1ecd c\u1ea5u h\u00ecnh linux kernel \u0111\u1ec3 chuy\u1ec3n h\u01b0\u1edbng ghi v\u00e0o Persistent Disk \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o \u0111\u1ed9 b\u1ec1n cao, v\u00e0 h\u01b0\u1edbng \u0111\u1ecdc v\u00e0o SSD c\u1ee5c b\u1ed9 \u0111\u1ec3 c\u00f3 \u0111\u1ed9 tr\u1ec5 th\u1ea5p. Thi\u1ebft l\u1eadp n\u00e0y \u0111\u1ea3m b\u00e0o kh\u1ea3 n\u0103ng \u0111\u1ecdc c\u00f3 \u0111\u1ed9 tr\u1ec5 th\u1ea5p t\u1eeb SSD c\u1ee5c b\u1ed9 v\u00e0 \u0111\u1ed9 b\u1ec1n ghi t\u1eeb Persistent Disk.</p> <p></p> <p>C\u00e1i n\u00e0y th\u00ec c\u00f3 g\u00ec m\u00e0 hay? \u0110\u00e2y ch\u00ednh l\u00e0 m\u1ed9t v\u00ed d\u1ee5 tuy\u1ec7t v\u1eddi v\u1ec1 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 t\u1eeb nh\u1eefng nguy\u00ean t\u1eafc \u0111\u1ea7u ti\u00ean. Discord \u0111ang x\u1eed l\u00fd m\u1ed9t v\u1ea5n \u0111\u1ec1 kh\u00f4ng c\u00f3 s\u1eb5n gi\u1ea3i ph\u00e1p. Thay v\u00ec c\u1ed1 g\u1eafng l\u00e0m v\u1edbi nh\u1eefng g\u00ec c\u00f3 s\u1eb5n, h\u1ecd x\u00e1c \u0111\u1ecbnh l\u1ea1i v\u1ea5n \u0111\u1ec1 d\u1ef1a tr\u00ean nhu c\u1ea7u c\u1ee5 th\u1ec3 v\u00e0 sau \u0111\u00f3 x\u00e2y d\u1ef1ng m\u1ed9t gi\u1ea3i ph\u00e1p ph\u00f9 h\u1ee3p.</p> <p></p> <p>Super-Disk ho\u1ea1t \u0111\u1ed9ng th\u1ef1c s\u1ef1 r\u1ea5t t\u1ed1t. \u1ede m\u1ee9c t\u1ea3i cao nh\u1ea5t, c\u00e1c database kh\u00f4ng c\u00f2n d\u1ed3n c\u00e1c thao t\u00e1c tr\u00ean \u0111\u0129a th\u00e0nh \u0111\u1ed1ng n\u1eefa, v\u00e0 kh\u00f4ng c\u00f3 thay \u0111\u1ed5i n\u00e0o v\u1ec1 \u0111\u1ed9 tr\u1ec5 khi truy v\u1ea5n. </p> <p></p> <p>Cu\u1ed1i c\u00f9ng, v\u1edbi t\u1ea5t c\u1ea3 vi\u1ec7c chu\u1ea9n b\u1ecb ho\u00e0n t\u1ea5t, \u0111\u00e3 \u0111\u1ebfn l\u00fac di chuy\u1ec3n database l\u1edbn nh\u1ea5t - con qu\u00e1i v\u1eadt \"cluster tin nh\u1eafn\".</p> <p>V\u1edbi h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn v\u00e0 g\u1ea7n 200 node, \u0111\u00e2y l\u00e0 m\u1ed9t nhi\u1ec7m v\u1ee5 kh\u00f3 kh\u0103n. Nh\u01b0ng v\u1edbi m\u1ed9t tr\u00ecnh chuy\u1ec3n d\u1eef li\u1ec7u vi\u1ebft b\u1eb1ng Rust v\u00e0 m\u1ed9t s\u1ed1 chi\u1ebfn l\u01b0\u1ee3c th\u00f4ng minh, h\u1ecd \u0111\u00e3 l\u00e0m xong trong ch\u1ec9 9 ng\u00e0y. \u0110\u00fang, b\u1ea1n kh\u00f4ng nh\u1ea7m \u0111\u00e2u, h\u1ecd di chuy\u1ec3n h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn m\u00e0 kh\u00f4ng c\u00f3 downtime trong v\u00f2ng ch\u01b0a \u0111\u1ebfn hai tu\u1ea7n! V\u00e0 ph\u1ea7n th\u01b0\u1edfng l\u00e0 g\u00ec? M\u1ed9t h\u1ec7 th\u1ed1ng nh\u1eb9 nh\u00e0ng v\u00e0 hi\u1ec7u qu\u1ea3 h\u01a1n r\u1ea5t nhi\u1ec1u. T\u1eeb 177 node Cassandra, qua ScyllaDB ch\u1ec9 c\u00f2n 72 node. N\u00f3 c\u1ea3i thi\u1ec7n \u0111\u00e1ng k\u1ec3 \u0111\u1ed9 tr\u1ec5 v\u00e0 ch\u1ea5t l\u01b0\u1ee3ng cu\u1ed9c s\u1ed1ng c\u1ee7a c\u00e1c dev on-call. </p> <p></p> <p>\u0110\u00f3 kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t task b\u00ecnh th\u01b0\u1eddng, nh\u01b0ng v\u1edbi c\u00e1c gi\u1ea3i ph\u00e1p s\u00e1ng t\u1ea1o v\u00e0 gi\u1ea3m thi\u1ec3u r\u1ee7i ro m\u1ed9t c\u00e1ch th\u00f4ng minh, h\u1ecd \u0111\u00e3 ho\u00e0n t\u1ea5t n\u00f3 m\u1ed9t c\u00e1ch tuy\u1ec7t v\u1eddi. Di chuy\u1ec3n database tr\u00ean m\u00f4i tr\u01b0\u1eddng live kh\u00f4ng ph\u1ea3i l\u00e0 tr\u00f2 \u0111\u00f9a, v\u00e0 l\u00e0m \u1edf quy m\u00f4 l\u1edbn nh\u01b0 th\u1ebf n\u00e0y, th\u1ef1c s\u1ef1 r\u1ea5t kh\u00f3 \u0111\u1ea5y.</p>"},{"location":"ByteByteGo/dns/","title":"Nh\u1eefng th\u1ee9 b\u1ea1n c\u1ea7n bi\u1ebft v\u1ec1 DNS","text":""},{"location":"ByteByteGo/dns/#nguon","title":"Ngu\u1ed3n","text":"<p> Everything You Need to Know About DNS (Domain Name System)</p>"},{"location":"ByteByteGo/dns/#khai-niem","title":"Kh\u00e1i ni\u1ec7m","text":"<p>DNS (Domain Name System - h\u1ec7 th\u1ed1ng t\u00ean mi\u1ec1n) l\u00e0 m\u1ed9t cu\u1ed1n danh b\u1ea1 c\u1ee7a Internet. N\u00f3 d\u1ecbch c\u00e1c t\u00ean mi\u1ec1n m\u00e0 con ng\u01b0\u1eddi c\u00f3 th\u1ec3 \u0111\u1ecdc \u0111\u01b0\u1ee3c, nh\u01b0 <code>google.com</code> th\u00e0nh c\u00e1c \u0111\u1ecba ch\u1ec9 IP m\u00e0 m\u00e1y c\u00f3 th\u1ec3 \u0111\u1ecdc \u0111\u01b0\u1ee3c. DNS c\u00f3 ph\u1ea7n h\u01a1i kh\u00f3 hi\u1ec3u v\u00ec c\u00f3 nh\u1eefng lo\u1ea1i DNS server kh\u00e1c nhau trong h\u1ec7 th\u1ed1ng ph\u00e2n c\u1ea5p DNS, m\u1ed7i lo\u1ea1i ph\u1ee5c v\u1ee5 cho m\u1ed9t m\u1ee5c \u0111\u00edch kh\u00e1c nhau.</p> <p></p> <p>Khi tr\u00ecnh duy\u1ec7t th\u1ef1c hi\u1ec7n truy v\u1ea5n DNS, tr\u00ecnh duy\u1ec7t \u0111\u00f3 \u0111ang h\u1ecfi m\u1ed9t DNS resolver (tr\u00ecnh ph\u00e2n gi\u1ea3i DNS). DNS resolver c\u00f3 th\u1ec3 \u0111\u1ebfn t\u1eeb ISP ho\u1eb7c t\u1eeb c\u00e1c nh\u00e0 cung c\u1ea5p DNS n\u1ed5i ti\u1ebfng nh\u01b0 1.1.1.1 c\u1ee7a Cloudflare hay 8.8.8.8 c\u1ee7a Google. </p> <p></p> <p>N\u1ebfu DNS resolver kh\u00f4ng c\u00f3 c\u00e2u tr\u1ea3 l\u1eddi trong cache c\u1ee7a n\u00f3, n\u00f3 s\u1ebd t\u00ecm v\u00e0 h\u1ecfi \u0111\u00fang authoritative nameserver (m\u00e1y ch\u1ee7 \u0111\u1ecbnh danh c\u00f3 th\u1ea9m quy\u1ec1n). Authoritative nameserver l\u00e0 m\u00e1y ch\u1ee7 ch\u1ee9a c\u00e2u tr\u1ea3 l\u1eddi. Khi c\u1eadp nh\u1eadt b\u1ea3n ghi DNS c\u1ee7a t\u00ean mi\u1ec1n, ta \u0111ang c\u1eadp nh\u1eadt authoritative nameserver c\u1ee7a n\u00f3.</p> <p></p> <p>L\u00e0m sao \u0111\u1ec3 DNS resolver t\u00ecm ra \u0111\u01b0\u1ee3c authoritative nameserver? C\u00f3 ba c\u1ea5p \u0111\u1ed9 ch\u00ednh c\u1ee7a authoritative DNS server, bao g\u1ed3m root name servers (m\u00e1y ch\u1ee7 \u0111\u1ecbnh danh g\u1ed1c), top level domain (TLD) nameservers (m\u00e1y ch\u1ee7 \u0111\u1ecbnh danh mi\u1ec1n c\u1ea5p cao nh\u1ea5t) v\u00e0 authoritative nameservers cho c\u00e1c mi\u1ec1n (m\u00e1y ch\u1ee7 \u0111\u1ecbnh danh c\u00f3 th\u1ea9m quy\u1ec1n).</p> <p></p> <p>Root name servers l\u01b0u tr\u1eef \u0111\u1ecba ch\u1ec9 IP c\u1ee7a TLD nameserver. C\u00f3 13 logical root name servers. M\u1ed7i root name server c\u00f3 m\u1ed9t \u0111\u1ecba ch\u1ec9 IP \u0111\u01b0\u1ee3c g\u00e1n cho n\u00f3.</p> <p></p> <p>Tr\u00ean th\u1ef1c t\u1ebf, c\u00f3 nhi\u1ec1u m\u00e1y ch\u1ee7 v\u1eadt l\u00fd \u0111\u1eb1ng sau m\u1ed7i \u0111\u1ecba ch\u1ec9 IP. Th\u00f4ng qua anycast, ta \u0111\u01b0\u1ee3c \u0111\u1ecbnh tuy\u1ebfn \u0111\u1ebfn m\u00e1y ch\u1ee7 g\u1ea7n nh\u1ea5t.</p> <p>M\u00e1y ch\u1ee7 \u0111\u1ecbnh danh TLD l\u01b0u \u0111\u1ecba ch\u1ec9 IP c\u1ee7a c\u00e1c authoritative nameserver cho t\u1ea5t c\u1ea3 c\u00e1c mi\u1ec1n trong quy\u1ec1n ki\u1ec3m so\u00e1t c\u1ee7a ch\u00fang. C\u00f3 nhi\u1ec1u lo\u1ea1i t\u00ean TLD nh\u01b0 <code>.com</code>, <code>.org</code>, <code>.edu</code>. Ngo\u00e0i ra c\u00f2n c\u00f3 c\u00e1c m\u00e3 TLD qu\u1ed1c gia nh\u01b0 <code>.de</code> v\u00e0 <code>.uk</code>.</p> <p></p> <p>C\u00e1c authoritative nameserver cho t\u00ean mi\u1ec1n cung c\u1ea5p c\u00e1c c\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e1ng tin c\u1eady v\u00e0 ch\u00ednh x\u00e1c cho c\u00e1c truy v\u1ea5n DNS. Khi ta \u0111\u0103ng k\u00fd m\u1ed9t t\u00ean mi\u1ec1n, nh\u00e0 \u0111\u0103ng k\u00fd t\u00ean mi\u1ec1n s\u1ebd ch\u1ea1y c\u00e1c authoritative\u00a0nameserver nh\u01b0ng ta c\u00f3 th\u1ec3 \u0111\u1ed5i ch\u00fang th\u00e0nh c\u00e1c server kh\u00e1c. C\u00e1c nh\u00e0 cung c\u1ea5p \u0111\u00e1m m\u00e2y nh\u01b0 AWS v\u00e0 Cloudflare c\u00f3 c\u00e1c authoritative\u00a0nameserver m\u1ea1nh m\u1ebd. Thi\u1ebft k\u1ebf ph\u00e2n c\u1ea5p n\u00e0y l\u00e0m cho DNS c\u00f3 \u0111\u1ed9 ph\u00e2n c\u1ea5p cao v\u00e0 c\u1ef1c k\u1ef3 m\u1ea1nh m\u1ebd.</p> <p></p>"},{"location":"ByteByteGo/dns/#truy-van-dns","title":"Truy v\u1ea5n DNS","text":"<p>(1) Ng\u01b0\u1eddi d\u00f9ng g\u00f5 <code>google.com</code> v\u00e0o tr\u00ecnh duy\u1ec7t. Tr\u00ecnh duy\u1ec7t ki\u1ec3m tra cache c\u1ee7a n\u00f3. N\u1ebfu kh\u00f4ng c\u00f3 c\u00e2u tr\u1ea3 l\u1eddi th\u00ec tr\u00ecnh duy\u1ec7t s\u1ebd g\u1ecdi system call \u0111\u1ec3 l\u1ea5y IP. System call c\u0169ng c\u00f3 cache ri\u00eang. N\u1ebfu v\u1eabn kh\u00f4ng c\u00f3 IP th\u00ec n\u00f3 s\u1ebd h\u1ecfi DNS resolver. </p> <p>(2) DNS resolver c\u0169ng s\u1ebd ki\u1ec3m tra cache c\u1ee7a n\u00f3. </p> <p>(3) N\u1ebfu v\u1eabn kh\u00f4ng c\u00f3 c\u00e2u tr\u1ea3 l\u1eddi ho\u1eb7c c\u00e2u tr\u1ea3 l\u1eddi h\u1ebft h\u1ea1n th\u00ec n\u00f3 s\u1ebd h\u1ecfi root name server. Root name server tr\u1ea3 l\u1eddi v\u1edbi danh s\u00e1ch TLD nameserver <code>.com</code>.</p> <p>(4) L\u01b0u \u00fd r\u1eb1ng v\u00ec <code>.com</code> l\u00e0 m\u1ed9t TLD ph\u1ed5 bi\u1ebfn n\u00ean resolver r\u1ea5t c\u00f3 th\u1ec3 \u0111\u00e3 cache \u0111\u1ecba ch\u1ec9 IP v\u00e0o nh\u1eefng TLD nameserver <code>.com</code> \u0111\u00f3. </p> <p>(5) Sau \u0111\u00f3, DNS resolver s\u1ebd h\u1ecfi TLD nameserver <code>.com</code></p> <p>(6) TLD nameserver <code>.com</code> tr\u1ea3 v\u1ec1 c\u00e1c authoritative\u00a0nameserver c\u1ee7a <code>google.com</code>. </p> <p>(7) + (8) Cu\u1ed1i c\u00f9ng, DNS resolver h\u1ecfi authoritative\u00a0nameserver c\u1ee7a <code>google.com</code> v\u00e0 n\u00f3 tr\u1ea3 v\u1ec1 \u0111\u1ecba ch\u1ec9 IP c\u1ee7a <code>google.com</code>.</p> <p>(9) DNS resolver tr\u1ea3 \u0111\u1ecba ch\u1ec9 IP v\u1ec1 cho h\u1ec7 \u0111i\u1ec1u h\u00e0nh, h\u1ec7 \u0111i\u1ec1u h\u00e0nh tr\u1ea3 l\u1ea1i \u0111\u1ecba ch\u1ec9 \u0111\u00f3 cho tr\u00ecnh duy\u1ec7t.</p> <p></p>"},{"location":"ByteByteGo/dns/#cap-nhat-ban-ghi-dns","title":"C\u1eadp nh\u1eadt b\u1ea3n ghi DNS","text":"<p>Qu\u00e1 tr\u00ecnh truy\u1ec1n DNS ch\u1eadm v\u00ec c\u00f3 m\u1ed9t TTL (th\u1eddi gian s\u1ed1ng - Time-To-Live) tr\u00ean m\u1ed7i b\u1ea3n ghi DNS. V\u00e0 m\u1ed9t s\u1ed1 TTL m\u1eb7c \u0111\u1ecbnh kh\u00e1 l\u00e0 d\u00e0i. Ngo\u00e0i ra, kh\u00f4ng ph\u1ea3i t\u1ea5t c\u1ea3 DNS resolver \u0111\u1ec1u t\u1ed1t. C\u00f3 m\u1ed9t s\u1ed1 kh\u00f4ng coi tr\u1ecdng TTL. \u0110\u1ec3 gi\u1ea3m r\u1ee7i ro, c\u00f3 hai b\u01b0\u1edbc c\u1ea7n th\u1ef1c hi\u1ec7n.</p> <p>\u0110\u1ea7u ti\u00ean, gi\u1ea3m TTL cho b\u1ea3n ghi th\u00e0nh m\u1ed9t kho\u1ea3ng th\u1eddi gian r\u1ea5t ng\u1eafn, t\u1ea7m 1 ph\u00fat, tr\u01b0\u1edbc khi qu\u00e1 tr\u00ecnh c\u1eadp nh\u1eadt x\u1ea3y ra. \u0110i\u1ec1u n\u00e0y mang l\u1ea1i th\u1eddi gian \u0111\u1ec3 t\u1ea5t c\u1ea3 c\u00e1c m\u00e1y ch\u1ee7 DNS nh\u1eadn TTL m\u1edbi n\u00e0y, v\u00e0 s\u1ebd cho ph\u00e9p b\u1ea3n c\u1eadp nh\u1eadt th\u1ef1c t\u1ebf c\u00f3 hi\u1ec7u l\u1ef1c d\u1ef1a tr\u00ean TTL \u0111\u00f3.</p> <p>Th\u1ee9 hai, \u0111\u1ec3 m\u00e1y ch\u1ee7 ch\u1ea1y tr\u00ean \u0111\u1ecba ch\u1ec9 IP c\u0169 trong m\u1ed9t th\u1eddi gian. Ch\u1ec9 ng\u1eebng ho\u1ea1t \u0111\u1ed9ng m\u00e1y ch\u1ee7 khi l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp gi\u1ea3m xu\u1ed1ng m\u1ee9c ch\u1ea5p nh\u1eadn \u0111\u01b0\u1ee3c. V\u00ec m\u1ed9t s\u1ed1 DNS resolver kh\u00f4ng coi tr\u1ecdng TTL n\u00ean vi\u1ec7c n\u00e0y c\u00f3 th\u1ec3 m\u1ea5t ch\u00fat th\u1eddi gian.</p>"},{"location":"ByteByteGo/docker/","title":"Docker c\u00f3 c\u00f2n c\u1ea7n thi\u1ebft kh\u00f4ng?","text":""},{"location":"ByteByteGo/docker/#nguon","title":"Ngu\u1ed3n","text":"<p> Is Docker Still Relevant?</p>"},{"location":"ByteByteGo/docker/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Docker \u0111\u00e3 b\u00f9ng n\u1ed5 trong v\u00f2ng 10 n\u0103m tr\u1edf l\u1ea1i \u0111\u00e2y v\u00e0 mang l\u1ea1i cho ch\u00fang ta c\u00e1c container r\u1ea5t ti\u1ec7n d\u1ee5ng \u0111\u1ec3 ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m. Nh\u01b0ng c\u00f3 m\u1ed9t s\u1ed1 \u00fd ki\u1ebfn cho r\u1eb1ng s\u1ef1 ph\u1ed5 bi\u1ebfn c\u1ee7a Docker c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn s\u1ef1 xu\u1ed1ng d\u1ed1c c\u1ee7a ch\u00ednh n\u00f3. Ta s\u1ebd c\u00f9ng t\u00ecm hi\u1ec3u xem Docker c\u00f3 c\u00f2n c\u1ea7n thi\u1ebft kh\u00f4ng, hay n\u00f3 \u0111ang tr\u1edf n\u00ean l\u1ed7i th\u1eddi.</p>"},{"location":"ByteByteGo/docker/#docker-lam-uoc-gi","title":"Docker l\u00e0m \u0111\u01b0\u1ee3c g\u00ec?","text":"<p>Docker g\u1ed3m 3 th\u00e0nh ph\u1ea7n ch\u00ednh.</p> <p>Th\u1ee9 nh\u1ea5t, Docker Client l\u00e0 giao di\u1ec7n ch\u00ednh \u0111\u1ec3 t\u01b0\u01a1ng t\u00e1c v\u1edbi Docker. N\u00f3 giao ti\u1ebfp v\u1edbi Docker Daemon \u0111\u1ec3 qu\u1ea3n l\u00fd nhi\u1ec1u \u0111\u1ed1i t\u01b0\u1ee3ng Docker, bao g\u1ed3m c\u00e1c Image v\u00e0 c\u00e1c Container.</p> <p></p> <p>Th\u1ee9 hai, Docker Daemon, \u0111\u00e2y l\u00e0 th\u00e0nh ph\u1ea7n c\u1ed1t l\u00f5i c\u1ee7a Docker, qu\u1ea3n l\u00fd c\u00e1c thao t\u00e1c tr\u00ean container. N\u00f3 n\u1eb1m trong h\u1ec7 th\u1ed1ng ch\u1ea1y Docker, c\u00f2n \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn v\u1edbi t\u00ean l\u00e0 Docker Host. Docker Daemon c\u00f2n c\u00f3 th\u1ec3 t\u1eadn d\u1ee5ng c\u00e1c OCI Compliant Runtimes nh\u01b0 containerd hay CRI-O \u0111\u1ec3 ch\u1ea1y container.</p> <p></p> <p>Th\u1ee9 ba l\u00e0 Docker Registry. Registry \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng nhi\u1ec1u nh\u1ea5t l\u00e0 Docker Hub, n\u01a1i l\u01b0u tr\u1eef v\u00e0 ph\u00e2n ph\u1ed1i c\u00e1c Image</p> <p></p>"},{"location":"ByteByteGo/docker/#open-container-initiative-oci","title":"Open Container Initiative (OCI)","text":"<p>Open Container Initiative (OCI) l\u00e0 m\u1ed9t s\u00e1ng ki\u1ebfn m\u1edf, chuy\u00ean v\u1ec1 vi\u1ec7c t\u1ea1o ra c\u00e1c ti\u00eau chu\u1ea9n cho container. OCI chu\u1ea9n h\u00f3a container runtime, image v\u00e0 c\u00e1c ch\u1ec9 \u0111\u1ecbnh ph\u00e2n ph\u1ed1i container, gi\u00fap cho h\u1ec7 sinh th\u00e1i container gi\u1eef \u0111\u01b0\u1ee3c t\u00ednh m\u1edf v\u00e0 kh\u00f4ng ph\u1ee5 thu\u1ed9c v\u00e0o b\u1ea5t k\u1ef3 nh\u00e0 ph\u00e2n ph\u1ed1i c\u1ee5 th\u1ec3 n\u00e0o.</p> <p></p>"},{"location":"ByteByteGo/docker/#cac-lenh-docker-co-ban","title":"C\u00e1c l\u1ec7nh Docker c\u01a1 b\u1ea3n","text":"<ul> <li><code>docker pull</code>: Image s\u1ebd \u0111\u01b0\u1ee3c t\u1ea3i v\u1ec1 t\u1eeb Registry</li> <li><code>docker build</code>: D\u00f9ng m\u1ed9t Dockerfile \u0111\u1ec3 build th\u00e0nh m\u1ed9t Image, tu\u00e2n th\u1ee7 chu\u1ea9n OCI, qua \u0111\u00f3 t\u01b0\u01a1ng th\u00edch v\u1edbi nhi\u1ec1u runtime kh\u00e1c nhau.</li> <li><code>docker run</code>: T\u1ea1o container t\u1eeb m\u1ed9t Image v\u00e0 \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd b\u1edfi Docker Daemon. \u1ede \u0111\u00e2y containerd v\u00e0 CRI-O c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 ch\u1ea1y container, c\u1ea3m \u01a1n OCI nhi\u1ec1u nha.</li> </ul>"},{"location":"ByteByteGo/docker/#cac-concept-khoi-au-tu-docker","title":"C\u00e1c concept kh\u1edfi \u0111\u1ea7u t\u1eeb Docker","text":"<ol> <li>Chu\u1ea9n Image</li> <li>H\u1ee3p l\u00fd h\u00f3a vi\u1ec7c build image th\u00e0nh container</li> <li>Cho ph\u00e9p chia s\u1ebb v\u00e0 ph\u00e2n ph\u1ed1i image th\u00f4ng qua Registry</li> <li>T\u1ea1o \u0111i\u1ec1u ki\u1ec7n cho vi\u1ec7c ch\u1ea1y container tr\u00ean nhi\u1ec1u m\u00f4i tr\u01b0\u1eddng kh\u00e1c nhau</li> </ol>"},{"location":"ByteByteGo/docker/#ban-docker-co-con-on-khong","title":"B\u1ea1n Docker c\u00f3 c\u00f2n \u1ed5n kh\u00f4ng?","text":"<p>Docker \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n d\u1ef1a tr\u00ean c\u00f4ng ngh\u1ec7 \u0111\u1ed9c quy\u1ec1n nh\u01b0ng gi\u1edd \u0111\u00e2y \u0111\u00e3 tr\u1edf th\u00e0nh m\u1ed9t chu\u1ea9n m\u1edf, nh\u01b0 OCI, m\u1edf \u0111\u01b0\u1eddng cho nhi\u1ec1u client, runtime v\u00e0 registry kh\u00e1c nhau. Nh\u1eefng chu\u1ea9n m\u1ef1c v\u00e0 h\u1ec7 sinh th\u00e1i m\u00e0 Docker t\u1ea1o ra \u0111\u00e3 l\u00e0m cho Docker engine tr\u1edf n\u00ean \u00edt quan tr\u1ecdng h\u01a1n. T\u00ednh \u0111\u1ed9c nh\u1ea5t c\u1ee7a Docker gi\u1edd \u0111\u00e2y b\u1ecb nghi ng\u1edd kh\u00e1 nhi\u1ec1u. Ng\u01b0\u1eddi d\u00f9ng hi\u1ec7n nay c\u00f3 kh\u00e1 nhi\u1ec1u l\u1ef1a ch\u1ecdn \u0111\u1ec3 s\u1eed d\u1ee5ng, con c\u00e1 voi Docker c\u00f3 th\u1ec3 kh\u00f4ng ch\u1ebft nh\u01b0ng th\u1ef1c s\u1ef1 n\u1ebfu kh\u00f4ng c\u00f3 nh\u1eefng c\u1ea3i ti\u1ebfn kh\u00e1c v\u1edbi c\u00e1c \u0111\u1ed1i th\u1ee7, Docker c\u00f3 th\u1ec3 l\u00e2m nguy.</p> <p></p>"},{"location":"ByteByteGo/git-merge-vs-rebase/","title":"Git Merge vs Rebase","text":""},{"location":"ByteByteGo/git-merge-vs-rebase/#nguon","title":"Ngu\u1ed3n","text":"<p> Git MERGE vs REBASE: Everything You Need to Know</p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>N\u1ebfu b\u1ea1n t\u1eebng l\u00e0m vi\u1ec7c trong m\u1ed9t git project v\u1edbi m\u1ed9t \u0111\u1ed1ng branch, b\u1ea1n ch\u1eafc h\u1eb3n \u0111\u00e3 ph\u1ea3i t\u00ecm c\u00e1ch \u0111\u1ec3 l\u1ea5y c\u00e1c thay \u0111\u1ed5i tr\u00ean feature branch th\u1ea3 v\u00e0o main branch, ho\u1eb7c gi\u1eef cho feature branch c\u1ee7a b\u1ea1n lu\u00f4n c\u1eadp nh\u1eadt v\u1edbi main branch. C\u00e2u h\u1ecfi l\u00e0, gi\u1edd n\u00ean x\u00e0i git merge, git rebase hay squash commit?</p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#cap-nhat-feature-branch-voi-main-branch","title":"C\u1eadp nh\u1eadt feature branch v\u1edbi main branch","text":"<p>Gi\u1edd gi\u1ea3 s\u1eed b\u1ea1n t\u1ea1o m\u1ed9t feature branch m\u1edbi t\u1eeb main branch \u0111i. Ta th\u00eam c\u00e1c commit A, B v\u00e0 C tr\u00ean feature branch n\u00e0y. C\u00f9ng l\u00fac n\u00e0y th\u00ec main branch c\u00f3 th\u00eam c\u00e1c commit D, E. Vi\u1ec7c n\u00e0y gi\u1ed1ng nh\u01b0 hai nh\u00e1nh c\u1ee7a m\u1ed9t c\u00e1i c\u00e2y m\u1ecdc ra hai h\u01b0\u1edbng kh\u00e1c nhau \u1ea5y.</p> <p></p> <p>Vi\u1ec7c c\u1eadp nh\u1eadt feature branch c\u1ee7a b\u1ea1n v\u1edbi main branch l\u00e0 m\u1ed9t ph\u1ea7n quan tr\u1ecdng c\u1ee7a git workflow. Ta c\u00f3 th\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y v\u1edbi git merge ho\u1eb7c git rebase.</p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#git-merge","title":"git merge","text":"<p>L\u1ec7nh git merge s\u1ebd pull nh\u1eefng thay \u0111\u1ed5i m\u1edbi nh\u1ea5t t\u1eeb main branch v\u1ec1 feature branch v\u00e0 t\u1ea1o ra m\u1ed9t merge commit. Nh\u00ecn n\u00f3 gi\u1ed1ng vi\u1ec7c l\u1ea5y d\u00e2y t\u1ea1o ra m\u1ed9t n\u00fat th\u1eaft \u0111\u1ec3 th\u1eaft 2 nh\u00e1nh c\u00e2y l\u1ea1i \u1ea5y.</p> <p></p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#git-rebase","title":"git rebase","text":"<p>L\u1ec7nh git rebase s\u1ebd thay \u0111\u1ed5i base c\u1ee7a feature branch th\u00e0nh commit m\u1edbi nh\u1ea5t tr\u00ean main branch v\u00e0 \u0111\u1eb7t c\u00e1c thay \u0111\u1ed5i trong feature branch t\u1eeb \u0111\u00f3. N\u00f3 cho ta m\u1ed9t l\u1ecbch s\u1eed commit \u0111\u1eb9p v\u00e0 th\u1eb3ng. Nhi\u1ec1u ng\u01b0\u1eddi r\u1ea5t th\u00edch \u0111i\u1ec1u n\u00e0y.</p> <p></p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#ua-feature-branch-ve-main-branch","title":"\u0110\u01b0a feature branch v\u1ec1 main branch","text":"<p>Khi dev xong th\u00ec ta s\u1ebd mu\u1ed1n c\u00e1c thay \u0111\u1ed5i tr\u00ean feature branch v\u1ec1 l\u1ea1i main branch. C\u00f3 m\u1ed9t s\u1ed1 c\u00e1ch nh\u01b0 sau.</p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#git-merge_1","title":"git merge","text":"<p>\u0110\u1ea7u ti\u00ean l\u00e0 git merge. Git s\u1ebd t\u1ea1o ra m\u1ed9t merge commit bao g\u1ed3m l\u1ecbch s\u1eed c\u1ee7a c\u1ea3 hai branch, gi\u1ed1ng nh\u01b0 t\u1ea1o ra m\u1ed9t c\u00e1i n\u00fat th\u1eaft cho th\u1ea5y hai branch n\u00e0y h\u1ee3p v\u00e0o nhau \u1edf ch\u1ed7 n\u00e0o.</p> <p></p> <p>Nh\u01b0ng m\u00e0 n\u1ebfu l\u00e0m nhi\u1ec1u l\u1ea7n, ta s\u1ebd c\u00f3 r\u1ea5t nhi\u1ec1u n\u00fat th\u1eaft nh\u01b0 th\u1ebf, l\u00e0m l\u1ecbch s\u1eed commit tr\u1edf n\u00ean r\u1ed1i r\u1eafm.</p> <p></p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#git-rebase_1","title":"git rebase","text":"<p>C\u00e1ch ti\u1ebfp theo l\u00e0 git rebase v\u00e0 forward merge. Ta c\u00f3 th\u1ec3 d\u00f9ng git rebase \u0111\u1ec3 di chuy\u1ec3n c\u00e1c thay \u0111\u1ed5i t\u1eeb feature branch v\u1ec1 \u0111\u1ea7u (commit m\u1edbi nh\u1ea5t) c\u1ee7a main branch, sau \u0111\u00f3 th\u1ef1c hi\u1ec7n fast-forward merge. L\u00e0m c\u00e1ch n\u00e0y s\u1ebd gi\u00fap l\u1ecbch s\u1eed commit \u0111\u1eb9p h\u01a1n.</p> <p></p> <p></p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#squash-commit","title":"Squash commit","text":"<p>C\u00e1ch cu\u1ed1i l\u00e0 squash commit \u0111\u1ec3 thu t\u1ea5t c\u1ea3 c\u00e1c commit c\u1ee7a feature branch th\u00e0nh m\u1ed9t commit duy nh\u1ea5t r\u1ed3i merge c\u00e1i commit \u0111\u00f3 v\u00e0o main branch. C\u00e1ch n\u00e0y gi\u00fap l\u1ecbch s\u1eed commit gi\u1eef \u0111\u01b0\u1ee3c t\u00ednh tuy\u1ebfn t\u00ednh nh\u01b0 rebase nh\u01b0ng v\u1eabn t\u1ea1o ra m\u1ed9t merge commit. Tuy nhi\u00ean, ta s\u1ebd m\u1ea5t \u0111i chi ti\u1ebft c\u00e1c commit ri\u00eang l\u1ebb \u0111\u00e3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\u00f3 trong l\u1ecbch s\u1eed commit c\u1ee7a main branch.</p> <p></p> <p>Squash commit l\u00e0 c\u00e1ch kh\u00e1 ph\u1ed5 bi\u1ebfn tr\u00ean c\u00e1c n\u1ec1n t\u1ea3ng nh\u01b0 GitHub v\u00ec n\u00f3 cho ph\u00e9p ta d\u1ecdn d\u1eb9p l\u1ecbch s\u1eed commit tr\u00ean main branch nh\u01b0ng v\u1eabn gi\u1eef \u0111\u01b0\u1ee3c chi ti\u1ebft l\u1ecbch s\u1eed commit tr\u00ean feature branch. N\u00f3 nh\u01b0 ki\u1ec3u k\u1ebft h\u1ee3p \u1ea5y.</p> <p></p>"},{"location":"ByteByteGo/git-merge-vs-rebase/#tong-ket","title":"T\u1ed5ng k\u1ebft","text":"<p>K\u1ebft l\u1ea1i,</p> <ul> <li>git merge gi\u1eef nguy\u00ean l\u1ecbch s\u1eed commit c\u1ee7a c\u1ea3 hai branch, v\u00e0 s\u1ef1 ph\u00e1t tri\u1ec3n c\u1ee7a c\u00e1c feature branch.</li> <li>git rebase d\u1ecdn d\u1eb9p l\u1ecbch s\u1eed commit b\u1eb1ng c\u00e1ch di chuy\u1ec3n c\u00e1c commit v\u1ec1 \u0111\u1ea7u main branch.</li> <li>Squash commit g\u1ed9p t\u1ea5t c\u1ea3 c\u00e1c commit l\u00e0m m\u1ed9t v\u00e0 t\u1ea1o ra m\u1ed9t l\u1ecbch s\u1eed commit th\u1eb3ng v\u00e0 \u0111\u1eb9p nh\u01b0ng c\u00e1i gi\u00e1 ph\u1ea3i tr\u1ea3 l\u00e0 l\u1ecbch s\u1eed commit chi ti\u1ebft.</li> </ul> <p>D\u01b0\u1edbi \u0111\u00e2y s\u1ebd l\u00e0 t\u1ed5ng k\u1ebft \u01b0u v\u00e0 nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a m\u1ed7i c\u00e1ch. Kh\u00f4ng c\u00f3 c\u00e1ch n\u00e0o l\u00e0 t\u1ed1t cho m\u1ecdi tr\u01b0\u1eddng h\u1ee3p c\u1ea3. C\u00e1i n\u00e0o t\u1ed1t nh\u1ea5t cho b\u1ea1n th\u00ec h\u00e3y d\u00f9ng th\u00f4i.</p> <p></p>"},{"location":"ByteByteGo/graphql/","title":"GraphQL l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/graphql/#nguon","title":"Ngu\u1ed3n","text":"<p> What Is GraphQL? REST vs. GraphQL</p>"},{"location":"ByteByteGo/graphql/#inh-nghia","title":"\u0110\u1ecbnh ngh\u0129a","text":"<p>GraphQL l\u00e0 ng\u00f4n ng\u1eef truy v\u1ea5n d\u00e0nh cho API do Meta ph\u00e1t tri\u1ec3n. N\u00f3 cung c\u1ea5p m\u1ed9t data schema trong API v\u00e0 cung c\u1ea5p cho client quy\u1ec1n y\u00eau c\u1ea7u ch\u00ednh x\u00e1c nh\u1eefng g\u00ec client c\u1ea7n.</p> <p></p> <p>GraphQL n\u1eb1m gi\u1eefa client v\u00e0 backend service. N\u00f3 c\u00f3 th\u1ec3 t\u1ed5ng h\u1ee3p nhi\u1ec1u y\u00eau c\u1ea7u t\u00e0i nguy\u00ean v\u00e0o m\u1ed9t truy v\u1ea5n duy nh\u1ea5t. N\u00f3 c\u0169ng h\u1ed7 tr\u1ee3 mutation v\u00e0 subscription.</p> <p>Mutation l\u00e0 c\u00e1ch GraphQL \u00e1p d\u1ee5ng c\u00e1c s\u1eeda \u0111\u1ed5i data cho t\u00e0i nguy\u00ean.</p> <p></p> <p>Subscription l\u00e0 c\u00e1ch GraphQL cho client nh\u1eadn th\u00f4ng b\u00e1o v\u1ec1 c\u00e1c thay \u0111\u1ed5i trong d\u1eef li\u1ec7u.</p> <p></p>"},{"location":"ByteByteGo/graphql/#so-sanh-voi-rest","title":"So s\u00e1nh v\u1edbi REST","text":"<p>Trong th\u1ef1c t\u1ebf, c\u1ea3 GraphQL v\u00e0 REST \u0111\u1ec1u g\u1eedi HTTP request v\u00e0 nh\u1eadn HTTP response.</p> <p></p> <p>Ta s\u1ebd so s\u00e1nh c\u00e1c thao t\u00e1c REST v\u00e0 GraphQL \u0111\u01a1n gi\u1ea3n tr\u00f4ng nh\u01b0 th\u1ebf n\u00e0o.</p> <p>REST xoay quanh c\u00e1c t\u00e0i nguy\u00ean. M\u1ed7i t\u00e0i nguy\u00ean \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh b\u1eb1ng m\u1ed9t URL. \u0110\u1ec3 l\u1ea5y th\u00f4ng tin c\u1ee7a m\u1ed9t cu\u1ed1n s\u00e1ch t\u1eeb API c\u1ee7a nh\u00e0 s\u00e1ch, n\u00f3 c\u00f3 th\u1ec3 gi\u1ed1ng nh\u01b0 th\u1ebf n\u00e0y. L\u01b0u \u00fd tr\u01b0\u1eddng t\u00e1c gi\u1ea3 tu\u1ef3 v\u00e0o vi\u1ec7c c\u00e0i \u0111\u1eb7t. M\u1ed9t s\u1ed1 tri\u1ec3n khai REST API c\u00f3 th\u1ec3 chia ch\u00fang th\u00e0nh c\u00e1c l\u1eddi g\u1ecdi REST ri\u00eang bi\u1ec7t.</p> <p></p> <p>Tuy nhi\u00ean, \u0111i\u1ec1u n\u00e0y s\u1ebd kh\u00e1c v\u1edbi GraphQL. \u0110\u1ea7u ti\u00ean ta x\u00e1c \u0111\u1ecbnh c\u00e1c type (lo\u1ea1i). Trong v\u00ed d\u1ee5 n\u00e0y ta c\u00f3 c\u00e1c type l\u00e0 Book v\u00e0 Author. C\u00e1c type n\u00e0y m\u00f4 t\u1ea3 c\u00e1c lo\u1ea1i d\u1eef li\u1ec7u c\u00f3 s\u1eb5n.</p> <p></p> <p>Ch\u00fang kh\u00f4ng ch\u1ec9 \u0111\u1ecbnh c\u00e1ch truy xu\u1ea5t d\u1eef li\u1ec7u qua GraphQL. \u0110\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u \u0111\u00f3, ta c\u1ea7n \u0111\u1ecbnh ngh\u0129a m\u1ed9t truy v\u1ea5n, nh\u01b0 sau.</p> <p></p> <p>Gi\u1edd ta c\u1ea7n g\u1eedi m\u1ed9t request \u0111\u1ebfn GraphQL endpoint \u0111\u1ec3 l\u1ea5y data.</p> <p></p> <p></p> <p>Nh\u01b0 ta th\u1ea5y th\u00ec c\u1ea3 REST v\u00e0 GraphQL \u0111\u1ec1u d\u00f9ng HTTP. C\u1ea3 hai \u0111\u1ec1u g\u1eedi request qua m\u1ed9t URL, v\u00e0 ch\u00fang \u0111\u1ec1u c\u00f3 th\u1ec3 tr\u1ea3 v\u1ec1 m\u1ed9t JSON response nh\u01b0 nhau. Nh\u01b0ng \u0111\u00e2y l\u00e0 s\u1ef1 kh\u00e1c bi\u1ec7t: V\u1edbi GraphQL, ta ch\u1ec9 \u0111\u1ecbnh ch\u00ednh x\u00e1c c\u00e1c t\u00e0i nguy\u00ean m\u00e0 ta mu\u1ed1n, v\u00e0 c\u1ea3 nh\u1eefng tr\u01b0\u1eddng m\u00e0 ta mu\u1ed1n.</p> <p></p> <p>Trong v\u00ed d\u1ee5 v\u1ec1 REST, tr\u01b0\u1eddng Author c\u00f3 s\u1eb5n trong response. Nh\u01b0ng v\u1edbi GraphQL, client quy\u1ebft \u0111\u1ecbnh nh\u1eefng g\u00ec c\u00f3 trong response.</p> <p></p> <p>\u0110i\u1ec1u n\u00e0y mang \u0111\u1ebfn m\u1ed9t trong nh\u1eefng l\u1ee3i \u00edch ch\u00ednh c\u1ee7a GraphQL. GraphQL kh\u00f4ng s\u1eed d\u1ee5ng URL \u0111\u1ec3 ch\u1ec9 \u0111\u1ecbnh t\u00e0i nguy\u00ean c\u00f3 s\u1eb5n trong API. Thay v\u00e0o \u0111\u00f3 n\u00f3 s\u1eed d\u1ee5ng GraphQL schema. Ta c\u00f3 th\u1ec3 g\u1eedi m\u1ed9t truy v\u1ea5n ph\u1ee9c t\u1ea1p \u0111\u1ec3 l\u1ea5y data b\u1ed5 sung theo c\u00e1c quan h\u1ec7 \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh trong schema. </p> <p></p> <p>\u0110i\u1ec1u n\u00e0y s\u1ebd ph\u1ee9c t\u1ea1p h\u01a1n n\u1ebfu ta mu\u1ed1n l\u00e0m trong REST. Ta s\u1ebd ph\u1ea3i th\u1ef1c hi\u1ec7n \u0111i\u1ec1u \u0111\u00f3 \u1edf client v\u1edbi nhi\u1ec1u request. \u0110\u00e2y l\u00e0 v\u1ea5n \u0111\u1ec1 ph\u1ed5 bi\u1ebfn d\u1eabn \u0111\u1ebfn N+1 truy v\u1ea5n.</p> <p></p>"},{"location":"ByteByteGo/graphql/#nhuoc-iem","title":"Nh\u01b0\u1ee3c \u0111i\u1ec3m","text":"<p>C\u00e1i hay c\u1ee7a REST l\u00e0 ta kh\u00f4ng c\u1ea7n c\u00e1c th\u01b0 vi\u1ec7n \u0111\u1eb7c bi\u1ec7t \u0111\u1ec3 s\u1eed d\u1ee5ng API c\u1ee7a ng\u01b0\u1eddi kh\u00e1c. Request c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c g\u1eedi \u0111\u01a1n gi\u1ea3n b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng c\u00e1c c\u00f4ng c\u1ee5 ph\u1ed5 bi\u1ebfn nh\u01b0 cURL hay tr\u00ecnh duy\u1ec7t web.</p> <p>Ng\u01b0\u1ee3c l\u1ea1i, GraphQL y\u00eau c\u1ea7u c\u00f4ng c\u1ee5 h\u1ed7 tr\u1ee3 n\u1eb7ng h\u01a1n, c\u1ea3 \u1edf ph\u00eda client v\u00e0 server. \u0110i\u1ec1u n\u00e0y \u0111\u00f2i h\u1ecfi m\u1ed9t kho\u1ea3n \u0111\u1ea7u t\u01b0 tr\u01b0\u1edbc kh\u00e1 l\u1edbn. Chi ph\u00ed n\u00e0y c\u00f3 th\u1ec3 kh\u00f4ng \u0111\u00e1ng, \u0111\u1eb7c bi\u1ec7t l\u00e0 v\u1edbi c\u00e1c API CRUD \u0111\u01a1n gi\u1ea3n.</p> <p>M\u1ed9t nh\u01b0\u1ee3c \u0111i\u1ec3m n\u1eefa c\u1ee7a GraphQL l\u00e0 n\u00f3 kh\u00f3 l\u01b0u v\u00e0o cache h\u01a1n. REST d\u00f9ng HTTP GET \u0111\u1ec3 l\u1ea5y data, v\u00e0 HTTP GET th\u01b0\u1eddng cache response nh\u1edd c\u00f3 s\u1ef1 gi\u00fap \u0111\u1ee1 c\u1ee7a tr\u00ecnh duy\u1ec7t, CDN, proxy v\u00e0 web server. GraphQL ch\u1ec9 c\u00f3 m\u1ed9t \u0111\u1ea7u v\u00e0o duy nh\u1ea5t v\u00e0 d\u00f9ng HTTP POST theo m\u1eb7c \u0111\u1ecbnh. \u0110i\u1ec1u n\u00e0y kh\u00f4ng t\u1eadn d\u1ee5ng h\u1ebft HTTP caching. N\u1ebfu c\u1ea9n th\u1eadn, GraphQL c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c c\u1ea5u h\u00ecnh \u0111\u1ec3 t\u1eadn d\u1ee5ng t\u1ed1t h\u01a1n HTTP caching, tuy nhi\u00ean \u0111\u00e2y l\u00e0 c\u00f4ng vi\u1ec7c kh\u00f4ng h\u1ec1 \u0111\u01a1n gi\u1ea3n.</p> <p>Nh\u01b0\u1ee3c \u0111i\u1ec3m cu\u1ed1i c\u00f9ng c\u1ee7a GraphQL l\u00e0 d\u00f9 n\u00f3 cho ph\u00e9p client truy v\u1ea5n nh\u1eefng g\u00ec client c\u1ea7n, \u0111\u00e2y c\u0169ng l\u00e0 m\u1ed9t m\u1ed1i nguy l\u1edbn. T\u01b0\u1edfng t\u01b0\u1ee3ng r\u1eb1ng m\u1ed9t app di d\u1ed9ng c\u00f3 m\u1ed9t t\u00ednh n\u0103ng m\u1edbi v\u00f4 t\u00ednh scan m\u1ed9t table quan tr\u1ecdng \u1edf backend service. \u0110i\u1ec1u n\u00e0y c\u00f3 th\u1ec3 khi\u1ebfn DB ng\u01b0ng ho\u1ea1t \u0111\u1ed9ng ngay khi t\u00ednh n\u0103ng \u0111\u01b0\u1ee3c cho ra m\u1eaft. T\u1ea5t nhi\u00ean ta c\u00f3 c\u00e1ch x\u1eed l\u00fd r\u1ed3i, nh\u01b0ng vi\u1ec7c tri\u1ec3n khai GraphQL s\u1ebd tr\u1edf n\u00ean kh\u00f3 kh\u0103n h\u01a1n. Chi ph\u00ed \u0111\u1ec3 ph\u00f2ng ng\u1eeba nh\u1eefng r\u1ee7i ro nh\u01b0 th\u1ebf n\u00e0y c\u1ea7n ph\u1ea3i \u0111\u01b0\u1ee3c t\u00ednh \u0111\u1ebfn khi xem x\u00e9t d\u00f9ng GraphQL.</p> <p>V\u1eady ta c\u00f3 n\u00ean d\u00f9ng GraphQL kh\u00f4ng? N\u00f3i v\u1ec1 c\u00f4ng ngh\u1ec7 ph\u1ea7n m\u1ec1m l\u00e0 n\u00f3i v\u1ec1 s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i, ch\u1ec9 c\u00f3 ph\u00f9 h\u1ee3p hay kh\u00f4ng ch\u1ee9 th\u1ef1c s\u1ef1 kh\u00f4ng c\u00f3 c\u00e2u tr\u1ea3 l\u1eddi ch\u00ednh x\u00e1c.</p>"},{"location":"ByteByteGo/grpc/","title":"gRPC l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/grpc/#nguon","title":"Ngu\u1ed3n","text":"<p> What is RPC? gRPC Introduction.</p>"},{"location":"ByteByteGo/grpc/#inh-nghia","title":"\u0110\u1ecbnh ngh\u0129a","text":"<p>gRPC l\u00e0 m\u1ed9t framework l\u1ec7nh g\u1ecdi th\u1ee7 t\u1ee5c t\u1eeb xa (Remote Procedure Call - RPC) m\u00e3 ngu\u1ed3n m\u1edf do Google t\u1ea1o ra n\u0103m 2016. \u0110\u00e2y l\u00e0 b\u1ea3n l\u00e0m l\u1ea1i c\u1ee7a c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng RPC n\u1ed9i b\u1ed9 m\u00e0 Google \u0111\u00e3 d\u00f9ng trong nhi\u1ec1u n\u0103m.</p> <p>Nh\u01b0ng m\u00e0 RPC l\u00e0 g\u00ec?</p> <p>M\u1ed9t l\u1ec7nh g\u1ecdi th\u1ee7 t\u1ee5c c\u1ee5c b\u1ed9 (local procedure call) l\u00e0 l\u1ec7nh g\u1ecdi h\u00e0m trong m\u1ed9t process \u0111\u1ec3 th\u1ef1c thi m\u1ed9t s\u1ed1 code g\u00ec \u0111\u00f3.</p> <p>M\u1ed9t l\u1ec7nh g\u1ecdi th\u1ee7 t\u1ee5c t\u1eeb xa (remote proceduree call) cho ph\u00e9p m\u1ed9t m\u00e1y g\u1ecdi m\u1ed9t s\u1ed1 code tr\u00ean m\u00e1y kh\u00e1c nh\u01b0 th\u1ec3 \u0111\u00f3 l\u00e0 l\u1ec7nh g\u1ecdi h\u00e0m c\u1ee5c b\u1ed9 t\u1eeb g\u00f3c nh\u00ecn c\u1ee7a ng\u01b0\u1eddi d\u00f9ng.</p> <p></p> <p>gRPC l\u00e0 m\u1ed9t tri\u1ec3n khai ph\u1ed5 bi\u1ebfn c\u1ee7a RPC.</p> <p>Nhi\u1ec1u t\u1ed5 ch\u1ee9c \u0111\u00e3 s\u1eed d\u1ee5ng gRPC l\u00e0m c\u01a1 ch\u1ebf RPC \u01b0u ti\u00ean \u0111\u1ec3 k\u1ebft n\u1ed1i m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng l\u1edbn microservice \u0111ang ch\u1ea1y trong v\u00e0 gi\u1eefa c\u00e1c data center. Tuy nhi\u00ean, l\u00e0m sao gRPC l\u1ea1i ph\u1ed5 bi\u1ebfn nh\u01b0 v\u1eady?</p>"},{"location":"ByteByteGo/grpc/#su-pho-bien","title":"S\u1ef1 ph\u1ed5 bi\u1ebfn","text":""},{"location":"ByteByteGo/grpc/#he-sinh-thai-dev-manh","title":"H\u1ec7 sinh th\u00e1i dev m\u1ea1nh","text":"<p>\u0110\u1ea7u ti\u00ean, gPRC c\u00f3 m\u1ed9t h\u1ec7 sinh th\u00e1i dev r\u1ea5t m\u1ea1nh. \u0110i\u1ec1u n\u00e0y gi\u00fap d\u1ec5 d\u00e0ng ph\u00e1t tri\u1ec3n c\u00e1c API ch\u1ea5t l\u01b0\u1ee3ng cao v\u00e0 c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng quy m\u00f4 t\u1ed1t. C\u1ed1t l\u00f5i c\u1ee7a h\u1ec7 sinh th\u00e1i n\u00e0y l\u00e0 vi\u1ec7c s\u1eed d\u1ee5ng Protocol Buffers (hay protobuf) l\u00e0m \u0111\u1ecbnh d\u1ea1ng trao \u0111\u1ed5i d\u1eef li\u1ec7u.</p> <p>Protocol Buffers l\u00e0 m\u1ed9t c\u01a1 ch\u1ebf kh\u00f4ng ph\u1ee5 thu\u1ed9c v\u00e0o ng\u00f4n ng\u1eef v\u00e0 n\u1ec1n t\u1ea3ng \u0111\u1ec3 m\u00e3 ho\u00e1 d\u1eef li\u1ec7u c\u00f3 c\u1ea5u tr\u00fac. gRPC s\u1eed d\u1ee5ng Protocol Buffers \u0111\u1ec3 m\u00e3 ho\u00e1 v\u00e0 g\u1eedi d\u1eef li\u1ec7u qua d\u00e2y d\u1eabn nh\u01b0 b\u00ecnh th\u01b0\u1eddng. </p> <p></p> <p>M\u1eb7c d\u00f9 gRPC c\u00f3 th\u1ec3 h\u1ed7 tr\u1ee3 c\u00e1c \u0111\u1ecbnh d\u1ea1ng m\u00e3 ho\u00e1 kh\u00e1c nh\u01b0 JSON, Protocol Buffers l\u1ea1i cung c\u1ea5p m\u1ed9t s\u1ed1 l\u1ee3i th\u1ebf khi\u1ebfn n\u00f3 tr\u1edf th\u00e0nh \u0111\u1ecbnh d\u1ea1ng m\u00e3 ho\u00e1 \u0111\u01b0\u1ee3c l\u1ef1a ch\u1ecdn cho gRPC.</p> <p>Protocol Buffers h\u1ed7 tr\u1ee3 c\u00e1c \u0111\u1ecbnh ngh\u0129a schema strongly-typed (ngh\u0129a l\u00e0 \u0111i theo ki\u1ec3u d\u1eef li\u1ec7u r\u00f5 r\u00e0ng v\u1edbi m\u1ed7i tr\u01b0\u1eddng, v\u00ed d\u1ee5 nh\u01b0 string hay integer). C\u1ea5u tr\u00fac data \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh trong m\u1ed9t file proto.</p> <p>Protocol Buffers cung c\u1ea5p nhi\u1ec1u c\u00f4ng c\u1ee5 h\u1ed7 tr\u1ee3 \u0111\u1ec3 chuy\u1ec3n schema \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a trong file proto th\u00e0nh c\u00e1c l\u1edbp truy c\u1eadp d\u1eef li\u1ec7u cho t\u1ea5t c\u1ea3 c\u00e1c ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh ph\u1ed5 bi\u1ebfn.</p> <p></p> <p>M\u1ed9t gRPC service c\u0169ng \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a trong file proto b\u1eb1ng c\u00e1ch ch\u1ec9 \u0111\u1ecbnh c\u00e1c tham s\u1ed1 v\u00e0 ki\u1ec3u tr\u1ea3 v\u1ec1 c\u1ee7a ph\u01b0\u01a1ng th\u1ee9c gRPC. C\u00f4ng c\u1ee5 t\u01b0\u01a1ng t\u1ef1 c\u0169ng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 sinh code client v\u00e0 server t\u1eeb file proto. </p> <p></p> <p>Dev s\u1ebd s\u1eed d\u1ee5ng c\u00e1c l\u1edbp \u0111\u01b0\u1ee3c sinh ra n\u00e0y trong client \u0111\u1ec3 th\u1ef1c hi\u1ec7n c\u00e1c l\u1ec7nh g\u1ecdi RPC, v\u00e0 trong server \u0111\u1ec3 ph\u1ee5c v\u1ee5 c\u00e1c request RPC.</p> <p></p> <p>B\u1eb1ng c\u00e1ch h\u1ed7 tr\u1ee3 nhi\u1ec1u ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh, client v\u00e0 server c\u00f3 th\u1ec3 \u0111\u1ed9c l\u1eadp ch\u1ecdn ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh v\u00e0 h\u1ec7 sinh th\u00e1i ph\u00f9 h\u1ee3p nh\u1ea5t cho c\u00e1c use case c\u1ee5 th\u1ec3. Th\u00f4ng th\u01b0\u1eddng th\u00ec \u0111i\u1ec1u n\u00e0y kh\u00f4ng kh\u1ea3 thi v\u1edbi h\u1ea7u h\u1ebft c\u00e1c RPC framework kh\u00e1c.</p> <p></p>"},{"location":"ByteByteGo/grpc/#hieu-suat-cao","title":"Hi\u1ec7u su\u1ea5t cao","text":"<p>L\u00fd do th\u1ee9 hai khi\u1ebfn gRPC tr\u1edf n\u00ean ph\u1ed5 bi\u1ebfn l\u00e0 v\u00ec n\u00f3 c\u00f3 hi\u1ec7u su\u1ea5t cao ngay t\u1eeb \u0111\u1ea7u. C\u00f3 hai y\u1ebfu t\u1ed1 g\u00f3p ph\u1ea7n v\u00e0o hi\u1ec7u su\u1ea5t c\u1ee7a n\u00f3.</p> <p>Th\u1ee9 nh\u1ea5t, Protocol Buffers l\u00e0 m\u1ed9t \u0111\u1ecbnh d\u1ea1ng m\u00e3 ho\u00e1 nh\u1ecb ph\u00e2n r\u1ea5t hi\u1ec7u qu\u1ea3. N\u00f3 nhanh h\u01a1n nhi\u1ec1u so v\u1edbi JSON.</p> <p></p> <p>Th\u1ee9 hai, gRPC \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng d\u1ef1a tr\u00ean HTTP/2 \u0111\u1ec3 cung c\u1ea5p n\u1ec1n t\u1ea3ng hi\u1ec7u su\u1ea5t cao tr\u00ean quy m\u00f4 l\u1edbn. Vi\u1ec7c s\u1eed d\u1ee5ng HTTP/2 mang l\u1ea1i nhi\u1ec1u l\u1ee3i \u00edch, c\u00f3 m\u1ed9t b\u00e0i vi\u1ebft v\u1ec1 c\u00e1c phi\u00ean b\u1ea3n HTTP, trong \u0111\u00f3 c\u00f3 HTTP/2, b\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ecdc b\u00e0i \u0111\u00f3.</p> <p></p> <p>gRPC s\u1eed d\u1ee5ng c\u00e1c stream trong HTTP/2. N\u00f3 cho ph\u00e9p nhi\u1ec1u stream g\u00f3i tin th\u00f4ng qua m\u1ed9t k\u1ebft n\u1ed1i TCP t\u1ed3n t\u1ea1i l\u00e2u. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p gRPC framework x\u1eed l\u00fd nhi\u1ec1u l\u1eddi g\u1ecdi RPC \u0111\u1ed3ng th\u1eddi qua m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng nh\u1ecf k\u1ebft n\u1ed1i TCP gi\u1eefa client v\u00e0 server. \u0110\u1ec3 hi\u1ec3u c\u00e1ch gRPC ho\u1ea1t \u0111\u1ed9ng, ta c\u00f9ng xem qua m\u1ed9t flow t\u1eeb gRPC client \u0111\u1ebfn gRPC server.</p>"},{"location":"ByteByteGo/grpc/#vi-du","title":"V\u00ed d\u1ee5","text":"<p>Trong v\u00ed d\u1ee5 n\u00e0y, Order Service l\u00e0 gRPC client, v\u00e0 Payment Service l\u00e0 gRPC server. </p> <p>(1) Khi Order Service g\u1ecdi gRPC request \u0111\u1ebfn Payment Service, n\u00f3 s\u1ebd g\u1ecdi client code \u0111\u01b0\u1ee3c sinh ra b\u1edfi c\u00f4ng gc\u1ee5 gRPC t\u1ea1i th\u1eddi \u0111i\u1ec3m build.  Client code \u0111\u01b0\u1ee3c sinh ra n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 m\u1ed9t client stub.</p> <p>(2) gRPC m\u00e3 h\u00f3a d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c truy\u1ec1n cho client stub\u00a0v\u00e0o Protocol Buffers v\u00e0 g\u1eedi d\u1eef li\u1ec7u \u0111\u00f3\u00a0\u0111\u1ebfn t\u1ea7ng giao v\u1eadn.</p> <p>(3) gRPC g\u1eedi d\u1eef li\u1ec7u qua m\u1ea1ng d\u01b0\u1edbi d\u1ea1ng m\u1ed9t lu\u1ed3ng HTTP/2 data frame. Nh\u1edd m\u00e3 h\u00f3a nh\u1ecb ph\u00e2n v\u00e0 t\u1ed1i \u01b0u h\u00f3a m\u1ea1ng, gRPC \u0111\u01b0\u1ee3c cho l\u00e0 nhanh h\u01a1n 5 l\u1ea7n so v\u1edbi JSON.</p> <p>(4), (5), (6) Payment Service nh\u1eadn c\u00e1c g\u00f3i tin t\u1eeb\u00a0m\u1ea1ng, gi\u1ea3i m\u00e3 ch\u00fang v\u00e0\u00a0g\u1ecdi server app.</p> <p>(7), (8), (9) K\u1ebft qu\u1ea3 tr\u1ea3 v\u1ec1 t\u1eeb server app\u00a0\u0111\u01b0\u1ee3c m\u00e3 h\u00f3a v\u00e0o Protocol Buffer\u00a0v\u00e0 g\u1eedi \u0111\u1ebfn t\u1ea7ng giao v\u1eadn.</p> <p>(10), (11), (12), (13) Order Service nh\u1eadn c\u00e1c g\u00f3i tin, gi\u1ea3i m\u00e3 ch\u00fang v\u00e0 g\u1eedi k\u1ebft qu\u1ea3 \u0111\u1ebfn client app.</p> <p></p>"},{"location":"ByteByteGo/grpc/#han-che","title":"H\u1ea1n ch\u1ebf","text":"<p>T\u1eeb v\u00ed d\u1ee5 tr\u00ean, ta th\u1ea5y\u00a0gRPC r\u1ea5t d\u1ec5 tri\u1ec3n khai. N\u1ebfu d\u1ec5 d\u00e0ng nh\u01b0 v\u1eady, sao ch\u00fang ta kh\u00f4ng th\u1ea5y gRPC \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng nhi\u1ec1u gi\u1eefa web client v\u00e0 web server?</p> <p>Nguy\u00ean nh\u00e2n l\u00e0 gRPC d\u1ef1a v\u00e0o\u00a0quy\u1ec1n truy c\u1eadp c\u1ea5p th\u1ea5p h\u01a1n v\u00e0o nguy\u00ean m\u1eabu HTTP/2. Hi\u1ec7n kh\u00f4ng c\u00f3 tr\u00ecnh duy\u1ec7t n\u00e0o cung c\u1ea5p m\u1ee9c \u0111\u1ed9 ki\u1ec3m so\u00e1t\u00a0c\u1ea7n thi\u1ebft \u0111\u1ed1i v\u1edbi c\u00e1c web request\u00a0\u0111\u1ec3 h\u1ed7 tr\u1ee3 client gRPC.</p> <p>C\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n l\u1ec7nh g\u1ecdi gRPC t\u1eeb\u00a0tr\u00ecnh duy\u1ec7t v\u1edbi s\u1ef1 tr\u1ee3 gi\u00fap c\u1ee7a proxy. C\u00f4ng ngh\u1ec7 n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 gRPC-Web.</p> <p>Tuy nhi\u00ean, t\u00ednh n\u0103ng n\u00e0y\u00a0kh\u00f4ng ho\u00e0n to\u00e0n t\u01b0\u01a1ng th\u00edch v\u1edbi\u00a0gRPC v\u00e0 m\u1ee9c \u0111\u1ed9 s\u1eed d\u1ee5ng c\u1ee7a n\u00f3 v\u1eabn th\u1ea5p so v\u1edbi gRPC.</p> <p></p>"},{"location":"ByteByteGo/grpc/#khi-nao-su-dung","title":"Khi n\u00e0o s\u1eed d\u1ee5ng","text":"<p>gRPC l\u00e0 c\u01a1 ch\u1ebf giao ti\u1ebfp li\u00ean d\u1ecbch v\u1ee5 \u0111\u01b0\u1ee3c l\u1ef1a ch\u1ecdn gi\u1eefa c\u00e1c microservice trong data center.</p> <p></p> <p>Kh\u1ea3 n\u0103ng h\u1ed7 tr\u1ee3 l\u1edbn c\u1ee7a n\u00f3 \u0111\u1ed1i v\u1edbi nhi\u1ec1u ng\u00f4n ng\u1eef\u00a0l\u1eadp tr\u00ecnh cho ph\u00e9p c\u00e1c d\u1ecbch v\u1ee5 ch\u1ecdn\u00a0ng\u00f4n ng\u1eef ri\u00eang v\u00e0 h\u1ec7 sinh th\u00e1i dev ph\u00f9 h\u1ee3p v\u1edbi use case c\u1ee7a ng\u01b0\u1eddi d\u00f9ng. Ta c\u0169ng c\u00f3 th\u1ec3 th\u1ea5y vi\u1ec7c s\u1eed d\u1ee5ng gRPC ng\u00e0y c\u00e0ng t\u0103ng trong c\u00e1c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng.</p> <p>T\u00ednh hi\u1ec7u qu\u1ea3 v\u00e0 hi\u1ec7u su\u1ea5t c\u1ee7a n\u00f3 c\u00f3 vai tr\u00f2 l\u1edbn trong c\u00e1c m\u00f4i tr\u01b0\u1eddng b\u1ecb h\u1ea1n ch\u1ebf v\u1ec1 hi\u1ec7u n\u0103ng v\u00e0 b\u0103ng th\u00f4ng nh\u01b0 c\u00e1c thi\u1ebft b\u1ecb di \u0111\u1ed9ng.</p>"},{"location":"ByteByteGo/handle-billion-reacts/","title":"Disney Hotstar x\u1eed l\u00fd c\u1ea3 t\u1ef7 react nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/handle-billion-reacts/#nguon","title":"Ngu\u1ed3n","text":"<p> How Disney Hotstar Captures One Billion Emojis!</p>"},{"location":"ByteByteGo/handle-billion-reacts/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Ch\u00fang ta s\u1ebd kh\u00e1m ph\u00e1 c\u00e1ch Disney Hotstar v\u01b0\u1ee3t qua th\u00e1ch th\u1ee9c k\u1ef9 thu\u1eadt kh\u00f3 nh\u1eb1n \u0111\u1ec3 qu\u1ea3n l\u00fd 5 t\u1ef7 react b\u1eb1ng emoji trong m\u1ed9t tr\u1eadn \u0111\u1ea5u World Cup Cricket c\u0103ng th\u1eb3ng. H\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng: m\u1ed9t tr\u1eadn \u0111\u1ea5u gay c\u1ea5n thu h\u00fat h\u00e0ng tri\u1ec7u ng\u01b0\u1eddi h\u00e2m m\u1ed9. Khi c\u1ea3m x\u00fac d\u00e2ng tr\u00e0o, h\u00e0ng tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng \u0111\u00e3 b\u1eafn ph\u00e1 backend c\u1ee7a Hotstar v\u1edbi nh\u1eefng react b\u1eb1ng emoji, \u0111\u1ea9y c\u00e1c server t\u1edbi gi\u1edbi h\u1ea1n. C\u00f9ng xem Hotstar \u0111\u00e3 gi\u1ea3i quy\u1ebft th\u1eed th\u00e1ch n\u00e0y th\u1ebf n\u00e0o v\u00e0 bi\u1ebfn ng\u01b0\u1eddi xem th\u1ee5 \u0111\u1ed9ng th\u00e0nh m\u1ed9t c\u1ed9ng \u0111\u1ed3ng s\u00f4i \u0111\u1ed9ng, c\u00f9ng h\u00f2a m\u00ecnh v\u00e0o c\u1ea3m x\u00fac m\u00e0 ch\u1ec9 c\u00f3 th\u1ec3 c\u00f3 t\u1eeb c\u00e1c s\u1ef1 ki\u1ec7n th\u1ec3 thao tr\u1ef1c ti\u1ebfp.</p> <p></p>"},{"location":"ByteByteGo/handle-billion-reacts/#giai-phap","title":"Gi\u1ea3i ph\u00e1p","text":"<p>\u0110\u1ea7u ti\u00ean l\u00e0 m\u1ed9t ki\u1ebfn tr\u00fac d\u1ef1a v\u00e0o x\u1eed l\u00fd kh\u00f4ng \u0111\u1ed3ng b\u1ed9 qua c\u00e1c th\u00e0nh ph\u1ea7n t\u00e1ch bi\u1ec7t. \u0110i\u1ec1u n\u00e0y l\u00e0 y\u1ebfu t\u1ed1 then ch\u1ed1t \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o t\u00ednh m\u1edf r\u1ed9ng, t\u1ed1c \u0111\u1ed9 v\u00e0 kh\u1ea3 n\u0103ng ch\u1ecbu t\u1ea3i l\u1edbn. </p> <p></p> <p>Vi\u1ec7c ti\u1ebfp nh\u1eadn d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi Kafka, m\u1ed9t n\u1ec1n t\u1ea3ng m\u00e3 ngu\u1ed3n m\u1edf gi\u00fap ph\u00e1t lu\u1ed3ng s\u1ef1 ki\u1ec7n ph\u00e2n t\u00e1n. Kafka s\u1eed d\u1ee5ng c\u00e1c topic \u0111\u1ec3 t\u1ed5 ch\u1ee9c d\u00f2ng d\u1eef li\u1ec7u v\u00e0 c\u00e1c nh\u00f3m consumer \u0111\u1ec3 x\u1eed l\u00fd song song. Kh\u1ea3 n\u0103ng buffer l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u t\u1eeb nhi\u1ec1u ngu\u1ed3n kh\u00e1c nhau khi\u1ebfn Kafka tr\u1edf th\u00e0nh l\u1ef1a ch\u1ecdn l\u00fd t\u01b0\u1edfng \u0111\u1ec3 x\u1eed l\u00fd l\u01b0\u1ee3ng l\u1edbn emoji.</p> <p></p> <p>C\u00e1c \u1ee9ng d\u1ee5ng client g\u1eedi react emoji \u0111\u1ebfn c\u00e1c API server \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng b\u1eb1ng Golang, ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh m\u00e3 ngu\u1ed3n m\u1edf c\u1ee7a Google. Nh\u1edd Goroutines, Golang cho ph\u00e9p ch\u1ea1y \u0111\u1ed3ng th\u1eddi h\u00e0ng lo\u1ea1t ti\u1ebfn tr\u00ecnh, trong khi c\u00e1c k\u00eanh (channels) gi\u00fap giao ti\u1ebfp gi\u1eefa c\u00e1c ti\u1ebfn tr\u00ecnh m\u1ed9t c\u00e1ch an to\u00e0n.</p> <p></p> <p>C\u00e1c c\u01a1 ch\u1ebf n\u00e0y cho ph\u00e9p c\u00e1c API c\u1ee7a Hotstar ti\u1ebfp nh\u1eadn h\u00e0ng tri\u1ec7u react \u0111\u1ed3ng th\u1eddi, sau \u0111\u00f3 gom nh\u00f3m d\u1eef li\u1ec7u b\u1eb1ng channels v\u00e0 ghi m\u1ed9t c\u00e1ch kh\u00f4ng \u0111\u1ed3ng b\u1ed9 v\u00e0o c\u00e1c topic Kafka.</p> <p></p> <p>B\u01b0\u1edbc ti\u1ebfp theo l\u00e0 Spark, m\u1ed9t engine ph\u00e2n t\u00edch nhanh ch\u00f3ng \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng tr\u00ean JVM, x\u1eed l\u00fd d\u00f2ng emoji t\u1eeb Kafka, c\u1eadp nh\u1eadt \u0111i\u1ec3m c\u1ea3m x\u00fac c\u1ee9 m\u1ed7i 2 gi\u00e2y \u0111\u1ec3 ph\u1ea3n \u00e1nh s\u1ef1 thay \u0111\u1ed5i trong t\u00e2m tr\u1ea1ng c\u1ee7a kh\u00e1n gi\u1ea3 theo th\u1eddi gian th\u1ef1c. </p> <p></p> <p>Spark t\u1eadn d\u1ee5ng vi\u1ec7c x\u1eed l\u00fd in-memory, gi\u00fap ch\u1ea1y c\u00e1c workload nhanh h\u01a1n 100 l\u1ea7n so v\u1edbi c\u00e1c n\u1ec1n t\u1ea3ng big data c\u0169 nh\u01b0 Hadoop MapReduce. </p> <p></p> <p>Ki\u1ebfn tr\u00fac micro-batch c\u1ee7a Spark Streaming r\u1ea5t quan tr\u1ecdng \u1edf \u0111\u00e2y, chia d\u00f2ng d\u1eef li\u1ec7u li\u00ean t\u1ee5c th\u00e0nh c\u00e1c nh\u00f3m nh\u1ecf \u0111\u1ec3 x\u1eed l\u00fd. Spark sau \u0111\u00f3 ch\u1ea1y c\u00e1c thu\u1eadt to\u00e1n t\u1ed5ng h\u1ee3p tr\u00ean d\u1eef li\u1ec7u, x\u00e1c \u0111\u1ecbnh s\u1ef1 ph\u00e2n ph\u1ed1i c\u1ea3m x\u00fac emoji c\u1ee7a ng\u01b0\u1eddi d\u00f9ng.</p> <p></p> <p>D\u1eef li\u1ec7u c\u1ea3m x\u00fac t\u1ed5ng h\u1ee3p \u0111\u01b0\u1ee3c \u0111\u1ea9y v\u00e0o m\u1ed9t topic Kafka kh\u00e1c \u0111\u1ec3 l\u01b0u tr\u1eef tr\u01b0\u1edbc khi \u0111\u1ebfn \u0111\u00edch cu\u1ed1i c\u00f9ng. M\u1ed9t consumer Python k\u00e9o d\u1eef li\u1ec7u t\u1eeb topic n\u00e0y v\u00e0 publish l\u00ean h\u1ec7 th\u1ed1ng PubSub c\u1ee7a Hotstar. H\u1ec7 th\u1ed1ng PubSub t\u1ef1 x\u00e2y d\u1ef1ng n\u00e0y \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng d\u1ef1a tr\u00ean MQTT, cho ph\u00e9p g\u1eedi d\u1eef li\u1ec7u c\u1ea3m x\u00fac \u0111\u1ebfn h\u00e0ng tri\u1ec7u thi\u1ebft b\u1ecb v\u1edbi \u0111\u1ed9 tr\u1ec5 th\u1ea5p.</p> <p>T\u00f3m l\u1ea1i, ki\u1ebfn tr\u00fac kh\u00f4ng \u0111\u1ed3ng b\u1ed9 c\u1ee7a Hotstar cho ph\u00e9p m\u1ed7i th\u00e0nh ph\u1ea7n m\u1edf r\u1ed9ng m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp. N\u00f3 \u0111\u1ea3m b\u1ea3o vi\u1ec7c streaming m\u01b0\u1ee3t m\u00e0 trong m\u1ed9t trong nh\u1eefng s\u1ef1 ki\u1ec7n th\u1ec3 thao c\u0103ng th\u1eb3ng nh\u1ea5t, ch\u1ee9ng minh r\u1eb1ng k\u1ef9 thu\u1eadt th\u00f4ng minh c\u00f3 th\u1ec3 bi\u1ebfn nh\u1eefng l\u01b0\u1ee3ng d\u1eef li\u1ec7u n\u1eb7ng n\u1ec1 nh\u1ea5t th\u00e0nh m\u1ed9t tr\u1ea3i nghi\u1ec7m m\u01b0\u1ee3t m\u00e0 cho h\u00e0ng tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng.</p> <p>K\u1ebft qu\u1ea3? \u0110\u1ed9 tr\u1ec5 gi\u1ea3m m\u1ea1nh t\u1eeb 6 gi\u00e2y xu\u1ed1ng ch\u1ec9 c\u00f2n 2 gi\u00e2y, s\u1ef1 c\u1ed1 h\u1ec7 th\u1ed1ng h\u1ea7u nh\u01b0 kh\u00f4ng c\u00f2n, v\u00e0 chi ph\u00ed gi\u1ea3m \u0111\u1ebfn 85%.</p>"},{"location":"ByteByteGo/how-chatgpt-works/","title":"ChatGPT ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/how-chatgpt-works/#nguon","title":"Ngu\u1ed3n","text":"<p> How ChatGPT Works Technically | ChatGPT Architecture</p>"},{"location":"ByteByteGo/how-chatgpt-works/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>ChatGPT \u0111\u01b0\u1ee3c ph\u00e1t h\u00e0nh v\u00e0o ng\u00e0y 30 th\u00e1ng 11 n\u0103m 2022. S\u1ea3n ph\u1ea9m n\u00e0y \u0111\u1ea1t 100 tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng h\u00e0ng th\u00e1ng ch\u1ec9 trong hai th\u00e1ng, bi\u1ebfn n\u00f3 tr\u1edf th\u00e0nh \u1ee9ng d\u1ee5ng ph\u00e1t tri\u1ec3n nhanh nh\u1ea5t trong l\u1ecbch s\u1eed. H\u00ecnh d\u01b0\u1edbi \u0111\u00e2y l\u00e0 bi\u1ec3u \u0111\u1ed3 s\u1ed1 th\u00e1ng m\u00e0 c\u00e1c \u1ee9ng d\u1ee5ng ph\u1ed5 bi\u1ebfn c\u1ea7n \u0111\u1ec3 \u0111\u1ea1t 100 tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng m\u1ed7i th\u00e1ng.</p> <p></p>"},{"location":"ByteByteGo/how-chatgpt-works/#llm","title":"LLM","text":"<p>C\u1ed1t l\u00f5i c\u1ee7a ChatGPT l\u00e0 m\u1ed9t LLM, hay Large Language Model - m\u00f4 h\u00ecnh ng\u00f4n ng\u1eef l\u1edbn. Phi\u00ean b\u1ea3n hi\u1ec7n t\u1ea1i c\u1ee7a ChatGPT l\u00e0 GPT-3.5. ChatGPT c\u0169ng c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng m\u00f4 h\u00ecnh GPT-4 m\u1edbi nh\u1ea5t, nh\u01b0ng hi\u1ec7n t\u1ea1i ch\u01b0a c\u00f3 nhi\u1ec1u chi ti\u1ebft k\u1ef9 thu\u1eadt v\u1ec1 GPT-4 \u0111\u1ec3 n\u00f3i \u0111\u1ebfn.</p> <p>V\u1eady m\u00f4 h\u00ecnh ng\u00f4n ng\u1eef l\u1edbn hay LLM l\u00e0 g\u00ec? LLM l\u00e0 m\u1ed9t lo\u1ea1i m\u00f4 h\u00ecnh m\u1ea1ng n\u01a1-ron \u0111\u01b0\u1ee3c hu\u1ea5n luy\u1ec7n d\u1ef1a tr\u00ean l\u01b0\u1ee3ng d\u1eef li\u1ec7u v\u0103n b\u1ea3n l\u1edbn \u0111\u1ec3 hi\u1ec3u v\u00e0 t\u1ea1o sinh ra ng\u00f4n ng\u1eef m\u00e0 con ng\u01b0\u1eddi s\u1eed d\u1ee5ng. </p> <p></p> <p>M\u00f4 h\u00ecnh n\u00e0y s\u1eed d\u1ee5ng d\u1eef li\u1ec7u hu\u1ea5n luy\u1ec7n \u0111\u1ec3 h\u1ecdc c\u00e1c m\u1eabu th\u1ed1ng k\u00ea v\u00e0 m\u1ed1i quan h\u1ec7 gi\u1eefa c\u00e1c t\u1eeb trong m\u1ed9t ng\u00f4n ng\u1eef, sau \u0111\u00f3 s\u1eed d\u1ee5ng ki\u1ebfn th\u1ee9c n\u00e0y \u0111\u1ec3 d\u1ef1 \u0111o\u00e1n ra c\u00e1c t\u1eeb ti\u1ebfp theo, t\u1eebng t\u1eeb m\u1ed9t.</p> <p></p> <p>LLM th\u01b0\u1eddng \u0111\u01b0\u1ee3c \u0111\u1eb7c tr\u01b0ng b\u1edfi k\u00edch th\u01b0\u1edbc v\u00e0 s\u1ed1 l\u01b0\u1ee3ng tham s\u1ed1. M\u00f4 h\u00ecnh l\u1edbn nh\u1ea5t c\u1ee7a GPT-3.5 c\u00f3 175 t\u1ec9 tham s\u1ed1, tr\u1ea3i d\u00e0i qua 96 l\u1edbp trong m\u1ea1ng n\u01a1-ron, khi\u1ebfn cho n\u00f3 tr\u1edf th\u00e0nh m\u1ed9t trong c\u00e1c m\u00f4 h\u00ecnh h\u1ecdc s\u00e2u l\u1edbn nh\u1ea5t trong l\u1ecbch s\u1eed. </p> <p>Input v\u00e0 output c\u1ee7a m\u00f4 h\u00ecnh \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c theo token. Token l\u00e0 c\u00e1c bi\u1ec3u di\u1ec5n s\u1ed1 h\u00f3a c\u1ee7a c\u00e1c t\u1eeb, hay n\u00f3i ch\u00ednh x\u00e1c h\u01a1n l\u00e0 c\u00e1c ph\u1ea7n c\u1ee7a t\u1eeb. S\u1ed1 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho token thay cho t\u1eeb v\u00ec ch\u00fang c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c x\u1eed l\u00fd hi\u1ec7u qu\u1ea3 h\u01a1n. </p> <p></p> <p>GPT-3.5 \u0111\u01b0\u1ee3c hu\u1ea5n luy\u1ec7n d\u1ef1a tr\u00ean m\u1ed9t l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u t\u1eeb internet. B\u1ed9 d\u1eef li\u1ec7u ngu\u1ed3n ch\u1ee9a \u0111\u1ebfn 500 t\u1ec9 token. N\u00f3i c\u00e1ch kh\u00e1c, m\u00f4 h\u00ecnh n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c hu\u1ea5n luy\u1ec7n d\u1ef1a tr\u00ean h\u00e0ng tr\u0103m t\u1ec9 t\u1eeb. </p> <p></p> <p>N\u00f3 \u0111\u01b0\u1ee3c hu\u1ea5n luy\u1ec7n \u0111\u1ec3 d\u1ef1 \u0111o\u00e1n token ti\u1ebfp theo d\u1ef1a tr\u00ean m\u1ed9t chu\u1ed7i c\u00e1c token input. N\u00f3 c\u00f3 th\u1ec3 t\u1ea1o ra v\u0103n b\u1ea3n c\u00f3 c\u1ea5u tr\u00fac ng\u1eef ph\u00e1p ch\u00ednh x\u00e1c v\u1edbi ng\u1eef ngh\u0129a t\u01b0\u01a1ng t\u1ef1 d\u1eef li\u1ec7u tr\u00ean internet m\u00e0 n\u00f3 \u0111\u01b0\u1ee3c hu\u1ea5n luy\u1ec7n. Tuy nhi\u00ean, n\u1ebfu kh\u00f4ng \u0111\u01b0\u1ee3c \u0111\u1ecbnh h\u01b0\u1edbng ch\u00ednh x\u00e1c, m\u00f4 h\u00ecnh n\u00e0y c\u0169ng c\u00f3 th\u1ec3 t\u1ea1o ra c\u00e1c th\u00f4ng tin sai s\u1ef1 th\u1eadt, \u0111\u1ed9c h\u1ea1i hay th\u1ec3 hi\u1ec7n c\u00e1c c\u1ea3m x\u00fac ti\u00eau c\u1ef1c.</p> <p></p> <p>D\u00f9 v\u1edbi c\u00e1c nh\u01b0\u1ee3c \u0111i\u1ec3m to l\u1edbn \u0111\u00f3, m\u00f4 h\u00ecnh n\u00e0y \u0111\u00e3 ch\u1ee9ng t\u1ecf \u0111\u01b0\u1ee3c t\u00ednh h\u1eefu \u00edch c\u1ee7a m\u00ecnh, nh\u01b0ng ch\u1ec9 trong m\u1ed9t s\u1ed1 tr\u01b0\u1eddng h\u1ee3p c\u1ee5 th\u1ec3. N\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \"d\u1ea1y\" \u0111\u1ec3 th\u1ef1c hi\u1ec7n c\u00e1c nhi\u1ec7m v\u1ee5 ng\u00f4n ng\u1eef t\u1ef1 nhi\u00ean b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng c\u00e1c c\u00e2u l\u1ec7nh v\u0103n b\u1ea3n \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf c\u1ea9n th\u1eadn. \u0110\u00e2y ch\u00ednh l\u00e0 ngu\u1ed3n g\u1ed1c c\u1ee7a l\u0129nh v\u1ef1c \"prompt engineering\".</p> <p></p> <p></p>"},{"location":"ByteByteGo/how-chatgpt-works/#tinh-chinh","title":"Tinh ch\u1ec9nh","text":"<p>\u0110\u1ec3 l\u00e0m cho m\u00f4 h\u00ecnh n\u00e0y an to\u00e0n h\u01a1n v\u00e0 c\u00f3 th\u1ec3 tr\u1ea3 l\u1eddi c\u00e1c c\u00e2u h\u1ecfi theo phong c\u00e1ch chatbot, m\u00f4 h\u00ecnh \u0111\u01b0\u1ee3c tinh ch\u1ec9nh th\u00eam \u0111\u1ec3 tr\u1edf th\u00e0nh phi\u00ean b\u1ea3n hi\u1ec7n t\u1ea1i trong ChatGPT. Qu\u00e1 tr\u00ecnh n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 Reinforcement Training from Human Feedback (RLHF) - hay hu\u1ea5n luy\u1ec7n t\u0103ng c\u01b0\u1eddng t\u1eeb ph\u1ea3n h\u1ed3i c\u1ee7a con ng\u01b0\u1eddi. OpenAI gi\u1ea3i th\u00edch c\u00e1ch h\u1ecd d\u00f9ng RLHF l\u00ean m\u00f4 h\u00ecnh, nh\u01b0ng kh\u00f4ng d\u1ec5 hi\u1ec3u cho ng\u01b0\u1eddi kh\u00f4ng chuy\u00ean machine learning.</p> <p></p> <p>H\u00e3y c\u00f9ng t\u00ecm hi\u1ec3u v\u1edbi m\u1ed9t v\u00ed d\u1ee5. </p> <p>Gi\u1ea3 s\u1eed GPT-3.5 l\u00e0 m\u1ed9t \u0111\u1ea7u b\u1ebfp t\u00e0i n\u0103ng, c\u00f3 th\u1ec3 chu\u1ea9n b\u1ecb nhi\u1ec1u m\u00f3n \u0103n kh\u00e1c nhau. Tinh ch\u1ec9nh GPT-3.5 b\u1eb1ng RLHF c\u0169ng gi\u1ed1ng nh\u01b0 vi\u1ec7c n\u00e2ng cao k\u1ef9 n\u0103ng \u0111\u1ea7u b\u1ebfp \u0111\u1ec3 l\u00e0m c\u00e1c m\u00f3n \u0103n ngon h\u01a1n. Ban \u0111\u1ea7u, \u0111\u1ea7u b\u1ebfp \u0111\u01b0\u1ee3c hu\u1ea5n luy\u1ec7n v\u1edbi m\u1ed9t b\u1ed9 d\u1eef li\u1ec7u l\u1edbn v\u1ec1 c\u00e1c c\u00f4ng th\u1ee9c v\u00e0 k\u1ef9 thu\u1eadt n\u1ea5u \u0103n. Tuy nhi\u00ean, \u0111\u00f4i khi \u0111\u1ea7u b\u1ebfp kh\u00f4ng bi\u1ebft l\u00e0m m\u00f3n g\u00ec \u0111\u1ec3 ph\u1ee5c v\u1ee5 m\u1ed9t y\u00eau c\u1ea7u c\u1ee5 th\u1ec3 t\u1eeb kh\u00e1ch h\u00e0ng. \u1ede \u0111\u00e2y, ta thu th\u1eadp ph\u1ea3n h\u1ed3i t\u1eeb ng\u01b0\u1eddi th\u1eadt \u0111\u1ec3 t\u1ea1o ra m\u1ed9t b\u1ed9 d\u1eef li\u1ec7u m\u1edbi. </p> <p>B\u01b0\u1edbc \u0111\u1ea7u ti\u00ean l\u00e0 t\u1ea1o b\u1ed9 d\u1eef li\u1ec7u so s\u00e1nh. Ta y\u00eau c\u1ea7u \u0111\u1ea7u b\u1ebfp chu\u1ea9n b\u1ecb nhi\u1ec1u m\u00f3n \u0103n cho m\u1ed9t y\u00eau c\u1ea7u c\u1ee5 th\u1ec3 n\u00e0o \u0111\u00f3 v\u00e0 sau \u0111\u00f3 \u0111\u1ec3 ng\u01b0\u1eddi d\u00f9ng x\u1ebfp h\u1ea1ng c\u00e1c m\u00f3n d\u1ef1a tr\u00ean h\u01b0\u01a1ng v\u1ecb v\u00e0 c\u00e1ch tr\u00ecnh b\u00e0y. Vi\u1ec7c n\u00e0y s\u1ebd gi\u00fap \u0111\u1ea7u b\u1ebfp hi\u1ec3u ng\u01b0\u1eddi d\u00f9ng th\u00edch m\u00f3n n\u00e0o. </p> <p></p> <p>B\u01b0\u1edbc ti\u1ebfp theo l\u00e0 m\u00f4 h\u00ecnh trao th\u01b0\u1edfng. \u0110\u1ea7u b\u1ebfp d\u00f9ng c\u00e1c ph\u1ea3n h\u1ed3i n\u00e0y \u0111\u1ec3 t\u1ea1o ra m\u1ed9t m\u00f4 h\u00ecnh trao th\u01b0\u1edfng, gi\u1ed1ng nh\u01b0 s\u00e1ch h\u01b0\u1edbng d\u1eabn \u0111\u1ec3 hi\u1ec3u s\u1edf th\u00edch c\u1ee7a kh\u00e1ch h\u00e0ng. Ph\u1ea7n th\u01b0\u1edfng c\u00e0ng nhi\u1ec1u th\u00ec m\u00f3n \u0103n c\u00e0ng ngon. </p> <p></p> <p>Ti\u1ebfp theo, ta hu\u1ea5n luy\u1ec7n m\u00f4 h\u00ecnh b\u1eb1ng PPO (Proximal Policy Optimization). Trong v\u00ed d\u1ee5 n\u00e0y, \u0111\u1ea7u b\u1ebfp th\u1ef1c h\u00e0nh l\u00e0m m\u00f3n \u0103n theo m\u00f4 h\u00ecnh trao th\u01b0\u1edfng. H\u1ecd s\u1eed d\u1ee5ng m\u1ed9t k\u1ef9 thu\u1eadt g\u1ecdi l\u00e0 Proximal Policy Optimization \u0111\u1ec3 c\u1ea3i thi\u1ec7n k\u1ef9 n\u0103ng c\u1ee7a m\u00ecnh. \u0110\u1ea7u b\u1ebfp so s\u00e1nh m\u00f3n \u0103n hi\u1ec7n t\u1ea1i v\u1edbi m\u1ed9t phi\u00ean b\u1ea3n h\u01a1i kh\u00e1c c\u1ee7a n\u00f3 v\u00e0 h\u1ecdc xem m\u00f3n n\u00e0o ngon h\u01a1n theo m\u00f4 h\u00ecnh ph\u1ea7n th\u01b0\u1edfng. Qu\u00e1 tr\u00ecnh n\u00e0y l\u1eb7p \u0111i l\u1eb7p l\u1ea1i nhi\u1ec1u l\u1ea7n, khi\u1ebfn \u0111\u1ea7u b\u1ebfp ng\u00e0y c\u00e0ng gi\u1ecfi h\u01a1n trong vi\u1ec7c t\u1ea1o ra c\u00e1c m\u00f3n \u0103n ph\u00f9 h\u1ee3p v\u1edbi s\u1edf th\u00edch c\u1ee7a kh\u00e1ch h\u00e0ng.</p> <p></p> <p>Nh\u00ecn t\u1eeb g\u00f3c \u0111\u1ed9 kh\u00e1c, GPT-3.5 \u0111\u01b0\u1ee3c tinh ch\u1ec9nh v\u1edbi RLHF b\u1eb1ng c\u00e1ch thu th\u1eadp ph\u1ea3n h\u1ed3i t\u1eeb ng\u01b0\u1eddi d\u00f9ng, t\u1ea1o ra m\u00f4 h\u00ecnh ph\u1ea7n th\u01b0\u1edfng d\u1ef1a tr\u00ean s\u1edf th\u00edch c\u1ee7a h\u1ecd, v\u00e0 sau \u0111\u00f3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t c\u1ee7a m\u00f4 h\u00ecnh theo c\u00e1ch l\u1eb7p l\u1ea1i b\u1eb1ng PPO. \u0110i\u1ec1u n\u00e0y gi\u00fap GPT-3.5 t\u1ea1o ra nh\u1eefng ph\u1ea3n h\u1ed3i t\u1ed1t h\u01a1n, ph\u00f9 h\u1ee3p v\u1edbi y\u00eau c\u1ea7u c\u1ee5 th\u1ec3 c\u1ee7a ng\u01b0\u1eddi d\u00f9ng.</p>"},{"location":"ByteByteGo/how-chatgpt-works/#chatgpt-tra-loi-cau-hoi-prompt-nhu-the-nao","title":"ChatGPT tr\u1ea3 l\u1eddi c\u00e2u h\u1ecfi (prompt) nh\u01b0 th\u1ebf n\u00e0o?","text":"<p>V\u1ec1 c\u01a1 b\u1ea3n, qu\u00e1 tr\u00ecnh n\u00e0y \u0111\u01a1n gi\u1ea3n nh\u01b0 vi\u1ec7c \u0111\u01b0a c\u00e2u h\u1ecfi v\u00e0o m\u00f4 h\u00ecnh ChatGPT v\u00e0 thu v\u1ec1 k\u1ebft qu\u1ea3. Th\u1ef1c ra th\u00ec n\u00f3 ph\u1ee9c t\u1ea1p h\u01a1n m\u1ed9t ch\u00fat. </p> <p>\u0110\u1ea7u ti\u00ean, ChatGPT s\u1ebd ghi nh\u1edb ng\u1eef c\u1ea3nh c\u1ee7a cu\u1ed9c tr\u00f2 chuy\u1ec7n. UI c\u1ee7a ChatGPT s\u1ebd cung c\u1ea5p nh\u1eefng l\u1ea7n chat tr\u01b0\u1edbc \u0111\u00f3 m\u1ed7i khi m\u1ed9t c\u00e2u h\u1ecfi m\u1edbi \u0111\u01b0\u1ee3c \u0111\u01b0a v\u00e0o. \u0110i\u1ec1u n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 conversational prompt injection. \u0110\u00e2y ch\u00ednh l\u00e0 c\u00e1ch ChatGPT hi\u1ec3u \u0111\u01b0\u1ee3c ng\u1eef c\u1ea3nh c\u1ee7a b\u1ea1n m\u00e0 b\u1ea1n kh\u00f4ng c\u1ea7n ph\u1ea3i nh\u1eafc l\u1ea1i t\u1eeb \u0111\u1ea7u.</p> <p></p> <p>Th\u1ee9 hai, ChatGPT bao g\u1ed3m primary prompt engineering. \u0110\u00e2y l\u00e0 c\u00e1c ph\u1ea7n h\u01b0\u1edbng d\u1eabn \u0111\u01b0\u1ee3c \u0111\u01b0a v\u00e0o tr\u01b0\u1edbc v\u00e0 sau c\u00e2u h\u1ecfi c\u1ee7a ng\u01b0\u1eddi d\u00f9ng \u0111\u1ec3 h\u01b0\u1edbng d\u1eabn m\u00f4 h\u00ecnh v\u1ec1 phong c\u00e1ch tr\u00f2 chuy\u1ec7n. Ng\u01b0\u1eddi d\u00f9ng t\u1ea5t nhi\u00ean kh\u00f4ng th\u1ea5y nh\u1eefng ph\u1ea7n n\u00e0y.</p> <p></p> <p>Th\u1ee9 ba, c\u00e2u h\u1ecfi \u0111\u01b0\u1ee3c truy\u1ec1n v\u00e0o API ki\u1ec3m duy\u1ec7t \u0111\u1ec3 c\u1ea3nh b\u00e1o ho\u1eb7c ch\u1eb7n m\u1ed9t s\u1ed1 lo\u1ea1i n\u1ed9i dung kh\u00f4ng an to\u00e0n, nh\u01b0 ch\u1eedi b\u1eady ch\u1eb3ng h\u1ea1n. Output c\u1ee7a m\u00f4 h\u00ecnh kh\u1ea3 n\u0103ng cao c\u0169ng \u0111i qua API ki\u1ec3m duy\u1ec7t tr\u01b0\u1edbc khi tr\u1ea3 v\u1ec1 cho ng\u01b0\u1eddi d\u00f9ng.</p> <p></p>"},{"location":"ByteByteGo/how-git-works/","title":"Git ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/how-git-works/#nguon","title":"Ngu\u1ed3n","text":"<p> How Git Works: Explained in 4 Minutes</p>"},{"location":"ByteByteGo/how-git-works/#code-trong-git-uoc-luu-o-au","title":"Code trong Git \u0111\u01b0\u1ee3c l\u01b0u \u1edf \u0111\u00e2u?","text":"<p>Tr\u01b0\u1edbc khi \u0111i v\u00e0o c\u00e1c l\u1ec7nh Git, h\u00e3y c\u00f9ng xem Git l\u01b0u code c\u1ee7a ch\u00fang ta nh\u01b0 th\u1ebf n\u00e0o. Th\u01b0\u1eddng m\u1ecdi ng\u01b0\u1eddi ngh\u0129 r\u1eb1ng ch\u1ec9 c\u00f3 hai n\u01a1i l\u01b0u code, nh\u01b0ng th\u1ef1c t\u1ebf code kh\u00f4ng ch\u1ec9 t\u1ed3n t\u1ea1i tr\u00ean GitHub ho\u1eb7c m\u00e1y c\u00e1 nh\u00e2n c\u1ee7a ta. C\u00f3 4 v\u1ecb tr\u00ed ch\u00ednh m\u00e0 code c\u1ee7a ta t\u1ed3n t\u1ea1i trong Git:</p> <ol> <li>Th\u01b0 m\u1ee5c l\u00e0m vi\u1ec7c (Working Directory): N\u01a1i ta ch\u1ec9nh s\u1eeda c\u00e1c file c\u1ee5c b\u1ed9. \u0110\u00e2y l\u00e0 n\u01a1i ch\u00fang ta l\u00e0m vi\u1ec7c.</li> <li>Khu v\u1ef1c Staging (Staging Area): \u0110\u00e2y l\u00e0 n\u01a1i t\u1ea1m th\u1eddi l\u01b0u tr\u1eef c\u00e1c thay \u0111\u1ed5i tr\u01b0\u1edbc khi commit.</li> <li>Kho l\u01b0u tr\u1eef c\u1ee5c b\u1ed9 (Local Repository): \u0110\u00e2y l\u00e0 n\u01a1i l\u01b0u tr\u1eef c\u00e1c thay \u0111\u1ed5i \u0111\u00e3 commit c\u1ee5c b\u1ed9.</li> <li>Kho l\u01b0u tr\u1eef t\u1eeb xa (Remote Repository): M\u1ed9t m\u00e1y ch\u1ee7 nh\u01b0 GitHub \u0111\u1ec3 chia s\u1ebb v\u00e0 sao l\u01b0u code.</li> </ol> <p></p> <p></p>"},{"location":"ByteByteGo/how-git-works/#hanh-trinh-cua-code","title":"H\u00e0nh tr\u00ecnh c\u1ee7a code","text":"<p>V\u1edbi c\u00e1c v\u1ecb tr\u00ed n\u00e0y, h\u00e3y c\u00f9ng h\u00ecnh dung h\u00e0nh tr\u00ecnh c\u1ee7a code nh\u00e9. H\u1ea7u h\u1ebft c\u00e1c l\u1ec7nh <code>git</code> s\u1ebd di chuy\u1ec3n file gi\u1eefa 4 v\u1ecb tr\u00ed n\u00e0y. B\u01b0\u1edbc \u0111\u1ea7u ti\u00ean l\u00e0 s\u1eed d\u1ee5ng l\u1ec7nh <code>git clone</code> \u0111\u1ec3 sao ch\u00e9p m\u1ed9t repository \u0111\u00e3 t\u1ed3n t\u1ea1i, gi\u00fap b\u1ea1n c\u00f3 m\u1ed9t phi\u00ean b\u1ea3n c\u1ee5c b\u1ed9 c\u1ee7a project, v\u1edbi t\u1ea5t c\u1ea3 l\u1ecbch s\u1eed git c\u1ee7a n\u00f3.</p> <p></p> <p>Khi \u0111\u00e3 c\u00f3 repository c\u1ee5c b\u1ed9, c\u00f9ng xem code \u0111\u01b0\u1ee3c l\u01b0u \u1edf \u0111\u00e2u. Khi b\u1eaft \u0111\u1ea7u l\u00e0m vi\u1ec7c v\u1edbi m\u1ed9t file, b\u1ea1n \u0111ang \u1edf Working Directory. \u0110\u00e2y l\u00e0 m\u00f4i tr\u01b0\u1eddng ph\u00e1t tri\u1ec3n c\u1ee5c b\u1ed9 c\u1ee7a b\u1ea1n, n\u01a1i b\u1ea1n t\u1ea1o c\u00e1c thay \u0111\u1ed5i tr\u00ean code (th\u00eam file, s\u1eeda file, x\u00f3a file, ...).</p> <p>Khi s\u1eb5n s\u00e0ng commit c\u00e1c thay \u0111\u1ed5i \u1edf tr\u00ean, b\u1ea1n d\u00f9ng <code>git add</code> \u0111\u1ec3 \u0111\u01b0a snapshot c\u1ee7a c\u00e1c file \u0111\u00f3 v\u00e0o Staging Area. T\u01b0\u1edfng t\u01b0\u1ee3ng \u0111\u00e2y l\u00e0 m\u1ed9t checkpoint, n\u01a1i c\u00e1c thay \u0111\u1ed5i c\u1ee7a b\u1ea1n \u0111\u01b0\u1ee3c t\u1eadp h\u1ee3p l\u1ea1i v\u00e0 s\u1eb5n s\u00e0ng \u0111\u1ec3 ho\u00e0n t\u1ea5t.</p> <p>B\u01b0\u1edbc ti\u1ebfp theo l\u00e0 s\u1eed d\u1ee5ng <code>git commit</code>, l\u1ea5y m\u1ed9t snapshot c\u1ee7a Staging Area v\u00e0 l\u01b0u n\u00f3 v\u00e0o Local Repository c\u1ee7a b\u1ea1n. Vi\u1ec7c n\u00e0y gi\u00fap kh\u00f3a c\u00e1c thay \u0111\u1ed5i \u0111\u00f3 b\u1eb1ng c\u00e1ch t\u1ea1o m\u1ed9t b\u1ea3n ghi v\u0129nh vi\u1ec5n m\u00e0 b\u1ea1n c\u00f3 th\u1ec3 tham chi\u1ebfu l\u1ea1i, gi\u1ed1ng nh\u01b0 m\u1ed9t b\u1ee9c \u1ea3nh ch\u1ee5p t\u1ea1i m\u1ed9t th\u1eddi \u0111i\u1ec3m.</p> <p>Code c\u1ee7a b\u1ea1n kh\u00f4ng ch\u1ec9 n\u1eb1m tr\u00ean m\u00e1y c\u00e1 nh\u00e2n. Khi s\u1eb5n s\u00e0ng chia s\u1ebb ti\u1ebfn \u0111\u1ed9 v\u1edbi team ho\u1eb7c mu\u1ed1n sao l\u01b0u c\u00f4ng vi\u1ec7c c\u1ee7a m\u00ecnh, b\u1ea1n d\u00f9ng l\u1ec7nh <code>git push</code> \u0111\u1ec3 g\u1eedi c\u00e1c commit l\u00ean Remote Repository. \u0110\u00e2y th\u01b0\u1eddng l\u00e0 m\u1ed9t m\u00e1y ch\u1ee7 chia s\u1ebb n\u01a1i team c\u00f3 th\u1ec3 c\u00f9ng l\u00e0m vi\u1ec7c, nh\u01b0 GitHub ho\u1eb7c Bitbucket.</p> <p></p> <p>C\u1ed9ng t\u00e1c trong Git l\u00e0 m\u1ed9t qu\u00e1 tr\u00ecnh trao \u0111\u1ed5i hai chi\u1ec1u. \u0110\u1ec3 t\u00edch h\u1ee3p c\u00f4ng vi\u1ec7c c\u1ee7a \u0111\u1ed3ng nghi\u1ec7p, b\u1ea1n d\u00f9ng <code>git pull</code>, \u0111\u1ec3 t\u1ea3i c\u00e1c thay \u0111\u1ed5i t\u1eeb Remote Repository v\u00e0 h\u1ee3p nh\u1ea5t ch\u00fang v\u00e0o Local Repository c\u1ee7a b\u1ea1n. L\u1ec7nh n\u00e0y k\u1ebft h\u1ee3p hai l\u1ec7nh: <code>git fetch</code>, \u0111\u1ec3 t\u1ea3i c\u00e1c c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t, v\u00e0 <code>git merge</code>, \u0111\u1ec3 h\u1ee3p nh\u1ea5t c\u00e1c c\u1eadp nh\u1eadt n\u00e0y v\u1edbi c\u00f4ng vi\u1ec7c c\u1ee7a b\u1ea1n. </p> <p></p> <p>C\u00f3 nh\u1eefng l\u00fac b\u1ea1n c\u1ea7n chuy\u1ec3n \u0111\u1ed5i ng\u1eef c\u1ea3nh, c\u00f3 th\u1ec3 \u0111\u1ec3 s\u1eeda l\u1ed7i tr\u00ean m\u1ed9t branch kh\u00e1c, \u0111\u00f3 l\u00e0 l\u00fac <code>git checkout</code> ho\u1eb7c <code>git switch</code> gi\u00fap b\u1ea1n. N\u00f3 cho ph\u00e9p b\u1ea1n chuy\u1ec3n \u0111\u1ed5i gi\u1eefa c\u00e1c branch kh\u00e1c nhau \u0111\u1ec3 l\u00e0m vi\u1ec7c tr\u00ean c\u00e1c t\u00ednh n\u0103ng c\u1ee5 th\u1ec3.</p> <p></p> <p>Git branching cho ph\u00e9p b\u1ea1n t\u00e1ch ra t\u1eeb code ch\u00ednh \u0111\u1ec3 ph\u00e1t tri\u1ec3n m\u1ed9t t\u00ednh n\u0103ng m\u1edbi m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn code ch\u00ednh. M\u1ed9t s\u1ed1 kh\u00e1i ni\u1ec7m quan tr\u1ecdng bao g\u1ed3m: t\u1ea1o nh\u00e1nh m\u1edbi v\u1edbi l\u1ec7nh <code>git branch</code>, chuy\u1ec3n \u0111\u1ed5i gi\u1eefa c\u00e1c nh\u00e1nh v\u1edbi <code>git switch</code>, g\u1ed9p nh\u00e1nh b\u1eb1ng <code>git merge</code>, v\u00e0 gi\u1ea3i quy\u1ebft merge conflict khi c\u00e1c thay \u0111\u1ed5i ch\u1ed3ng l\u1ea5n. Branching h\u1ed7 tr\u1ee3 ph\u00e1t tri\u1ec3n v\u00e0 c\u1ed9ng t\u00e1c \u0111\u1ed9c l\u1eadp. M\u00ecnh c\u0169ng c\u00f3 m\u1ed9t b\u00e0i v\u1ec1 Git Merge vs Rebase n\u1ebfu b\u1ea1n mu\u1ed1n t\u00ecm hi\u1ec3u th\u00eam.</p> <p></p> <p></p> <p>Nhi\u1ec1u dev s\u1eed d\u1ee5ng c\u00e1c c\u00f4ng c\u1ee5 Git \u0111\u1ed3 h\u1ecda nh\u01b0 GitHub Desktop v\u00e0 SourceTree. C\u00e1c c\u00f4ng c\u1ee5 n\u00e0y cung c\u1ea5p giao di\u1ec7n tr\u1ef1c quan v\u00e0 c\u00e1c ph\u00edm t\u1eaft cho c\u00e1c l\u1ec7nh ph\u1ed5 bi\u1ebfn. Ch\u00fang c\u00f3 th\u1ec3 gi\u00fap ng\u01b0\u1eddi m\u1edbi b\u1eaft \u0111\u1ea7u d\u1ec5 d\u00e0ng l\u00e0m quen v\u1edbi Git.</p>"},{"location":"ByteByteGo/how-streaming-platforms-work/","title":"C\u00e1c n\u1ec1n t\u1ea3ng streaming ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/how-streaming-platforms-work/#nguon","title":"Ngu\u1ed3n","text":"<p> How Does Live Streaming Platform Work? (YouTube live, Twitch, TikTok Live)</p>"},{"location":"ByteByteGo/how-streaming-platforms-work/#tu-streamer-en-nguoi-xem","title":"T\u1eeb streamer \u0111\u1ebfn ng\u01b0\u1eddi xem","text":"<p>Live streaming l\u00e0 m\u1ed9t vi\u1ec7c kh\u00f4ng h\u1ec1 d\u1ec5 d\u00e0ng v\u1ec1 m\u1eb7t k\u0129 thu\u1eadt v\u00ec n\u1ed9i dung video s\u1ebd \u0111\u01b0\u1ee3c g\u1eedi qua internet trong th\u1eddi gian g\u1ea7n nh\u01b0 l\u00e0 th\u1ef1c. Th\u00eam n\u1eefa, Vi\u1ec7c x\u1eed l\u00fd video \u0111\u00f2i h\u1ecfi nhi\u1ec1u t\u00e0i nguy\u00ean t\u1eeb m\u00e1y t\u00ednh, g\u1eedi m\u1ed9t l\u01b0\u1ee3ng l\u1edbn n\u1ed9i dung video qua internet s\u1ebd m\u1ea5t th\u1eddi gian. Nh\u1eefng y\u1ebfu t\u1ed1 n\u00e0y khi\u1ebfn live streaming tr\u1edf n\u00ean kh\u00f3 kh\u0103n. Nh\u01b0 v\u1eady m\u1ed9t video stream \u0111i t\u1eeb streamer \u0111\u1ebfn ng\u01b0\u1eddi xem nh\u01b0 th\u1ebf n\u00e0o?</p> <p>\u0110\u1ea7u ti\u00ean, stream s\u1ebd b\u1eaft \u0111\u1ea7u bu\u1ed5i stream. Ngu\u1ed3n n\u1ed9i dung c\u00f3 th\u1ec3 l\u00e0 b\u1ea5t k\u1ef3 ngu\u1ed3n video v\u00e0 \u00e2m thanh n\u00e0o \u0111\u01b0\u1ee3c k\u1ebft n\u1ed1i v\u1edbi m\u1ed9t b\u1ed9 m\u00e3 h\u00f3a (encoder), nh\u01b0 ph\u1ea7n m\u1ec1m m\u00e3 h\u00f3a m\u00e3 ngu\u1ed3n m\u1edf ph\u1ed5 bi\u1ebfn OBS (Open Broadcaster Software). M\u1ed9t s\u1ed1 n\u1ec1n t\u1ea3ng ph\u1ed5 bi\u1ebfn nh\u01b0 YouTube cung c\u1ea5p ph\u1ea7n m\u1ec1m \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 stream t\u1eeb tr\u00ecnh duy\u1ec7t v\u1edbi webcam, ho\u1eb7c tr\u1ef1c ti\u1ebfp t\u1eeb camera \u0111i\u1ec7n tho\u1ea1i di \u0111\u1ed9ng. B\u1ed9 m\u00e3 h\u00f3a c\u00f3 nhi\u1ec7m v\u1ee5 \u0111\u00f3ng g\u00f3i video stream v\u00e0 g\u1eedi n\u00f3 qua m\u1ed9t giao th\u1ee9c v\u1eadn chuy\u1ec3n m\u00e0 n\u1ec1n t\u1ea3ng live streaming c\u00f3 th\u1ec3 nh\u1eadn \u0111\u1ec3 x\u1eed l\u00fd ti\u1ebfp.</p> <p></p> <p>Giao th\u1ee9c v\u1eadn chuy\u1ec3n ph\u1ed5 bi\u1ebfn nh\u1ea5t l\u00e0 RTMP (Real-time Messaging Protocol). RTMP l\u00e0 m\u1ed9t giao th\u1ee9c d\u1ef1a tr\u00ean TCP. N\u00f3 \u0111\u01b0\u1ee3c ra m\u1eaft t\u1eeb l\u00e2u d\u01b0\u1edbi d\u1ea1ng giao th\u1ee9c video streaming cho Adobe Flash. C\u00e1c b\u1ed9 m\u00e3 h\u00f3a \u0111\u1ec1u c\u00f3 th\u1ec3 giao ti\u1ebfp th\u00f4ng qua RTMP, ho\u1eb7c qua bi\u1ebfn th\u1ec3 an to\u00e0n c\u1ee7a n\u00f3 g\u1ecdi l\u00e0 RTMPS. C\u00f3 m\u1ed9t giao th\u1ee9c m\u1edbi g\u1ecdi l\u00e0 SRT (Secure Reliable Transport) c\u00f3 th\u1ec3 s\u1ebd thay th\u1ebf RTMP. SRT d\u1ef1a tr\u00ean UDP, h\u1ee9a h\u1eb9n \u0111\u1ed9 tr\u1ec5 th\u1ea5p h\u01a1n v\u00e0 \u0111\u1ed9 b\u1ec1n t\u1ed1t h\u01a1n trong \u0111i\u1ec1u ki\u1ec7n m\u1ea1ng k\u00e9m. Tuy nhi\u00ean, h\u1ea7u h\u1ebft c\u00e1c n\u1ec1n t\u1ea3ng streaming ph\u1ed5 bi\u1ebfn hi\u1ec7n t\u1ea1i v\u1eabn ch\u01b0a h\u1ed7 tr\u1ee3 SRT.</p> <p>\u0110\u1ec3 cung c\u1ea5p \u0111i\u1ec1u ki\u1ec7n upload t\u1ed1t nh\u1ea5t cho streamer, h\u1ea7u h\u1ebft c\u00e1c n\u1ec1n t\u1ea3ng live streaming hi\u1ec7n nay cung c\u1ea5p cho h\u1ecd c\u00e1c m\u00e1y ch\u1ee7 point-of-presence tr\u00ean to\u00e0n th\u1ebf gi\u1edbi. Streamer s\u1ebd k\u1ebft n\u1ed1i v\u1edbi m\u00e1y ch\u1ee7 point-of-presence g\u1ea7n nh\u1ea5t. Vi\u1ec7c k\u1ebft n\u1ed1i n\u00e0y th\u01b0\u1eddng l\u00e0 t\u1ef1 \u0111\u1ed9ng v\u1edbi c\u1ea3 DNS \u0111\u1ecbnh tuy\u1ebfn d\u1ef1a tr\u00ean \u0111\u1ed9 tr\u1ec5 ho\u1eb7c m\u1ea1ng anycast. </p> <p>Khi stream \u0111\u1ebfn m\u00e1y ch\u1ee7 point-of-presence, n\u00f3 s\u1ebd \u0111\u01b0\u1ee3c truy\u1ec1n qua m\u1ed9t m\u1ea1ng trung gian nhanh v\u00e0 \u0111\u00e1ng tin c\u1eady \u0111\u1ebfn n\u1ec1n t\u1ea3ng live streaming \u0111\u1ec3 x\u1eed l\u00fd ti\u1ebfp. T\u1ea1i \u0111\u00e2y, m\u1ee5c ti\u00eau ch\u00ednh c\u1ee7a vi\u1ec7c x\u1eed l\u00fd th\u00eam n\u00e0y l\u00e0 cung c\u1ea5p video stream \u1edf c\u00e1c ch\u1ea5t l\u01b0\u1ee3ng v\u00e0 bit-rate kh\u00e1c nhau. C\u00e1c tr\u00ecnh ph\u00e1t video t\u1ef1 \u0111\u1ed9ng ch\u1ecdn ch\u1ea5t l\u01b0\u1ee3ng video v\u00e0 bit-rate t\u1ed1t nh\u1ea5t d\u1ef1a tr\u00ean ch\u1ea5t l\u01b0\u1ee3ng k\u1ebft n\u1ed1i internet c\u1ee7a ng\u01b0\u1eddi xem v\u00e0 c\u00f3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh ngay l\u1eadp t\u1ee9c b\u1eb1ng c\u00e1ch y\u00eau c\u1ea7u c\u00e1c bit-rate kh\u00e1c khi \u0111i\u1ec1u ki\u1ec7n m\u1ea1ng thay \u0111\u1ed5i. \u0110\u00e2y g\u1ecdi l\u00e0 adaptive bitrate streaming.</p> <p></p> <p>C\u00e1c b\u01b0\u1edbc x\u1eed l\u00fd c\u1ee5 th\u1ec3 s\u1ebd kh\u00e1c nhau t\u00f9y theo n\u1ec1n t\u1ea3ng v\u00e0 \u0111\u1ecbnh d\u1ea1ng streaming \u0111\u1ea7u ra. N\u00f3i chung, c\u00e1c b\u01b0\u1edbc x\u1eed l\u00fd s\u1ebd ki\u1ec3u nh\u01b0 sau.</p> <p>\u0110\u1ea7u ti\u00ean, video stream \u0111\u1ea7u v\u00e0o s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n \u0111\u1ed5i sang c\u00e1c \u0111\u1ed9 ph\u00e2n gi\u1ea3i v\u00e0 bit-rate kh\u00e1c nhau - c\u01a1 b\u1ea3n l\u00e0 c\u00e1c c\u1ea5p \u0111\u1ed9 ch\u1ea5t l\u01b0\u1ee3ng kh\u00e1c nhau cho video. Video stream \u0111\u00e3 chuy\u1ec3n \u0111\u1ed5i s\u1ebd \u0111\u01b0\u1ee3c chia th\u00e0nh c\u00e1c \u0111o\u1ea1n video nh\u1ecf t\u1ea7m v\u00e0i gi\u00e2y. Qu\u00e1 tr\u00ecnh n\u00e0y g\u1ecdi l\u00e0 segmentation (ph\u00e2n \u0111o\u1ea1n). M\u00e3 h\u00f3a video \u0111\u00f2i h\u1ecfi nhi\u1ec1u t\u00e0i nguy\u00ean m\u00e1y t\u00ednh. Video \u0111\u1ea7u v\u00e0o th\u01b0\u1eddng \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a sang c\u00e1c \u0111\u1ecbnh d\u1ea1ng kh\u00e1c nhau m\u1ed9t c\u00e1ch song song, \u0111\u00f2i h\u1ecfi s\u1ee9c m\u1ea1nh t\u00ednh to\u00e1n l\u1edbn.</p> <p></p> <p>Ti\u1ebfp theo, c\u00e1c \u0111o\u1ea1n video t\u1eeb qu\u00e1 tr\u00ecnh m\u00e3 h\u00f3a s\u1ebd \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i th\u00e0nh c\u00e1c \u0111\u1ecbnh d\u1ea1ng streaming tr\u1ef1c ti\u1ebfp m\u00e0 tr\u00ecnh ph\u00e1t video c\u00f3 th\u1ec3 hi\u1ec3u. \u0110\u1ecbnh d\u1ea1ng streaming tr\u1ef1c ti\u1ebfp ph\u1ed5 bi\u1ebfn nh\u1ea5t l\u00e0 HLS (HTTP Live Streaming). HLS \u0111\u01b0\u1ee3c Apple cho ra m\u1eaft v\u00e0o n\u0103m 2009. N\u00f3 l\u00e0 \u0111\u1ecbnh d\u1ea1ng streaming ph\u1ed5 bi\u1ebfn nh\u1ea5t hi\u1ec7n nay. M\u1ed9t stream HLS bao g\u1ed3m m\u1ed9t file m\u00f4 t\u1ea3 v\u00e0 m\u1ed9t lo\u1ea1t c\u00e1c \u0111o\u1ea1n video nh\u1ecf, m\u1ed7i \u0111o\u1ea1n d\u00e0i t\u1ea7m v\u00e0i gi\u00e2y. File m\u00f4 t\u1ea3 l\u00e0 m\u1ed9t th\u01b0 m\u1ee5c \u0111\u1ec3 cho tr\u00ecnh ph\u00e1t video bi\u1ebft t\u1ea5t c\u1ea3 c\u00e1c \u0111\u1ecbnh d\u1ea1ng \u0111\u1ea7u ra v\u00e0 n\u01a1i \u0111\u1ec3 t\u1ea3i c\u00e1c \u0111o\u1ea1n video qua HTTP. File m\u00f4 t\u1ea3 HLS v\u00e0 c\u00e1c \u0111o\u1ea1n video t\u1eeb qu\u00e1 tr\u00ecnh \u0111\u00f3ng g\u00f3i s\u1ebd \u0111\u01b0\u1ee3c cache b\u1edfi CDN, gi\u00fap gi\u1ea3m \u0111\u1ed9 tr\u1ec5 \u0111\u1ebfn ng\u01b0\u1eddi xem. DASH (Dynamic Adaptive Streaming over HTTP) l\u00e0 m\u1ed9t \u0111\u1ecbnh d\u1ea1ng streaming ph\u1ed5 bi\u1ebfn kh\u00e1c. Thi\u1ebft b\u1ecb c\u1ee7a Apple m\u1eb7c \u0111\u1ecbnh kh\u00f4ng h\u1ed7 tr\u1ee3 DASH.</p> <p></p> <p>Cu\u1ed1i c\u00f9ng, video b\u1eaft \u0111\u1ea7u \u0111\u1ebfn tr\u00ecnh ph\u00e1t video c\u1ee7a ng\u01b0\u1eddi xem. \u0110\u1ed9 tr\u1ec5 t\u1eeb khi streamer g\u1eedi video \u0111\u1ebfn khi ng\u01b0\u1eddi xem nh\u1eadn \u0111\u01b0\u1ee3c video g\u1ecdi l\u00e0 \u201cglass-to-glass\u201d latency. \u201cGlass-to-glass\u201d latency kho\u1ea3ng 20 gi\u00e2y l\u00e0 b\u00ecnh th\u01b0\u1eddng. </p> <p></p> <p>C\u00f3 nhi\u1ec1u y\u1ebfu t\u1ed1 m\u00e0 streamer ho\u1eb7c n\u1ec1n t\u1ea3ng live streaming c\u00f3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh \u0111\u1ec3 c\u1ea3i thi\u1ec7n \u0111\u1ed9 tr\u1ec5 n\u00e0y, \u0111\u00f3 l\u00e0 b\u1eb1ng c\u00e1ch hy sinh c\u00e1c y\u1ebfu t\u1ed1 c\u1ee7a ch\u1ea5t l\u01b0\u1ee3ng video. M\u1ed9t s\u1ed1 n\u1ec1n t\u1ea3ng \u0111\u01a1n gi\u1ea3n h\u00f3a qu\u00e1 tr\u00ecnh \u0111i\u1ec1u ch\u1ec9nh n\u00e0y b\u1eb1ng c\u00e1ch cung c\u1ea5p \u0111i\u1ec1u ch\u1ec9nh cho streamer \u0111\u1ec3 ch\u1ecdn m\u1ee9c \u0111\u1ed9 t\u01b0\u01a1ng t\u00e1c m\u00e0 h\u1ecd mu\u1ed1n. C\u00e1c n\u1ec1n t\u1ea3ng sau \u0111\u00f3 s\u1ebd \u0111i\u1ec1u ch\u1ec9nh ch\u1ea5t l\u01b0\u1ee3ng c\u1ee7a stream d\u1ef1a tr\u00ean \u0111\u1ea7u v\u00e0o \u0111\u00f3. Streamer r\u00f5 r\u00e0ng kh\u00f4ng c\u1ea7n quan t\u00e2m n\u1ec1n t\u1ea3ng l\u00e0m g\u00ec \u1edf b\u01b0\u1edbc n\u00e0y. \u0110i\u1ec1u t\u1ed1t nh\u1ea5t m\u00e0 streamer c\u00f3 th\u1ec3 l\u00e0m l\u00e0 t\u1ed1i \u01b0u h\u00f3a setup \u1edf m\u00e1y stream \u0111\u1ec3 h\u1ed7 tr\u1ee3 \u0111\u1ed9 tr\u1ec5 th\u1ea5p nh\u1ea5t t\u1eeb camera \u0111\u1ebfn n\u1ec1n t\u1ea3ng live streaming.</p>"},{"location":"ByteByteGo/http-status-codes/","title":"M\u1ed9t s\u1ed1 HTTP status code th\u00f4ng d\u1ee5ng","text":""},{"location":"ByteByteGo/http-status-codes/#nguon","title":"Ngu\u1ed3n","text":"<p> HTTP Status Codes Explained In 5 Minutes</p>"},{"location":"ByteByteGo/http-status-codes/#2xx","title":"2xx","text":"<p>C\u00e1c status code 2xx, v\u00ed d\u1ee5 200, 201, v\u1ec1 c\u01a1 b\u1ea3n l\u00e0 c\u00e1c tr\u1ea1ng th\u00e1i t\u00edch c\u1ef1c.</p> <ul> <li>200 OK ngh\u0129a l\u00e0 m\u1ecdi th\u1ee9 \u0111\u00e3 di\u1ec5n ra su\u00f4n s\u1ebb \u1edf ph\u00eda server.</li> </ul> <p></p> <ul> <li>201 Created l\u00e0 m\u1ed9t tr\u1ea1ng th\u00e1i kh\u00e1c, \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 khi c\u00f3 g\u00ec \u0111\u00f3 \u0111\u01b0\u1ee3c t\u1ea1o ra \u1edf ph\u00eda server. V\u00ed d\u1ee5, b\u1ea1n \u0111ang x\u00e2y d\u1ef1ng m\u1ed9t API t\u1ea1o c\u00e1c profile ng\u01b0\u1eddi d\u00f9ng. 201 Created ngh\u0129a l\u00e0 \"D\u1eef li\u1ec7u c\u1ee7a b\u1ea1n \u0111\u00e3 \u0111\u01b0\u1ee3c nh\u1eadn, profile m\u1edbi \u0111\u00e3 \u0111\u01b0\u1ee3c t\u1ea1o!\".</li> </ul> <p></p> <ul> <li>204 No Content h\u01a1i kh\u00e1c m\u1ed9t t\u00ed, th\u01b0\u1eddng \u0111\u01b0\u1ee3c d\u00f9ng v\u1edbi c\u00e1c request DELETE \u0111\u1ec3 x\u00f3a d\u1eef li\u1ec7u ng\u01b0\u1eddi d\u00f9ng. 204 ngh\u0129a l\u00e0 vi\u1ec7c x\u00f3a d\u1eef li\u1ec7u \u0111\u00e3 th\u00e0nh c\u00f4ng, nh\u01b0ng kh\u00f4ng c\u00f3 d\u1eef li\u1ec7u n\u00e0o \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1.</li> </ul> <p></p>"},{"location":"ByteByteGo/http-status-codes/#4xx","title":"4xx","text":"<p>C\u00e1c status code 4xx l\u00e0 c\u00e1ch m\u00e0 server n\u00f3i cho b\u1ea1n r\u1eb1ng b\u1ea1n g\u1eedi g\u00ec \u0111\u00f3 kh\u00f4ng \u1ed5n l\u1eafm.</p> <ul> <li>400 Bad Request bi\u1ec3u th\u1ecb vi\u1ec7c server kh\u00f4ng hi\u1ec3u b\u1ea1n \u0111ang g\u1eedi c\u00e1i g\u00ec l\u00ean.</li> </ul> <p></p> <ul> <li>401 Unauthorized ngh\u0129a l\u00e0 b\u1ea1n \u0111ang thi\u1ebfu credential \u0111\u1ec3 g\u1ecdi, gi\u1ed1ng vi\u1ec7c c\u1ed1 g\u1eafng \u0111i v\u00e0o m\u1ed9t c\u0103n ph\u00f2ng \u0111ang kh\u00f3a m\u00e0 kh\u00f4ng c\u00f3 ch\u00eca kh\u00f3a.</li> </ul> <p></p> <ul> <li>403 Forbidden ngh\u0129a l\u00e0 b\u1ea1n kh\u00f4ng \u0111\u01b0\u1ee3c ph\u00e9p d\u00f9ng API n\u00e0y, gi\u1ed1ng vi\u1ec7c b\u1ea1n c\u00f3 v\u00e9 ph\u1ed5 th\u00f4ng v\u00e0o concert nh\u01b0ng c\u1ed1 g\u1eafng l\u1ebbn v\u00e0o khu VIP, c\u1ee5 th\u1ec3 \u1edf \u0111\u00e2y n\u00f3 nh\u01b0 l\u00e0 vi\u1ec7c b\u1ea1n c\u1ed1 g\u1eafng s\u1eed d\u1ee5ng t\u00ednh n\u0103ng admin d\u00f9 ch\u1ec9 c\u00f3 t\u00e0i kho\u1ea3n guest.</li> </ul> <p></p> <ul> <li>404 Not Found bi\u1ec3u th\u1ecb th\u00f4ng tin b\u1ea1n request kh\u00f4ng c\u00f3 \u1edf \u0111\u00e2y. H\u00e3y ki\u1ec3m tra l\u1ea1i route v\u00e0 endpoint c\u1ee7a b\u1ea1n.</li> </ul> <p></p> <ul> <li>429 Too Many Requests bi\u1ec3u th\u1ecb r\u1eb1ng b\u1ea1n \u0111ang g\u1eedi request qu\u00e1 nhanh v\u00e0 \u0111ang ch\u1ea1m \u0111\u1ebfn rate limit. V\u1edbi c\u00e1c API nhi\u1ec1u t\u1ea3i, b\u1ea1n c\u1ea7n \u0111i\u1ec1u ch\u1ec9nh l\u1ea1i \u0111\u1ec3 g\u1ecdi API l\u1ea1i v\u1edbi ch\u00fat backoff.</li> </ul> <p></p>"},{"location":"ByteByteGo/http-status-codes/#5xx","title":"5xx","text":"<p>C\u00e1c status code 5xx bi\u1ec3u th\u1ecb r\u1eb1ng c\u00f3 v\u1ea5n \u0111\u1ec1 \u1edf ph\u00eda server, nh\u1eefng l\u1ed7i n\u00e0y th\u01b0\u1eddng c\u1ea7n \u0111i\u1ec1u tra k\u1ef9 v\u00e0 kh\u00f4ng d\u1ec5 t\u00ecm ra ngay l\u1eadp t\u1ee9c.</p> <ul> <li>500 Internal Server Error bi\u1ec3u th\u1ecb vi\u1ec7c server \u0111ang tuy\u1ec7t v\u1ecdng v\u00e0 c\u1ea7n b\u1ea1n gi\u00fap \u0111\u1ee1, h\u00e3y ki\u1ec3m tra log \u0111\u1ec3 t\u00ecm ra l\u1ed7i.</li> </ul> <p></p> <ul> <li>502 Bad Gateway bi\u1ec3u th\u1ecb vi\u1ec7c c\u00f3 v\u1ea5n \u0111\u1ec1 gi\u1eefa c\u00e1c server, v\u00ed d\u1ee5 nh\u01b0 m\u1ed9t proxy kh\u00f4ng nh\u1eadn \u0111\u01b0\u1ee3c response t\u1eeb server \u1ee9ng d\u1ee5ng, c\u00f3 th\u1ec3 do qu\u00e1 t\u1ea3i, m\u1ea1ng m\u1ebdo ho\u1eb7c config sai.</li> </ul> <p></p> <ul> <li>503 Service Unavailable bi\u1ec3u th\u1ecb server kh\u00f4ng th\u1ec3 x\u1eed l\u00fd request l\u00fac n\u00e0y, c\u00f3 th\u1ec3 do b\u1ea3o tr\u00ec ho\u1eb7c qu\u00e1 t\u1ea3i. </li> </ul> <p></p> <p>M\u1eb7c d\u00f9 c\u1ea3 502 v\u00e0 503 \u0111\u1ec1u bi\u1ec3u th\u1ecb v\u1ea5n \u0111\u1ec1 \u1edf server, nh\u01b0ng nguy\u00ean nh\u00e2n th\u00ec kh\u00e1c nhau: 502 l\u00e0 v\u1ea5n \u0111\u1ec1 v\u1ec1 giao ti\u1ebfp gi\u1eefa c\u00e1c server, 503 l\u00e0 v\u1ea5n \u0111\u1ec1 v\u1ec1 tr\u1ea1ng th\u00e1i hi\u1ec7n t\u1ea1i c\u1ee7a server v\u00e0 kh\u1ea3 n\u0103ng x\u1eed l\u00fd request.</p> <p></p> <p></p>"},{"location":"ByteByteGo/http-status-codes/#3xx","title":"3xx","text":"<p>C\u00e1c status code 3xx l\u00e0 c\u00e1c status code \u0111i\u1ec1u h\u01b0\u1edbng, gi\u00fap b\u1ea1n chuy\u1ec3n h\u01b0\u1edbng request.</p> <ul> <li>301 Moved Permanently l\u00e0 m\u1ed9t \u0111\u1ecba ch\u1ec9 m\u1edbi, server s\u1ebd chuy\u1ec3n h\u01b0\u1edbng request \u0111\u1ebfn \u0111\u1ecba ch\u1ec9 m\u1edbi.</li> </ul> <p></p> <ul> <li>302 Found l\u00e0 chuy\u1ec3n h\u01b0\u1edbng t\u1ea1m th\u1eddi, ngh\u0129a l\u00e0 \u0111\u1ecba ch\u1ec9 c\u0169 v\u1eabn ho\u1ea1t \u0111\u1ed9ng nh\u01b0ng server mu\u1ed1n b\u1ea1n chuy\u1ec3n sang \u0111\u1ecba ch\u1ec9 m\u1edbi.</li> </ul> <p></p> <ul> <li>304 Not Modified l\u00e0 c\u00e1ch server n\u00f3i r\u1eb1ng d\u1eef li\u1ec7u b\u1ea1n request kh\u00f4ng thay \u0111\u1ed5i k\u1ec3 t\u1eeb l\u1ea7n cu\u1ed1i c\u00f9ng b\u1ea1n request (v\u00e0 cache n\u00f3 trong browser), n\u00f3 gi\u00fap ti\u1ebft ki\u1ec7m b\u0103ng th\u00f4ng v\u00e0 th\u1eddi gian b\u1eb1ng c\u00e1ch tr\u00e1nh vi\u1ec7c t\u1ea3i d\u1eef li\u1ec7u kh\u00f4ng c\u1ea7n thi\u1ebft.</li> </ul> <p></p>"},{"location":"ByteByteGo/http-status-codes/#1xx","title":"1xx","text":"<p>C\u00e1c status code 1xx kh\u00f4ng \u0111\u01b0\u1ee3c ch\u00fa \u00fd nhi\u1ec1u nh\u01b0ng v\u1eabn h\u1eefu \u00edch. V\u00ed d\u1ee5 nh\u01b0 101 Switching Protocols \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng khi client mu\u1ed1n chuy\u1ec3n t\u1eeb HTTP sang WebSocket.</p> <p></p>"},{"location":"ByteByteGo/http-status-codes/#mot-so-tip-khi-gap-van-e-voi-status-code","title":"M\u1ed9t s\u1ed1 tip khi g\u1eb7p v\u1ea5n \u0111\u1ec1 v\u1edbi status code","text":"<p>Khi g\u1eb7p v\u1ea5n \u0111\u1ec1 v\u1edbi status code, h\u00e3y b\u1eaft \u0111\u1ea7u t\u1eeb nh\u1eefng \u0111i\u1ec1u c\u01a1 b\u1ea3n. </p> <ul> <li>Ki\u1ec3m tra request headers v\u00e0 body, \u0111\u1ea3m b\u1ea3o HTTP method \u0111\u00fang, v\u00e0 x\u00e1c nh\u1eadn URL endpoint. </li> <li>C\u00e1c c\u00f4ng c\u1ee5 nh\u01b0 Postman ho\u1eb7c Insomnia c\u00f3 th\u1ec3 r\u1ea5t h\u1eefu \u00edch trong vi\u1ec7c ki\u1ec3m tra request v\u00e0 xem response. \u0110\u1eebng qu\u00ean ki\u1ec3m tra server logs n\u1ebfu b\u1ea1n c\u00f3 quy\u1ec1n truy c\u1eadp.</li> </ul>"},{"location":"ByteByteGo/http-versions/","title":"HTTP/1 \u0111\u1ebfn HTTP/2 \u0111\u1ebfn HTTP/3","text":""},{"location":"ByteByteGo/http-versions/#nguon","title":"Ngu\u1ed3n","text":"<p> HTTP/1 to HTTP/2 to HTTP/3</p>"},{"location":"ByteByteGo/http-versions/#http1","title":"HTTP/1","text":"<p>HTTP/1 ra m\u1eaft v\u00e0o n\u0103m 1996, \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng d\u1ef1a tr\u00ean TCP. M\u1ed7i request \u0111\u1ebfn c\u00f9ng m\u1ed9t server c\u1ea7n m\u1ed9t TCP connection ri\u00eang.</p> <p></p>"},{"location":"ByteByteGo/http-versions/#http11","title":"HTTP/1.1","text":"<p>HTTP/1.1 ra m\u1eaft sau HTTP/1 m\u1ed9t n\u0103m, v\u00e0o n\u0103m 1997. N\u00f3 gi\u1edbi thi\u1ec7u c\u01a1 ch\u1ebf keep-alive nh\u1eb1m gi\u00fap cho m\u1ed9t connection c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\u1ea1i cho nhi\u1ec1u request. Duy tr\u00ec k\u1ebft n\u1ed1i (persistent connection) s\u1ebd gi\u00fap gi\u1ea3m \u0111\u1ed9 tr\u1ec5 khi request v\u00ec client s\u1ebd kh\u00f4ng c\u1ea7n ph\u1ea3i kh\u1edfi t\u1ea1o l\u1ea1i connection cho c\u00e1c request sau \u0111\u00f3 (b\u1eaft tay 3 b\u01b0\u1edbc TCP).</p> <p></p> <p>M\u1ed9t chi ti\u1ebft \u0111\u00e1ng ch\u00fa \u00fd n\u1eefa c\u1ee7a HTTP/1.1 l\u00e0 ch\u1ee9c n\u0103ng HTTP pipelining. V\u1ec1 m\u1eb7t l\u00fd thuy\u1ebft, ch\u1ee9c n\u0103ng n\u00e0y cho ph\u00e9p client g\u1eedi nhi\u1ec1u request l\u00ean server tr\u01b0\u1edbc khi \u0111\u1ee3i m\u1ed7i response. C\u00e1c response ph\u1ea3i \u0111\u01b0\u1ee3c nh\u1eadn theo th\u1ee9 t\u1ef1 \u0111\u01b0\u1ee3c request \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o t\u00ednh ch\u00ednh x\u00e1c.</p> <p>L\u01b0u \u00fd l\u00e0 HTTP pipelining kh\u00e1 kh\u00f3 \u0111\u1ec3 c\u00e0i \u0111\u1eb7t v\u00e0 nhi\u1ec1u proxy server \u1edf gi\u1eefa kh\u00f4ng th\u1ec3 n\u00e0o x\u1eed l\u00fd pipelining ch\u00ednh x\u00e1c \u0111\u01b0\u1ee3c. Ch\u1ee9c n\u0103ng n\u00e0y v\u00ec th\u1ebf kh\u00f4ng c\u00f2n \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1edfi nhi\u1ec1u tr\u00ecnh duy\u1ec7t ng\u00e0y nay.</p> <p></p> <p>HTTP/1.1 v\u1edbi pipelining c\u00f2n c\u00f3 m\u1ed9t v\u1ea5n \u0111\u1ec1 n\u1eefa \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 head-of-line blocking (HOL blocking). \u0110\u1ea1i kh\u00e1i th\u00ec v\u1edbi c\u00f9ng m\u1ed9t connection, c\u00e1c request sau s\u1ebd ph\u1ea3i \u0111\u1ee3i request tr\u01b0\u1edbc \u0111\u00f3 xong (ngh\u0129a l\u00e0 request \u0111\u00e3 \u0111\u01b0\u1ee3c g\u1eedi l\u00ean server). N\u1ebfu m\u1ed9t request b\u1ecb ch\u1eb7n v\u00ec m\u1ed9t s\u1ed1 l\u00fd do nh\u01b0 m\u1ea5t g\u00f3i tin (packet loss), c\u00e1c request sau n\u00f3 tr\u00ean c\u00f9ng m\u1ed9t connection c\u0169ng b\u1ecb \u1ea3nh h\u01b0\u1edfng.</p> <p></p> <p>\u0110\u1ec3 gi\u1eef cho k\u1ebft n\u1ed1i c\u00f3 t\u1ed1c \u0111\u1ed9 \u1edf m\u1ee9c ch\u1ea5p nh\u1eadn \u0111\u01b0\u1ee3c, tr\u00ecnh duy\u1ec7t th\u01b0\u1eddng gi\u1eef nhi\u1ec1u TCP connection \u0111\u1ebfn c\u00f9ng m\u1ed9t server v\u00e0 g\u1eedi c\u00e1c request song song v\u1edbi nhau \u0111\u1ebfn server.</p> <p></p>"},{"location":"ByteByteGo/http-versions/#http2","title":"HTTP/2","text":"<p>HTTP/2 ra \u0111\u1eddi n\u0103m 2015, gi\u1edbi thi\u1ec7u HTTP streams, gi\u00fap ta c\u00f3 th\u1ec3 g\u1eedi nhi\u1ec1u stream request \u0111\u1ebfn c\u00f9ng m\u1ed9t server tr\u00ean ch\u1ec9 m\u1ed9t TCP connection. Kh\u00e1c v\u1edbi HTTP/1.1 pipelining, c\u00e1c stream n\u00e0y \u0111\u1ed9c l\u1eadp v\u1edbi nhau v\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i g\u1eedi hay nh\u1eadn theo b\u1ea5t c\u1ee9 th\u1ee9 t\u1ef1 n\u00e0o. </p> <p>HTTP/2 gi\u1ea3i quy\u1ebft \u0111\u01b0\u1ee3c head-of-line blocking c\u1ee7a HTTP/1.1 tr\u00ean t\u1ea7ng \u1ee9ng d\u1ee5ng nh\u01b0ng kh\u00f4ng gi\u1ea3i quy\u1ebft \u0111\u01b0\u1ee3c tr\u00ean t\u1ea7ng giao v\u1eadn v\u1edbi TCP.</p> <p></p> <p>M\u1ed9t chi ti\u1ebft \u0111\u00e1ng l\u01b0u \u00fd c\u1ee7a HTTP/2 l\u00e0 kh\u1ea3 n\u0103ng push, gi\u00fap cho server c\u00f3 th\u1ec3 g\u1eedi n\u1ed9i dung m\u1edbi cho client khi c\u00f3 th\u1ec3, m\u00e0 kh\u00f4ng c\u1ea7n client ph\u1ea3i g\u1eedi request \u0111\u1ec3 poll.</p>"},{"location":"ByteByteGo/http-versions/#http3","title":"HTTP/3","text":"<p>HTTP/3 ra m\u1eaft b\u1ea3n th\u1eed nghi\u1ec7m v\u00e0o n\u0103m 2020 v\u00e0 \u0111\u01b0\u1ee3c ra m\u1eaft ch\u00ednh th\u1ee9c v\u00e0o th\u00e1ng 6 n\u0103m 2022. N\u00f3 s\u1eed d\u1ee5ng m\u1ed9t giao th\u1ee9c t\u00ean l\u00e0 QUIC thay v\u00ec d\u00f9ng TCP. QUIC d\u1ef1a tr\u00ean UDP. N\u00f3 gi\u1edbi thi\u1ec7u c\u00e1c stream \u0111\u00f3ng vai tr\u00f2 quan tr\u1ecdng tr\u00ean t\u1ea7ng giao v\u1eadn. C\u00e1c QUIC stream d\u00f9ng chung m\u1ed9t connection nhanh n\u00ean kh\u00f4ng c\u1ea7n ph\u1ea3i b\u1eaft tay \u0111\u1ec3 t\u1ea1o connection m\u1edbi. Trong h\u1ea7u h\u1ebft c\u00e1c tr\u01b0\u1eddng h\u1ee3p, m\u1ea5t g\u00f3i tin \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn m\u1ed9t stream s\u1ebd kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn c\u00e1c stream kh\u00e1c, n\u00ean n\u00f3 gi\u1ea3i quy\u1ebft \u0111\u01b0\u1ee3c t\u00ecnh tr\u1ea1ng head-of-line blocking tr\u00ean t\u1ea7ng giao v\u1eadn.</p> <p></p> <p>QUIC \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf cho vi\u1ec7c s\u1eed d\u1ee5ng nhi\u1ec1u internet tr\u00ean \u0111i\u1ec7n tho\u1ea1i. Ng\u01b0\u1eddi ta th\u01b0\u1eddng chuy\u1ec3n m\u1ea1ng tr\u00ean \u0111i\u1ec7n tho\u1ea1i nhi\u1ec1u l\u1ea7n (nh\u01b0 t\u1eeb WiFi sang 4G v\u00e0 ng\u01b0\u1ee3c l\u1ea1i). V\u1edbi TCP, vi\u1ec7c chuy\u1ec3n m\u1ea1ng n\u00e0y kh\u00e1 l\u00e0 kh\u00f3 ch\u1ecbu v\u00e0 ch\u1eadm ch\u1ea1p.</p> <p>QUIC s\u1eed d\u1ee5ng m\u1ed9t concept g\u1ecdi l\u00e0 connection ID, gi\u00fap cho connection c\u00f3 th\u1ec3 di chuy\u1ec3n gi\u1eefa c\u00e1c \u0111\u1ecba ch\u1ec9 IP v\u00e0 giao di\u1ec7n m\u1ea1ng d\u1ec5 d\u00e0ng, nhanh ch\u00f3ng v\u00e0 \u0111\u00e1ng tin c\u1eady.</p> <p></p> <p>D\u00f9 HTTP/3 m\u1edbi ch\u1ec9 \u0111\u01b0\u1ee3c chu\u1ea9n ho\u00e1, n\u00f3 \u0111\u00e3 \u0111\u01b0\u1ee3c d\u00f9ng b\u1edfi 25% s\u1ed1 website v\u00e0 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1edfi nhi\u1ec1u tr\u00ecnh duy\u1ec7t tr\u00ean th\u1ecb tr\u01b0\u1eddng.</p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/","title":"8 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u quan tr\u1ecdng trong c\u00e1c h\u1ec7 th\u1ed1ng c\u01a1 s\u1edf d\u1eef li\u1ec7u hi\u1ec7n \u0111\u1ea1i","text":""},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#nguon","title":"Ngu\u1ed3n","text":"<p> 8 Key Data Structures That Power Modern Databases</p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#skip-list","title":"Skip List","text":"<p>Skip List l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u x\u00e1c su\u1ea5t \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 c\u00e0i \u0111\u1eb7t m\u1ed9t map ho\u1eb7c set \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp. </p> <p></p> <p>N\u00f3 l\u00e0 l\u1ef1a ch\u1ecdn thay th\u1ebf cho c\u00e2y c\u00e2n b\u1eb1ng. Skip list cho ph\u00e9p t\u00ecm ki\u1ebfm, ch\u00e8n v\u00e0 x\u00f3a m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p></p> <p>Trong c\u00e1c database in-memory nh\u01b0 Redis, Skip List \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 tri\u1ec3n khai c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp nh\u01b0 Sorted Sets v\u00e0 Sorted Lists. N\u00f3 cho ph\u00e9p t\u00ecm ki\u1ebfm nhanh, truy v\u1ea5n \u0111o\u1ea1n v\u00e0 c\u00e1c truy v\u1ea5n kh\u00e1c n\u1eefa.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#hash-index","title":"Hash Index","text":"<p>Hash index, hay c\u00f2n \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn l\u00e0 hash table (hay b\u1ea3ng b\u0103m) \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 \u00e1nh x\u1ea1 c\u00e1c key t\u1edbi c\u00e1c value m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng h\u00e0m hash \u0111\u1ec3 t\u1ea1o ra gi\u00e1 tr\u1ecb hash cho m\u1ed7i key. Gi\u00e1 tr\u1ecb hash \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 nhanh ch\u00f3ng t\u00ecm th\u1ea5y value trong b\u1ea3ng, cho ph\u00e9p t\u00ecm ki\u1ebfm, ch\u00e8n v\u00e0 x\u00f3a nhanh ch\u00f3ng. </p> <p></p> <p></p> <p>Hash index l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u ph\u1ed5 bi\u1ebfn. N\u00f3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 tri\u1ec3n khai c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u d\u1ea1ng hash table nh\u01b0 Hashes trong Redis, nh\u01b0ng c\u0169ng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i trong t\u1ea5t c\u1ea3 c\u00e1c lo\u1ea1i database.</p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#sstable-va-lsm-tree","title":"SSTable v\u00e0 LSM Tree","text":"<p>SSTable v\u00e0 c\u00e2y LSM \u0111i \u0111\u00f4i v\u1edbi nhau. SSTable (Sorted Strings Table hay b\u1ea3ng l\u01b0u c\u00e1c x\u00e2u \u0111\u00e3 s\u1eafp x\u1ebfp) \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u d\u1eef li\u1ec7u tr\u00ean \u0111\u0129a theo th\u1ee9 t\u1ef1 s\u1eafp x\u1ebfp. N\u00f3 l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u d\u1ef1a tr\u00ean file \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u tr\u1eef l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 v\u00e0 g\u1ecdn nh\u1eb9 nh\u1ea5t. </p> <p>SSTable l\u00e0 m\u1ed9t th\u00e0nh ph\u1ea7n c\u1ed1t l\u00f5i c\u1ee7a c\u00e2y LSM. Th\u00e0nh ph\u1ea7n c\u00f2n l\u1ea1i l\u00e0 MemTable. Memtable l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u in-memory l\u01b0u tr\u1eef c\u00e1c l\u1ea7n ghi g\u1ea7n \u0111\u00e2y. SSTable v\u00e0 Memtable l\u00e0m vi\u1ec7c c\u00f9ng nhau \u0111\u1ec3 x\u1eed l\u00fd l\u01b0\u1ee3ng l\u1edbn c\u00e1c thao t\u00e1c ghi. V\u1ec1 c\u00e2y LSM th\u00ec tr\u00ean trang c\u0169ng \u0111\u00e3 c\u00f3 m\u1ed9t b\u00e0i ri\u00eang r\u1ed3i, b\u1ea1n h\u00e3y t\u00ecm \u0111\u1ecdc tr\u00ean thanh t\u00ecm ki\u1ebfm nh\u00e9. C\u00e2y LSM l\u00e0 th\u00e0nh ph\u1ea7n quan tr\u1ecdng c\u1ee7a c\u00e1c database NoSQL ph\u1ed5 bi\u1ebfn nh\u01b0 Apache Cassandra, RocksDB v\u00e0 LevelDB.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#b-tree","title":"B-Tree","text":"<p>Ti\u1ebfp theo l\u00e0 h\u1ecd c\u00e2y B-tree. C\u00e2y B+tree c\u0169ng n\u1eb1m trong l\u1edbp n\u00e0y. H\u1ecd c\u00e2y B-tree \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u tr\u1eef v\u00e0 truy xu\u1ea5t l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u tr\u00ean \u0111\u0129a m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3. C\u00e2y B-tree l\u00e0 m\u1ed9t c\u00e2y c\u00e2n b\u1eb1ng, m\u1ed7i node c\u00f3 th\u1ec3 c\u00f3 nhi\u1ec1u con v\u00e0 l\u01b0u d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp. </p> <p></p> <p>C\u00e2y B+tree l\u00e0 m\u1ed9t lo\u1ea1i c\u1ee7a c\u00e2y B-tree, trong \u0111\u00f3 t\u1ea5t c\u1ea3 d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong c\u00e1c node l\u00e1 v\u00e0 c\u00e1c node c\u00f2n l\u1ea1i ch\u1ec9 l\u01b0u key.</p> <p></p> <p>H\u1ecd c\u00e2y B-tree \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i trong c\u00e1c database nh\u01b0 MySQL, Postgres v\u00e0 Oracle \u0111\u1ec3 x\u1eed l\u00fd l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u tr\u00ean \u0111\u0129a.</p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#inverted-index","title":"Inverted Index","text":"<p>Inverted Index \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 t\u00ecm ki\u1ebfm v\u00e0 truy xu\u1ea5t d\u1eef li\u1ec7u t\u1eeb m\u1ed9t t\u1eadp h\u1ee3p l\u1edbn c\u00e1c t\u00e0i li\u1ec7u v\u0103n b\u1ea3n. N\u00f3 t\u1ea1o ra m\u1ed9t \u00e1nh x\u1ea1 t\u1eeb c\u00e1c t\u1eeb t\u1edbi c\u00e1c t\u00e0i li\u1ec7u ch\u1ee9a ch\u00fang. Index n\u00e0y \u0111\u01b0\u1ee3c \"inverted\" (\u0111\u1ea3o) v\u00ec n\u00f3 \u00e1nh x\u1ea1 t\u1eeb c\u00e1c t\u1eeb t\u1edbi c\u00e1c t\u00e0i li\u1ec7u, ch\u1ee9 kh\u00f4ng ph\u1ea3i ng\u01b0\u1ee3c l\u1ea1i. Inverted index \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i trong c\u00e1c search engine nh\u01b0 ElasticSearch.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#suffix-tree","title":"Suffix Tree","text":"<p>Suffix tree (c\u00e2y h\u1eadu t\u1ed1) \u0111\u01b0\u1ee3c d\u00f9ng trong c\u00e1c database \u0111\u1ec3 t\u0103ng t\u1ed1c t\u00ecm ki\u1ebfm v\u0103n b\u1ea3n. N\u00f3 c\u00f3 th\u1ec3 t\u00ecm t\u1ea5t c\u1ea3 nh\u1eefng ch\u1ed7 xu\u1ea5t hi\u1ec7n c\u1ee7a t\u1eeb c\u1ea7n t\u00ecm trong m\u1ed9t t\u1eadp l\u1edbn c\u00e1c t\u00e0i li\u1ec7u m\u1ed9t c\u00e1ch nhanh ch\u00f3ng.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures-in-modern-databases/#r-tree","title":"R-Tree","text":"<p>R-Tree l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u ch\u1ec9 s\u1ed1 kh\u00f4ng gian \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u tr\u1eef v\u00e0 truy xu\u1ea5t d\u1eef li\u1ec7u kh\u00f4ng gian nh\u01b0 c\u00e1c h\u00ecnh ch\u1eef nh\u1eadt ho\u1eb7c \u0111a gi\u00e1c. N\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 t\u00ecm ki\u1ebfm d\u1eef li\u1ec7u kh\u00f4ng gian m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3. R-Tree \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i trong c\u00e1c database kh\u00f4ng gian nh\u01b0 PostGIS, MongoDB v\u00e0 Elasticsearch.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/","title":"10 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u m\u00e0 ch\u00fang ta d\u00f9ng m\u1ed7i ng\u00e0y","text":""},{"location":"ByteByteGo/key-data-structures/#nguon","title":"Ngu\u1ed3n","text":"<p> 10 Key Data Structures We Use Every Day</p>"},{"location":"ByteByteGo/key-data-structures/#danh-sach-list","title":"Danh s\u00e1ch (List)","text":"<p>Danh s\u00e1ch (List) l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u linh ho\u1ea1t v\u00e0 quan tr\u1ecdng trong ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m. Danh s\u00e1ch \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u tr\u1eef v\u00e0 thao t\u00e1c v\u1edbi d\u1eef li\u1ec7u c\u00f3 th\u1ee9 t\u1ef1. N\u00f3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong nhi\u1ec1u \u1ee9ng d\u1ee5ng kh\u00e1c nhau nh\u01b0 qu\u1ea3n l\u00fd t\u00e1c v\u1ee5, feed tr\u00ean m\u1ea1ng x\u00e3 h\u1ed9i, qu\u1ea3n l\u00fd s\u1edf th\u00edch ng\u01b0\u1eddi d\u00f9ng hay gi\u1ecf h\u00e0ng mua s\u1eafm.</p> <p></p> <p>Trong \u1ee9ng d\u1ee5ng qu\u1ea3n l\u00fd t\u00e1c v\u1ee5, m\u1ed9t danh s\u00e1ch c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u v\u00e0 t\u1ed5 ch\u1ee9c c\u00e1c t\u00e1c v\u1ee5 cho m\u1ed7i ng\u01b0\u1eddi d\u00f9ng. C\u00e1c t\u00e1c v\u1ee5 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c th\u00eam, b\u1edbt ho\u1eb7c s\u1eafp x\u1ebfp l\u1ea1i m\u1ed9t c\u00e1ch d\u1ec5 d\u00e0ng, v\u00e0 ng\u01b0\u1eddi d\u00f9ng c\u0169ng c\u00f3 th\u1ec3 \u0111\u00e1nh d\u1ea5u ch\u00fang \u0111\u00e3 ho\u00e0n th\u00e0nh hay ch\u01b0a.</p> <p>Danh s\u00e1ch c\u0169ng r\u1ea5t h\u1eefu \u00edch trong c\u00e1c \u1ee9ng d\u1ee5ng m\u1ea1ng x\u00e3 h\u1ed9i nh\u01b0 Twitter, n\u01a1i ch\u00fang c\u00f3 th\u1ec3 l\u01b0u tr\u1eef v\u00e0 hi\u1ec3n th\u1ecb feed c\u1ee7a ng\u01b0\u1eddi d\u00f9ng theo th\u1eddi gian th\u1ef1c, \u0111\u1ea3m b\u1ea3o r\u1eb1ng c\u00e1c n\u1ed9i dung m\u1edbi nh\u1ea5t \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb theo th\u1ee9 t\u1ef1 ch\u00ednh x\u00e1c.</p>"},{"location":"ByteByteGo/key-data-structures/#mang-array","title":"M\u1ea3ng (Array)","text":"<p>M\u1ea3ng (Array) l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u c\u01a1 b\u1ea3n kh\u00e1c. N\u00f3 cung c\u1ea5p m\u1ed9t t\u1eadp c\u00e1c ph\u1ea7n t\u1eed c\u00f3 k\u00edch th\u01b0\u1edbc c\u1ed1 \u0111\u1ecbnh v\u00e0 theo th\u1ee9 t\u1ef1. N\u00f3 \u0111\u1eb7c bi\u1ec7t ph\u00f9 h\u1ee3p cho nh\u1eefng t\u00ecnh hu\u1ed1ng m\u00e0 k\u00edch th\u01b0\u1edbc t\u1eadp \u0111\u00e3 \u0111\u01b0\u1ee3c bi\u1ebft ho\u1eb7c kh\u00f4ng thay \u0111\u1ed5i th\u01b0\u1eddng xuy\u00ean. M\u1ea3ng th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong c\u00e1c ph\u00e9p to\u00e1n to\u00e1n h\u1ecdc, l\u01b0u tr\u1eef t\u1eadp d\u1eef li\u1ec7u l\u1edbn ho\u1eb7c khi c\u1ea7n truy c\u1eadp ng\u1eabu nhi\u00ean v\u00e0o c\u00e1c ph\u1ea7n t\u1eed.</p> <p></p> <p>V\u00ed d\u1ee5, trong m\u1ed9t \u1ee9ng d\u1ee5ng th\u1eddi ti\u1ebft, m\u1ed9t m\u1ea3ng c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 l\u01b0u c\u00e1c ch\u1ec9 s\u1ed1 nhi\u1ec7t \u0111\u1ed9 c\u1ee7a m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m c\u1ee5 th\u1ec3 trong m\u1ed9t kho\u1ea3ng th\u1eddi gian x\u00e1c \u0111\u1ecbnh, cho ph\u00e9p d\u1ec5 d\u00e0ng t\u00ednh to\u00e1n c\u00e1c gi\u00e1 tr\u1ecb trung b\u00ecnh v\u00e0 xu h\u01b0\u1edbng th\u1eddi ti\u1ebft. M\u1ea3ng c\u0169ng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng nhi\u1ec1u trong x\u1eed l\u00fd \u1ea3nh, n\u01a1i d\u1eef li\u1ec7u m\u00e0u c\u1ee7a t\u1eebng pixel c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c bi\u1ec3u di\u1ec5n trong m\u1ed9t m\u1ea3ng hai chi\u1ec1u, gi\u00fap ta d\u1ec5 d\u00e0ng thao t\u00e1c v\u00e0 bi\u1ebfn \u0111\u1ed5i h\u00ecnh \u1ea3nh.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#ngan-xep-stack","title":"Ng\u0103n x\u1ebfp (Stack)","text":"<p>Ng\u0103n x\u1ebfp (Stack) tu\u00e2n theo nguy\u00ean t\u1eafc Last-In-First-Out (LIFO). </p> <p></p> <p>Ng\u0103n x\u1ebfp r\u1ea5t ph\u00f9 h\u1ee3p cho vi\u1ec7c h\u1ed7 tr\u1ee3 c\u00e1c thao t\u00e1c undo/redo trong c\u00e1c tr\u00ecnh so\u1ea1n th\u1ea3o v\u0103n b\u1ea3n ho\u1eb7c qu\u1ea3n l\u00fd l\u1ecbch s\u1eed duy\u1ec7t web. Trong m\u1ed9t tr\u00ecnh so\u1ea1n th\u1ea3o v\u0103n b\u1ea3n, ng\u0103n x\u1ebfp c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 l\u01b0u m\u1ed7i thay \u0111\u1ed5i m\u00e0 ng\u01b0\u1eddi d\u00f9ng th\u1ef1c hi\u1ec7n v\u1edbi v\u0103n b\u1ea3n, gi\u00fap quay tr\u1edf l\u1ea1i tr\u1ea1ng th\u00e1i tr\u01b0\u1edbc \u0111\u00f3 m\u1ed9t c\u00e1ch d\u1ec5 d\u00e0ng v\u1edbi thao t\u00e1c undo.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#hang-oi-queue","title":"H\u00e0ng \u0111\u1ee3i (Queue)","text":"<p>H\u00e0ng \u0111\u1ee3i (Queue) ho\u1ea1t \u0111\u1ed9ng theo nguy\u00ean t\u1eafc First-In-First-Out (FIFO). </p> <p></p> <p>N\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng trong qu\u1ea3n l\u00fd in \u1ea5n, g\u1eedi c\u00e1c h\u00e0nh \u0111\u1ed9ng c\u1ee7a ng\u01b0\u1eddi ch\u01a1i trong game, hay x\u1eed l\u00fd c\u00e1c tin nh\u1eafn trong \u1ee9ng d\u1ee5ng chat. Trong \u1ee9ng d\u1ee5ng chat, h\u00e0ng \u0111\u1ee3i c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u c\u00e1c tin nh\u1eafn \u0111\u1ebfn theo tr\u00ecnh t\u1ef1 \u0111\u01b0\u1ee3c nh\u1eadn, d\u1ea3m b\u1ea3o r\u1eb1ng ch\u00fang \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb cho ng\u01b0\u1eddi nh\u1eadn theo \u0111\u00fang th\u1ee9 t\u1ef1.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#heap","title":"Heap","text":"<p>Heap \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho vi\u1ec7c l\u1eadp l\u1ecbch t\u00e1c v\u1ee5 v\u00e0 qu\u1ea3n l\u00fd b\u1ed9 nh\u1edb. N\u00f3 \u0111\u1eb7c bi\u1ec7t h\u1eefu \u00edch trong vi\u1ec7c tri\u1ec3n khai h\u00e0ng \u0111\u1ee3i \u01b0u ti\u00ean, n\u01a1i ch\u00fang ta c\u1ea7n truy c\u1eadp m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 v\u00e0o ph\u1ea7n t\u1eed c\u00f3 m\u1ee9c \u0111\u1ed9 \u01b0u ti\u00ean cao nh\u1ea5t ho\u1eb7c th\u1ea5p nh\u1ea5t.</p> <p></p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#cay-tree","title":"C\u00e2y (Tree)","text":"<p>C\u00e2y (Tree) t\u1ed5 ch\u1ee9c d\u1eef li\u1ec7u theo c\u1ea5u tr\u00fac ph\u00e2n c\u1ea5p. N\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 bi\u1ec3u di\u1ec5n d\u1eef li\u1ec7u c\u00f3 c\u00e1c m\u1ed1i quan h\u1ec7 t\u1ef1 nhi\u00ean ho\u1eb7c ph\u00e2n c\u1ea5p. C\u00e2y \u0111\u01b0\u1ee3c \u1ee9ng d\u1ee5ng trong nhi\u1ec1u l\u0129nh v\u1ef1c, nh\u01b0 index trong database, vi\u1ec7c ra quy\u1ebft \u0111\u1ecbnh c\u1ee7a AI, v\u00e0 h\u1ec7 th\u1ed1ng file. </p> <p></p> <p>Trong vi\u1ec7c ra quy\u1ebft \u0111\u1ecbnh c\u1ee7a AI, c\u00e1c lo\u1ea1i c\u00e2y nh\u01b0 decision tree \u0111\u01b0\u1ee3c d\u00f9ng trong machine learning \u0111\u1ec3 th\u1ef1c hi\u1ec7n c\u00e1c t\u00e1c v\u1ee5 ph\u00e2n lo\u1ea1i. </p> <p></p> <p>C\u00e2y c\u0169ng \u0111\u01b0\u1ee3c d\u00f9ng trong index database, n\u01a1i n\u00f3 gi\u00fap t\u0103ng t\u1ed1c t\u00ecm ki\u1ebfm, th\u00eam ho\u1eb7c x\u00f3a d\u1eef li\u1ec7u. V\u00ed d\u1ee5, B-tree v\u00e0 B+ tree \u0111\u01b0\u1ee3c d\u00f9ng nhi\u1ec1u trong c\u01a1 s\u1eed d\u1eef li\u1ec7u quan h\u1ec7 \u0111\u1ec3 qu\u1ea3n l\u00fd v\u00e0 index l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#bang-bam-hash-table","title":"B\u1ea3ng b\u0103m (Hash Table)","text":"<p>B\u1ea3ng b\u0103m (Hash Table) cho ph\u00e9p tra c\u1ee9u, th\u00eam v\u00e0 x\u00f3a d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3. N\u00f3 s\u1eed d\u1ee5ng h\u00e0m b\u0103m \u0111\u1ec3 \u00e1nh x\u1ea1 c\u00e1c key v\u00e0o v\u1ecb tr\u00ed l\u01b0u tr\u1eef t\u01b0\u01a1ng \u1ee9ng. N\u00f3 cho ph\u00e9p truy c\u1eadp d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch nhanh ch\u00f3ng v\u1edbi th\u1eddi gian truy c\u1eadp l\u00e0 h\u1eb1ng s\u1ed1. </p> <p></p> <p>B\u1ea3ng b\u0103m \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i trong nhi\u1ec1u \u1ee9ng d\u1ee5ng, nh\u01b0 c\u00e1c c\u00f4ng c\u1ee5 t\u00ecm ki\u1ebfm, h\u1ec7 th\u1ed1ng cache, v\u00e0 tr\u00ecnh th\u00f4ng d\u1ecbch ho\u1eb7c bi\u00ean d\u1ecbch ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh. Trong c\u00e1c c\u00f4ng c\u1ee5 t\u00ecm ki\u1ebfm, b\u1ea3ng b\u0103m c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u tr\u1eef v\u00e0 truy c\u1eadp nhanh ch\u00f3ng d\u1eef li\u1ec7u \u0111\u00e3 \u0111\u01b0\u1ee3c index d\u1ef1a tr\u00ean c\u00e1c t\u1eeb kh\u00f3a. \u0110i\u1ec1u n\u00e0y gi\u00fap cung c\u1ea5p k\u1ebft qu\u1ea3 t\u00ecm ki\u1ebfm nhanh ch\u00f3ng v\u00e0 ch\u00ednh x\u00e1c. </p> <p></p> <p>C\u00e1c h\u1ec7 th\u1ed1ng cache c\u0169ng d\u00f9ng b\u1ea3ng b\u0103m \u0111\u1ec3 l\u01b0u v\u00e0 qu\u1ea3n l\u00fd d\u1eef li\u1ec7u cache. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p truy c\u1eadp nhanh ch\u00f3ng \u0111\u1ebfn c\u00e1c t\u00e0i nguy\u00ean \u0111\u01b0\u1ee3c y\u00eau c\u1ea7u th\u01b0\u1eddng xuy\u00ean v\u00e0 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t h\u1ec7 th\u1ed1ng. M\u1ed9t v\u00ed d\u1ee5 kh\u00e1c l\u00e0 vi\u1ec7c tri\u1ec3n khai b\u1ea3ng k\u00fd hi\u1ec7u trong tr\u00ecnh th\u00f4ng d\u1ecbch ho\u1eb7c bi\u00ean d\u1ecbch c\u1ee7a ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh. B\u1ea3ng b\u0103m c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 qu\u1ea3n l\u00fd v\u00e0 tra c\u1ee9u bi\u1ebfn, h\u00e0m v\u00e0 c\u00e1c k\u00fd hi\u1ec7u kh\u00e1c \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a trong code.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#cay-hau-to-suffix-tree","title":"C\u00e2y h\u1eadu t\u1ed1 (Suffix Tree)","text":"<p>C\u00e2y h\u1eadu t\u1ed1 (Suffix Tree) \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u h\u00f3a cho vi\u1ec7c t\u00ecm ki\u1ebfm chu\u1ed7i trong t\u00e0i li\u1ec7u. \u0110i\u1ec1u n\u00e0y gi\u00fap ch\u00fang tr\u1edf th\u00e0nh l\u1ef1a ch\u1ecdn s\u1ed1 1 cho c\u00e1c tr\u00ecnh so\u1ea1n th\u1ea3o v\u0103n b\u1ea3n v\u00e0 thu\u1eadt to\u00e1n t\u00ecm ki\u1ebfm. Trong c\u00e1c c\u00f4ng c\u1ee5 t\u00ecm ki\u1ebfm, c\u00e2y h\u1eadu t\u1ed1 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh t\u1ea5t c\u1ea3 c\u00e1c v\u1ecb tr\u00ed xu\u1ea5t hi\u1ec7n c\u1ee7a m\u1ed9t t\u1eeb kh\u00f3a t\u00ecm ki\u1ebfm trong m\u1ed9t ngu\u1ed3n d\u1eef li\u1ec7u v\u0103n b\u1ea3n l\u1edbn.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#o-thi-graph","title":"\u0110\u1ed3 th\u1ecb (Graph)","text":"<p>\u0110\u1ed3 th\u1ecb (Graph) l\u00e0 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u quan tr\u1ecdng trong vi\u1ec7c theo d\u00f5i m\u1ed1i quan h\u1ec7 ho\u1eb7c t\u00ecm \u0111\u01b0\u1eddng \u0111i. \u1ee8ng d\u1ee5ng c\u1ee7a \u0111\u1ed3 th\u1ecb l\u00e0 trong m\u1ea1ng x\u00e3 h\u1ed9i, c\u00e1c c\u00f4ng c\u1ee5 g\u1ee3i \u00fd v\u00e0 c\u00e1c thu\u1eadt to\u00e1n t\u00ecm \u0111\u01b0\u1eddng \u0111i. Trong m\u1ea1ng x\u00e3 h\u1ed9i, \u0111\u1ed3 th\u1ecb c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 bi\u1ec3u th\u1ecb k\u1ebft n\u1ed1i gi\u1eefa nh\u1eefng ng\u01b0\u1eddi d\u00f9ng v\u1edbi nhau, gi\u00fap cung c\u1ea5p c\u00e1c t\u00ednh n\u0103ng nh\u01b0 g\u1ee3i \u00fd k\u1ebft b\u1ea1n hay ph\u00e2n t\u00edch xu h\u01b0\u1edbng k\u1ebft n\u1ed1i.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#r-trees","title":"R-trees","text":"<p>R-tree \u0111\u01b0\u1ee3c d\u00f9ng nhi\u1ec1u trong vi\u1ec7c t\u00ecm ki\u1ebfm c\u00e1c \u0111i\u1ec3m g\u1ea7n nh\u1ea5t, g\u00e1n v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng b\u1ea3n \u0111\u1ed3 v\u00e0 d\u1ecbch v\u1ee5 \u0111\u1ecbnh v\u1ecb. Trong \u1ee9ng d\u1ee5ng b\u1ea3n \u0111\u1ed3, R-tree c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 l\u01b0u tr\u1eef d\u1eef li\u1ec7u kh\u00f4ng gian nh\u01b0 c\u00e1c n\u01a1i m\u00e0 ng\u01b0\u1eddi d\u00f9ng quan t\u00e2m, cho ph\u00e9p truy v\u1ea5n hi\u1ec7u qu\u1ea3 \u0111\u1ec3 t\u00ecm c\u00e1c \u0111\u1ecba \u0111i\u1ec3m g\u1ea7n nh\u1ea5t d\u1ef1a tr\u00ean v\u1ecb tr\u00ed hi\u1ec7n t\u1ea1i c\u1ee7a ng\u01b0\u1eddi d\u00f9ng.</p> <p></p>"},{"location":"ByteByteGo/key-data-structures/#tinh-than-thien-cua-cache-va-su-lien-quan-en-cac-cau-truc-du-lieu","title":"T\u00ednh th\u00e2n thi\u1ec7n c\u1ee7a cache v\u00e0 s\u1ef1 li\u00ean quan \u0111\u1ebfn c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u","text":"<p>Cache trong CPU l\u00e0 m\u1ed9t b\u1ed9 nh\u1edb \u0111\u1ec7m nh\u1ecf v\u00e0 nhanh, n\u1eb1m gi\u1eefa RAM v\u00e0 CPU. N\u00f3 l\u01b0u tr\u1eef c\u00e1c d\u1eef li\u1ec7u v\u00e0 l\u1ec7nh \u0111\u00e3 truy c\u1eadp g\u1ea7n \u0111\u00e2y \u0111\u1ec3 CPU c\u00f3 th\u1ec3 d\u00f9ng m\u1ed9t c\u00e1ch nhanh ch\u00f3ng m\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i truy v\u1ea5n RAM, ch\u1eadm h\u01a1n cache. C\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u kh\u00e1c nhau c\u00f3 m\u1ee9c \u0111\u1ed9 th\u00e2n thi\u1ec7n v\u1edbi b\u1ed9 nh\u1edb cache kh\u00e1c nhau d\u1ef1a tr\u00ean c\u00e1ch c\u00e1c ph\u1ea7n t\u1eed c\u1ee7a ch\u00fang \u0111\u01b0\u1ee3c l\u01b0u trong b\u1ed9 nh\u1edb.</p> <p>Vi\u1ec7c l\u01b0u tr\u1eef trong c\u00e1c \u00f4 nh\u1edb li\u00ean ti\u1ebfp, nh\u01b0 trong m\u1ea3ng, cho ph\u00e9p t\u00ednh c\u1ee5c b\u1ed9 c\u1ee7a c\u00e1ch t\u1ed1t h\u01a1n v\u00e0 \u00edt cache miss h\u01a1n, qua \u0111\u00f3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t. Khi m\u1ed9t ph\u1ea7n t\u1eed c\u1ee7a m\u1ea3ng \u0111\u01b0\u1ee3c truy c\u1eadp, cache c\u00f3 th\u1ec3 t\u1ea3i tr\u01b0\u1edbc v\u00e0 l\u01b0u tr\u1eef c\u00e1c ph\u1ea7n t\u1eed l\u00e2n c\u1eadn, d\u1ef1 \u0111o\u00e1n r\u1eb1ng ch\u00fang c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c truy c\u1eadp sau n\u00e0y. </p> <p></p> <p>Ng\u01b0\u1ee3c l\u1ea1i, c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u c\u00f3 l\u01b0u tr\u1eef kh\u00f4ng li\u00ean t\u1ee5c, nh\u01b0 danh s\u00e1ch li\u00ean k\u1ebft, c\u00f3 th\u1ec3 g\u1eb7p nhi\u1ec1u cache miss v\u00e0 hi\u1ec7u su\u1ea5t gi\u1ea3m. Trong danh s\u00e1ch li\u00ean k\u1ebft, c\u00e1c ph\u1ea7n t\u1eed \u0111\u01b0\u1ee3c l\u01b0u trong c\u00e1c node ph\u00e2n t\u00e1n kh\u1eafp b\u1ed9 nh\u1edb, v\u00e0 m\u1ed7i node ch\u1ee9a m\u1ed9t con tr\u1ecf \u0111\u1ebfn node ti\u1ebfp theo trong chu\u1ed7i. \u0110i\u1ec1u n\u00e0y l\u00e0m cho CPU kh\u00f3 d\u1ef1 \u0111o\u00e1n v\u00e0 t\u1ea3i tr\u01b0\u1edbc node ti\u1ebfp theo khi c\u1ea7n.</p> <p></p> <p>C\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u kh\u00e1c, nh\u01b0 c\u00e2y, b\u1ea3ng b\u0103m v\u00e0 \u0111\u1ed3 th\u1ecb, c\u0169ng c\u00f3 m\u1ee9c \u0111\u1ed9 th\u00e2n thi\u1ec7n v\u1edbi cache kh\u00e1c nhau d\u1ef1a tr\u00ean c\u00e1ch tri\u1ec3n khai v\u00e0 c\u00e1ch s\u1eed d\u1ee5ng. S\u1ef1 ch\u00eanh l\u1ec7ch v\u1ec1 th\u1eddi gian truy c\u1eadp n\u00e0y c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn v\u1ea5n \u0111\u1ec1 hi\u1ec7u su\u1ea5t trong m\u00e1y t\u00ednh hi\u1ec7n \u0111\u1ea1i, \u0111\u1eb7c bi\u1ec7t trong c\u00e1c t\u00ecnh hu\u1ed1ng m\u00e0 cache miss x\u1ea3y ra th\u01b0\u1eddng xuy\u00ean. Ch\u00fang ta c\u1ea7n ch\u00fa \u00fd \u0111\u1ebfn \u0111i\u1ec1u n\u00e0y khi l\u00e0m vi\u1ec7c v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng y\u00eau c\u1ea7u hi\u1ec7u su\u1ea5t cao v\u00e0 ch\u1ecdn c\u1ea5u tr\u00fac d\u1eef li\u1ec7u ph\u00f9 h\u1ee3p d\u1ef1a tr\u00ean y\u00eau c\u1ea7u v\u00e0 r\u00e0ng bu\u1ed9c c\u1ee5 th\u1ec3 c\u1ee7a d\u1ef1 \u00e1n.</p>"},{"location":"ByteByteGo/kubernetes/","title":"Ki\u1ebfn tr\u00fac Kubernetes","text":""},{"location":"ByteByteGo/kubernetes/#nguon","title":"Ngu\u1ed3n","text":"<p> Kubernetes Explained in 6 Minutes | k8s Architecture</p>"},{"location":"ByteByteGo/kubernetes/#kubernetes-la-gi","title":"Kubernetes l\u00e0 g\u00ec?","text":"<p>Kubernetes l\u00e0 m\u1ed9t n\u1ec1n t\u1ea3ng \u0111i\u1ec1u ph\u1ed1i container m\u00e3 ngu\u1ed3n m\u1edf. N\u00f3 t\u1ef1 \u0111\u1ed9ng ho\u00e1 vi\u1ec7c deploy, m\u1edf r\u1ed9ng quy m\u00f4 v\u00e0 qu\u1ea3n l\u00fd c\u00e1c \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i.</p> <p></p> <p></p> <p>Kubernetes c\u00f3 kh\u1edfi \u0111i\u1ec3m l\u00e0 h\u1ec7 th\u1ed1ng \u0111i\u1ec1u ph\u1ed1i container n\u1ed9i b\u1ed9 c\u1ee7a Google, t\u00ean l\u00e0 Borg. N\u00f3 qu\u1ea3n l\u00fd vi\u1ec7c tri\u1ec3n khai h\u00e0ng ng\u00e0n \u1ee9ng d\u1ee5ng trong n\u1ed9i b\u1ed9 Google. V\u00e0o n\u0103m 2014, Google c\u00f4ng b\u1ed1 m\u1ed9t phi\u00ean b\u1ea3n m\u00e3 ngu\u1ed3n m\u1edf c\u1ee7a Borg, \u0111\u00f3 ch\u00ednh l\u00e0 Kubernetes.</p> <p></p> <p>Sao n\u00f3 l\u1ea1i \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 k8s? T\u01b0\u01a1ng t\u1ef1 v\u1edbi i18n v\u1edbi internationalization v\u00e0 l10n v\u1edbi localization, s\u1ed1 8 trong k8s ch\u1ec9 8 k\u00fd t\u1ef1 n\u1eb1m gi\u1eefa ch\u1eef k v\u00e0 s trong kubernetes.</p>"},{"location":"ByteByteGo/kubernetes/#cac-thanh-phan-trong-kubernetes","title":"C\u00e1c th\u00e0nh ph\u1ea7n trong Kubernetes","text":"<p>M\u1ed9t c\u1ee5m Kubernetes l\u00e0 m\u1ed9t t\u1eadp c\u00e1c m\u00e1y, g\u1ecdi l\u00e0 c\u00e1c node, \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 ch\u1ea1y c\u00e1c \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i. </p> <p></p> <p>C\u00f3 hai ph\u1ea7n c\u1ed1t l\u00f5i trong m\u1ed9t c\u1ee5m Kubernetes. \u0110\u1ea7u ti\u00ean l\u00e0 ph\u1ea7n \u0111i\u1ec1u khi\u1ec3n (control plane). N\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i c\u1ee7a c\u1ee5m. Trong m\u00f4i tr\u01b0\u1eddng th\u1ef1c t\u1ebf, control plane th\u01b0\u1eddng ch\u1ea1y tr\u00ean nhi\u1ec1u node, tr\u1ea3i r\u1ed9ng tr\u00ean m\u1ed9t s\u1ed1 v\u00f9ng data center. </p> <p></p> <p>Th\u1ee9 hai l\u00e0 c\u00e1c worker node. C\u00e1c node n\u00e0y ch\u1ea1y vi\u1ec7c cho \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i. C\u00e1c \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u1ecdi ch\u1ea1y trong m\u1ed9t Pod. </p> <p></p> <p>Pod l\u00e0 \u0111\u01a1n v\u1ecb tri\u1ec3n khai nh\u1ecf nh\u1ea5t trong Kubernetes. M\u1ed9t pod s\u1ebd host m\u1ed9t ho\u1eb7c nhi\u1ec1u container v\u00e0 cung c\u1ea5p b\u1ed9 nh\u1edb d\u00f9ng chung c\u0169ng nh\u01b0 k\u1ebft n\u1ed1i m\u1ea1ng cho c\u00e1c container \u0111\u00f3. C\u00e1c pod \u0111\u01b0\u1ee3c t\u1ea1o ra v\u00e0 qu\u1ea3n l\u00fd b\u1edfi control plane c\u1ee7a Kubernetes. Ch\u00fang l\u00e0 c\u00e1c k\u1ebft c\u1ea5u c\u01a1 b\u1ea3n c\u1ee7a c\u00e1c \u1ee9ng d\u1ee5ng Kubernetes.</p>"},{"location":"ByteByteGo/kubernetes/#control-plane","title":"Control Plane","text":"<p>Control plane bao g\u1ed3m m\u1ed9t s\u1ed1 th\u00e0nh ph\u1ea7n ch\u00ednh. Ch\u00fang l\u00e0 API server, etcd, b\u1ed9 l\u1eadp l\u1ecbch v\u00e0 tr\u00ecnh qu\u1ea3n l\u00fd b\u1ed9 \u0111i\u1ec1u khi\u1ec3n.</p> <p>API server l\u00e0 interface ch\u00ednh gi\u1eefa control plane v\u00e0 ph\u1ea7n c\u00f2n l\u1ea1i c\u1ee7a c\u1ee5m. N\u00f3 m\u1edf m\u1ed9t API RESTful cho ph\u00e9p c\u00e1c client t\u01b0\u01a1ng t\u00e1c v\u1edbi control plane v\u00e0 g\u1eedi c\u00e1c request \u0111\u1ec3 qu\u1ea3n l\u00fd c\u1ee5m. etcd l\u00e0 m\u1ed9t kho l\u01b0u tr\u1eef key-value t\u1eeb xa. N\u00f3 l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i c\u1ee7a c\u1ee5m. N\u00f3 \u0111\u01b0\u1ee3c d\u00f9ng b\u1edfi API server v\u00e0 c\u00e1c th\u00e0nh ph\u1ea7n kh\u00e1c c\u1ee7a control plane \u0111\u1ec3 l\u01b0u v\u00e0 l\u1ea5y th\u00f4ng tin v\u1ec1 c\u1ee5m.</p> <p></p> <p></p> <p>B\u1ed9 l\u1eadp l\u1ecbch ch\u1ecbu tr\u00e1ch nhi\u1ec7m l\u1eadp l\u1ecbch cho c\u00e1c pod tr\u00ean c\u00e1c worker node trong c\u1ee5m. N\u00f3 s\u1eed d\u1ee5ng th\u00f4ng tin v\u1ec1 t\u00e0i nguy\u00ean c\u1ea7n b\u1edfi c\u00e1c pod v\u00e0 t\u00e0i nguy\u00ean \u0111ang c\u00f3 tr\u00ean c\u00e1c worker node \u0111\u1ec3 \u0111\u01b0a ra quy\u1ebft \u0111\u1ecbnh ph\u00e2n ph\u1ed1i.</p> <p>Tr\u00ecnh qu\u1ea3n l\u00fd b\u1ed9 \u0111i\u1ec1u khi\u1ec3n ch\u1ecbu tr\u00e1ch nhi\u1ec7m ch\u1ea1y c\u00e1c b\u1ed9 \u0111i\u1ec1u khi\u1ec3n qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i c\u1ee7a c\u1ee5m. M\u1ed9t s\u1ed1 v\u00ed d\u1ee5 bao g\u1ed3m b\u1ed9 \u0111i\u1ec1u khi\u1ec3n sao ch\u00e9p: \u0111\u1ea3m b\u1ea3o s\u1ed1 l\u01b0\u1ee3ng b\u1ea3n sao c\u1ee7a m\u1ed9t pod \u0111ang ho\u1ea1t \u0111\u1ed9ng; v\u00e0 b\u1ed9 \u0111i\u1ec1u khi\u1ec3n tri\u1ec3n khai: qu\u1ea3n l\u00fd c\u1eadp nh\u1eadt lu\u00e2n phi\u00ean v\u00e0 rollback c\u00e1c tri\u1ec3n khai.</p>"},{"location":"ByteByteGo/kubernetes/#worker-node","title":"Worker Node","text":"<p>Ti\u1ebfp theo, ta h\u00e3y \u0111i s\u00e2u v\u00e0o c\u00e1c worker node. C\u00e1c th\u00e0nh ph\u1ea7n c\u1ed1t l\u00f5i c\u1ee7a Kubernetes ch\u1ea1y tr\u00ean worker node bao g\u1ed3m kubelet, container runtime v\u00e0 kube-proxy. </p> <p></p> <p>Kubelet l\u00e0 m\u1ed9t daemon ch\u1ea1y tr\u00ean m\u1ed7i worker node. N\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m giao ti\u1ebfp v\u1edbi control plane. N\u00f3 nh\u1eadn ch\u1ec9 th\u1ecb t\u1eeb control plane v\u1ec1 vi\u1ec7c c\u00e1c pod n\u00e0o s\u1ebd ch\u1ea1y tr\u00ean node v\u00e0 \u0111\u1ea3m b\u1ea3o r\u1eb1ng tr\u1ea1ng th\u00e1i mong mu\u1ed1n tr\u00ean pod \u0111\u01b0\u1ee3c duy tr\u00ec.</p> <p></p> <p>Container runtime ch\u1ea1y c\u00e1c container tr\u00ean c\u00e1c worker node. N\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m k\u00e9o container image t\u1eeb registry, ch\u1ea1y v\u00e0 d\u1eebng c\u00e1c container, v\u00e0 qu\u1ea3n l\u00fd t\u00e0i nguy\u00ean c\u1ee7a c\u00e1c container. </p> <p>Kube-proxy l\u00e0 m\u1ed9t proxy m\u1ea1ng ch\u1ea1y tr\u00ean m\u1ed7i worker node. N\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m \u0111\u1ecbnh tuy\u1ebfn l\u01b0u l\u01b0\u1ee3ng \u0111\u1ebfn \u0111\u00fang pod. N\u00f3 c\u0169ng cung c\u1ea5p c\u00e2n b\u1eb1ng t\u1ea3i cho c\u00e1c pod v\u00e0 \u0111\u1ea3m b\u1ea3o l\u01b0u l\u01b0\u1ee3ng \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i \u0111\u1ec1u tr\u00ean c\u00e1c pod.</p>"},{"location":"ByteByteGo/kubernetes/#iem-manh-va-iem-yeu","title":"\u0110i\u1ec3m m\u1ea1nh v\u00e0 \u0111i\u1ec3m y\u1ebfu","text":"<p>V\u1eady khi n\u00e0o ta c\u1ea7n d\u00f9ng Kubernetes? Nh\u01b0 nhi\u1ec1u th\u1ee9 trong c\u00f4ng ngh\u1ec7 ph\u1ea7n m\u1ec1m, t\u1ea5t c\u1ea3 \u0111\u1ec1u l\u00e0 v\u1ec1 s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i.</p>"},{"location":"ByteByteGo/kubernetes/#iem-manh","title":"\u0110i\u1ec3m m\u1ea1nh","text":"<p>\u0110i\u1ec3m m\u1ea1nh c\u1ee7a Kubernetes l\u00e0 g\u00ec? Kubernetes c\u00f3 t\u00ednh m\u1edf r\u1ed9ng v\u00e0 s\u1eb5n s\u00e0ng cao. N\u00f3 cung c\u1ea5p c\u00e1c t\u00ednh n\u0103ng nh\u01b0 t\u1ef1 ph\u1ee5c h\u1ed3i, t\u1ef1 \u0111\u1ed9ng rollback v\u00e0 m\u1edf r\u1ed9ng theo chi\u1ec1u ngang. N\u00f3 gi\u00fap d\u1ec5 d\u00e0ng m\u1edf r\u1ed9ng ho\u1eb7c thu h\u1eb9p quy m\u00f4 \u1ee9ng d\u1ee5ng n\u1ebfu c\u1ea7n, cho ph\u00e9p ta ph\u1ea3n \u1ee9ng nhanh ch\u00f3ng v\u1edbi c\u00e1c thay \u0111\u1ed5i v\u1ec1 nhu c\u1ea7u. </p> <p>Kubernetes c\u0169ng c\u00f3 t\u00ednh di \u0111\u1ed9ng. N\u00f3 gi\u00fap ta tri\u1ec3n khai v\u00e0 qu\u1ea3n l\u00fd c\u00e1c \u1ee9ng d\u1ee5ng m\u1ed9t c\u00e1ch nh\u1ea5t qu\u00e1n v\u00e0 \u0111\u00e1ng tin c\u1eady b\u1ea5t k\u1ec3 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng b\u00ean d\u01b0\u1edbi c\u00f3 ra sao. N\u00f3 ch\u1ea1y t\u1ea1i ch\u1ed7, tr\u00ean \u0111\u00e1m m\u00e2y c\u00f4ng c\u1ed9ng, ho\u1eb7c trong m\u00f4i tr\u01b0\u1eddng k\u1ebft h\u1ee3p c\u1ea3 hai. N\u00f3 cung c\u1ea5p m\u1ed9t c\u00e1ch th\u1ee9c th\u1ed1ng nh\u1ea5t \u0111\u1ec3 \u0111\u00f3ng g\u00f3i, tri\u1ec3n khai v\u00e0 qu\u1ea3n l\u00fd \u1ee9ng d\u1ee5ng.</p>"},{"location":"ByteByteGo/kubernetes/#iem-yeu","title":"\u0110i\u1ec3m y\u1ebfu","text":"<p>Th\u1ebf c\u00f2n \u0111i\u1ec3m y\u1ebfu th\u00ec sao? </p> <p>\u0110i\u1ec3m y\u1ebfu s\u1ed1 m\u1ed9t l\u00e0 s\u1ef1 ph\u1ee9c t\u1ea1p. Kubernetes r\u1ea5t ph\u1ee9c t\u1ea1p \u0111\u1ec3 thi\u1ebft l\u1eadp v\u00e0 v\u1eadn h\u00e0nh. Chi ph\u00ed tr\u1ea3 tr\u01b0\u1edbc cao, \u0111\u1eb7c bi\u1ec7t v\u1edbi c\u00e1c t\u1ed5 ch\u1ee9c m\u1edbi s\u1eed d\u1ee5ng b\u1ed9 \u0111i\u1ec1u ph\u1ed1i container nh\u01b0 th\u1ebf n\u00e0y. N\u00f3 \u0111\u00f2i h\u1ecfi tr\u00ecnh \u0111\u1ed9 chuy\u00ean m\u00f4n v\u00e0 ngu\u1ed3n l\u1ef1c cao \u0111\u1ec3 thi\u1ebft l\u1eadp v\u00e0 qu\u1ea3n l\u00fd m\u00f4i tr\u01b0\u1eddng live Kubernetes. </p> <p>Th\u1ee9 hai l\u00e0 v\u1ec1 chi ph\u00ed. Kubernetes \u0111\u1ecfi h\u1ecfi m\u1ed9t m\u1ee9c t\u00e0i nguy\u00ean t\u1ed1i thi\u1ec3u nh\u1ea5t \u0111\u1ecbnh \u0111\u1ec3 ch\u1ea1y nh\u1eb1m h\u1ed7 tr\u1ee3 t\u1ea5t c\u1ea3 c\u00e1c t\u00ednh n\u0103ng m\u00e0 ta \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u1edf tr\u00ean. N\u00f3 c\u00f3 kh\u1ea3 n\u0103ng l\u00e0 tr\u00ean m\u1ee9c c\u1ea7n thi\u1ebft cho c\u00e1c doanh nghi\u1ec7p nh\u1ecf. </p> <p>C\u00f3 m\u1ed9t c\u00e1ch \u0111\u1ec3 gi\u1ea3m chi ph\u00ed l\u00e0 chuy\u1ec3n control plane sang m\u1ed9t d\u1ecbch v\u1ee5 Kubernetes \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd. C\u00e1c d\u1ecbch v\u1ee5 Kubernetes nh\u01b0 v\u1eady th\u01b0\u1eddng \u0111\u01b0\u1ee3c cung c\u1ea5p b\u1edfi nh\u00e0 cung c\u1ea5p \u0111\u00e1m m\u00e2y. C\u00e1c l\u1ef1a ch\u1ecdn ph\u1ed5 bi\u1ebfn l\u00e0 Amazon EKS, GKE tr\u00ean Google Clound, v\u00e0 AKS tr\u00ean Azure. C\u00e1c d\u1ecbch v\u1ee5 n\u00e0y cho ph\u00e9p c\u00e1c t\u1ed5 ch\u1ee9c ch\u1ea1y \u1ee9ng d\u1ee5ng Kubernetes m\u00e0 kh\u00f4ng ph\u1ea3i lo v\u1ec1 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng b\u00ean d\u01b0\u1edbi. Ch\u00fang \u0111\u1ea3m nh\u1eadn c\u00e1c t\u00e1c v\u1ee5 \u0111\u00f2i h\u1ecfi chuy\u00ean m\u00f4n s\u00e2u, nh\u01b0 vi\u1ec7c thi\u1ebft l\u1eadp v\u00e0 \u0111\u1ecbnh c\u1ea5u h\u00ecnh control plane, m\u1edf r\u1ed9ng c\u1ee5m, v\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 b\u1ea3o tr\u00ec v\u00e0 h\u1ed7 tr\u1ee3 li\u00ean t\u1ee5c. \u0110\u00e2y l\u00e0 m\u1ed9t l\u1ef1a ch\u1ecdn h\u1ee3p l\u00fd cho c\u00e1c doanh nghi\u1ec7p v\u1eeba \u0111\u1ec3 th\u1eed nghi\u1ec7m Kubernetes. C\u00f2n v\u1edbi c\u00e1c doanh nghi\u1ec7p nh\u1ecf, th\u1ef1c s\u1ef1 ch\u00fang t\u00f4i ngh\u0129 h\u1ecd s\u1ebd kh\u00f4ng c\u1ea7n \u0111\u1ebfn Kubernetes \u0111\u00e2u.</p>"},{"location":"ByteByteGo/latency-numbers/","title":"C\u00e1c m\u1ed1c \u0111\u1ed9 tr\u1ec5 m\u00e0 l\u1eadp tr\u00ecnh vi\u00ean n\u00ean bi\u1ebft","text":""},{"location":"ByteByteGo/latency-numbers/#nguon","title":"Ngu\u1ed3n","text":"<p> Latency Numbers Programmer Should Know</p>"},{"location":"ByteByteGo/latency-numbers/#tai-sao-nen-noi-ve-o-tre","title":"T\u1ea1i sao n\u00ean n\u00f3i v\u1ec1 \u0111\u1ed9 tr\u1ec5?","text":"<p>\u0110\u1ed9 tr\u1ec5 (latency) l\u00e0 m\u1ed9t y\u1ebfu t\u1ed1 quan tr\u1ecdng trong c\u00e1c h\u1ec7 th\u1ed1ng ng\u00e0y nay. Th\u1ef1c s\u1ef1 ch\u00fang ta kh\u00f4ng c\u1ea7n bi\u1ebft \u0111\u1ed9 tr\u1ec5 ch\u00ednh x\u00e1c m\u00e0 ch\u1ec9 c\u1ea7n ghi nh\u1edb m\u1ed9t s\u1ed1 kho\u1ea3ng \u0111\u1ed9 tr\u1ec5 nh\u1ea5t \u0111\u1ecbnh \u0111\u1ec3 h\u00ecnh dung ra th\u1ee9 ta \u0111ang l\u00e0m s\u1ebd t\u1ed1n kho\u1ea3ng tr\u1ec5 nh\u01b0 th\u1ebf n\u00e0o.</p> <p>Ta s\u1ebd \u0111i v\u00e0o t\u1eebng kho\u1ea3ng th\u1eddi gian tr\u1ec5 \u0111\u1ec3 xem c\u00f3 nh\u1eefng \u1ee9ng d\u1ee5ng n\u00e0o li\u00ean quan \u0111\u1ebfn ch\u00fang hay kh\u00f4ng.</p> <p></p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#1-nano-giay","title":"1 nano gi\u00e2y","text":"<p>Truy c\u1eadp v\u00e0o c\u00e1c thanh ghi CPU t\u1ed1n kho\u1ea3ng d\u01b0\u1edbi 1 nano gi\u00e2y. Ta ch\u1ec9 c\u00f3 v\u00e0i thanh ghi trong CPU nh\u01b0ng truy c\u1eadp ch\u00fang l\u1ea1i r\u1ea5t nhanh.</p> <p></p> <p>Chu k\u1ef3 xung nh\u1ecbp (clock cycle) c\u1ee7a m\u00e1y t\u00ednh c\u0169ng t\u1ed1n kho\u1ea3ng d\u01b0\u1edbi 1 nano gi\u00e2y.</p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#1-10-nano-giay","title":"1-10 nano gi\u00e2y","text":"<p>Truy c\u1eadp v\u00e0o b\u1ed9 nh\u1edb \u0111\u1ec7m (cache) L1 v\u00e0 L2 c\u1ee7a CPU t\u1ed1n t\u1eeb 1 \u0111\u1ebfn 10 nano gi\u00e2y. M\u1ed9t s\u1ed1 thao t\u00e1c t\u1ed1n k\u00e9m c\u1ee7a CPU c\u0169ng \u1edf trong kho\u1ea3ng n\u00e0y, v\u00ed d\u1ee5 nh\u01b0 branch mispredict penalty, t\u1ed1n kho\u1ea3ng 20 chu k\u1ef3 xung nh\u1ecbp.</p> <p></p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#10-100-nano-giay","title":"10-100 nano gi\u00e2y","text":"<p>Truy c\u1eadp v\u00e0o b\u1ed9 nh\u1edb \u0111\u1ec7m L3 c\u1ee7a CPU th\u01b0\u1eddng t\u1ed1n kho\u1ea3ng 10 nano gi\u00e2y. </p> <p></p> <p>V\u1edbi c\u00e1c b\u1ed9 x\u1eed l\u00fd hi\u1ec7n \u0111\u1ea1i nh\u01b0 Apple M1, tham chi\u1ebfu v\u00e0o b\u1ed9 nh\u1edb ch\u00ednh t\u1ed1n kho\u1ea3ng g\u1ea7n 100 nano gi\u00e2y. N\u00f3i c\u00e1ch kh\u00e1c, truy c\u1eadp v\u00e0o b\u1ed9 nh\u1edb ch\u00ednh c\u1ee7a m\u00e1y t\u00ednh hi\u1ec7n \u0111\u1ea1i s\u1ebd ch\u1eadm h\u01a1n v\u00e0i tr\u0103m l\u1ea7n truy c\u1eadp v\u00e0o thanh ghi CPU.</p>"},{"location":"ByteByteGo/latency-numbers/#100-1000-nano-giay","title":"100-1000 nano gi\u00e2y","text":"<p>Kho\u1ea3ng n\u00e0y s\u1ebd g\u1ed3m l\u1ec7nh g\u1ecdi h\u1ec7 th\u1ed1ng (system call). Trong Linux, g\u1ecdi m\u1ed9t l\u1ec7nh h\u1ec7 th\u1ed1ng \u0111\u01a1n gi\u1ea3n s\u1ebd t\u1ed1n kho\u1ea3ng v\u00e0i tr\u0103m nano gi\u00e2y. L\u01b0u \u00fd ph\u1ea7n l\u1edbn th\u1eddi gian trong n\u00e0y l\u00e0 chi ph\u00ed \u0111\u1ec3 di chuy\u1ec3n v\u00e0o kernel v\u00e0 \u0111i ra, th\u1eddi gian th\u1ef1c g\u1ecdi l\u1ec7nh h\u1ec7 th\u1ed1ng l\u00e0 r\u1ea5t \u00edt.</p> <p></p> <p>Ngo\u00e0i ra, ta c\u00f2n t\u1ed1n kho\u1ea3ng 200 nano gi\u00e2y \u0111\u1ec3 MD5 hash m\u1ed9t s\u1ed1 64 bit.</p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#1-10-micro-giay","title":"1-10 micro gi\u00e2y","text":"<p>Context switch gi\u1eefa c\u00e1c thread trong Linux t\u1ed1n t\u1ea7m kho\u1ea3ng v\u00e0i micro gi\u00e2y. D\u00f9 v\u1eady th\u00ec \u0111\u00e2y l\u00e0 tr\u01b0\u1eddng h\u1ee3p t\u1ed1t nh\u1ea5t \u0111\u1ec3 c\u00f3 \u0111\u1ed9 tr\u1ec5 n\u00e0y. Tu\u1ef3 v\u00e0o workload, n\u1ebfu context switch bao g\u1ed3m vi\u1ec7c mang c\u00e1c trang d\u1eef li\u1ec7u t\u1eeb b\u1ed9 nh\u1edb cho lu\u1ed3ng m\u1edbi, n\u00f3 c\u00f3 th\u1ec3 t\u1ed1n nhi\u1ec1u th\u1eddi gian h\u01a1n.</p> <p></p> <p>Copy 64KB d\u1eef li\u1ec7u t\u1eeb m\u1ed9t ch\u1ed7 trong b\u1ed9 nh\u1edb ch\u00ednh sang ch\u1ed7 kh\u00e1c (c\u0169ng trong b\u1ed9 nh\u1edb ch\u00ednh) c\u0169ng t\u1ed1n v\u00e0i micro gi\u00e2y.</p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#10-100-micro-giay","title":"10-100 micro gi\u00e2y","text":"<p>Network proxy nh\u01b0 Nginx c\u1ea7n kho\u1ea3ng 50 micro gi\u00e2y \u0111\u1ec3 x\u1eed l\u00fd m\u1ed9t HTTP request.</p> <p></p> <p>\u0110\u1ecdc 1MB li\u00ean ti\u1ebfp t\u1eeb b\u1ed9 nh\u1edb ch\u00ednh s\u1ebd t\u1ed1n kho\u1ea3ng 50 micro gi\u00e2y.</p> <p></p> <p>\u0110\u1ed9 tr\u1ec5 \u0111\u1ecdc c\u1ee7a \u1ed5 c\u1ee9ng SSD c\u0169ng trong kho\u1ea3ng n\u00e0y, t\u1ed1n t\u1ea7m 100 micro gi\u00e2y \u0111\u1ec3 \u0111\u1ecdc m\u1ed9t trang 8K.</p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#100-1000-micro-giay","title":"100-1000 micro gi\u00e2y","text":"<p>\u0110\u1ed9 tr\u1ec5 ghi c\u1ee7a \u1edf c\u1ee9ng SSD l\u1edbn h\u01a1n t\u1ea7m 10 l\u1ea7n so v\u1edbi \u0111\u1ed9 tr\u1ec5 \u0111\u1ecdc, g\u1ea7n 1000 micro gi\u00e2y \u0111\u1ec3 ghi m\u1ed9t trang.</p> <p></p> <p>Th\u1eddi gian tr\u1ec5 tr\u1ecdn v\u00f2ng c\u1ee7a m\u1ea1ng n\u1ed9i v\u00f9ng (v\u1edbi c\u00e1c n\u1ec1n t\u1ea3ng \u0111\u00e1m m\u00e2y hi\u1ec7n nay) l\u00e0 t\u1ea7m kho\u1ea3ng v\u00e0i tr\u0103m micro gi\u00e2y. Ng\u00e0y nay \u0111\u1ed9 tr\u1ec5 n\u00e0y c\u00f3 xu h\u01b0\u1edbng gi\u1ea3m, \u0111\u00f4i khi v\u1ec1 d\u01b0\u1edbi 100 micro gi\u00e2y.</p> <p></p> <p>M\u1ed9t thao t\u00e1c th\u00f4ng th\u01b0\u1eddng tr\u00ean Memcache hay Redis t\u1ed1n kho\u1ea3ng 1000 micro gi\u00e2y, bao g\u1ed3m c\u1ea3 th\u1eddi gian tr\u1ec5 tr\u1ecdn v\u00f2ng \u1edf tr\u00ean.</p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#1-10-mili-giay","title":"1-10 mili gi\u00e2y","text":"<p>Th\u1eddi gian tr\u1ec5 tr\u1ecdn v\u00f2ng c\u1ee7a m\u1ea1ng xuy\u00ean v\u00f9ng l\u00e0 v\u00e0o kho\u1ea3ng 5 mili gi\u00e2y.</p> <p></p> <p>Th\u1eddi gian t\u00ecm (seek time) c\u1ee7a \u1ed5 c\u1ee9ng c\u0169ng v\u00e0o kho\u1ea3ng 5 mili gi\u00e2y.</p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#10-100-mili-giay","title":"10-100 mili gi\u00e2y","text":"<p>Th\u1eddi gian tr\u1ec5 tr\u1ecdn v\u00f2ng c\u1ee7a b\u1edd \u0111\u00f4ng v\u00e0 b\u1edd t\u00e2y n\u01b0\u1edbc M\u1ef9, hay b\u1edd \u0111\u00f4ng n\u01b0\u1edbc M\u1ef9 v\u00e0 ch\u00e2u \u00c2u n\u1eb1m trong kho\u1ea3ng n\u00e0y.</p> <p></p> <p>\u0110\u1ecdc 1GB li\u00ean ti\u1ebfp t\u1eeb b\u1ed9 nh\u1edb ch\u00ednh c\u0169ng n\u1eb1m trong kho\u1ea3ng n\u00e0y.</p> <p></p>"},{"location":"ByteByteGo/latency-numbers/#100-1000-mili-giay","title":"100-1000 mili gi\u00e2y","text":"<p>M\u1ea5t t\u1ea7m 300 mili gi\u00e2y \u0111\u1ec3 bcrypt m\u1ed9t m\u1eadt kh\u1ea9u.</p> <p></p> <p>B\u1eaft tay TLS n\u1eb1m trong kho\u1ea3ng 250 \u0111\u1ebfn 500 mili gi\u00e2y. N\u00f3 bao g\u1ed3m nhi\u1ec1u network round trip n\u00ean con s\u1ed1 s\u1ebd tu\u1ef3 v\u00e0o kho\u1ea3ng c\u00e1ch gi\u1eefa 2 m\u00e1y.</p> <p></p> <p>Th\u1eddi gian tr\u1ec5 tr\u1ecdn v\u00f2ng v\u1edbi m\u1ea1ng t\u1eeb b\u1edd t\u00e2y n\u01b0\u1edbc M\u1ef9 \u0111\u1ebfn Singapore c\u0169ng trong kho\u1ea3ng 100 \u0111\u1ebfn 1000 mili gi\u00e2y.</p> <p></p> <p>\u0110\u1ecdc 1GB li\u00ean ti\u1ebfp t\u1eeb SSD c\u0169ng trong kho\u1ea3ng n\u00e0y.</p>"},{"location":"ByteByteGo/latency-numbers/#1-giay","title":"1 gi\u00e2y","text":"<p>Chuy\u1ec3n 1GB tr\u00ean m\u1ea1ng trong c\u00f9ng m\u1ed9t v\u00f9ng \u0111\u00e1m m\u00e2y t\u1ed1n kho\u1ea3ng 10 gi\u00e2y.</p> <p></p>"},{"location":"ByteByteGo/linux-boot-process/","title":"Linux kh\u1edfi \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"ByteByteGo/linux-boot-process/#nguon","title":"Ngu\u1ed3n","text":"<p> How Does Linux Boot Process Work?</p>"},{"location":"ByteByteGo/linux-boot-process/#qua-trinh-khoi-ong-linux","title":"Qu\u00e1 tr\u00ecnh kh\u1edfi \u0111\u1ed9ng Linux","text":"<p>Qu\u00e1 tr\u00ecnh b\u1eaft \u0111\u1ea7u khi b\u1ea1n nh\u1ea5n n\u00fat ngu\u1ed3n \u0111\u1ec3 b\u1eadt m\u00e1y t\u00ednh. \u0110\u1ea7u ti\u00ean, m\u1ed9t ch\u01b0\u01a1ng tr\u00ecnh g\u1ecdi l\u00e0 BIOS ho\u1eb7c UEFI s\u1ebd kh\u1edfi \u0111\u1ed9ng. \u0110\u00e2y v\u1ec1 c\u01a1 b\u1ea3n l\u00e0 ph\u1ea7n m\u1ec1m gi\u00fap chu\u1ea9n b\u1ecb t\u1ea5t c\u1ea3 c\u00e1c ph\u1ea7n ch\u00ednh c\u1ee7a m\u00e1y t\u00ednh s\u1eb5n s\u00e0ng ho\u1ea1t \u0111\u1ed9ng - nh\u01b0 b\u00e0n ph\u00edm, m\u00e0n h\u00ecnh, \u1ed5 c\u1ee9ng, v.v. UEFI l\u00e0 phi\u00ean b\u1ea3n m\u1edbi h\u01a1n, mang l\u1ea1i th\u1eddi gian kh\u1edfi \u0111\u1ed9ng nhanh h\u01a1n v\u00e0 c\u00e1c t\u00ednh n\u0103ng b\u1ea3o m\u1eadt t\u1ed1t h\u01a1n nh\u01b0 Secure Boot, so v\u1edbi BIOS truy\u1ec1n th\u1ed1ng.</p> <p>M\u1ed9t \u0111i\u1ec3m kh\u00e1c bi\u1ec7t ch\u00ednh gi\u1eefa BIOS v\u00e0 UEFI l\u00e0 c\u00e1ch ti\u1ebfp c\u1eadn trong vi\u1ec7c l\u01b0u tr\u1eef \u0111\u0129a. BIOS g\u1eafn li\u1ec1n v\u1edbi h\u1ec7 th\u1ed1ng Master Boot Record (MBR), gi\u1edbi h\u1ea1n k\u00edch th\u01b0\u1edbc \u1ed5 \u0111\u0129a \u1edf m\u1ee9c 2TB. Trong khi \u0111\u00f3, UEFI s\u1eed d\u1ee5ng GUID Partition Table (GPT), lo\u1ea1i b\u1ecf c\u00e1c gi\u1edbi h\u1ea1n k\u00edch th\u01b0\u1edbc n\u00e0y v\u00e0 cung c\u1ea5p gi\u1ea3i ph\u00e1p linh ho\u1ea1t v\u00e0 hi\u1ec7n \u0111\u1ea1i h\u01a1n. Ngo\u00e0i ra, BIOS kh\u1edfi \u0111\u1ed9ng ch\u1eadm h\u01a1n v\u00e0 \u00edt an to\u00e0n h\u01a1n so v\u1edbi UEFI.</p> <p>Ti\u1ebfp theo, BIOS ho\u1eb7c UEFI ch\u1ea1y m\u1ed9t c\u00e1i check g\u1ecdi l\u00e0 power-on self-test (POST). Check n\u00e0y \u0111\u1ea3m b\u1ea3o t\u1ea5t c\u1ea3 c\u00e1c ph\u1ea7n c\u1ee9ng ho\u1ea1t \u0111\u1ed9ng \u0111\u00fang tr\u01b0\u1edbc khi b\u1eadt ho\u00e0n to\u00e0n h\u1ec7 th\u1ed1ng. N\u1ebfu POST ph\u00e1t hi\u1ec7n v\u1ea5n \u0111\u1ec1, th\u01b0\u1eddng s\u1ebd c\u00f3 m\u1ed9t th\u00f4ng b\u00e1o l\u1ed7i hi\u1ec7n l\u00ean m\u00e0n h\u00ecnh.</p> <p>Cu\u1ed1i c\u00f9ng, n\u1ebfu m\u1ecdi th\u1ee9 \u0111\u1ec1u \u1ed5n, BIOS ho\u1eb7c UEFI c\u1ea7n t\u00ecm v\u00e0 t\u1ea3i ph\u1ea7n m\u1ec1m boot loader. Th\u1ee9 t\u1ef1 boot th\u01b0\u1eddng \u0111\u01b0\u1ee3c \u0111\u1eb7t \u0111\u1ec3 ki\u1ec3m tra \u1ed5 c\u1ee9ng tr\u01b0\u1edbc, sau \u0111\u00f3 \u0111\u1ebfn USB ho\u1eb7c CD n\u1ebfu kh\u00f4ng t\u00ecm th\u1ea5y g\u00ec tr\u00ean \u1ed5 c\u1ee9ng. B\u1ea1n c\u00f3 th\u1ec3 t\u00f9y ch\u1ec9nh th\u1ee9 t\u1ef1 n\u00e0y trong c\u00e0i \u0111\u1eb7t BIOS n\u1ebfu mu\u1ed1n.</p> <p>Tr\u00ean h\u1ec7 th\u1ed1ng BIOS, m\u00e3 boot loader n\u1eb1m trong m\u1ed9t ph\u1ea7n nh\u1ecf c\u1ee7a \u1ed5 c\u1ee9ng g\u1ecdi l\u00e0 Master Boot Record. </p> <p></p> <p>C\u00f2n v\u1edbi UEFI, c\u00f3 m\u1ed9t ph\u00e2n v\u00f9ng ri\u00eang l\u01b0u tr\u1eef c\u00e1c file boot loader nh\u01b0 <code>.efi</code>. </p> <p></p> <p>Nhi\u1ec7m v\u1ee5 ch\u00ednh c\u1ee7a boot loader l\u00e0:</p> <ul> <li>X\u00e1c \u0111\u1ecbnh v\u1ecb tr\u00ed kernel c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh tr\u00ean \u0111\u0129a</li> <li>T\u1ea3i kernel v\u00e0o b\u1ed9 nh\u1edb m\u00e1y t\u00ednh</li> <li>B\u1eaft \u0111\u1ea7u ch\u1ea1y m\u00e3 kernel</li> </ul> <p>M\u1ed9t s\u1ed1 boot loader ph\u1ed5 bi\u1ebfn l\u00e0 LILO v\u00e0 GRUB2. LILO (Linux Loader) \u0111\u00e3 kh\u00e1 l\u1ed7i th\u1eddi v\u00e0 hi\u1ebfm \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong c\u00e1c Linux distro hi\u1ec7n \u0111\u1ea1i. GRUB2 l\u00e0 boot loader \u0111\u1ea7y \u0111\u1ee7 t\u00ednh n\u0103ng v\u00e0 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i nh\u1ea5t hi\u1ec7n nay. N\u00f3 c\u00f3 th\u1ec3 kh\u1edfi \u0111\u1ed9ng nhi\u1ec1u h\u1ec7 \u0111i\u1ec1u h\u00e0nh, c\u00f3 giao di\u1ec7n \u0111\u1eb9p m\u1eaft v\u1edbi c\u00e1c menu \u0111\u1ed3 h\u1ecda ho\u1eb7c v\u0103n b\u1ea3n, v\u00e0 cung c\u1ea5p nhi\u1ec1u t\u00f9y ch\u1ecdn n\u00e2ng cao cho ng\u01b0\u1eddi d\u00f9ng chuy\u00ean s\u00e2u.</p> <p>Khi GRUB2 t\u1ef1 t\u1ea3i l\u00ean, n\u00f3 s\u1ebd \u0111\u01b0a kernel Linux v\u00e0o b\u1ed9 nh\u1edb v\u00e0 chuy\u1ec3n quy\u1ec1n \u0111i\u1ec1u khi\u1ec3n cho kernel \u0111\u1ec3 ho\u00e0n t\u1ea5t qu\u00e1 tr\u00ecnh kh\u1edfi \u0111\u1ed9ng.</p> <p>Sau khi boot loader kh\u1edfi \u0111\u1ed9ng kernel, kernel ti\u1ebfp qu\u1ea3n c\u00e1c t\u00e0i nguy\u00ean m\u00e1y t\u00ednh v\u00e0 b\u1eaft \u0111\u1ea7u kh\u1edfi t\u1ea1o t\u1ea5t c\u1ea3 c\u00e1c ti\u1ebfn tr\u00ecnh v\u00e0 d\u1ecbch v\u1ee5 n\u1ec1n. \u0110\u1ea7u ti\u00ean, kernel t\u1ef1 gi\u1ea3i n\u00e9n v\u00e0o b\u1ed9 nh\u1edb, ki\u1ec3m tra ph\u1ea7n c\u1ee9ng v\u00e0 t\u1ea3i c\u00e1c driver thi\u1ebft b\u1ecb c\u00f9ng c\u00e1c module kernel kh\u00e1c.</p> <p>Ti\u1ebfp theo, m\u1ed9t ti\u1ebfn tr\u00ecnh ban \u0111\u1ea7u g\u1ecdi l\u00e0 <code>init</code> s\u1ebd kh\u1edfi \u0111\u1ed9ng, v\u00e0 trong c\u00e1c h\u1ec7 th\u1ed1ng Linux hi\u1ec7n \u0111\u1ea1i, th\u01b0\u1eddng l\u00e0 Systemd. Systemd \u0111\u00e3 thay th\u1ebf c\u00e1c h\u1ec7 th\u1ed1ng init c\u0169 nh\u01b0 SysVinit v\u00e0 Upstart, v\u00e0 l\u00e0 ti\u1ebfn tr\u00ecnh cha c\u1ee7a t\u1ea5t c\u1ea3 c\u00e1c ti\u1ebfn tr\u00ecnh kh\u00e1c tr\u00ean Linux. Systemd nh\u1eadn r\u1ea5t nhi\u1ec1u tr\u00e1ch nhi\u1ec7m \u0111\u1ec3 kh\u1edfi \u0111\u1ed9ng v\u00e0 chu\u1ea9n b\u1ecb h\u1ec7 th\u1ed1ng s\u1eb5n s\u00e0ng cho ng\u01b0\u1eddi d\u00f9ng.</p> <p>N\u00f3 ki\u1ec3m tra xem ph\u1ea7n c\u1ee9ng n\u00e0o c\u1ea7n driver, g\u1eafn c\u00e1c h\u1ec7 th\u1ed1ng t\u1ec7p v\u00e0 \u0111\u0129a \u0111\u1ec3 ch\u00fang c\u00f3 th\u1ec3 truy c\u1eadp, kh\u1edfi \u0111\u1ed9ng t\u1ea5t c\u1ea3 c\u00e1c d\u1ecbch v\u1ee5 n\u1ec1n nh\u01b0 m\u1ea1ng, \u00e2m thanh, qu\u1ea3n l\u00fd n\u0103ng l\u01b0\u1ee3ng, x\u1eed l\u00fd \u0111\u0103ng nh\u1eadp ng\u01b0\u1eddi d\u00f9ng, v\u00e0 cu\u1ed1i c\u00f9ng l\u00e0 t\u1ea3i m\u00f4i tr\u01b0\u1eddng desktop v\u1edbi c\u00e1c b\u1ea3ng v\u00e0 menu. </p> <p></p> <p>Systemd s\u1eed d\u1ee5ng c\u00e1c file c\u1ea5u h\u00ecnh target \u0111\u1ec3 quy\u1ebft \u0111\u1ecbnh n\u00ean kh\u1edfi \u0111\u1ed9ng v\u00e0o ch\u1ebf \u0111\u1ed9 n\u00e0o - ch\u1eb3ng h\u1ea1n nh\u01b0 ch\u1ebf \u0111\u1ed9 \u0111a ng\u01b0\u1eddi d\u00f9ng ch\u1ec9 v\u0103n b\u1ea3n ho\u1eb7c ch\u1ebf \u0111\u1ed9 \u0111\u1ed3 h\u1ecda m\u00e0 h\u1ea7u h\u1ebft ch\u00fang ta s\u1eed d\u1ee5ng h\u00e0ng ng\u00e0y. \u0110a s\u1ed1 b\u00e2y gi\u1edd ch\u1ec9 c\u1ea7n bi\u1ebft Systemd x\u1eed l\u00fd vi\u1ec7c kh\u1edfi \u0111\u1ed9ng t\u1ea5t c\u1ea3 nh\u1eefng g\u00ec c\u1ea7n ch\u1ea1y sau khi kh\u1edfi \u0111\u1ed9ng Linux.</p> <p></p> <p></p>"},{"location":"ByteByteGo/linux-file-system/","title":"Linux File System c\u00f3 g\u00ec?","text":""},{"location":"ByteByteGo/linux-file-system/#nguon","title":"Ngu\u1ed3n","text":"<p> Linux File System Explained!</p>"},{"location":"ByteByteGo/linux-file-system/#cac-directory-quan-trong","title":"C\u00e1c directory quan tr\u1ecdng","text":"<p>\u0110\u1ea7u ti\u00ean l\u00e0 n\u01a1i ch\u01b0a c\u00e1c file th\u1ef1c thi (executables). C\u00e1ch b\u1ed1 tr\u00ed c\u1ee7a c\u00e1c th\u01b0 m\u1ee5c nh\u01b0 <code>/bin</code>, <code>/usr/bin</code>, <code>/usr/local/bin</code> v\u00e0 c\u00e1c th\u01b0 m\u1ee5c <code>sbin</code> c\u1ee7a ch\u00fang tu\u00e2n theo m\u1ed9t quy \u01b0\u1edbc nh\u1ea5t \u0111\u1ecbnh.</p> <ul> <li><code>/bin</code> ch\u1ee9a c\u00e1c ch\u01b0\u01a1ng tr\u00ecnh c\u1ed1t l\u00f5i c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh, nh\u1eefng ch\u01b0\u01a1ng tr\u00ecnh kh\u1ea3 d\u1ee5ng tr\u01b0\u1edbc khi <code>/usr</code> \u0111\u01b0\u1ee3c mount khi kh\u1edfi \u0111\u1ed9ng. V\u00ed d\u1ee5, c\u00e1c l\u1ec7nh <code>mount</code>, <code>ls</code>, <code>cd</code> \u0111\u1ec1u n\u1eb1m \u1edf \u0111\u00e2y.</li> <li><code>/usr/bin</code> l\u00e0 n\u01a1i ch\u00ednh cho c\u00e1c file th\u1ef1c thi KH\u00d4NG ph\u1ea3i l\u00e0 m\u1ed9t ph\u1ea7n c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh c\u01a1 b\u1ea3n. H\u1ea7u h\u1ebft c\u00e1c ch\u01b0\u01a1ng tr\u00ecnh c\u1ee7a ng\u01b0\u1eddi d\u00f9ng \u0111\u1ec1u n\u1eb1m \u1edf \u0111\u00e2y. Factos: <code>usr</code> kh\u00f4ng ph\u1ea3i l\u00e0 user m\u00e0 l\u00e0 Unix System Resources!</li> <li><code>/usr/local/bin</code> ch\u1ee9a c\u00e1c file th\u1ef1c thi \u0111\u01b0\u1ee3c c\u00e0i \u0111\u1eb7t b\u1edfi admin, th\u01b0\u1eddng sau khi bi\u00ean d\u1ecbch t\u1eeb m\u00e3 ngu\u1ed3n. \u0110i\u1ec1u n\u00e0y gi\u00fap gi\u1eef cho c\u00e1c b\u1ea3n bi\u00ean d\u1ecbch c\u1ee5c b\u1ed9 t\u00e1ch bi\u1ec7t \u0111\u1ec3 tr\u00e1nh ghi \u0111\u00e8 l\u00ean c\u00e1c file h\u1ec7 th\u1ed1ng.</li> <li>C\u00e1c th\u01b0 m\u1ee5c <code>sbin</code> tu\u00e2n theo quy t\u1eafc t\u01b0\u01a1ng t\u1ef1 nh\u01b0ng ch\u1ee9a c\u00e1c ti\u1ec7n \u00edch qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng y\u00eau c\u1ea7u quy\u1ec1n root nh\u01b0 <code>iptables</code> v\u00e0 <code>sshd</code>. Khi c\u00f3 c\u00f9ng m\u1ed9t file th\u1ef1c thi t\u1ed3n t\u1ea1i trong nhi\u1ec1u th\u01b0 m\u1ee5c, b\u1ea1n c\u00f3 th\u1ec3 ch\u1ec9 \u0111\u1ecbnh th\u01b0 m\u1ee5c m\u1eb7c \u0111\u1ecbnh b\u1eb1ng c\u00e1ch s\u1eafp x\u1ebfp l\u1ea1i th\u1ee9 t\u1ef1 \u01b0u ti\u00ean c\u1ee7a th\u01b0 m\u1ee5c trong bi\u1ebfn <code>PATH</code>.</li> </ul> <p><code>/lib</code> ch\u1ee9a c\u00e1c file th\u01b0 vi\u1ec7n chia s\u1ebb c\u1ea7n thi\u1ebft gi\u00fap cho c\u00e1c file th\u1ef1c thi trong <code>/bin</code> v\u00e0 <code>/sbin</code> ho\u1ea1t \u0111\u1ed9ng ch\u00ednh x\u00e1c. Nh\u1eefng th\u01b0 vi\u1ec7n n\u00e0y c\u1ea7n \u0111\u01b0\u1ee3c truy c\u1eadp s\u1edbm trong qu\u00e1 tr\u00ecnh kh\u1edfi \u0111\u1ed9ng tr\u01b0\u1edbc khi mount <code>/usr</code>. Ch\u00fang cung c\u1ea5p c\u00e1c ch\u1ee9c n\u0103ng c\u1ed1t l\u00f5i nh\u01b0 c\u00e1c h\u00e0m th\u01b0 vi\u1ec7n C (<code>glibc</code>) v\u00e0 runtime c\u1ee7a tr\u00ecnh bi\u00ean d\u1ecbch (<code>libstdc++</code>). </p> <p><code>/usr/lib</code> ch\u1ee9a c\u00e1c th\u01b0 vi\u1ec7n cho c\u00e1c file th\u1ef1c thi trong <code>/usr</code> kh\u00f4ng quan tr\u1ecdng cho vi\u1ec7c kh\u1edfi \u0111\u1ed9ng h\u1ec7 th\u1ed1ng. Nh\u1eefng th\u1ee9 n\u00e0y bao g\u1ed3m c\u00e1c th\u01b0 vi\u1ec7n UI nh\u01b0 <code>GTK</code> v\u00e0 <code>Qt</code> c\u0169ng nh\u01b0 c\u00e1c runtime nh\u01b0 <code>Python</code>. B\u1ea1n c\u0169ng c\u00f3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh th\u1ee9 t\u1ef1 t\u00ecm ki\u1ebfm th\u01b0 vi\u1ec7n th\u00f4ng qua bi\u1ebfn <code>LD_LIBRARY_PATH</code>.</p> <p>V\u1edbi <code>/etc</code>, n\u01a1i ch\u1ee9a c\u00e1c file c\u1ea5u h\u00ecnh Linux, c\u00e1c file d\u1ea1ng text \u1edf \u0111\u00e2y \u0111i\u1ec1u khi\u1ec3n m\u1ecdi th\u1ee9 t\u1eeb m\u1ea1ng \u0111\u1ebfn d\u1ecbch v\u1ee5 x\u00e1c th\u1ef1c.</p> <p>\u0110\u1ed1i v\u1edbi d\u1eef li\u1ec7u ng\u01b0\u1eddi d\u00f9ng, <code>/home</code> l\u01b0u tr\u1eef t\u00e0i li\u1ec7u, media, v\u00e0 c\u00e1c project trong khi admin c\u00f3 th\u01b0 m\u1ee5c ri\u00eang l\u00e0 /root. D\u1eef li\u1ec7u thay \u0111\u1ed5i nhanh nh\u01b0 log v\u00e0 cache n\u1eb1m trong <code>/var</code>. <code>/var/log</code> \u0111\u1eb7c bi\u1ec7t quan tr\u1ecdng \u0111\u1ec3 ki\u1ec3m tra c\u00e1c s\u1ef1 ki\u1ec7n ph\u1ea7n c\u1ee9ng, c\u00e1c v\u1ea5n \u0111\u1ec1 an ninh, ho\u1eb7c hi\u1ec7u su\u1ea5t.</p> <p><code>/run</code> /run ch\u1ee9a th\u00f4ng tin runtime bi\u1ebfn \u0111\u1ed5i nh\u01b0 c\u00e1c chi ti\u1ebft c\u1ee7a <code>systemd</code>, session ng\u01b0\u1eddi d\u00f9ng, v\u00e0 c\u00e1c d\u1ecbch v\u1ee5 logging. C\u00e1c d\u1ecbch v\u1ee5 h\u1ec7 th\u1ed1ng s\u1eed d\u1ee5ng <code>/run</code> \u0111\u1ec3 giao ti\u1ebfp li\u00ean t\u1ee5c qua c\u00e1c file socket v\u00e0 lock. V\u00ed d\u1ee5, <code>mysql.sock</code> c\u00f3 th\u1ec3 r\u1ea5t quan tr\u1ecdng cho vi\u1ec7c truy c\u1eadp c\u01a1 s\u1edf d\u1eef li\u1ec7u.</p> <p>Cu\u1ed1i c\u00f9ng, ta \u0111\u1ebfn v\u1edbi <code>/proc</code> v\u00e0 <code>/sys</code>, c\u00e1c h\u1ec7 th\u1ed1ng file \u1ea3o d\u00e0nh cho nh\u1eefng ng\u01b0\u1eddi d\u00f9ng Linux chuy\u00ean nghi\u1ec7p. <code>/proc</code> m\u1edf ra c\u00e1c k\u00eanh giao ti\u1ebfp \u0111\u1ec3 ki\u1ec3m tra tr\u1ea1ng th\u00e1i h\u1ec7 \u0111i\u1ec1u h\u00e0nh t\u1ed5ng th\u1ec3 \u2013 ta c\u00f3 th\u1ec3 xem c\u00e1c s\u1ed1 li\u1ec7u c\u1ea5p cao nh\u01b0 <code>cpuinfo</code>, ki\u1ec3m tra filesystem mount, v\u00e0 \u0111i s\u00e2u h\u01a1n v\u1edbi c\u00e1c c\u00f4ng c\u1ee5 nh\u01b0 <code>lsof</code>, <code>strace</code>, v\u00e0 <code>pmap</code>. </p> <p></p> <p><code>/sys</code> cung c\u1ea5p quy\u1ec1n truy c\u1eadp c\u00e1c \u0111\u1ed1i t\u01b0\u1ee3ng ph\u1ea7n c\u1ee9ng v\u00e0 kernel \u1edf m\u1ee9c low-level h\u01a1n, cho ph\u00e9p gi\u00e1m s\u00e1t v\u00e0 c\u1ea5u h\u00ecnh chi ti\u1ebft c\u00e1c th\u00e0nh ph\u1ea7n nh\u01b0 thi\u1ebft b\u1ecb, module, network stack th\u00f4ng qua c\u00e1c file \u1ea3o.</p> <p></p> <p>K\u1ebft h\u1ee3p l\u1ea1i, <code>/proc</code> v\u00e0 <code>/sys</code> cung c\u1ea5p kh\u1ea3 n\u0103ng quan s\u00e1t to\u00e0n di\u1ec7n h\u1ec7 th\u1ed1ng, t\u1eeb c\u00e1c s\u1ed1 li\u1ec7u c\u1ea5p cao cho \u0111\u1ebfn c\u00e1c t\u01b0\u01a1ng t\u00e1c th\u00e0nh ph\u1ea7n \u1edf m\u1ee9c low-level. V\u1edbi <code>/proc</code> h\u01b0\u1edbng \u0111\u1ebfn c\u00e1c th\u1ed1ng k\u00ea process/runtime, v\u00e0 <code>/sys</code> cung c\u1ea5p truy c\u1eadp ph\u1ea7n c\u1ee9ng/thi\u1ebft b\u1ecb, \u0111\u00e2y l\u00e0 nh\u1eefng \u0111i\u1ec3m ki\u1ec3m tra r\u1ea5t h\u1eefu \u00edch cho vi\u1ec7c t\u1ed1i \u01b0u h\u00f3a hi\u1ec7u su\u1ea5t v\u00e0 ki\u1ec3m tra l\u1ed7i.</p>"},{"location":"ByteByteGo/load-balancing-algorithms/","title":"6 thu\u1eadt to\u00e1n load balancing ph\u1ed5 bi\u1ebfn","text":""},{"location":"ByteByteGo/load-balancing-algorithms/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 6 Load Balancing Algorithms Every Developer Should Know</p>"},{"location":"ByteByteGo/load-balancing-algorithms/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Trong b\u00e0i n\u00e0y, ta s\u1ebd \u0111i qua m\u1ed9t s\u1ed1 thu\u1eadt to\u00e1n load balancing (c\u00e2n b\u1eb1ng t\u1ea3i). </p> <p>B\u1ea1n c\u00f3 bao gi\u1edd t\u1ef1 h\u1ecfi c\u00e1c n\u1ec1n t\u1ea3ng l\u1edbn hi\u1ec7n nay x\u1eed l\u00fd h\u00e0ng tri\u1ec7u request m\u01b0\u1ee3t m\u00e0 nh\u01b0 th\u1ebf n\u00e0o ch\u01b0a. Load balancing l\u00e0 m\u1ed9t th\u00e0nh ph\u1ea7n c\u1ef1c k\u1ef3 quan tr\u1ecdng c\u1ee7a c\u00e1c \u1ee9ng d\u1ee5ng quy m\u00f4 l\u1edbn. B\u1eb1ng c\u00e1ch ph\u00e2n ph\u1ed1i c\u00f4ng vi\u1ec7c \u0111\u1ec1u tr\u00ean nhi\u1ec1u server, load balancing gi\u00fap t\u0103ng t\u00ednh kh\u1ea3 d\u1ee5ng (availability), kh\u1ea3 n\u0103ng ph\u1ea3n h\u1ed3i (responsiveness) v\u00e0 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng (scalability).</p> <p>Hi\u1ec3u \u0111\u01b0\u1ee3c c\u00e1c thu\u1eadt to\u00e1n load balancing ph\u1ed5 bi\u1ebfn s\u1ebd gi\u00fap ta thi\u1ebft k\u1ebf, t\u00ecm l\u1ed7i v\u00e0 t\u1ed1i \u01b0u \u1ee9ng d\u1ee5ng c\u1ee7a ta t\u1ed1t h\u01a1n.</p> <p>C\u00f3 hai lo\u1ea1i thu\u1eadt to\u00e1n load balancing: static load balancing (t\u0129nh) v\u00e0 dynamic load balancing (\u0111\u1ed9ng). Ta s\u1ebd kh\u00e1i qu\u00e1t t\u1eebng lo\u1ea1i v\u00e0 \u0111i v\u00e0o m\u1ed7i thu\u1eadt to\u00e1n, xem ch\u00fang ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o, \u01b0u v\u00e0 nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a ch\u00fang l\u00e0 g\u00ec.</p> <p></p>"},{"location":"ByteByteGo/load-balancing-algorithms/#static-load-balancing","title":"Static load balancing","text":"<p>C\u00e1c thu\u1eadt to\u00e1n static load balancing ph\u00e2n ph\u1ed1i c\u00e1c request \u0111\u1ebfn c\u00e1c server m\u00e0 kh\u00f4ng quan t\u00e2m \u0111\u1ebfn tr\u1ea1ng th\u00e1i th\u1eddi gian th\u1ef1c c\u0169ng nh\u01b0 hi\u1ec7u su\u1ea5t c\u1ee7a server l\u00fac \u0111\u00f3.</p> <p>\u01afu \u0111i\u1ec3m ch\u00ednh c\u1ee7a c\u00e1c thu\u1eadt to\u00e1n static load balancing l\u00e0 s\u1ef1 \u0111\u01a1n gi\u1ea3n. Tuy nhi\u00ean nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a ch\u00fang l\u00e0 \u00edt kh\u1ea3 n\u0103ng th\u00edch nghi v\u00e0 k\u00e9m chu\u1ea9n x\u00e1c.</p>"},{"location":"ByteByteGo/load-balancing-algorithms/#round-robin","title":"Round Robin","text":"<p>Round Robin (RR) v\u1ec1 m\u1eb7t l\u00fd thuy\u1ebft \u0111\u01b0\u1ee3c xem l\u00e0 thu\u1eadt to\u00e1n \u0111\u01a1n gi\u1ea3n nh\u1ea5t. N\u00f3 ph\u00e2n ph\u1ed1i c\u00e1c request \u0111\u1ebfn c\u00e1c server theo th\u1ee9 t\u1ef1. N\u00f3 s\u1ebd g\u1eedi request 1 \u0111\u1ebfn server A, request 2 \u0111\u1ebfn server B v\u00e0 c\u1ee9 th\u1ebf theo th\u1ee9 t\u1ef1. Thu\u1eadt to\u00e1n n\u00e0y r\u1ea5t d\u1ec5 c\u00e0i v\u00e0 d\u1ec5 hi\u1ec3u.</p> <p></p> <p>Tuy nhi\u00ean, b\u1ea1n s\u1ebd c\u00f3 kh\u1ea3 n\u0103ng s\u1ebd l\u00e0m qu\u00e1 t\u1ea3i c\u00e1c server n\u1ebfu kh\u00f4ng theo d\u00f5i t\u00ecnh tr\u1ea1ng c\u1ee7a ch\u00fang.</p>"},{"location":"ByteByteGo/load-balancing-algorithms/#sticky-round-robin","title":"Sticky Round Robin","text":"<p>Sticky Round Robin l\u00e0 b\u1ea3n m\u1edf r\u1ed9ng c\u1ee7a Round Robin. N\u00f3 g\u1eedi c\u00e1c request \u0111\u1ebfn c\u00e1c server theo th\u1ee9 t\u1ef1 nh\u01b0 Round Robin, nh\u01b0ng request t\u1eeb c\u00f9ng user s\u1ebd \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn c\u00f9ng server. M\u1ee5c ti\u00eau \u1edf \u0111\u00e2y l\u00e0 \u0111\u1ec3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t khi c\u00f3 c\u00e1c data li\u00ean quan \u1edf c\u00f9ng m\u1ed9t server.</p> <p></p> <p>Nh\u01b0ng m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i s\u1ebd x\u1ea3y ra n\u1ebfu m\u1ed9t s\u1ed1 user c\u00f3 nhi\u1ec1u request h\u01a1n c\u00e1c user kh\u00e1c.</p>"},{"location":"ByteByteGo/load-balancing-algorithms/#weighted-round-robin","title":"Weighted Round Robin","text":"<p>Weighted Round Robin l\u00e0 cho ph\u00e9p ng\u01b0\u1eddi v\u1eadn h\u00e0nh g\u00e1n tr\u1ecdng s\u1ed1 (hay \u0111\u1ed9 \u01b0u ti\u00ean) cho m\u1ed7i server. Tr\u1ecdng s\u1ed1 c\u00e0ng cao th\u00ec c\u00e0ng nh\u1eadn \u0111\u01b0\u1ee3c nhi\u1ec1u request. C\u00e1ch n\u00e0y gi\u00fap ta gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 khi c\u00f3 m\u1ed9t s\u1ed1 server m\u1ea1nh h\u01a1n nh\u00f3m c\u00f2n l\u1ea1i. Nh\u01b0\u1ee3c \u0111i\u1ec3m l\u00e0 tr\u1ecdng s\u1ed1 c\u1ea7n ph\u1ea3i \u0111\u01b0\u1ee3c c\u00e0i \u0111\u1eb7t b\u1eb1ng tay, khi\u1ebfn thu\u1eadt to\u00e1n n\u00e0y kh\u00f4ng th\u00edch nghi \u0111\u01b0\u1ee3c v\u1edbi c\u00e1c thay \u0111\u1ed5i.</p> <p></p>"},{"location":"ByteByteGo/load-balancing-algorithms/#hash-based","title":"Hash-based","text":"<p>Thu\u1eadt to\u00e1n d\u1ef1a tr\u00ean hash (hash-based) d\u00f9ng m\u1ed9t h\u00e0m hash \u0111\u1ec3 \u00e1nh x\u1ea1 request \u0111\u1ebfn server x\u1eed l\u00fd n\u00f3. H\u00e0m n\u00e0y th\u01b0\u1eddng nh\u1eadn v\u00e0o \u0111\u1ecba ch\u1ec9 IP c\u1ee7a client ho\u1eb7c URL \u0111\u01b0\u1ee3c g\u1ecdi \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh h\u01b0\u1edbng c\u1ee7a request \u0111\u1ebfn server n\u00e0o. N\u00f3 c\u00f3 th\u1ec3 ph\u00e2n ph\u1ed1i \u0111\u1ec1u c\u00e1c request n\u1ebfu h\u00e0m hash t\u1ed1t. Tuy nhi\u00ean, t\u00ecm ra \u0111\u01b0\u1ee3c h\u00e0m hash t\u1ed1i \u01b0u kh\u00e1 l\u00e0 kh\u00f3.</p> <p></p>"},{"location":"ByteByteGo/load-balancing-algorithms/#dynamic-load-balancing","title":"Dynamic load balancing","text":"<p>C\u00e1c thu\u1eadt to\u00e1n dynamic load balancing ph\u00e2n ph\u1ed1i c\u00e1c request d\u1ef1a tr\u00ean tr\u1ea1ng th\u00e1i th\u1eddi gian th\u1ef1c v\u00e0 hi\u1ec7u su\u1ea5t c\u1ee7a c\u00e1c server.</p>"},{"location":"ByteByteGo/load-balancing-algorithms/#least-connection","title":"Least Connection","text":"<p>Thu\u1eadt to\u00e1n Least Connection (\u00edt k\u1ebft n\u1ed1i nh\u1ea5t) g\u1eedi m\u1ed7i request m\u1edbi \u0111\u1ebfn server c\u00f3 \u00edt k\u1ebft n\u1ed1i ho\u1ea1t \u0111\u1ed9ng nh\u1ea5t. Thu\u1eadt to\u00e1n n\u00e0y c\u1ea7n ph\u1ea3i theo d\u00f5i s\u1ed1 l\u01b0\u1ee3ng k\u1ebft n\u1ed1i hi\u1ec7n t\u1ea1i tr\u00ean m\u1ed7i server. \u0110i\u1ec3m l\u1ee3i l\u00e0 c\u00e1c request m\u1edbi s\u1ebd \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn server c\u00f3 nhi\u1ec1u \u0111\u1ea5t ho\u1ea1t \u0111\u1ed9ng nh\u1ea5t. Tuy nhi\u00ean, s\u1ebd c\u00f3 kh\u1ea3 n\u0103ng s\u1ebd c\u00f3 qu\u00e1 nhi\u1ec1u reuqest \u0111\u1ebfn m\u1ed9t server n\u1ebfu c\u00e1c k\u1ebft n\u1ed1i r\u1ea3i ra kh\u00f4ng \u0111\u1ec1u.</p> <p></p>"},{"location":"ByteByteGo/load-balancing-algorithms/#least-response-time","title":"Least Response Time","text":"<p>Thu\u1eadt to\u00e1n Least Response Time (th\u1eddi gian tr\u1ea3 v\u1ec1 \u00edt nh\u1ea5t) g\u1eedi request \u0111\u1ebfn server c\u00f3 th\u1eddi gian tr\u1ea3 v\u1ec1 \u00edt nh\u1ea5t hi\u1ec7n t\u1ea1i (nhanh nh\u1ea5t). \u0110\u1ed9 tr\u1ec5 c\u1ee7a m\u1ed7i server \u0111\u01b0\u1ee3c t\u00ednh to\u00e1n li\u00ean t\u1ee5c. Thu\u1eadt to\u00e1n n\u00e0y c\u00f3 kh\u1ea3 n\u0103ng th\u00edch nghi v\u00e0 ph\u1ea3n \u1ee9ng cao. Tuy nhi\u00ean n\u00f3 c\u1ea7n \u0111\u01b0\u1ee3c theo d\u00f5i nhi\u1ec1u b\u1edfi ng\u01b0\u1eddi qu\u1ea3n tr\u1ecb, khi\u1ebfn n\u00f3 kh\u1ea3 ph\u1ee9c t\u1ea1p \u0111\u1ec3 v\u1eadn h\u00e0nh. N\u00f3 c\u0169ng kh\u00f4ng quan t\u00e2m \u0111\u1ebfn vi\u1ec7c c\u00f3 bao nhi\u00eau request \u0111ang \u0111\u01b0\u1ee3c x\u1eed l\u00fd tr\u00ean m\u1ed7i server.</p> <p></p>"},{"location":"ByteByteGo/load-balancing-algorithms/#tong-ket","title":"T\u1ed5ng k\u1ebft","text":"<p>R\u00f5 r\u00e0ng l\u00e0 ta th\u1ea5y m\u1ed7i lo\u1ea1i thu\u1eadt to\u00e1n \u0111\u1ec1u c\u00f3 \u01b0u nh\u01b0\u1ee3c \u0111i\u1ec3m ri\u00eang. Ta c\u1ea7n c\u00e2n nh\u1eafc v\u1ec1 hi\u1ec7u su\u1ea5t, kh\u1ea3 n\u0103ng server v\u00e0 c\u00e1c gi\u1edbi h\u1ea1n tr\u01b0\u1edbc khi ch\u1ecdn thu\u1eadt to\u00e1n load balancing ph\u00f9 h\u1ee3p cho \u1ee9ng d\u1ee5ng c\u1ee7a ta.</p> <p>Thu\u1eadt to\u00e1n Round Robin ho\u1ea1t \u0111\u1ed9ng t\u1ed1t tr\u00ean c\u00e1c \u1ee9ng d\u1ee5ng \u0111\u01a1n gi\u1ea3n. C\u00f2n c\u00e1c thu\u1eadt to\u00e1n dynamic load balancing gi\u00fap t\u1ed1i \u01b0u th\u1eddi gian tr\u1ea3 v\u1ec1 v\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng cho c\u00e1c \u1ee9ng d\u1ee5ng l\u1edbn v\u00e0 ph\u1ee9c t\u1ea1p.</p>"},{"location":"ByteByteGo/lsm-tree/","title":"B\u00ed m\u1eadt \u0111\u1eb1ng sau NoSQL: C\u00e2y LSM","text":""},{"location":"ByteByteGo/lsm-tree/#nguon","title":"Ngu\u1ed3n","text":"<p> The Secret Sauce Behind NoSQL: LSM Tree</p>"},{"location":"ByteByteGo/lsm-tree/#mo-au","title":"M\u1edf \u0111\u1ea7u","text":"<p>C\u00e1c database NoSQL nh\u01b0 Cassandra \u0111\u00e3 tr\u1edf n\u00ean b\u00f9ng n\u1ed5 trong nh\u1eefng n\u0103m g\u1ea7n \u0111\u00e2y. M\u1ed9t y\u1ebfu t\u1ed1 th\u00fac \u0111\u1ea9y l\u00e0 nhu c\u1ea7u l\u1edbn \u0111\u1ec3 thu t\u1eadp l\u01b0\u1ee3ng d\u1eef li\u1ec7u kh\u1ed5ng l\u1ed3 t\u1eeb r\u1ea5t r\u1ea5t nhi\u1ec1u ngu\u1ed3n kh\u00e1c nhau v\u00e0 ng\u00e0y c\u00e0ng t\u0103ng l\u00ean, nh\u01b0 c\u00e1c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng v\u00e0 c\u00e1c thi\u1ebft b\u1ecb IoT (Internet of Things). B\u00ed m\u1eadt \u1ea9n gi\u1ea5u \u0111\u1eb1ng sau c\u00e1c database NoSQL n\u00e0y l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u c\u00f3 t\u00ean l\u00e0 c\u00e2y Log Structured Merge (vi\u1ebft t\u1eaft l\u00e0 c\u00e2y LSM, l\u01b0\u1ee3c d\u1ecbch l\u00e0 c\u00e2y h\u1ee3p nh\u1ea5t c\u00f3 c\u1ea5u tr\u00fac log). C\u00e2y LSM \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u ho\u00e1 cho vi\u1ec7c ghi d\u1eef li\u1ec7u nhanh.</p> <p></p>"},{"location":"ByteByteGo/lsm-tree/#b-tree","title":"B-tree","text":"<p>\u0110\u1ec3 hi\u1ec3u c\u00e2y LSM ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o, ta c\u00f9ng \u0111i t\u00ecm hi\u1ec3u d\u1eef li\u1ec7u th\u01b0\u1eddng \u0111\u01b0\u1ee3c l\u01b0u v\u00e0o c\u00e1c relational database (c\u01a1 s\u1edf d\u1eef li\u1ec7u quan h\u1ec7) ra sao. M\u1ed9t relational database th\u01b0\u1eddng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1edfi m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u c\u00f3 t\u00ean l\u00e0 B-tree. </p> <p></p> <p>B-tree \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u cho vi\u1ec7c \u0111\u1ecdc d\u1eef li\u1ec7u. C\u1eadp nh\u1eadt (th\u00eam, s\u1eeda, xo\u00e1) B-tree t\u01b0\u01a1ng \u0111\u1ed1i t\u1ed1n k\u00e9m v\u00ec n\u00f3 li\u00ean quan \u0111\u1ebfn random I/O v\u00e0 c\u00f3 th\u1ec3 bao g\u1ed3m vi\u1ec7c c\u1eadp nh\u1eadt nhi\u1ec1u trang tr\u00ean \u0111\u0129a c\u1ee9ng. \u0110i\u1ec1u n\u00e0y l\u00e0m gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 ghi d\u1eef li\u1ec7u c\u1ee7a B-tree. </p>"},{"location":"ByteByteGo/lsm-tree/#cay-lsm","title":"C\u00e2y LSM","text":"<p>C\u00e2y LSM th\u00ec kh\u00e1c. Vi\u1ec7c ghi d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c d\u1ed3n theo \u0111\u1ee3t trong b\u1ed9 nh\u1edb trong m\u1ed9t c\u1ea5u tr\u00fac g\u1ecdi l\u00e0 memtable, sau \u0111\u00f3 g\u1eedi \u0111i. M\u1ed9t memtable \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp theo object key, v\u00e0 th\u01b0\u1eddng \u0111\u01b0\u1ee3c tri\u1ec3n khai d\u01b0\u1edbi d\u1ea1ng c\u00e2y nh\u1ecb ph\u00e2n c\u00e2n b\u1eb1ng (balanced binary tree). </p> <p></p> <p>Khi k\u00edch th\u01b0\u1edbc memtable \u0111\u1ebfn m\u1ed9t gi\u1edbi h\u1ea1n n\u00e0o \u0111\u00f3, n\u00f3 s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n v\u00e0o \u0111\u0129a c\u1ee9ng d\u01b0\u1edbi d\u1ea1ng Sorted String Table b\u1ea5t bi\u1ebfn (vi\u1ebft t\u1eaft l\u00e0 SSTable, l\u01b0\u1ee3c d\u1ecbch l\u00e0 B\u1ea3ng ch\u1ee9a c\u00e1c x\u00e2u \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp).</p> <p></p> <p>M\u1ed9t SSTable l\u01b0u c\u00e1c c\u1eb7p key-value theo tr\u00ecnh t\u1ef1 \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp theo key. T\u1ea5t c\u1ea3 c\u00e1c l\u1ea7n ghi \u0111\u1ec1u l\u00e0 I/O tu\u1ea7n t\u1ef1, khi\u1ebfn cho vi\u1ec7c ghi r\u1ea5t nhanh tr\u00ean m\u1ecdi lo\u1ea1i \u0111\u0129a. SSTable m\u1edbi s\u1ebd tr\u1edf th\u00e0nh \u0111o\u1ea1n (hay l\u00e0 th\u00f4ng tin) m\u1edbi nh\u1ea5t c\u1ee7a c\u00e2y LSM. Khi c\u00f3 nhi\u1ec1u d\u1eef li\u1ec7u h\u01a1n, ng\u00e0y c\u00e0ng nhi\u1ec1u SSTable b\u1ea5t bi\u1ebfn \u0111\u01b0\u1ee3c t\u1ea1o ra v\u00e0 th\u00eam v\u00e0o c\u00e2y LSM, v\u1edbi m\u1ed7i SSTable \u0111\u1ea1i di\u1ec7n cho m\u1ed9t t\u1eadp con nh\u1ecf theo tr\u00ecnh t\u1ef1 th\u1eddi gian c\u1ee7a c\u00e1c thay \u0111\u1ed5i m\u1edbi nh\u1ea5t. </p> <p></p> <p>V\u00ec c\u00e1c SSTable n\u00e0y b\u1ea5t bi\u1ebfn, c\u1eadp nh\u1eadt cho m\u1ed9t key hi\u1ec7n c\u00f3 s\u1ebd kh\u00f4ng ghi \u0111\u00e8 l\u00ean SSTable ch\u1ee9a key \u0111\u00f3. Thay v\u00e0o \u0111\u00f3, m\u1ed9t key m\u1edbi \u0111\u01b0\u1ee3c th\u00eam v\u00e0o SSTable m\u1edbi nh\u1ea5t, v\u00e0 n\u00f3 s\u1ebd thay cho c\u00e1c key tr\u00f9ng n\u00f3 trong c\u00e1c SSTable c\u0169.</p> <p></p> <p>Vi\u1ec7c xo\u00e1 m\u1ed9t object ph\u1ea3i x\u1eed l\u00fd kh\u00e1c \u0111i, v\u00ec ta kh\u00f4ng th\u1ec3 \u0111\u00e1nh d\u1ea5u object \u0111\u00e3 b\u1ecb xo\u00e1 trong SSTable c\u0169 \u0111\u01b0\u1ee3c. \u0110\u1ec3 th\u1ef1c hi\u1ec7n xo\u00e1, n\u00f3 th\u00eam m\u1ed9t \u0111\u00e1nh d\u1ea5u g\u1ecdi l\u00e0 tombstone (bia m\u1ed9) v\u00e0o SSTable m\u1edbi nh\u1ea5t cho c\u00e1i key \u0111\u00f3. Khi ta \u0111\u1ecdc d\u1eef li\u1ec7u m\u00e0 th\u1ea5y tombstone, ta bi\u1ebft r\u1eb1ng object \u0111\u00e3 b\u1ecb xo\u00e1. Vi\u1ec7c xo\u00e1 \u1edf \u0111\u00e2y l\u1ea1i t\u1ed1n th\u00eam kh\u00f4ng gian d\u1eef li\u1ec7u, nghe h\u01a1i l\u1ea1, nh\u01b0ng l\u00e0 c\u00e1ch t\u1ed1t nh\u1ea5t c\u00f3 th\u1ec3 l\u00e0m.</p> <p></p> <p>Khi c\u00f3 request \u0111\u1ecdc d\u1eef li\u1ec7u \u0111\u1ebfn, \u0111\u1ea7u ti\u00ean ta t\u00ecm key trong memtable, sau \u0111\u00f3 t\u00ecm trong SSTable m\u1edbi nh\u1ea5t trong c\u00e2y LSM, xong \u0111\u1ebfn SSTable m\u1edbi th\u1ee9 hai, v\u00e0 ti\u1ebfp t\u1ee5c nh\u01b0 th\u1ebf. SSTable \u0111\u00e3 \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp n\u00ean vi\u1ec7c t\u00ecm ki\u1ebfm c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n hi\u1ec7u qu\u1ea3.</p> <p></p> <p>Vi\u1ec7c th\u00eam li\u00ean t\u1ee5c c\u00e1c SSTable nh\u01b0 v\u1eady n\u1ea3y sinh hai v\u1ea5n \u0111\u1ec1. Th\u1ee9 nh\u1ea5t, v\u00ec s\u1ed1 SSTable t\u0103ng l\u00ean, s\u1ebd ng\u00e0y c\u00e0ng t\u1ed1n th\u1eddi gian h\u01a1n \u0111\u1ec3 t\u00ecm m\u1ed9t key. Th\u1ee9 hai, SSTable li\u00ean t\u1ee5c t\u00edch lu\u1ef9 nh\u01b0 v\u1eady, s\u1ebd c\u00f3 r\u1ea5t nhi\u1ec1u object c\u0169 do vi\u1ec7c s\u1eeda v\u00e0 xo\u00e1 (th\u00eam data m\u1edbi), \u0111i\u1ec1u n\u00e0y s\u1ebd l\u00e0m t\u1ed1n kh\u00f4ng gian l\u01b0u tr\u1eef. </p> <p>\u0110\u1ec3 gi\u1ea3i quy\u1ebft c\u00e1c v\u1ea5n \u0111\u1ec1 n\u00e0y, ta s\u1ebd \u0111i h\u1ee3p nh\u1ea5t (merge) v\u00e0 n\u00e9n (compact) \u0111\u1ecbnh k\u1ef3. Qu\u00e1 tr\u00ecnh n\u00e0y s\u1ebd ch\u1ea1y n\u1ec1n \u0111\u1ec3 h\u1ee3p nh\u1ea5t c\u00e1c SSTable v\u00e0 lo\u1ea1i b\u1ecf c\u00e1c gi\u00e1 tr\u1ecb c\u0169 ho\u1eb7c b\u1ecb xo\u00e1. \u0110i\u1ec1u n\u00e0y gi\u00fap ti\u1ebft ki\u1ec7m kh\u00f4ng gian l\u01b0u tr\u1eef v\u00e0 gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng SSTable m\u00e0 m\u1ed9t l\u1ea7n \u0111\u1ecdc ph\u1ea3i ki\u1ec3m tra. V\u00ec c\u00e1c SSTable \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp r\u1ed3i, n\u00ean qu\u00e1 tr\u00ecnh h\u1ee3p nh\u1ea5t v\u00e0 n\u00e9n n\u00e0y r\u1ea5t \u0111\u01a1n gi\u1ea3n v\u00e0 hi\u1ec7u qu\u1ea3. C\u00e1ch l\u00e0m c\u0169ng t\u01b0\u01a1ng t\u1ef1 vi\u1ec7c merge trong Merge Sort. T\u00f3m l\u1ea1i, \u0111\u00e2y l\u00e0 c\u00e1ch c\u00e2y LSM cung c\u1ea5p kh\u1ea3 n\u0103ng ghi d\u1eef li\u1ec7u nhanh ch\u00f3ng.</p> <p></p> <p></p> <p></p> <p>Ta c\u00f9ng t\u00f3m t\u1eaft l\u1ea1i nh\u00e9. C\u00e2y LSM s\u1ebd ghi d\u1eef li\u1ec7u v\u00e0o memtable tr\u01b0\u1edbc. Khi memtable \u0111\u1ea7y, ta s\u1eafp x\u1ebfp v\u00e0 \u0111\u1ea9y n\u00f3 v\u00e0o \u0111\u0129a c\u1ee9ng d\u01b0\u1edbi d\u1ea1ng SSTable b\u1ea5t bi\u1ebfn. S\u1ed1 l\u01b0\u1ee3ng SSTable t\u0103ng l\u00ean do c\u00e0ng nhi\u1ec1u memtable data \u0111\u01b0\u1ee3c \u0111\u1ea9y v\u00e0o. \u0110i\u1ec1u n\u00e0y sinh ra v\u1ea5n \u0111\u1ec1 cho vi\u1ec7c \u0111\u1ecdc, do n\u00f3 ph\u1ea3i t\u00ecm ki\u1ebfm qua c\u00e1c SSTable \u0111\u1ec3 th\u1ef1c hi\u1ec7n tra c\u1ee9u. \u0110\u1ec3 gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u01a1ng SSTable m\u00e0 n\u00f3 ph\u1ea3i t\u00ecm ki\u1ebfm cho m\u1ed7i l\u1ea7n \u0111\u1ecdc, c\u00e2y LSM h\u1ee3p nh\u1ea5t c\u00e1c SSTable v\u00e0 n\u00e9n (qu\u00e1 tr\u00ecnh n\u00e0y \u0111\u01b0\u1ee3c ch\u1ea1y n\u1ec1n).</p> <p></p>"},{"location":"ByteByteGo/lsm-tree/#qua-trinh-nen","title":"Qu\u00e1 tr\u00ecnh n\u00e9n","text":"<p>Ta c\u00f9ng xem x\u00e9t s\u00e2u h\u01a1n v\u1ec1 qu\u00e1 tr\u00ecnh n\u00e9n. Khi c\u00e1c SSTable h\u1ee3p nh\u1ea5t, ch\u00fang \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c th\u00e0nh c\u00e1c level. \u0110\u00e2y l\u00e0 n\u01a1i ph\u1ea7n c\u00e2y c\u1ee7a c\u00e2y LSM xu\u1ea5t hi\u1ec7n. C\u00f3 m\u1ed9t s\u1ed1 c\u00e1ch kh\u00e1c nhau \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh th\u1eddi \u0111i\u1ec3m v\u00e0 c\u00e1ch th\u1ee9c c\u00e1c SSTable \u0111\u01b0\u1ee3c h\u1ee3p nh\u1ea5t v\u00e0 n\u00e9n. C\u00f3 hai c\u00e1ch t\u1ed5ng qu\u00e1t: N\u00e9n theo k\u00edch th\u01b0\u1edbc (Size Tiered Compaction) v\u00e0 n\u00e9n theo level (Leveled Compaction).</p> <p>N\u00e9n theo k\u00edch th\u01b0\u1edbc \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u ho\u00e1 cho vi\u1ec7c ghi, c\u00f2n n\u00e9n theo level \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u ho\u00e1 cho vi\u1ec7c \u0111\u1ecdc d\u1eef li\u1ec7u h\u01a1n. Ta s\u1ebd kh\u00f4ng \u0111i v\u00e0o chi ti\u1ebft nh\u1eefng c\u00e1ch n\u00e0y ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o. Nh\u01b0ng c\u00f3 m\u1ed9t v\u00e0i \u0111i\u1ec3m ch\u00ednh c\u1ea7n nh\u1edb: vi\u1ec7c n\u00e9n gi\u1eef cho s\u1ed1 l\u01b0\u01a1ng SSTable n\u1eb1m trong gi\u1edbi h\u1ea1n n\u00e0o \u0111\u00f3. C\u00e1c SSTable \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c th\u00e0nh c\u00e1c level. M\u1ed7i level s\u1ebd l\u1edbn h\u01a1n theo c\u1ea5p s\u1ed1 nh\u00e2n khi c\u00e1c SSTable \u1edf level tr\u00ean \u0111\u01b0\u1ee3c h\u1ee3p nh\u1ea5t v\u00e0o n\u00f3. Vi\u1ec7c n\u00ean t\u1ed1n r\u1ea5t nhi\u1ec1u I/O. N\u00e9n sai s\u1ebd c\u00f3 th\u1ec3 l\u00e0m ch\u1eadm c\u1ea3 vi\u1ec7c \u0111\u1ecdc v\u00e0 ghi.</p>"},{"location":"ByteByteGo/lsm-tree/#cac-cach-toi-uu","title":"C\u00e1c c\u00e1ch t\u1ed1i \u01b0u","text":"<p>Cu\u1ed1i c\u00f9ng, ta c\u00f9ng xem x\u00e9t c\u00e1c t\u1ed1i \u01b0u ph\u1ed5 bi\u1ebfn cho c\u00e2y LSM trong th\u1ef1c t\u1ebf. C\u00f3 nhi\u1ec1u c\u00e1ch t\u1ed1i \u01b0u ho\u00e1 c\u1ed1 g\u1eafng cung c\u1ea5p hi\u1ec7u su\u1ea5t \u0111\u1ecdc g\u1ea7n v\u1edbi B-tree h\u01a1n. Nh\u1eefng g\u00ec ta s\u1ebd \u0111i v\u00e0o d\u01b0\u1edbi \u0111\u00e2y ch\u1ec9 l\u00e0 nh\u1eefng c\u00e1ch ph\u1ed5 bi\u1ebfn nh\u1ea5t th\u00f4i. \u0110\u1ec3 tra m\u1ed9t key, n\u00f3 th\u1ef1c hi\u1ec7n t\u00ecm ki\u1ebfm tr\u00ean SSTable \u1edf m\u1ecdi level. M\u1eb7c d\u00f9 t\u00ecm ki\u1ebfm nhanh tr\u00ean d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp, nh\u01b0ng vi\u1ec7c duy\u1ec7t qua t\u1ea5t c\u1ea3 c\u00e1c SSTable tr\u00ean \u0111\u0129a s\u1ebd t\u1ed1n r\u1ea5t nhi\u1ec1u I/O. Nhi\u1ec1u h\u1ec7 th\u1ed1ng gi\u1eef m\u1ed9t b\u1ea3ng t\u00f3m t\u1eaft (summary table) trong b\u1ed9 nh\u1edb, trong \u0111\u00f3 ch\u1ee9a min/max c\u1ee7a m\u1ed7i kh\u1ed1i \u0111\u0129a \u1edf m\u1ecdi level. \u0110i\u1ec1u n\u00e0y gi\u00fap h\u1ec7 th\u1ed1ng b\u1ecf qua t\u00ecm ki\u1ebfm \u1edf nh\u1eefng kh\u1ed1i \u0111\u0129a kh\u00f4ng c\u00f3 key c\u1ea7n t\u00ecm, gi\u00fap ti\u1ebft ki\u1ec7m r\u1ea5t nhi\u1ec1u random I/O.</p> <p></p> <p>M\u1ed9t v\u1ea5n \u0111\u1ec1 n\u1eefa c\u00f3 th\u1ec3 t\u1ed1n k\u00e9m l\u00e0 vi\u1ec7c t\u00ecm key kh\u00f4ng c\u00f3 trong c\u00e2y LSM. N\u00f3 s\u1ebd ph\u1ea3i t\u00ecm qua t\u1ea5t c\u1ea3 c\u00e1c kh\u1ed1i \u1edf m\u1ecdi level. H\u1ea7u h\u1ebft c\u00e1c h\u1ec7 th\u1ed1ng duy tr\u00ec m\u1ed9t bloom filter \u1edf m\u1ed7i level. M\u1ed9t bloom filter l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac d\u1eef li\u1ec7u ti\u1ebft ki\u1ec7m kh\u00f4ng gian, n\u00f3 s\u1ebd tr\u1ea3 v\u1ec1 \"Kh\u00f4ng c\u00f3\" n\u1ebfu key kh\u00f4ng t\u1ed3n t\u1ea1i, v\u00e0 \"C\u00f3 th\u1ec3 c\u00f3\" n\u1ebfu key c\u00f3 th\u1ec3 t\u1ed3n t\u1ea1i. \u0110i\u1ec1u n\u00e0y gi\u00fap h\u1ec7 th\u1ed1ng b\u1ecf qua m\u1ed9t level n\u1ebfu key kh\u00f4ng c\u00f3 \u1edf \u0111\u00f3, gi\u00fap gi\u1ea3m m\u1ea1nh l\u01b0\u1ee3ng random I/O c\u1ea7n. </p> <p></p> <p>K\u1ebft l\u1ea1i, NoSQL database \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1eb1ng m\u1ed9t c\u00e2y LSM c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111i\u1ec1u ch\u1ec9nh \u0111\u1ec3 h\u1ed7 tr\u1ee3 t\u1ed1c \u0111\u1ed9 ghi r\u1ea5t cao. Nh\u01b0 v\u1edbi b\u1ea5t k\u1ef3 database n\u00e0o, \u0111i\u1ec1u ch\u1ec9nh c\u1ea7n ph\u1ea3i ph\u00f9 h\u1ee3p. V\u1edbi c\u00e2y LSM, \u0111i\u1ec1u ch\u1ec9nh vi\u1ec7c n\u00e9n l\u00e0 quan tr\u1ecdng nh\u1ea5t.</p>"},{"location":"ByteByteGo/microservices/","title":"Microservices l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/microservices/#nguon","title":"Ngu\u1ed3n","text":"<p> What Are Microservices Really All About? (And When Not To Use It)</p>"},{"location":"ByteByteGo/microservices/#gioi-thieu-ve-kien-truc-microservice","title":"Gi\u1edbi thi\u1ec7u v\u1ec1 ki\u1ebfn tr\u00fac microservice","text":"<p>Ki\u1ebfn tr\u00fac microservice (d\u1ecbch v\u1ee5 si\u00eau nh\u1ecf) cho ph\u00e9p c\u00e1c team l\u1edbn x\u00e2y d\u1ef1ng c\u00e1c \u1ee9ng d\u1ee5ng c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng bao g\u1ed3m nhi\u1ec1u service \u0111\u01b0\u1ee3c li\u00ean k\u1ebft v\u1edbi nhau. </p> <p></p> <p>C\u00e1c microservice \u0111\u01b0\u1ee3c li\u00ean k\u1ebft l\u1ecfng l\u1ebbo v\u1edbi nhau. M\u1ed7i service x\u1eed l\u00fd m\u1ed9t ch\u1ee9c n\u0103ng chuy\u00ean d\u1ee5ng trong m\u1ed9t \u1ee9ng d\u1ee5ng quy m\u00f4 l\u1edbn. V\u00ed d\u1ee5, gi\u1ecf h\u00e0ng, thanh to\u00e1n, h\u1ed3 s\u01a1 ng\u01b0\u1eddi d\u00f9ng v\u00e0 push notification \u0111\u1ec1u c\u00f3 th\u1ec3 tr\u1edf th\u00e0nh c\u00e1c microservice ri\u00eang l\u1ebb. C\u00e1c khu v\u1ef1c ch\u1ee9c n\u0103ng \u0111\u00f4i khi \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 c\u00e1c mi\u1ec1n (domains). </p> <p></p> <p>C\u00e1c microservice giao ti\u1ebfp v\u1edbi nhau th\u00f4ng qua c\u00e1c interface \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh r\u00f5 r\u00e0ng v\u1edbi t\u1ea7m \u1ea3nh h\u01b0\u1edfng (surface area) nh\u1ecf. T\u1ea7m \u1ea3nh h\u01b0\u1edfng nh\u1ecf n\u00e0y h\u1ea1n ch\u1ebf \u1ea3nh h\u01b0\u1edfng c\u1ee7a l\u1ed7i v\u00e0 c\u00e1c h\u1ecfng h\u00f3c v\u1ec1 sau. N\u00f3 gi\u00fap m\u1ed7i service d\u1ec5 d\u00e0ng suy ra b\u1ed1i c\u1ea3nh c\u1ee7a to\u00e0n b\u1ed9 \u1ee9ng d\u1ee5ng. C\u00e1c microservice giao ti\u1ebfp th\u00f4ng qua m\u1ed9t t\u1eadp c\u00e1c l\u1eddi g\u1ecdi th\u1ee7 t\u1ee5c t\u1eeb xa (RPC - Remote Procedure Call), truy\u1ec1n ph\u00e1t s\u1ef1 ki\u1ec7n (event streaming) ho\u1eb7c tr\u00ecnh ph\u00e2n ph\u1ed1i tin nh\u1eafn (message broker). </p> <p></p> <p>RPC nh\u01b0 gRPC cung c\u1ea5p response nhanh h\u01a1n, nh\u01b0ng t\u1ea7m \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn c\u00e1c microservice kh\u00e1c s\u1ebd l\u1edbn h\u01a1n khi service b\u1ecb ng\u01b0ng ho\u1ea1t \u0111\u1ed9ng. Event streaming cung c\u1ea5p s\u1ef1 c\u00e1ch ly t\u1ed1t h\u01a1n gi\u1eefa c\u00e1c service nh\u01b0ng m\u1ea5t nhi\u1ec1u th\u1eddi gian h\u01a1n \u0111\u1ec3 x\u1eed l\u00fd.</p> <p>C\u00e1c microservice c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c tri\u1ec3n khai \u0111\u1ed9c l\u1eadp v\u1edbi nhau. V\u00ec m\u1ed7i service nh\u1ecf, d\u1ec5 suy lu\u1eadn h\u01a1n v\u00e0 c\u00f3 t\u1ea7m \u1ea3nh h\u01b0\u1edfng nh\u1ecf, \u0111i\u1ec1u n\u00e0y gi\u00fap ng\u01b0\u1eddi v\u1eadn h\u00e0nh y\u00ean t\u00e2m v\u00e0 t\u1ef1 tin tri\u1ec3n khai th\u01b0\u1eddng xuy\u00ean. C\u00e1c Microservice mang l\u1ea1i s\u1ef1 linh ho\u1ea1t h\u01a1n \u0111\u1ec3 m\u1edf r\u1ed9ng quy m\u00f4 c\u1ee7a t\u1eebng microservice m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp. S\u1ef1 linh ho\u1ea1t trong ho\u1ea1t \u0111\u1ed9ng l\u00e0 v\u00f4 gi\u00e1. C\u00e1c microservice c\u00f3 ki\u1ebfn tr\u00fac t\u1ed1t th\u1ef1c hi\u1ec7n \u1ea9n th\u00f4ng tin r\u1ea5t hi\u1ec7u qu\u1ea3. \u0110i\u1ec1u n\u00e0y c\u00f3 ngh\u0129a l\u00e0 vi\u1ec7c chia database nguy\u00ean kh\u1ed1i th\u00e0nh c\u00e1c th\u00e0nh ph\u1ea7n logic kh\u00e1c nhau v\u00e0 gi\u1eef t\u1eebng th\u00e0nh ph\u1ea7n \u1ea9n k\u1ef9 b\u00ean trong microservice t\u01b0\u01a1ng \u1ee9ng c\u1ee7a n\u00f3. N\u00f3i v\u1ec1 th\u00e0nh ph\u1ea7n logic, n\u00f3 c\u00f3 th\u1ec3 c\u00f3 ngh\u0129a l\u00e0 m\u1ed9t schema ri\u00eang trong c\u1ee5m database ho\u1eb7c m\u1ed9t database v\u1eadt l\u00fd ho\u00e0n to\u00e0n ri\u00eang bi\u1ec7t, tu\u1ef3 v\u00e0o c\u00e0i \u0111\u1eb7t.</p> <p></p> <p>Tuy nhi\u00ean, m\u1ed9t nh\u01b0\u1ee3c \u0111i\u1ec3m l\u1edbn c\u1ee7a microservice l\u00e0 vi\u1ec7c chia nh\u1ecf database. V\u1edbi vi\u1ec7c chia database th\u00e0nh c\u00e1c \u0111\u01a1n v\u1ecb logic ri\u00eang bi\u1ec7t, database kh\u00f4ng c\u00f2n c\u00f3 th\u1ec3 duy tr\u00ec c\u00e1c quan h\u1ec7 kho\u00e1 ngo\u1ea1i v\u00e0 th\u1ef1c thi t\u00ednh to\u00e0n v\u1eb9n tham chi\u1ebfu gi\u1eefa c\u00e1c \u0111\u01a1n v\u1ecb n\u00e0y. G\u00e1nh n\u1eb7ng duy tr\u00ec t\u00ednh to\u00e0n v\u1eb9n d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c chuy\u1ec3n sang t\u1ea7ng \u1ee9ng d\u1ee5ng.</p>"},{"location":"ByteByteGo/microservices/#cac-thanh-phan-khac","title":"C\u00e1c th\u00e0nh ph\u1ea7n kh\u00e1c","text":"<p>Ta c\u00f9ng xem x\u00e9t c\u00e1c th\u00e0nh ph\u1ea7n quan tr\u1ecdng kh\u00e1c \u0111\u1ec3 tri\u1ec3n khai th\u00e0nh c\u00f4ng ki\u1ebfn tr\u00fac microservice. Th\u1ee9 nh\u1ea5t l\u00e0 API gateway. API gateway x\u1eed l\u00fd c\u00e1c request \u0111\u1ebfn v\u00e0 \u0111\u1ecbnh tuy\u1ebfn ch\u00fang \u0111\u1ebfn c\u00e1c microservice c\u00f3 li\u00ean quan. API gateway d\u1ef1a v\u00e0o service c\u1ee7a nh\u00e0 cung c\u1ea5p danh t\u00ednh \u0111\u1ec3 x\u1eed l\u00fd x\u00e1c th\u1ef1c v\u00e0 c\u1ea5p quy\u1ec1n cho t\u1eebng request \u0111\u1ebfn th\u00f4ng qua API gateway. </p> <p>\u0110\u1ec3 bi\u1ebft \u0111\u01b0\u1ee3c service \u0111\u1ec3 \u0111\u1ecbnh tuy\u1ebfn m\u1ed9t request, API gateway s\u1ebd tham kh\u1ea3o service registry v\u00e0 discovery service. C\u00e1c microservice \u0111\u0103ng k\u00fd v\u1edbi service registry v\u00e0 t\u00ecm hi\u1ec3u th\u00f4ng tin c\u1ee7a c\u00e1c microservice kh\u00e1c th\u00f4ng qua discovery service. Ngo\u00e0i ra c\u00f2n c\u00f3 c\u00e1c th\u00e0nh ph\u1ea7n h\u1eefu \u00edch kh\u00e1c trong ki\u1ebfn tr\u00fac microservice nh\u01b0 gi\u00e1m s\u00e1t v\u00e0 c\u1ea3nh b\u00e1o, c\u00f4ng c\u1ee5 DevOps \u0111\u1ec3 tri\u1ec3n khai v\u00e0 kh\u1eafc ph\u1ee5c s\u1ef1 c\u1ed1.</p> <p></p>"},{"location":"ByteByteGo/microservices/#khi-nao-can-dung","title":"Khi n\u00e0o c\u1ea7n d\u00f9ng?","text":"<p>Nh\u01b0 v\u1eady khi n\u00e0o c\u1ea7n d\u00f9ng ki\u1ebfn tr\u00fac microservice? </p> <p>X\u00e2y d\u1ef1ng v\u00e0 v\u1eadn h\u00e0nh ki\u1ebfn tr\u00fac microservice kh\u00e1 t\u1ed1n k\u00e9m. N\u00f3 ch\u1ec9 th\u1ef1c s\u1ef1 c\u00f3 \u00fd ngh\u0129a v\u1edbi c\u00e1c team l\u1edbn. M\u1ed7i mi\u1ec1n, ho\u1eb7c ch\u1ee9c n\u0103ng c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c duy tr\u00ec \u0111\u1ed9c l\u1eadp b\u1edfi m\u1ed9t team chuy\u00ean d\u1ee5ng. Trong m\u1ed9t ki\u1ebfn tr\u00fac microservice \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf t\u1ed1t, c\u00e1c team \u0111\u1ed9c l\u1eadp n\u00e0y c\u00f3 th\u1ec3 t\u1ef1 v\u1eadn h\u00e0nh nhanh, v\u00e0 t\u1ea7m \u1ea3nh h\u01b0\u1edfng c\u1ee7a l\u1ed7i s\u1ebd \u0111\u01b0\u1ee3c ki\u1ec3m so\u00e1t t\u1ed1t. M\u1ed7i service c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf, tri\u1ec3n khai, v\u00e0 m\u1edf r\u1ed9ng m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp. </p> <p></p> <p>Tuy nhi\u00ean, chi ph\u00ed c\u1ee7a c\u1ee7a vi\u1ec7c tri\u1ec3n khai nh\u01b0 v\u1eady r\u1ea5t l\u1edbn n\u00ean n\u00f3 th\u01b0\u1edfng kh\u00f4ng ph\u00f9 h\u1ee3p v\u1edbi c\u00e1c startup nh\u1ecf. M\u1ed9t l\u1eddi khuy\u00ean cho c\u00e1c startup nh\u1ecf l\u00e0 n\u00ean thi\u1ebft k\u1ebf m\u1ed7i ch\u1ee9c n\u0103ng trong \u1ee9ng d\u1ee5ng v\u1edbi interface r\u00f5 r\u00e0ng. M\u1ed9t ng\u00e0y n\u00e0o \u0111\u00f3, n\u1ebfu business v\u00e0 team ph\u00e1t tri\u1ec3n nhanh v\u00e0 ki\u1ebfn tr\u00fac microservice b\u1eaft \u0111\u1ea7u c\u00f3 \u00fd ngh\u0129a, th\u00ec vi\u1ec7c chuy\u1ec3n \u0111\u1ed5i s\u1ebd d\u1ec5 qu\u1ea3n l\u00fd h\u01a1n.</p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/","title":"V\u00ec sao Google v\u00e0 Meta cho c\u1ea3 t\u1ec9 d\u00f2ng code v\u00e0o m\u1ed9t repo l\u1edbn?","text":""},{"location":"ByteByteGo/monorepo-vs-microrepo/#nguon","title":"Ngu\u1ed3n","text":"<p> Why Google and Meta Put Billion Lines of Code In 1 Repository?</p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>B\u1ea1n \u0111\u00e3 bao gi\u1edd th\u1eafc m\u1eafc r\u1eb1ng l\u00e0m sao nh\u1eefng g\u00e3 kh\u1ed5ng l\u1ed3 c\u00f4ng ngh\u1ec7 nh\u01b0 Google v\u00e0 Facebook qu\u1ea3n l\u00fd \u0111\u01b0\u1ee3c \u0111\u1ed1ng code kh\u1ed5ng l\u1ed3 c\u1ee7a h\u1ecd kh\u00f4ng? Ho\u1eb7c c\u00f3 th\u1ec3 b\u1ea1n \u0111ang c\u1ea7n t\u00ecm c\u00e1ch t\u1ed1t nh\u1ea5t \u0111\u1ec3 c\u1ea5u tr\u00fac code cho project c\u1ee7a ch\u00ednh m\u00ecnh? C\u00e1ch ta qu\u1ea3n l\u00fd code c\u00f3 th\u1ec3 \u1ea3nh h\u01b0\u1edfng l\u1edbn \u0111\u1ebfn n\u0103ng su\u1ea5t team v\u00e0 s\u1ef1 \u1ed5n \u0111\u1ecbnh c\u1ee7a s\u1ea3n ph\u1ea9m. \u0110\u00f3 l\u00e0 l\u00fd do m\u00e0 ch\u00fang ta s\u1ebd th\u1ea3o lu\u1eadn v\u1ec1 hai c\u00e1ch qu\u1ea3n l\u00fd code: monorepo v\u00e0 microrepo.</p> <p>Tr\u01b0\u1edbc khi \u0111i v\u00e0o chi ti\u1ebft, fun fact cho b\u1ea1n l\u00e0, monorepo kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t kh\u00e1i ni\u1ec7m m\u1edbi. C\u1ea3 Linux v\u00e0 Windows \u0111\u1ec1u \u0111\u01b0\u1ee3c t\u1ea1o ra b\u1eb1ng c\u00e1ch ti\u1ebfp c\u1eadn monorepo.</p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#monorepo","title":"Monorepo","text":"<p>V\u1edbi monorepo, t\u01b0\u1edfng t\u01b0\u1ee3ng r\u1eb1ng \u0111\u00f3 nh\u01b0 m\u1ed9t trung t\u00e2m ch\u1ee9a t\u1ea5t c\u1ea3 code c\u1ee7a ch\u00fang ta. C\u00e1c c\u00f4ng ty nh\u01b0 Google, Facebook v\u00e0 Uber \u0111\u00e3 ch\u1ecdn h\u01b0\u1edbng ti\u1ebfp c\u1eadn n\u00e0y. \u0110\u00f3 l\u00e0 m\u1ed9t th\u01b0 vi\u1ec7n kh\u1ed5ng l\u1ed3, m\u1ecdi th\u1ee9 n\u1eb1m t\u1ea1i \u0111\u00f3. Kh\u00e1 gh\u00ea \u0111\u00fang kh\u00f4ng? V\u1eady c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0y c\u00f3 \u01b0u v\u00e0 nh\u01b0\u1ee3c \u0111i\u1ec3m g\u00ec?</p> <p></p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#uu-iem","title":"\u01afu \u0111i\u1ec3m","text":"<p>\u01afu \u0111i\u1ec3m d\u1ec5 th\u1ea5y nh\u1ea5t c\u1ee7a monorepo l\u00e0 cho ph\u00e9p d\u1ec5 d\u00e0ng thay \u0111\u1ed5i code gi\u1eefa c\u00e1c project kh\u00e1c nhau. V\u00ed d\u1ee5 ta c\u00f3 m\u1ed9t h\u00e0m ti\u1ec7n \u00edch \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong 10 service kh\u00e1c nhau, v\u00e0 ta c\u1ea7n thay \u0111\u1ed5i g\u00ec \u0111\u00f3 trong h\u00e0m. Trong monorepo, ta ch\u1ec9 c\u1ea7n m\u1ed9t commit, t\u1ea1i \u0111\u00fang m\u1ed9t ch\u1ed7.</p> <p>Ti\u1ebfp \u0111\u1ebfn, qu\u1ea3n l\u00fd dependency c\u0169ng h\u01b0\u1edfng l\u1ee3i. Thay v\u00ec ph\u1ea3i x\u1eed l\u00fd nhi\u1ec1u phi\u00ean b\u1ea3n c\u1ee7a m\u1ed9t package tr\u00ean nhi\u1ec1u repo kh\u00e1c nhau, ta c\u00f3 m\u1ed9t c\u00e1i nh\u00ecn t\u1ed5ng th\u1ec3 v\u1ec1 c\u00e1c dependency.</p> <p></p> <p>T\u00ednh nh\u1ea5t qu\u00e1n l\u00e0 m\u1ed9t \u01b0u \u0111i\u1ec3m l\u1edbn kh\u00e1c c\u1ee7a monorepo. Code review \u0111\u00f4i khi kh\u00e1 thi\u1ebfu nh\u1ea5t qu\u00e1n, v\u1edbi c\u00e1c quy t\u1eafc v\u00e0 ti\u00eau chu\u1ea9n kh\u00e1c nhau \u1edf c\u00e1c team kh\u00e1c nhau. V\u1edbi monorepo, m\u1ecdi ng\u01b0\u1eddi \u0111\u1ec1u tu\u00e2n th\u1ee7 c\u00f9ng m\u1ed9t b\u1ed9 quy t\u1eafc. V\u00e0 \u0111\u1eebng qu\u00ean vi\u1ec7c t\u00e1i s\u1eed d\u1ee5ng code. B\u1ea1n c\u1ea7n m\u1ed9t ch\u1ee9c n\u0103ng \u0111\u00e3 \u0111\u01b0\u1ee3c t\u1ea1o ra cho m\u1ed9t c\u00e1i service kh\u00e1c h\u1ea3? X\u00e0i l\u1ea1i c\u00e1i code \u0111\u00f3 th\u00f4i. Ta c\u00f3 th\u1ec3 th\u1ea5y m\u1ecdi th\u1ee9 trong monorepo, gi\u00fap vi\u1ec7c t\u00e1i s\u1eed d\u1ee5ng code tr\u1edf n\u00ean d\u1ec5 d\u00e0ng.</p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#nhuoc-iem","title":"Nh\u01b0\u1ee3c \u0111i\u1ec3m","text":"<p>Monorepo y\u00eau c\u1ea7u l\u00ean k\u1ebf ho\u1ea1ch c\u1ea9n th\u1eadn v\u00e0 c\u00e1c c\u00f4ng c\u1ee5 ph\u00f9 h\u1ee3p. Google \u0111\u00e3 ph\u1ea3i x\u00e2y d\u1ef1ng m\u1ed9t c\u00f4ng c\u1ee5 d\u00e0nh ri\u00eang cho vi\u1ec7c n\u00e0y, g\u1ecdi l\u00e0 Bazel v\u00e0 c\u1ea7n m\u1ed9t team l\u1edbn \u0111\u1ec3 h\u1ed7 tr\u1ee3 c\u00e1i codebase si\u00eau to kh\u1ed5ng l\u1ed3 n\u00e0y. Facebook d\u00f9ng Buck c\u0169ng v\u00ec l\u00fd do \u0111\u00f3. Khi repo ph\u00ecnh to, n\u1ebfu kh\u00f4ng qu\u1ea3n l\u00fd c\u1ea9n th\u1eadn, CI/CD s\u1ebd ch\u1ea1y ch\u1eadm nh\u01b0 r\u00f9a. V\u00ec v\u1eady CI/CD c\u0169ng c\u1ea7n m\u1ed9t \u0111\u1ed9i ng\u0169 l\u1edbn t\u01b0\u01a1ng \u0111\u01b0\u01a1ng.</p> <p></p> <p>V\u1edbi c\u00e1c dev m\u1edbi, m\u1ed9t repo si\u00eau to s\u1ebd khi\u1ebfn h\u1ecd b\u1ecb cho\u00e1ng. N\u1ebfu c\u00f3 m\u1ed9t codebase \u0111\u01b0\u1ee3c t\u00e0i li\u1ec7u h\u00f3a t\u1ed1t v\u00e0 m\u1ed9t qu\u00e1 tr\u00ecnh onboarding chu\u1ea9n, monorepo n\u00e0o c\u0169ng ch\u01a1i \u0111\u01b0\u1ee3c.</p> <p>Cu\u1ed1i c\u00f9ng, d\u00f9 m\u1ed7i team s\u1edf h\u1eefu m\u1ed9t ph\u1ea7n monorepo, t\u00f9y ch\u1ec9nh c\u00f3 th\u1ec3 kh\u00e1 kh\u00f3 kh\u0103n. Team kh\u00f4ng th\u1ec3 s\u1eed d\u1ee5ng c\u00e1c c\u00f4ng c\u1ee5 ho\u1eb7c th\u01b0 vi\u1ec7n kh\u00e1c nhau m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp do c\u00f3 th\u1ec3 x\u1ea3y ra xung \u0111\u1ed9t, v\u00e0 c\u00e1c thay \u0111\u1ed5i l\u1edbn c\u1ea7n xem x\u00e9t to\u00e0n b\u1ed9 codebase. Nh\u01b0ng v\u1edbi vi\u1ec7c s\u1eed d\u1ee5ng c\u00e1c c\u00f4ng c\u1ee5 nh\u01b0 Bazel c\u1ee7a Google v\u00e0 duy tr\u00ec giao ti\u1ebfp t\u1ed1t, ta c\u00f3 th\u1ec3 c\u00e2n b\u1eb1ng \u0111\u01b0\u1ee3c trade-off n\u00e0y, cho ph\u00e9p c\u00e1c team ph\u00e1t tri\u1ec3n linh ho\u1ea1t trong c\u00e1c quy t\u1eafc chung.</p> <p></p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#microrepo","title":"Microrepo","text":"<p>H\u01b0\u1edbng ti\u1ebfp c\u1eadn n\u00e0y coi m\u1ed7i service ho\u1eb7c th\u00e0nh ph\u1ea7n h\u1ec7 th\u1ed1ng nh\u01b0 m\u1ed9t th\u1ef1c th\u1ec3 \u0111\u1ed9c l\u1eadp, v\u1edbi repo ri\u00eang. C\u00e1c c\u00f4ng ty nh\u01b0 Amazon v\u00e0 Netflix \u0111\u00e3 ch\u1ecdn h\u01b0\u1edbng ti\u1ebfp c\u1eadn ph\u00e2n t\u00e1n n\u00e0y.</p> <p></p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#uu-iem_1","title":"\u01afu \u0111i\u1ec3m","text":"<p>R\u00f5 r\u00e0ng l\u00e0 s\u1ef1 \u0111\u1ed9c l\u1eadp. M\u1ed7i team c\u00f3 th\u1ec3 qu\u1ea3n l\u00fd v\u00e0 m\u1edf r\u1ed9ng repo khi c\u1ea7n. M\u1ed9t \u01b0u \u0111i\u1ec3m kh\u00e1c l\u00e0 c\u00f4 l\u1eadp r\u1ee7i ro. N\u1ebfu c\u00f3 v\u1ea5n \u0111\u1ec1 x\u1ea3y ra \u1edf m\u1ed9t repo, n\u00f3 s\u1ebd kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn c\u00e1c repo kh\u00e1c, gi\u1ea3m thi\u1ec3u t\u00e1c \u0111\u1ed9ng. H\u01b0\u1edbng ti\u1ebfp c\u1eadn n\u00e0y c\u0169ng cung c\u1ea5p s\u1ef1 linh ho\u1ea1t. M\u1ed7i team c\u00f3 th\u1ec3 ch\u1ecdn c\u00f4ng c\u1ee5 t\u1ed1t nh\u1ea5t cho repo c\u1ee7a m\u00ecnh v\u00e0 t\u00f9y ch\u1ec9nh m\u00f4i tr\u01b0\u1eddng theo nhu c\u1ea7u c\u1ee5 th\u1ec3. Th\u00eam n\u1eefa, m\u1ed7i team s\u1edf h\u1eefu repo c\u1ee7a m\u00ecnh, gi\u00fap qu\u1ea3n l\u00fd tr\u00e1ch nhi\u1ec7m v\u00e0 release d\u1ec5 d\u00e0ng h\u01a1n.</p> <p></p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#nhuoc-iem_1","title":"Nh\u01b0\u1ee3c \u0111i\u1ec3m","text":"<p>\u0110\u1ed3ng b\u1ed9 h\u00f3a thay \u0111\u1ed5i qua nhi\u1ec1u repo c\u00f3 th\u1ec3 g\u1eb7p kh\u00f3 kh\u0103n. N\u00f3 y\u00eau c\u1ea7u s\u1ef1 h\u1ee3p t\u00e1c ch\u1eb7t ch\u1ebd v\u00e0 c\u00f3 th\u1ec3 c\u1ea7n th\u00eam c\u00e1c c\u00f4ng c\u1ee5 chuy\u00ean bi\u1ec7t. Qu\u1ea3n l\u00fd dependency gi\u1eefa c\u00e1c repo c\u0169ng ph\u1ee9c t\u1ea1p, nh\u01b0ng c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng c\u00e1c c\u00f4ng c\u1ee5 nh\u01b0 Nexus ho\u1eb7c Artifactory \u0111\u1ec3 h\u1ed7 tr\u1ee3. </p> <p>Khi kh\u00f4ng c\u00f3 ti\u00eau chu\u1ea9n chung, code standard c\u00f3 th\u1ec3 thi\u1ebfu nh\u1ea5t qu\u00e1n, v\u00e0 \u0111\u00f4i khi d\u1eabn \u0111\u1ebfn ch\u1ea5t l\u01b0\u1ee3ng code t\u1ec7 h\u1ea1i. \u0110\u1ec3 tr\u00e1nh \u0111i\u1ec1u n\u00e0y, ta c\u1ea7n thi\u1ebft l\u1eadp c\u00e1c quy t\u1eafc coding cho to\u00e0n b\u1ed9 t\u1ed5 ch\u1ee9c. </p> <p>Th\u00eam n\u1eefa, microrepo c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn vi\u1ec7c tr\u00f9ng l\u1eb7p code. Sao ch\u00e9p code gi\u1eefa c\u00e1c repo l\u00e0m t\u0103ng k\u00edch th\u01b0\u1edbc codebase v\u00e0 c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn l\u1ed7i. \u0110\u1ec3 tr\u00e1nh \u0111i\u1ec1u n\u00e0y, ng\u01b0\u1eddi ta th\u01b0\u1eddng t\u1ea1o th\u01b0 vi\u1ec7n chung cho code gi\u1ed1ng nhau.</p>"},{"location":"ByteByteGo/monorepo-vs-microrepo/#cai-nao-ngon-hon","title":"C\u00e1i n\u00e0o ngon h\u01a1n?","text":"<p>C\u00e2u tr\u1ea3 l\u1eddi l\u00e0 t\u00f9y v\u00e0o ho\u00e0n c\u1ea3nh, hay n\u00f3i ch\u00ednh x\u00e1c h\u01a1n l\u00e0 t\u00f9y v\u00e0o nhu c\u1ea7u c\u1ee7a team, k\u00edch th\u01b0\u1edbc c\u00f4ng ty, t\u00ednh ch\u1ea5t c\u1ee7a project, v\u00e0 v\u0103n h\u00f3a c\u00f4ng ty. </p> <p></p> <p>Monorepo mang l\u1ea1i s\u1ef1 nh\u1ea5t qu\u00e1n, l\u00e0m cho vi\u1ec7c thay \u0111\u1ed5i gi\u1eefa c\u00e1c project d\u1ec5 d\u00e0ng h\u01a1n, v\u00e0 khuy\u1ebfn kh\u00edch t\u00e1i s\u1eed d\u1ee5ng code. N\u00f3 ph\u00f9 h\u1ee3p v\u1edbi c\u00e1c c\u00f4ng ty l\u1edbn v\u1edbi nhi\u1ec1u team l\u00e0m vi\u1ec7c tr\u00ean c\u00e1c project li\u00ean k\u1ebft v\u1edbi nhau, n\u01a1i y\u00eau c\u1ea7u s\u1ef1 h\u1ee3p t\u00e1c v\u00e0 nh\u1ea5t qu\u00e1n. Tuy nhi\u00ean, monorepo y\u00eau c\u1ea7u vi\u1ec7c l\u00ean k\u1ebf ho\u1ea1ch c\u1ea9n th\u1eadn v\u00e0 c\u00f4ng c\u1ee5 ph\u00f9 h\u1ee3p. N\u1ebfu kh\u00f4ng qu\u1ea3n l\u00fd t\u1ed1t, n\u00f3 c\u00f3 th\u1ec3 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn hi\u1ec7u su\u1ea5t c\u1ee7a CI/CD pipelines v\u00e0 gi\u1ea3m b\u1edbt s\u1ef1 linh ho\u1ea1t c\u1ee7a m\u1ed7i team.</p> <p>Ng\u01b0\u1ee3c l\u1ea1i, microrepo mang l\u1ea1i s\u1ef1 linh ho\u1ea1t, c\u00f4 l\u1eadp r\u1ee7i ro, v\u00e0 tr\u00e1ch nhi\u1ec7m r\u00f5 r\u00e0ng. N\u00f3 c\u00f3 th\u1ec3 l\u00e0 l\u1ef1a ch\u1ecdn t\u1ed1t cho c\u00e1c c\u00f4ng ty \u01b0a chu\u1ed9ng s\u1ef1 t\u1ef1 ch\u1ee7 c\u1ee7a team, \u0111\u1eb7c bi\u1ec7t n\u1ebfu c\u00e1c team l\u00e0m vi\u1ec7c tr\u00ean c\u00e1c project kh\u00e1c nhau. Tuy nhi\u00ean, n\u00f3 c\u0169ng mang l\u1ea1i nh\u1eefng th\u00e1ch th\u1ee9c ri\u00eang. Qu\u1ea3n l\u00fd ph\u1ee9c t\u1ea1p h\u01a1n, \u0111\u1eb7c bi\u1ec7t l\u00e0 khi th\u1ef1c hi\u1ec7n thay \u0111\u1ed5i gi\u1eefa c\u00e1c repo, tr\u00f9ng l\u1eb7p code n\u1eefa, \u0111\u00f3 l\u00e0 nh\u1eefng nguy c\u01a1 c\u1ee7a microrepo n\u1ebfu b\u1ea1n kh\u00f4ng qu\u1ea3n l\u00fd t\u1ed1t.</p> <p></p>"},{"location":"ByteByteGo/netflix-architecture-evolution/","title":"Gi\u1ea3i m\u00e3 s\u1ef1 ph\u00e1t tri\u1ec3n trong ki\u1ebfn tr\u00fac API c\u1ee7a Netflix","text":""},{"location":"ByteByteGo/netflix-architecture-evolution/#nguon","title":"Ngu\u1ed3n","text":"<p> Demystifying the Unusual Evolution of the Netflix API Architecture</p> <p>Trong nh\u1eefng ng\u00e0y \u0111\u1ea7u, Netflix s\u1eed d\u1ee5ng ki\u1ebfn tr\u00fac nguy\u00ean kh\u1ed1i (monolith). H\u00ecnh dung m\u1ed9t h\u1ec7 th\u1ed1ng l\u1edbn, k\u1ebft n\u1ed1i v\u1edbii nhau, trong \u0111\u00f3 t\u1ea5t c\u1ea3 c\u00e1c th\u00e0nh ph\u1ea7n l\u00e0 m\u1ed9t ph\u1ea7n c\u1ee7a m\u1ed9t codebase th\u1ed1ng nh\u1ea5t.</p> <p></p> <p></p> <p>Khi Netflix ph\u00e1t tri\u1ec3n v\u00e0 h\u1ee3p t\u00e1c v\u1edbi nhi\u1ec1u studio h\u01a1n \u0111\u1ec3 t\u1ea1o ra nhi\u1ec1u n\u1ed9i dung g\u1ed1c, ki\u1ebfn tr\u00fac nguy\u00ean kh\u1ed1i n\u00e0y b\u1eaft \u0111\u1ea7u tr\u1edf th\u00e0nh m\u1ed9t v\u1ea5n \u0111\u1ec1. C\u00e1c k\u1ef9 s\u01b0 c\u1ee7a Netflixx \u0111\u00e3 chuy\u1ec3n \u0111\u1ed5i ki\u1ebfn tr\u00fac n\u00e0y tr\u1edf th\u00e0nh c\u00e1c microservice. Netflix \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn v\u1edbi s\u1ed1 l\u01b0\u1ee3ng microservice \u0111\u1ed3 s\u1ed9. S\u1ef1 thay \u0111\u1ed5i n\u00e0y gi\u00fap t\u0103ng hi\u1ec7u qu\u1ea3 v\u00e0 kh\u1ea3 n\u0103ng t\u1ef1 ch\u1ee7. N\u00f3 bi\u1ebfn ki\u1ebfn tr\u00fac c\u1ee7a Netflix th\u00e0nh m\u1ed9t m\u1ea1ng l\u01b0\u1edbi c\u00e1c service.</p> <p></p> <p></p> <p>Nh\u01b0ng vi\u1ec7c k\u1ebft n\u1ed1i tr\u1ef1c ti\u1ebfp c\u00e1c \u1ee9ng d\u1ee5ng m\u00e0 c\u00e1c studio s\u1eed d\u1ee5ng v\u1edbi nhi\u1ec1u microservice kh\u00f4ng ph\u1ea3i l\u00e0 \u0111i\u1ec1u l\u00fd t\u01b0\u1edfng. \u0110\u1ec3 v\u01b0\u1ee3t qua th\u00e1ch th\u1ee9c n\u00e0y, h\u1ecd \u0111\u00e3 t\u1ea1o ra m\u1ed9t layer t\u1ed5ng h\u1ee3p c\u1ed5ng d\u1ecbch v\u1ee5. V\u1ec1 c\u01a1 b\u1ea3n, h\u1ecd x\u00e2y d\u1ef1ng ra m\u1ed9t API Gateway \u0111\u1ec3 li\u00ean k\u1ebft t\u1ea5t c\u1ea3 c\u00e1c service v\u1edbi nhau v\u00e0 gi\u1edbi thi\u1ec7u m\u1ed9t giao di\u1ec7n th\u1ed1ng nh\u1ea5t cho client. </p> <p></p> <p>Thi\u1ebft l\u1eadp n\u00e0y ho\u1ea1t \u0111\u1ed9ng t\u1ed1t trong c\u00e1c tr\u01b0\u1eddng h\u1ee3p s\u1eed d\u1ee5ng nhi\u1ec1u service c\u00f9ng l\u00fac. Gi\u1ea3 s\u1eed ta c\u00f3 m\u1ed9t studio app c\u1ea7n d\u00f9ng 3 API: movie, production v\u00e0 talent, \u0111\u1ec3 render UI cho frontend. Layer t\u1ed5ng h\u1ee3p c\u1ed5ng d\u1ecbch v\u1ee5 s\u1ebd gi\u1ea3i quy\u1ebft chuy\u1ec7n n\u00e0y.</p> <p>Layer t\u1ed5ng h\u1ee3p c\u1ed5ng d\u1ecbch v\u1ee5 qu\u1ea3n l\u00fd c\u00e1c API m\u1ed9t c\u00e1ch c\u00f3 tr\u1eadt t\u1ef1, theo l\u00fd thuy\u1ebft l\u00e0 th\u1ebf, nh\u01b0ng th\u1ef1c t\u1ebf n\u00f3 l\u1ea1i tr\u1edf th\u00e0nh m\u1ed9t ki\u1ebfn tr\u00fac nguy\u00ean kh\u1ed1i m\u1edbi khi team m\u1edf r\u1ed9ng v\u00e0 c\u00f3 nhi\u1ec1u service h\u01a1n. Khi s\u1ed1 dev t\u0103ng l\u00ean v\u00e0 \u0111\u1ed9 ph\u1ee9c t\u1ea1p c\u1ee7a c\u00e1c domain t\u0103ng l\u00ean, vi\u1ec7c dev layer n\u00e0y tr\u1edf n\u00ean kh\u00f3 h\u01a1n. </p> <p></p> <p>\u0110\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y, Netflix chuy\u1ec3n sang GraphQL v\u00e0 gi\u1edfi thi\u1ec7u Federated Gateway (c\u1ed5ng li\u00ean k\u1ebft). Chi\u1ebfn l\u01b0\u1ee3c n\u00e0y cho ph\u00e9p c\u00e1c dev qu\u1ea3n l\u00fd ph\u1ea7n c\u1ee7a h\u1ecd trong \"graph\", \u0111\u1ed3ng th\u1eddi cung c\u1ea5p m\u1ed9t \u0111i\u1ec3m truy c\u1eadp th\u1ed1ng nh\u1ea5t v\u00e0 hi\u1ec7u qu\u1ea3 cho c\u00e1c studio app kh\u00e1c nhau.</p> <p></p> <p>GraphQL l\u00e0 tr\u00e1i tim c\u1ee7a Federated Gateway. Ng\u00f4n ng\u1eef truy v\u1ea5n m\u1ea1nh m\u1ebd n\u00e0y cho ph\u00e9p UI truy v\u1ea5n ch\u00ednh x\u00e1c nh\u1eefng g\u00ec n\u00f3 c\u1ea7n trong m\u1ed9t round-trip, k\u1ec3 c\u1ea3 khi ng\u01b0\u1eddi d\u00f9ng \u1edf xa datacenter. Nh\u1edd c\u00f3 GraphQL v\u00e0 Federated Gateway, Netflix c\u00f3 th\u1ec3 \u0111\u1ecbnh tuy\u1ebfn business logic ph\u1ee9c t\u1ea1p \u0111\u1ebfn c\u00e1c d\u1ecbch v\u1ee5 th\u00edch h\u1ee3p. Li\u00ean k\u1ebft GraphQL cho ph\u00e9p Netflix thi\u1ebft l\u1eadp m\u1ed9t c\u1ed5ng GraphQL duy nh\u1ea5t \u0111\u1ec3 truy v\u1ea5n d\u1eef li\u1ec7u t\u1eeb t\u1ea5t c\u1ea3 c\u00e1c API kh\u00e1c. </p> <p>H\u00e0nh tr\u00ecnh t\u1eeb ki\u1ebfn tr\u00fac nguy\u00ean kh\u1ed1i \u0111\u1ebfn Federated Gateway minh h\u1ecda c\u00e1ch ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng c\u1ea7n th\u00edch \u1ee9ng v\u1edbi nhu c\u1ea7u kinh doanh n\u0103ng \u0111\u1ed9ng v\u00e0 ng\u00e0y c\u00e0ng t\u0103ng. Ch\u00ednh nh\u1eefng \u0111i\u1ec1u ch\u1ec9nh n\u00e0y \u0111\u00e3 gi\u00fap Netflix t\u1ea1o ra c\u00e1c n\u1ed9i dung m\u00e0 ch\u00fang ta y\u00eau th\u00edch. Nh\u01b0ng \u0111\u00e2y l\u00e0 \u0111i\u1ec3m ch\u00ednh. S\u1ef1 ph\u00e1t tri\u1ec3n c\u1ee7a ki\u1ebfn tr\u00fac l\u00e0 t\u1ed1i quan tr\u1ecdng. Th\u1eadt d\u1ec5 d\u00e0ng \u0111\u1ec3 nh\u00ecn v\u00e0o nh\u1eefng g\u00e3 kh\u1ed5ng l\u1ed3 nh\u01b0 Google v\u00e0 Netflix v\u00e0 sao ch\u00e9p c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng c\u1ee7a h\u1ecd, ngay c\u1ea3 khi \u0111i\u1ec1u \u0111\u00f3 kh\u00f4ng c\u1ea7n thi\u1ebft. T\u1ed1i \u01b0u h\u00f3a qu\u00e1 m\u1ee9c cho nh\u1eefng v\u1ea5n \u0111\u1ec1 m\u00e0 b\u1ea1n kh\u00f4ng g\u1eb7p, v\u00e0 c\u00f3 th\u1ec3 kh\u00f4ng bao gi\u1edd g\u1eb7p, l\u00e0 m\u1ed9t c\u1ea1m b\u1eaby ph\u1ed5 bi\u1ebfn. Thay v\u00e0o \u0111\u00f3, ta c\u1ea7n t\u1eadp trung v\u00e0o nh\u1eefng nhu c\u1ea7u c\u1ee7a m\u00ecnh. Ch\u00fang ta n\u00ean quy\u1ebft \u0111\u1ecbnh logic kinh doanh c\u1ee7a m\u00ecnh n\u00ean t\u1eadp trung v\u00e0o \u0111\u00e2u v\u00e0 x\u00e1c \u0111\u1ecbnh n\u01a1i ta c\u1ea7n \u0111\u1ec3 m\u1edf r\u1ed9ng quy m\u00f4 khi doanh nghi\u1ec7p c\u1ee7a ta ph\u00e1t tri\u1ec3n. </p> <p>Ki\u1ebfn tr\u00fac doanh nghi\u1ec7p c\u1ee7a ch\u00fang ta ph\u1ea3i \u0111\u01b0\u1ee3c \u0111i\u1ec1u ch\u1ec9nh theo nhu c\u1ea7u c\u1ee7a n\u00f3 ch\u1ee9 kh\u00f4ng ph\u1ea3i ng\u01b0\u1ee3c l\u1ea1i. Ki\u1ebfn tr\u00fac t\u1ed1t nh\u1ea5t l\u00e0 ki\u1ebfn tr\u00fac ph\u00f9 h\u1ee3p v\u1edbi nhu c\u1ea7u kinh doanh c\u1ee7a ch\u00fang ta, kh\u00f4ng ph\u1ea3i l\u00e0 ki\u1ebfn tr\u00fac b\u1eaft ch\u01b0\u1edbc nh\u1eefng g\u00e3 kh\u1ed5ng l\u1ed3 c\u00f4ng ngh\u1ec7.</p>"},{"location":"ByteByteGo/network-protocols/","title":"8 giao th\u1ee9c m\u1ea1ng th\u00f4ng d\u1ee5ng","text":""},{"location":"ByteByteGo/network-protocols/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 8 Most Popular Network Protocols Explained</p>"},{"location":"ByteByteGo/network-protocols/#http","title":"HTTP","text":"<p>HTTP l\u00e0 x\u01b0\u01a1ng s\u1ed1ng c\u1ee7a ng\u00e0nh ph\u00e1t tri\u1ec3n web. HTTP s\u1eed d\u1ee5ng m\u00f4 h\u00ecnh request - response. C\u00e1c client s\u1ebd g\u1eedi request \u0111\u1ebfn server \u0111\u1ec3 l\u1ea5y c\u00e1c t\u00e0i nguy\u00ean nh\u01b0 trang web, h\u00ecnh \u1ea3nh, hay d\u1eef li\u1ec7u API. Server s\u1ebd tr\u1ea3 v\u1ec1 c\u00e1c response v\u1edbi c\u00e1c status code nh\u01b0 200 OK, 404 Not Found, hay 500 Internal Server Error. </p> <p></p> <p>D\u1eef li\u1ec7u \u0111\u01b0\u1ee3c request s\u1ebd \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 trong ph\u1ea7n body c\u1ee7a response. </p> <p></p> <p>HTTP \u0111\u1ecbnh ngh\u0129a c\u00e1c ph\u01b0\u01a1ng th\u1ee9c nh\u01b0 GET, POST, PUT, v\u00e0 DELETE \u0111\u1ec3 th\u1ef1c hi\u1ec7n c\u00e1c thao t\u00e1c kh\u00e1c nhau tr\u00ean server. V\u00ed d\u1ee5, GET l\u1ea5y d\u1eef li\u1ec7u, POST g\u1eedi d\u1eef li\u1ec7u form, v\u00e0 DELETE x\u00f3a t\u00e0i nguy\u00ean.</p> <p></p>"},{"location":"ByteByteGo/network-protocols/#https","title":"HTTPS","text":"<p>HTTPS \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng d\u1ef1a tr\u00ean HTTP b\u1eb1ng c\u00e1ch th\u00eam m\u00e3 h\u00f3a th\u00f4ng qua Transport Layer Security, hay TLS. </p> <p></p> <p>TLS cho ph\u00e9p browser v\u00e0 server thi\u1ebft l\u1eadp m\u1ed9t k\u1ebft n\u1ed1i \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a, gi\u1ed1ng nh\u01b0 hai ng\u01b0\u1eddi th\u1ecfa thu\u1eadn s\u1eed d\u1ee5ng m\u1ed9t m\u1eadt m\u00e3 b\u00ed m\u1eadt. K\u1ebft n\u1ed1i \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a n\u00e0y gi\u1eef cho d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c b\u1ea3o m\u1eadt khi truy\u1ec1n qua internet. L\u01b0u l\u01b0\u1ee3ng truy c\u1eadp s\u1ebd b\u1ecb x\u00e1o tr\u1ed9n \u0111\u1ec3 tr\u1edf n\u00ean v\u00f4 ngh\u0129a \u0111\u1ed1i v\u1edbi b\u1ea5t k\u1ef3 ai c\u1ed1 g\u1eafng ch\u1eb7n n\u00f3. </p> <p></p> <p>TLS c\u0169ng x\u00e1c minh danh t\u00ednh c\u1ee7a server, ng\u0103n ch\u1eb7n k\u1ebb gian m\u1ea1o danh c\u00e1c trang web h\u1ee3p ph\u00e1p trong c\u00e1c cu\u1ed9c t\u1ea5n c\u00f4ng \"man-in-the-middle\". TLS cung c\u1ea5p m\u00e3 h\u00f3a, b\u1ea3o m\u1eadt v\u00e0 x\u00e1c th\u1ef1c, l\u00e0 n\u1ec1n t\u1ea3ng cho HTTPS v\u00e0 c\u00e1c trang web an to\u00e0n. Hi\u1ec3u \u0111\u01b0\u1ee3c TLS s\u1ebd gi\u00fap c\u1ea5u h\u00ecnh HTTPS \u0111\u00fang c\u00e1ch \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o an to\u00e0n, \u0111i\u1ec1u n\u00e0y r\u1ea5t quan tr\u1ecdng \u0111\u1ed1i v\u1edbi c\u00e1c tr\u01b0\u1eddng h\u1ee3p nh\u01b0 ng\u00e2n h\u00e0ng v\u00e0 mua s\u1eafm tr\u1ef1c tuy\u1ebfn.</p>"},{"location":"ByteByteGo/network-protocols/#http3","title":"HTTP/3","text":"<p>HTTP/3 h\u01b0\u1edbng \u0111\u1ebfn vi\u1ec7c c\u1ea3i thi\u1ec7n t\u1ed1c \u0111\u1ed9 v\u00e0 b\u1ea3o m\u1eadt, \u0111\u1ed3ng th\u1eddi kh\u1eafc ph\u1ee5c m\u1ed9t s\u1ed1 v\u1ea5n \u0111\u1ec1 hi\u1ec7u su\u1ea5t kh\u00f3 ch\u1ecbu c\u1ee7a c\u00e1c phi\u00ean b\u1ea3n tr\u01b0\u1edbc. HTTP/3 s\u1eed d\u1ee5ng QUIC, \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng tr\u00ean UDP thay v\u00ec TCP. \u0110i\u1ec1u n\u00e0y t\u1ed1i \u01b0u h\u00f3a hi\u1ec7u su\u1ea5t m\u00e0 kh\u00f4ng c\u00f3 c\u00e1c h\u1ea1n ch\u1ebf c\u1ee7a TCP. </p> <p></p> <p>QUIC gi\u1ea3m thi\u1ec3u \u0111\u1ed9 tr\u1ec5 khi chuy\u1ec3n \u0111\u1ed5i m\u1ea1ng tr\u00ean \u0111i\u1ec7n tho\u1ea1i th\u00f4ng minh. Khi r\u1eddi kh\u1ecfi nh\u00e0 ho\u1eb7c v\u0103n ph\u00f2ng, m\u1ea1ng s\u1ebd \u00edt b\u1ecb ch\u1eadm h\u01a1n. QUIC lo\u1ea1i b\u1ecf t\u00ecnh tr\u1ea1ng t\u1eafc ngh\u1ebdn do \"head-of-line blocking\", n\u01a1i m\u1ed9t g\u00f3i tin b\u1ecb m\u1ea5t s\u1ebd l\u00e0m ch\u1eadm c\u00e1c lu\u1ed3ng ph\u00eda sau n\u00f3, gi\u00fap c\u00e1c lu\u1ed3ng kh\u00e1c kh\u00f4ng ph\u1ea3i ch\u1edd m\u1ed9t lu\u1ed3ng b\u1ecb t\u1eafc ngh\u1ebdn. </p> <p></p> <p>QUIC c\u0169ng t\u0103ng t\u1ed1c qu\u00e1 tr\u00ecnh thi\u1ebft l\u1eadp k\u1ebft n\u1ed1i ban \u0111\u1ea7u b\u1eb1ng c\u00e1ch k\u1ebft h\u1ee3p c\u00e1c b\u01b0\u1edbc b\u1eaft tay m\u00e3 h\u00f3a v\u00e0 truy\u1ec1n t\u1ea3i th\u00e0nh m\u1ed9t b\u01b0\u1edbc duy nh\u1ea5t. Client c\u00f3 th\u1ec3 b\u1ecf qua c\u00e1c round-trip cho c\u00e1c server \u0111\u00e3 k\u1ebft n\u1ed1i tr\u01b0\u1edbc \u0111\u00f3. Vi\u1ec7c kh\u00f4i ph\u1ee5c 0-RTT s\u1ebd nhanh h\u01a1n nhi\u1ec1u. </p> <p></p> <p>Ngo\u00e0i ra, QUIC cung c\u1ea5p m\u00e3 h\u00f3a m\u1eb7c \u0111\u1ecbnh \u1edf t\u1ea7ng giao v\u1eadn. T\u1ea5t c\u1ea3 d\u1eef li\u1ec7u k\u1ebft n\u1ed1i \u0111\u1ec1u \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a, kh\u00f4ng ch\u1ec9 d\u1eef li\u1ec7u \u1ee9ng d\u1ee5ng, th\u1eadm ch\u00ed c\u1ea3 c\u00e1c th\u00f4ng tin nh\u01b0 s\u1ed1 g\u00f3i c\u0169ng \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a. \u0110\u1ed1i v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng hi\u1ec7n \u0111\u1ea1i, m\u1ed7i mili gi\u00e2y \u0111\u1ec1u quan tr\u1ecdng. HTTP/3 qua QUIC cho ph\u00e9p truy\u1ec1n d\u1eef li\u1ec7u nhanh h\u01a1n.</p>"},{"location":"ByteByteGo/network-protocols/#websocket","title":"WebSocket","text":"<p>V\u1edbi giao ti\u1ebfp th\u1eddi gian th\u1ef1c, WebSocket l\u00e0 m\u1ed9t b\u01b0\u1edbc ti\u1ebfn v\u01b0\u1ee3t b\u1eadc. Kh\u00f4ng gi\u1ed1ng nh\u01b0 HTTP, WebSocket cung c\u1ea5p giao ti\u1ebfp hai chi\u1ec1u to\u00e0n di\u1ec7n tr\u00ean m\u1ed9t k\u1ebft n\u1ed1i TCP duy nh\u1ea5t. WebSocket cho ph\u00e9p k\u1ebft n\u1ed1i theo th\u1eddi gian th\u1ef1c v\u00e0 lu\u1ed3ng d\u1eef li\u1ec7u tr\u1ef1c ti\u1ebfp. </p> <p></p> <p>B\u01b0\u1edbc b\u1eaft tay c\u1ee7a WebSocket t\u00e1i s\u1eed d\u1ee5ng k\u1ebft n\u1ed1i TCP hi\u1ec7n c\u00f3, sau \u0111\u00f3 c\u00e1c message c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c truy\u1ec1n t\u1ef1 do theo c\u1ea3 hai h\u01b0\u1edbng v\u1edbi c\u1ea5u tr\u00fac \u0111\u01a1n gi\u1ea3n nh\u1ea5t.</p> <p></p> <p>WebSocket h\u1ed7 tr\u1ee3 g\u1eedi c\u00e1c message nh\u1ecf ngay l\u1eadp t\u1ee9c v\u1edbi \u0111\u1ed9 tr\u1ec5 r\u1ea5t th\u1ea5p, l\u00fd t\u01b0\u1edfng cho c\u00e1c \u1ee9ng d\u1ee5ng nh\u01b0 chat, game ho\u1eb7c c\u1eadp nh\u1eadt th\u1eddi gian th\u1ef1c. M\u00e3 h\u00f3a th\u00f4ng qua TLS c\u0169ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o an to\u00e0n.</p> <p></p>"},{"location":"ByteByteGo/network-protocols/#tcp-va-udp","title":"TCP v\u00e0 UDP","text":"<p>TCP v\u00e0 UDP cung c\u1ea5p n\u1ec1n t\u1ea3ng cho t\u1ea7ng giao v\u1eadn c\u1ee7a nhi\u1ec1u giao th\u1ee9c \u1ee9ng d\u1ee5ng m\u00e0 ta \u0111\u00e3 \u0111\u1ec1 c\u1eadp. </p> <p></p> <p>HTTP v\u00e0 WebSocket \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng tr\u00ean TCP. Ch\u00fang d\u1ef1a v\u00e0o kh\u1ea3 n\u0103ng truy\u1ec1n t\u1ea3i tin c\u1eady, s\u1eafp x\u1ebfp th\u1ee9 t\u1ef1 d\u1eef li\u1ec7u v\u00e0 ki\u1ec3m so\u00e1t t\u1eafc ngh\u1ebdn c\u1ee7a TCP \u0111\u1ec3 trao \u0111\u1ed5i tin nh\u1eafn m\u1ed9t c\u00e1ch tr\u01a1n tru v\u00e0 duy tr\u00ec k\u1ebft n\u1ed1i th\u1eddi gian th\u1ef1c \u1ed5n \u0111\u1ecbnh. HTTP/3 s\u1eed d\u1ee5ng UDP th\u00f4ng qua giao th\u1ee9c QUIC, cho ph\u00e9p t\u1ed1i \u01b0u h\u00f3a hi\u1ec7u su\u1ea5t b\u1eb1ng c\u00e1ch gi\u1ea3m b\u1edbt h\u1ea1n ch\u1ebf c\u1ee7a TCP. Tuy nhi\u00ean, UDP thi\u1ebfu t\u00ednh tin c\u1eady, v\u00ec v\u1eady HTTP/3 th\u00eam c\u00e1c ki\u1ec3m tra \u0111\u1ec3 ng\u0103n ng\u1eeba l\u1ed7i d\u1eef li\u1ec7u.</p> <p>\u0110i s\u00e2u h\u01a1n m\u1ed9t ch\u00fat, TCP \u01b0u ti\u00ean \u0111\u1ed9 tin c\u1eady h\u01a1n t\u1ed1c \u0111\u1ed9. C\u00e1c t\u00ednh n\u0103ng nh\u01b0 ki\u1ec3m tra l\u1ed7i, ki\u1ec3m so\u00e1t truy\u1ec1n t\u1ea3i v\u00e0 s\u1eafp x\u1ebfp th\u1ee9 t\u1ef1 d\u1eef li\u1ec7u \u0111\u1ea3m b\u1ea3o hi\u1ec7u su\u1ea5t \u1ed5n \u0111\u1ecbnh. TCP \u0111i\u1ec1u ch\u1ec9nh theo \u0111i\u1ec1u ki\u1ec7n m\u1ea1ng v\u1edbi vi\u1ec7c ki\u1ec3m so\u00e1t l\u01b0u l\u01b0\u1ee3ng v\u00e0 truy\u1ec1n l\u1ea1i khi c\u1ea7n. </p> <p>Ng\u01b0\u1ee3c l\u1ea1i, UDP t\u1eadp trung v\u00e0o t\u1ed1c \u0111\u1ed9 h\u01a1n l\u00e0 \u0111\u1ed9 tin c\u1eady. V\u1edbi vi\u1ec7c ki\u1ec3m tra l\u1ed7i r\u1ea5t \u00edt v\u00e0 kh\u00f4ng c\u00f3 b\u1eaft tay, UDP gi\u1ea3m thi\u1ec3u t\u1ea3i tr\u1ecdng cho c\u00e1c use case nh\u01b0 tr\u00f2 ch\u01a1i, \u0111i\u1ec7n tho\u1ea1i, Internet of Things v\u00e0 streaming. Tuy nhi\u00ean, d\u1eef li\u1ec7u UDP c\u00f3 th\u1ec3 b\u1ecb h\u1ecfng do c\u00e1c g\u00f3i tin b\u1ecb m\u1ea5t. K\u1ebft h\u1ee3p UDP v\u1edbi c\u00e1c b\u1ed9 ki\u1ec3m tra t\u00ednh to\u00e0n v\u1eb9n \u1edf t\u1ea7ng \u1ee9ng d\u1ee5ng s\u1ebd c\u00e2n b\u1eb1ng gi\u1eefa t\u1ed1c \u0111\u1ed9 v\u00e0 \u0111\u1ed9 tin c\u1eady.</p>"},{"location":"ByteByteGo/network-protocols/#smtp-va-ftp","title":"SMTP v\u00e0 FTP","text":"<p>Cu\u1ed1i c\u00f9ng, SMTP v\u00e0 FTP cung c\u1ea5p c\u00e1c ti\u00eau chu\u1ea9n \u1edf t\u1ea7ng \u1ee9ng d\u1ee5ng cho vi\u1ec7c chuy\u1ec3n email v\u00e0 file. SMTP (Simple Mail Transfer Protocol) l\u00e0 ti\u00eau chu\u1ea9n \u0111\u1ec3 chuy\u1ec3n c\u00e1c email gi\u1eefa c\u00e1c mail server. Hi\u1ec3u \u0111\u01b0\u1ee3c SMTP gi\u00fap c\u1ea5u h\u00ecnh d\u1ecbch v\u1ee5 mail \u0111\u00fang c\u00e1ch v\u00e0 tr\u00e1nh c\u00e1c v\u1ea5n \u0111\u1ec1 nh\u01b0 denied listing. </p> <p></p> <p>FTP cho ph\u00e9p t\u1ea3i l\u00ean v\u00e0 t\u1ea3i xu\u1ed1ng c\u00e1c file gi\u1eefa c\u00e1c server m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3. N\u00f3 v\u1eabn ph\u1ed5 bi\u1ebfn trong c\u00e1c quy tr\u00ecnh l\u00e0m vi\u1ec7c d\u1ef1a tr\u00ean file, \u0111\u1eb7c bi\u1ec7t l\u00e0 trong c\u00e1c t\u1ed5 ch\u1ee9c t\u00e0i ch\u00ednh.</p> <p></p>"},{"location":"ByteByteGo/oauth2-explained/","title":"Gi\u1ea3i th\u00edch d\u1ec5 hi\u1ec3u OAuth2","text":""},{"location":"ByteByteGo/oauth2-explained/#nguon","title":"Ngu\u1ed3n","text":"<p> OAuth 2 Explained In Simple Terms</p>"},{"location":"ByteByteGo/oauth2-explained/#thuo-so-khai","title":"Thu\u1edf s\u01a1 khai","text":"<p>Ta c\u00f9ng nhau nh\u1edb l\u1ea1i th\u1eddi k\u1ef3 s\u01a1 khai c\u1ee7a Internet, vi\u1ec7c chia s\u1ebb th\u00f4ng tin l\u00fac \u0111\u00f3 kh\u00e1 l\u00e0 ch\u00e2n ph\u01b0\u01a1ng. B\u1ea1n ch\u1ec9 c\u1ea7n \u0111\u01b0a service t\u00ean \u0111\u0103ng nh\u1eadp v\u00e0 m\u1eadt kh\u1ea9u c\u1ee7a b\u1ea1n v\u00e0 c\u00e1i service \u0111\u00f3 c\u00f3 th\u1ec3 truy c\u1eadp v\u00e0o b\u1ea5t c\u1ee9 th\u1ee9 g\u00ec n\u00f3 mu\u1ed1n. C\u00e1ch l\u00e0m n\u00e0y kh\u00e1 l\u00e0 kh\u00f3 ch\u1ecbu, tuy nhi\u00ean v\u1eabn c\u00f3 m\u1ed9t s\u1ed1 ch\u1ed7 v\u1eabn c\u00f2n s\u1eed d\u1ee5ng, nh\u01b0 trong m\u1ed9t s\u1ed1 ph\u1ea7n m\u1ec1m t\u00e0i ch\u00ednh c\u00e1 nh\u00e2n \u0111\u1ec3 l\u1ea5y th\u00f4ng tin t\u1eeb m\u1ed9t s\u1ed1 ng\u00e2n h\u00e0ng c\u0169 n\u00e0o \u0111\u00f3.</p> <p></p> <p>May m\u1eafn l\u00e0 ta c\u00f3 th\u1ee9 kh\u00e1c ngon h\u01a1n, \u0111\u00f3 l\u00e0 OAuth2.</p>"},{"location":"ByteByteGo/oauth2-explained/#oauth2-la-cai-gi","title":"OAuth2 l\u00e0 c\u00e1i g\u00ec?","text":"<p>OAuth2 s\u1ebd ki\u1ec3u nh\u01b0 b\u1ea1n \u0111\u01b0a cho ai \u0111\u00f3 m\u1ed9t c\u00e1i key \u0111\u1eb7c bi\u1ec7t, key n\u00e0y cho ph\u00e9p ng\u01b0\u1eddi \u0111\u00f3 truy c\u1eadp v\u00e0o m\u1ed9t s\u1ed1 ph\u1ea7n th\u00f4ng tin nh\u1ea5t \u0111\u1ecbnh c\u1ee7a ta trong m\u1ed9t \u1ee9ng d\u1ee5ng kh\u00e1c. Ta s\u1ebd ki\u1ec3m so\u00e1t \u0111\u01b0\u1ee3c ai c\u00f3 quy\u1ec1n truy c\u1eadp th\u00f4ng tin c\u1ee7a m\u00ecnh m\u00e0 kh\u00f4ng ph\u1ea3i chia s\u1ebb m\u1eadt kh\u1ea9u. V\u00e0 \u0111i\u1ec1u tuy\u1ec7t v\u1eddi n\u1eefa l\u00e0 ta c\u00f3 th\u1ec3 thu h\u1ed3i c\u00e1i key \u0111\u00f3 b\u1ea5t k\u1ef3 l\u00fac n\u00e0o.</p> <p></p>"},{"location":"ByteByteGo/oauth2-explained/#vi-du","title":"V\u00ed d\u1ee5","text":"<p>X\u00e9t m\u1ed9t v\u00ed d\u1ee5 nh\u01b0 sau: Ta c\u00f3 m\u1ed9t \u1ee9ng d\u1ee5ng l\u01b0u tr\u1eef \u1ea3nh t\u00ean l\u00e0 SnapStore. Ta \u0111ang d\u00f9ng n\u00f3 \u0111\u1ec3 l\u01b0u tr\u1eef h\u00ecnh \u1ea3nh, v\u00e0 gi\u1edd ta mu\u1ed1n in m\u1ed9t s\u1ed1 h\u00ecnh v\u1edbi m\u1ed9t service in c\u1ee7a b\u00ean th\u1ee9 ba, g\u1ecdi l\u00e0 PrintMagic.</p> <p>Thay v\u00ec ph\u1ea3i upload b\u1eb1ng tay m\u1ed7i t\u1ea5m h\u00ecnh l\u00ean PrintMagic, ta c\u00f3 th\u1ec3 y\u00eau c\u1ea7u PrintMagic l\u00e0m \u0111i\u1ec1u \u0111\u00f3 lu\u00f4n. V\u1edbi ch\u1ec9 m\u1ed9t c\u00fa click chu\u1ed9t, ta trao (grant) cho PrintMagic quy\u1ec1n \u0111\u1ec3 truy c\u1eadp v\u00e0o c\u00e1c h\u00ecnh \u1ea3nh c\u1ee7a ta tr\u00ean SnapStore.</p> <p></p> <p>V\u1edbi OAuth2, PrintMagic s\u1ebd thay m\u1eb7t ta truy c\u1eadp v\u00e0o kho h\u00ecnh tr\u00ean SnapStore m\u00e0 kh\u00f4ng c\u1ea7n bi\u1ebft th\u00f4ng tin \u0111\u0103ng nh\u1eadp c\u1ee7a ch\u00fang ta.</p> <p></p> <p>\u0110\u00e2y l\u00e0 m\u1ed9t v\u00ed d\u1ee5 v\u1ec1 lu\u1ed3ng OAuth, \u0111\u01b0\u1ee3c d\u1eabn \u0111\u1ea7u b\u1edfi OAuth2. H\u00e3y c\u00f9ng \u0111i s\u00e2u h\u01a1n ch\u00fat nh\u00e9.</p> <p>Trong ho\u00e0n c\u1ea3nh n\u00e0y, ta l\u00e0 resource owner (ch\u1ee7 t\u00e0i nguy\u00ean), v\u00ec ta ch\u00ednh l\u00e0 ch\u1ee7 c\u1ee7a nh\u1eefng t\u1ea5m h\u00ecnh c\u1ee7a ch\u00ednh m\u00ecnh tr\u00ean SnapStore. SnapStore l\u00e0 resource server (m\u00e1y ch\u1ee7 t\u00e0i nguy\u00ean), l\u00e0 th\u1ee9 \u0111ang l\u01b0u h\u00ecnh \u1ea3nh. PrintMagic l\u00e0 client mu\u1ed1n truy c\u1eadp v\u00e0o kho h\u00ecnh. Authorization server (m\u00e1y ch\u1ee7 \u0111\u1ecbnh danh) c\u00f3 th\u1ec3 l\u00e0 m\u1ed9t ph\u1ea7n c\u1ee7a SnapStore ho\u1eb7c c\u00f3 th\u1ec3 t\u1eeb m\u1ed9t identity provider (nh\u00e0 cung c\u1ea5p danh t\u00ednh) b\u00ean ngo\u00e0i n\u00e0o \u0111\u00f3, n\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m x\u1eed l\u00fd qu\u00e1 tr\u00ecnh OAuth2.</p> <p>Ta \u0111i v\u00e0o xem lu\u1ed3ng OAuth2 c\u1ee5 th\u1ec3 s\u1ebd \u0111i nh\u01b0 th\u1ebf n\u00e0o nh\u00e9.</p> <ol> <li>M\u1ecdi chuy\u1ec7n b\u1eaft \u0111\u1ea7u khi ta h\u01b0\u1edbng d\u1eabn PrintMagic l\u1ea5y h\u00ecnh t\u1eeb SnapStore.</li> <li>PrintMagic g\u1eedi m\u1ed9t client ID v\u00e0 scope (ph\u1ea1m vi truy c\u1eadp) \u0111\u1ebfn authorization server c\u1ee7a SnapStore. </li> <li>L\u00e0 m\u1ed9t resource owner, ta x\u00e1c th\u1ef1c danh t\u00ednh tr\u1ef1c ti\u1ebfp v\u1edbi SnapStore v\u00e0 \u0111\u1ed3ng \u00fd trao cho PrintMagic quy\u1ec1n \u0111\u1ec3 truy c\u1eadp h\u00ecnh \u1ea3nh c\u1ee7a m\u00ecnh. </li> <li>Khi \u0111\u01b0\u1ee3c s\u1ef1 \u0111\u1ed3ng \u00fd, authorization server g\u1eedi m\u1ed9t authorization code v\u1ec1 cho PrintMagic. </li> <li>PrintMagic s\u1ebd l\u1ea1i mang authorization code n\u00e0y, c\u00f9ng v\u1edbi client ID v\u00e0 client secret \u0111\u1ebfn cho authorization server. Client secret l\u00e0 m\u1ed9t kho\u00e1 b\u00ed m\u1eadt \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u01b0\u1ee3c chia s\u1ebb cho PrintMagic v\u00e0 authorization server. </li> <li>N\u1ebfu authorization server x\u00e1c nh\u1eadn authorization code, client ID v\u00e0 client secret, n\u00f3 s\u1ebd t\u1ea1o ra m\u1ed9t access token g\u1eedi v\u1ec1 PrintMagic. </li> <li>PrintMagic s\u1ebd d\u00f9ng c\u00e1i token n\u00e0y \u0111\u1ec3 request h\u00ecnh \u1ea3nh t\u1eeb resource server c\u1ee7a SnapStore.</li> </ol> <p>OAuth2 \u0111\u1ea3m b\u1ea3o r\u1eb1ng th\u00f4ng tin \u0111\u0103ng nh\u1eadp c\u1ee7a SnapStore s\u1ebd kh\u00f4ng bao gi\u1edd \u0111\u01b0\u1ee3c l\u1ed9 ra cho b\u00ean PrintMagic bi\u1ebft, v\u00e0 v\u1eabn cho PrintMagic truy c\u1eadp th\u00f4ng tin, nh\u01b0ng ch\u1ec9 nh\u1eefng th\u00f4ng tin \u0111\u01b0\u1ee3c trao quy\u1ec1n truy c\u1eadp. Th\u00eam m\u1ed9t v\u1ea5n \u0111\u1ec1 n\u1eefa c\u1ea7n l\u01b0u \u00fd l\u00e0 access token c\u00f3 th\u1ec3 h\u1ebft h\u1ea1n sau m\u1ed9t kho\u1ea3ng th\u1eddi gian ho\u1eb7c c\u00f3 th\u1ec3 b\u1ecb ta thu h\u1ed3i b\u1ea5t c\u1ee9 l\u00fac n\u00e0o, \u0111\u00e2y l\u00e0 m\u1ed9t l\u1edbp b\u1ea3o m\u1eadt r\u1ea5t \u0111\u00e1ng gi\u00e1.</p> <p>OAuth2 c\u00f2n h\u1ed7 tr\u1ee3 refresh token, n\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u1ea5y access token m\u1edbi khi c\u00e1i c\u0169 h\u1ebft h\u1ea1n m\u00e0 kh\u00f4ng c\u1ea7n ta ph\u1ea3i l\u00e0m g\u00ec c\u1ea3.</p> <p></p>"},{"location":"ByteByteGo/optimize-api-performance/","title":"7 c\u00e1ch \u0111\u1ec3 t\u0103ng hi\u1ec7u su\u1ea5t API c\u1ee7a b\u1ea1n","text":""},{"location":"ByteByteGo/optimize-api-performance/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 7 Ways to 10x Your API Performance</p>"},{"location":"ByteByteGo/optimize-api-performance/#loi-tua","title":"L\u1eddi t\u1ef1a","text":"<p>B\u1ea1n c\u00f3 th\u1ea5y m\u1ec7t m\u1ecfi v\u00ec m\u1ea5y c\u00e1i API ch\u1eadm ch\u1ea1p l\u00e0m cho \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n nh\u01b0 r\u00f9a b\u00f2 kh\u00f4ng? B\u1ea1n \u0111\u1ebfn \u0111\u00fang ch\u1ed7 r\u1ed3i \u0111\u1ea5y. Trong b\u00e0i vi\u1ebft n\u00e0y, ch\u00fang ta s\u1ebd t\u00ecm hi\u1ec3u 7 k\u1ef9 thu\u1eadt \u0111\u1ec3 t\u1ed1i \u01b0u hi\u1ec7u su\u1ea5t API c\u1ee7a b\u1ea1n.</p> <p>Tr\u01b0\u1edbc khi b\u1eaft \u0111\u1ea7u, c\u00f3 m\u1ed9t \u0111i\u1ec1u quan tr\u1ecdng c\u1ea7n l\u01b0u \u00fd. T\u1ed1i \u01b0u kh\u00f4ng n\u00ean l\u00e0 b\u01b0\u1edbc \u0111\u1ea7u trong qu\u00e1 tr\u00ecnh c\u1ee7a b\u1ea1n. T\u1ed1i \u01b0u m\u1ea1nh m\u1ebd th\u1eadt \u0111\u1ea5y nh\u01b0ng n\u00f3 c\u00f3 th\u1ec3 l\u00e0m API c\u1ee7a b\u1ea1n ph\u1ee9c t\u1ea1p h\u01a1n m\u1ee9c c\u1ea7n thi\u1ebft n\u1ebfu l\u00e0m kh\u00f4ng c\u1ea9n th\u1eadn. B\u01b0\u1edbc \u0111\u1ea7u ti\u00ean lu\u00f4n l\u00e0 ph\u1ea3i x\u00e1c \u0111\u1ecbnh ch\u1ed7 n\u00e0o l\u00e0m ch\u1eadm API, th\u00f4ng qua load test v\u00e0 profiling request. Ch\u1ec9 b\u1eaft \u0111\u1ea7u t\u1ed1i \u01b0u khi b\u1ea1n ch\u1eafc ch\u1eafn r\u1eb1ng c\u00e1i API \u0111\u00f3 c\u00f3 v\u1ea5n \u0111\u1ec1 v\u1ec1 hi\u1ec7u su\u1ea5t.</p> <p>Gi\u1edd ta c\u00f9ng b\u1eaft \u0111\u1ea7u nh\u00e9.</p>"},{"location":"ByteByteGo/optimize-api-performance/#caching","title":"Caching","text":"<p>Caching l\u00e0 m\u1ed9t trong nh\u1eefng c\u00e1ch hi\u1ec7u qu\u1ea3 nh\u1ea5t \u0111\u1ec3 t\u0103ng t\u1ed1c API. V\u1edbi caching, ta s\u1ebd l\u01b0u k\u1ebft qu\u1ea3 c\u1ee7a m\u1ed9t qu\u00e1 tr\u00ecnh t\u00ednh to\u00e1n t\u1ed1n k\u00e9m n\u00e0o \u0111\u00f3 v\u00e0o cache \u0111\u1ec3 l\u1ea5y th\u1eb3ng n\u00f3 ra trong nh\u1eefng request ti\u1ebfp theo m\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i t\u00ednh l\u1ea1i.</p> <p></p> <p>N\u1ebfu b\u1ea1n c\u00f3 m\u1ed9t API endpoint th\u01b0\u1eddng xuy\u00ean \u0111\u01b0\u1ee3c g\u1ecdi v\u1edbi c\u00f9ng tham s\u1ed1, b\u1ea1n c\u00f3 th\u1ec3 tr\u00e1nh vi\u1ec7c g\u1ecdi database nhi\u1ec1u l\u1ea7n b\u1eb1ng c\u00e1ch cache response v\u00e0o Redis hay Memcached. Ph\u1ea7n l\u1edbn c\u00e1c th\u01b0 vi\u1ec7n cache l\u00e0m cho m\u1ecdi vi\u1ec7c tr\u1edf n\u00ean d\u1ec5 d\u00e0ng h\u01a1n cho ch\u00fang ta b\u1eb1ng c\u00e1ch th\u00eam v\u00e0i d\u00f2ng code. Cache trong m\u1ed9t kho\u1ea3ng th\u1eddi gian ng\u1eafn c\u0169ng t\u1ea1o ra s\u1ef1 kh\u00e1c bi\u1ec7t c\u1ef1c l\u1edbn v\u1ec1 t\u1ed1c \u0111\u1ed9 \u0111\u1ea5y.</p>"},{"location":"ByteByteGo/optimize-api-performance/#connection-pooling","title":"Connection pooling","text":"<p>Ti\u1ebfp theo l\u00e0 connection pooling. K\u1ef9 thu\u1eadt n\u00e0y c\u1ea7n ta ph\u1ea3i duy tr\u00ec m\u1ed9t b\u1ec3 (pool) c\u00e1c k\u1ebft n\u1ed1i (connection) m\u1edf, \u0111\u1ec3 tr\u00e1nh vi\u1ec7c m\u1edf m\u1ed9t connection m\u1edbi \u0111\u1ebfn database trong m\u1ed7i l\u1ea7n g\u1ecdi API.</p> <p></p> <p>Vi\u1ec7c t\u1ea1o m\u1ed9t connection m\u1edbi m\u1ed7i l\u1ea7n g\u1ecdi API nh\u01b0 v\u1eady bao g\u1ed3m r\u1ea5t nhi\u1ec1u l\u1ea7n b\u1eaft tay (handshake) v\u00e0 setup, khi\u1ebfn API c\u1ee7a b\u1ea1n ch\u1eadm \u0111i. Vi\u1ec7c s\u1eed d\u1ee5ng l\u1ea1i connection s\u1ebd c\u1ea3i thi\u1ec7n th\u00f4ng l\u01b0\u1ee3ng r\u1ea5t nhi\u1ec1u.</p> <p>N\u1ebfu b\u1ea1n s\u1eed d\u1ee5ng ki\u1ebfn tr\u00fac Serverless (nh\u01b0 IBM OpenWhisk, API Gateway, AWS Lambda, Google Cloud Functions hay Microsoft Azure Functions), vi\u1ec7c qu\u1ea3n l\u00fd connection s\u1ebd kh\u00f3 h\u01a1n m\u1ed9t ch\u00fat, b\u1edfi v\u00ec m\u1ed7i th\u1eb1ng serverless function th\u01b0\u1eddng m\u1edf database connection ri\u00eang v\u00e0 v\u00ec serverless c\u00f3 th\u1ec3 t\u0103ng quy m\u00f4 nhanh ch\u00f3ng, n\u00f3 c\u00f3 kh\u1ea3 n\u0103ng d\u1eabn \u0111\u1ebfn m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng l\u1edbn connection m\u1edf, g\u00e2y n\u00ean qu\u00e1 t\u1ea3i database. C\u00e1c gi\u1ea3i ph\u00e1p nh\u01b0 AWS RDS Proxy v\u00e0 SQL database serverless c\u1ee7a Azure \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 x\u1eed l\u00fd v\u1ea5n \u0111\u1ec1 n\u00e0y v\u00e0 qu\u00e1n l\u00fd connection pooling cho b\u1ea1n.</p> <p></p>"},{"location":"ByteByteGo/optimize-api-performance/#truy-van-n1","title":"Truy v\u1ea5n N+1","text":"<p>Th\u00eam m\u1ed9t tip n\u1eefa cho vi\u1ec7c c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t database, \u0111\u00f3 l\u00e0 vi\u1ec7c tr\u00e1nh Truy v\u1ea5n N+1.</p> <p>V\u00ed d\u1ee5, b\u1ea1n \u0111ang t\u1ea1o m\u1ed9t API endpoint \u0111\u1ec3 l\u1ea5y c\u00e1c blog post v\u00e0 c\u00e1c comment trong m\u1ed7i post. V\u1ea5n \u0111\u1ec1 n\u00e0y s\u1ebd x\u1ea3y ra khi b\u1ea1n truy v\u1ea5n l\u1ea7n \u0111\u1ea7u \u0111\u1ec3 l\u1ea5y c\u00e1c post, v\u00e0 v\u1edbi m\u1ed7i post, b\u1ea1n truy v\u1ea5n m\u1ed9t l\u1ea7n \u0111\u1ec3 l\u1ea5y c\u00e1c comment. Gi\u1edd n\u1ebfu b\u1ea1n c\u00f3 N post nh\u01b0 th\u1ebf, vi\u1ec7c n\u00e0y s\u1ebd t\u1ea1o ra 1 truy v\u1ea5n \u0111\u1ec3 l\u1ea5y c\u00e1c post, c\u1ed9ng v\u1edbi N truy v\u1ea5n cho c\u00e1c comment. \u0110\u00e2y l\u00e0 l\u00fd do c\u00f3 c\u00e1i t\u00ean Truy v\u1ea5n N+1.</p> <p></p> <p>\u0110\u1ec3 tr\u00e1nh v\u1ea5n \u0111\u1ec1 n\u00e0y, s\u1ebd t\u1ed1t h\u01a1n n\u1ebfu b\u1ea1n l\u1ea5y data trong m\u1ed9t truy v\u1ea5n duy nh\u1ea5t ho\u1eb7c 2 truy v\u1ea5n trong m\u1ed9t s\u1ed1 tr\u01b0\u1eddng h\u1ee3p kh\u00e1c, m\u1ed9t \u0111\u1ec3 l\u1ea5y c\u00e1c post, v\u00e0 m\u1ed9t \u0111\u1ec3 l\u1ea5y t\u1ea5t c\u1ea3 comment trong c\u00e1c post \u0111\u00f3. Gi\u1ea3i ph\u00e1p n\u00e0y gi\u00fap tr\u00e1nh vi\u1ec7c truy v\u1ea5n qu\u00e1 nhi\u1ec1u v\u00e0 gi\u1ea3m round trip gi\u1eefa server v\u00e0 database, t\u1eeb \u0111\u00f3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t.</p> <p></p>"},{"location":"ByteByteGo/optimize-api-performance/#phan-trang","title":"Ph\u00e2n trang","text":"<p>D\u00f9ng ph\u00e2n trang (pagination) khi c\u1ea7n.</p> <p>N\u1ebfu API c\u1ee7a b\u1ea1n tr\u1ea3 v\u1ec1 m\u1ed9t l\u01b0\u1ee3ng l\u1edbn data, n\u00f3 c\u00f3 th\u1ec3 l\u00e0m ch\u1eadm \u1ee9ng d\u1ee5ng. Thay v\u00e0o \u0111\u00f3, chia response th\u00e0nh nhi\u1ec1u trang nh\u1ecf h\u01a1n v\u1edbi c\u00e1c tham s\u1ed1 <code>limit</code> v\u00e0 <code>offset</code>. \u0110i\u1ec1u n\u00e0y s\u1ebd gi\u00fap t\u0103ng t\u1ed1c \u0111\u1ed9 truy\u1ec1n t\u1ea3i d\u1eef li\u1ec7u v\u00e0 tr\u00e1nh vi\u1ec7c client b\u1ecb ch\u1eadm v\u00ec ph\u1ea3i x\u1eed l\u00fd qu\u00e1 nhi\u1ec1u data m\u1ed9t l\u00fac. </p> <p></p>"},{"location":"ByteByteGo/optimize-api-performance/#su-dung-thu-vien-json-serialization-nhe","title":"S\u1eed d\u1ee5ng th\u01b0 vi\u1ec7n JSON serialization nh\u1eb9","text":"<p>Khi tr\u1ea3 v\u1ec1 JSON response t\u1eeb API, t\u1ed1c \u0111\u1ed9 c\u1ee7a qu\u00e1 tr\u00ecnh serialization c\u00f3 th\u1ec3 t\u1ea1o n\u00ean \u1ea3nh h\u01b0\u1edfng r\u1ea5t l\u1edbn \u0111\u1ebfn th\u1eddi gian tr\u1ea3 v\u1ec1 d\u1eef li\u1ec7u. H\u00e3y c\u00e2n nh\u1ea5t d\u00f9ng m\u1ed9t th\u01b0 vi\u1ec7n serialization nhanh \u0111\u1ec3 t\u1ed1i thi\u1ec3u ho\u00e1 th\u1eddi gian d\u00e0nh cho vi\u1ec7c chuy\u1ec3n \u0111\u1ed5i d\u1eef li\u1ec7u c\u1ee7a b\u1ea1n th\u00e0nh d\u1ea1ng JSON.</p> <p></p>"},{"location":"ByteByteGo/optimize-api-performance/#nen-du-lieu","title":"N\u00e9n d\u1eef li\u1ec7u","text":"<p>Khi n\u00e9n d\u1eef li\u1ec7u cho c\u00e1c response l\u1edbn, b\u1ea1n c\u00f3 th\u1ec3 gi\u1ea3m dung l\u01b0\u1ee3ng chuy\u1ec3n d\u1eef li\u1ec7u tr\u00ean m\u1ea1ng. Client sau \u0111\u00f3 s\u1ebd gi\u1ea3i n\u00e9n data n\u00e0y.</p> <p></p> <p>Ng\u00e0y nay, c\u00f3 r\u1ea5t nhi\u1ec1u thu\u1eadt to\u00e1n hi\u1ec7u qu\u1ea3 nh\u01b0 Brotli cho ph\u00e9p n\u00e9n d\u1eef li\u1ec7u t\u1ed1t h\u01a1n. C\u00e1c CDN nh\u01b0 Cloudflare c\u0169ng c\u00f3 th\u1ec3 n\u00e9n d\u1eef li\u1ec7u cho b\u1ea1n, gi\u00fap gi\u1ea3i ph\u00f3ng vi\u1ec7c n\u00e9n kh\u1ecfi server.</p> <p></p>"},{"location":"ByteByteGo/optimize-api-performance/#logging-bat-ong-bo","title":"Logging b\u1ea5t \u0111\u1ed3ng b\u1ed9","text":"<p>Trong nhi\u1ec1u \u1ee9ng d\u1ee5ng, th\u1eddi gian c\u1ea7n \u0111\u1ec3 vi\u1ebft log th\u01b0\u1eddng kh\u00f4ng \u0111\u00e1ng k\u1ec3. </p> <p></p> <p>Tuy nhi\u00ean, trong nhi\u1ec1u h\u1ec7 th\u1ed1ng th\u00f4ng l\u01b0\u1ee3ng cao, m\u1ed7i m\u1ed9t mili gi\u00e2y \u0111\u1ec1u qu\u00fd gi\u00e1. Th\u1eddi gian c\u1ea7n \u0111\u1ec3 vi\u1ebft log c\u00f3 th\u1ec3 kh\u00e1 l\u1edbn. Logging b\u1ea5t \u0111\u1ed3ng b\u1ed9 c\u00f3 th\u1ec3 gi\u1ea3i quy\u1ebft \u0111i\u1ec1u n\u00e0y. Trong logging b\u1ea5t \u0111\u1ed3ng b\u1ed9, thread ch\u00ednh s\u1ebd nhanh ch\u00f3ng \u0111\u1eb7t log entry v\u00e0o m\u1ed9t buffer in-memory trong khi m\u1ed9t thread logging ri\u00eang bi\u1ec7t s\u1ebd vi\u1ebft log v\u00e0o file ho\u1eb7c g\u1eedi ch\u00fang th\u00f4ng qua logging service. N\u00ean nh\u1edb r\u1eb1ng trong logging b\u1ea5t \u0111\u1ed3ng b\u1ed9, b\u1ea1n s\u1ebd c\u00f3 kh\u1ea3 n\u0103ng nh\u1ecf c\u00f3 th\u1ec3 m\u1ea5t v\u00e0i log n\u1ebfu \u1ee9ng d\u1ee5ng b\u1ecb crash tr\u01b0\u1edbc khi log \u0111\u01b0\u1ee3c ghi ra.</p> <p></p>"},{"location":"ByteByteGo/osi-model/","title":"M\u00f4 h\u00ecnh OSI l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/osi-model/#nguon","title":"Ngu\u1ed3n","text":"<p> What is OSI Model | Real World Examples</p>"},{"location":"ByteByteGo/osi-model/#khai-niem","title":"Kh\u00e1i ni\u1ec7m","text":"<p>M\u00f4 h\u00ecnh OSI (Open Systems Interconnect) l\u00e0 m\u1ed9t framework (v\u1ec1 m\u1eb7t l\u00fd thuy\u1ebft) cung c\u1ea5p m\u1ed9t g\u00f3c nh\u00ecn v\u1ec1 m\u1ea1ng. N\u00f3 chia vi\u1ec7c giao ti\u1ebfp gi\u1eefa hai thi\u1ebft b\u1ecb tr\u00ean m\u1ea1ng v\u00e0o 7 t\u1ea7ng tr\u1eebu t\u01b0\u1ee3ng.</p> <p></p> <p>T\u1ea7ng v\u1eadt l\u00fd (Physical Layer) l\u00e0 t\u1ea7ng d\u01b0\u1edbi c\u00f9ng. N\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m truy\u1ec1n t\u1ea3i c\u00e1c bit d\u1eef li\u1ec7u th\u00f4 qua m\u1ed9t k\u1ebft n\u1ed1i v\u1eadt l\u00fd.</p> <p></p> <p>T\u1ea7ng li\u00ean k\u1ebft d\u1eef li\u1ec7u (Data Link Layer) l\u00e0 t\u1ea7ng th\u1ee9 hai. N\u00f3 l\u1ea5y c\u00e1c bit d\u1eef li\u1ec7u th\u00f4 t\u1eeb t\u1ea7ng v\u1eadt l\u00fd v\u00e0 t\u1ed5 ch\u1ee9c ch\u00fang th\u00e0nh c\u00e1c frame. N\u00f3 \u0111\u1ea3m b\u1ea3o c\u00e1c frame \u0111\u01b0\u1ee3c \u0111\u01b0a \u0111\u1ebfn \u0111\u00fang \u0111\u1ecba ch\u1ec9. Ethernet h\u1ea7u h\u1ebft l\u00e0 n\u1eb1m trong t\u1ea7ng n\u00e0y.</p> <p></p> <p>T\u1ea7ng m\u1ea1ng (Network Layer) l\u00e0 t\u1ea7ng th\u1ee9 ba. N\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m \u0111\u1ecbnh tuy\u1ebfn c\u00e1c frame d\u1eef li\u1ec7u tr\u00ean c\u00e1c m\u1ea1ng kh\u00e1c nhau. Ph\u1ea7n IP c\u1ee7a TCP/IP l\u00e0 m\u1ed9t v\u00ed d\u1ee5 n\u1ed5i ti\u1ebfng v\u1ec1 t\u1ea7ng n\u00e0y.</p> <p></p> <p>T\u1ea7ng giao v\u1eadn (Transport Layer) l\u00e0 t\u1ea7ng th\u1ee9 t\u01b0. N\u00f3 x\u1eed l\u00fd giao ti\u1ebfp \u0111\u1ea7u cu\u1ed1i gi\u1eefa 2 node. \u0110\u00e2y l\u00e0 n\u01a1i ch\u1ee9a TCP v\u00e0 UDP. </p> <p></p> <p>TCP cung c\u1ea5p kh\u1ea3 n\u0103ng li\u00ean l\u1ea1c \u0111\u1ea7u cu\u1ed1i, \u0111\u00e1ng tin c\u1eady gi\u1eefa c\u00e1c thi\u1ebft b\u1ecb. N\u00f3 th\u1ef1c hi\u1ec7n \u0111i\u1ec1u n\u00e0y b\u1eb1ng c\u00e1ch chia d\u1eef li\u1ec7u th\u00e0nh c\u00e1c ph\u00e2n \u0111o\u1ea1n nh\u1ecf, c\u00f3 th\u1ec3 qu\u1ea3n l\u00fd \u0111\u01b0\u1ee3c v\u00e0 g\u1eedi t\u1eebng ph\u00e2n \u0111o\u1ea1n ri\u00eang l\u1ebb. M\u1ed7i \u0111o\u1ea1n c\u00f3 m\u1ed9t s\u1ed1 th\u1ee9 t\u1ef1 g\u1eafn li\u1ec1n v\u1edbi n\u00f3. \u0110\u1ea7u nh\u1eadn s\u1eed d\u1ee5ng c\u00e1c s\u1ed1 th\u1ee9 t\u1ef1 \u0111\u1ec3 t\u1eadp h\u1ee3p l\u1ea1i d\u1eef li\u1ec7u theo \u0111\u00fang th\u1ee9 t\u1ef1. TCP c\u0169ng cung c\u1ea5p ch\u1ee9c n\u0103ng ki\u1ec3m tra l\u1ed7i \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng d\u1eef li\u1ec7u kh\u00f4ng b\u1ecb h\u1ecfng trong qu\u00e1 tr\u00ecnh truy\u1ec1n.</p> <p></p> <p>UDP c\u0169ng l\u00e0 m\u1ed9t giao th\u1ee9c n\u1ed5i ti\u1ebfng trong t\u1ea7ng giao v\u1eadn. N\u00f3 t\u01b0\u01a1ng t\u1ef1 nh\u01b0 TCP nh\u01b0ng \u0111\u01a1n gi\u1ea3n h\u01a1n v\u00e0 nhanh h\u01a1n. UDP kh\u00f4ng cung c\u1ea5p t\u00ednh n\u0103ng ki\u1ec3m tra l\u1ed7i v\u00e0 ki\u1ec3m tra \u0111\u1ed9 tin c\u1eady, kh\u00e1c v\u1edbi TCP. N\u00f3 ch\u1ec9 \u0111\u01a1n gi\u1ea3n l\u00e0 g\u1eedi c\u00e1c g\u00f3i tin t\u1eeb thi\u1ebft b\u1ecb n\u00e0y sang thi\u1ebft b\u1ecb kh\u00e1c. \u0110\u1ea7u nh\u1eadn c\u00f3 tr\u00e1ch nhi\u1ec7m x\u00e1c \u0111\u1ecbnh xem g\u00f3i tin c\u00f3 \u0111\u01b0\u1ee3c nh\u1eadn ch\u00ednh x\u00e1c hay ch\u01b0a. N\u1ebfu c\u00f3 l\u1ed7i x\u1ea3y ra, \u0111\u1ea7u nh\u1eadn ch\u1ec9 \u0111\u01a1n gi\u1ea3n l\u00e0 lo\u1ea1i b\u1ecf g\u00f3i tin.</p> <p></p> <p>C\u00e1c t\u1ea7ng c\u00f2n l\u1ea1i bao g\u1ed3m t\u1ea7ng phi\u00ean (Session Layer), t\u1ea7ng tr\u00ecnh di\u1ec5n (Presentation Layer) v\u00e0 t\u1ea7ng \u1ee9ng d\u1ee5ng (Application Layers). \u0110\u00e2y l\u00e0 n\u01a1i m\u00e0 m\u00f4 h\u00ecnh OSI m\u1ea5t \u0111i t\u00ednh h\u1eefu d\u1ee5ng trong th\u1ef1c t\u1ebf. Ch\u00fang qu\u00e1 chi ti\u1ebft v\u00e0 kh\u00f4ng ph\u1ea3n \u00e1nh th\u1ef1c t\u1ebf. N\u00f3i chung, ch\u1ec9 c\u1ea7n thu g\u1ecdn ch\u00fang th\u00e0nh m\u1ed9t t\u1ea7ng duy nh\u1ea5t v\u00e0 coi c\u00e1c giao th\u1ee9c \u1ee9ng d\u1ee5ng (Application Protocols Layer) nh\u01b0 HTTP nh\u01b0 c\u00e1c giao th\u1ee9c t\u1ea7ng 7 l\u00e0 \u0111\u01b0\u1ee3c.</p> <p></p>"},{"location":"ByteByteGo/osi-model/#du-lieu-i-qua-mo-hinh-osi-nhu-the-nao","title":"D\u1eef li\u1ec7u \u0111i qua m\u00f4 h\u00ecnh OSI nh\u01b0 th\u1ebf n\u00e0o.","text":"<p>Ta c\u00f9ng xem x\u00e9t m\u1ecdt v\u00ed d\u1ee5 v\u1ec1 c\u00e1ch d\u1eef li\u1ec7u di chuy\u1ec3n qua c\u00e1c t\u1ea7ng khi \u0111\u01b0\u1ee3c truy\u1ec1n qua m\u1ea1ng.</p> <p>(1) Ng\u01b0\u1eddi d\u00f9ng g\u1eedi m\u1ed9t HTTP request \u0111\u1ebfn web server qua m\u1ea1ng, HTTP header \u0111\u01b0\u1ee3c th\u00eam v\u00e0o d\u1eef li\u1ec7u \u1edf t\u1ea7ng \u1ee9ng d\u1ee5ng. </p> <p>(2) Sau \u0111\u00f3, m\u1ed9t TCP header \u0111\u01b0\u1ee3c th\u00eam v\u00e0o d\u1eef li\u1ec7u. N\u00f3 \u0111\u01b0\u1ee3c g\u00f3i g\u1ecdn trong c\u00e1c \u0111o\u1ea1n TCP \u1edf t\u1ea7ng giao v\u1eadn. Header ch\u1ee9a port ngu\u1ed3n, port \u0111\u00edch v\u00e0 s\u1ed1 th\u1ee9 t\u1ef1.</p> <p>(3) Ti\u1ebfp theo, c\u00e1c ph\u00e2n \u0111o\u1ea1n \u0111\u01b0\u1ee3c g\u00f3i v\u1edbi m\u1ed9t IP header \u1edf t\u1ea7ng m\u1ea1ng. IP header ch\u1ee9a \u0111\u1ecba ch\u1ec9 IP ngu\u1ed3n v\u00e0 \u0111\u00edch. </p> <p>(4) M\u1ed9t MAC header \u0111\u01b0\u1ee3c th\u00eam v\u00e0o t\u1ea7ng li\u00ean k\u1ebft d\u1eef li\u1ec7u, v\u1edbi \u0111\u1ecba ch\u1ec9 MAC ngu\u1ed3n v\u00e0 \u0111\u00edch. Th\u1ef1c ra \u0111\u1ecba ch\u1ec9 MAC th\u01b0\u1eddng kh\u00f4ng ph\u1ea3i l\u00e0 \u0111\u1ecba ch\u1ec9 MAC c\u1ee7a thi\u1ebft b\u1ecb g\u1eedi v\u00e0 thi\u1ebft b\u1ecb nh\u1eadn. Ch\u00fang l\u00e0 \u0111\u1ecba ch\u1ec9 MAC c\u1ee7a c\u00e1c thi\u1ebft b\u1ecb \u0111\u1ecbnh tuy\u1ebfn trong b\u01b0\u1edbc nh\u1ea3y ti\u1ebfp theo c\u1ee7a h\u00e0nh tr\u00ecnh d\u00e0i tr\u00ean internet. </p> <p>(5) C\u00e1c frame c\u0169ng \u0111\u01b0\u1ee3c g\u1eedi qua m\u1ea1ng \u1edf d\u1ea1ng bit d\u1eef li\u1ec7u th\u00f4 trong t\u1ea7ng v\u1eadt l\u00fd. </p> <p>(6) + (7) + (8) + (9) + (10) Khi web server nh\u1eadn \u0111\u01b0\u1ee3c c\u00e1c bit th\u00f4 n\u00e0y t\u1eeb m\u1ea1ng, n\u00f3 s\u1ebd \u0111\u1ea3o ng\u01b0\u1ee3c quy tr\u00ecnh. C\u00e1c header \u0111\u01b0\u1ee3c b\u00f3c ra tr\u00ean t\u1eebng t\u1ea7ng, v\u00e0 cu\u1ed1i c\u00f9ng, web server x\u1eed l\u00fd HTTP request.</p> <p></p> <p>T\u00f3m l\u1ea1i, m\u00f4 h\u00ecnh OSI l\u00e0 m\u1ed9t c\u00e1ch nh\u00ecn v\u1ec1 c\u00e1ch m\u1ea1ng ho\u1ea1t \u0111\u1ed9ng. M\u1ee5c \u0111\u00edch ch\u00ednh c\u1ee7a n\u00f3 l\u00e0 \u0111\u1ec3 gi\u00e1o d\u1ee5c. M\u1eb7c d\u00f9 c\u00e1c t\u1ea7ng kh\u00f4ng ho\u00e0n to\u00e0n ph\u00f9 h\u1ee3p v\u1edbi c\u00e1c use case trong th\u1ebf gi\u1edbi th\u1ef1c, ch\u00fang v\u1eabn \u0111\u01b0\u1ee3c c\u00e1c nh\u00e0 cung c\u1ea5p m\u1ea1ng v\u00e0 nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\u00e1m m\u00e2y s\u1eed d\u1ee5ng r\u1ed9ng r\u00e3i nh\u01b0 m\u1ed9t c\u00e1ch \u0111\u1ec3 m\u00f4 t\u1ea3 b\u1ecb tr\u00ed c\u1ee7a c\u00e1c s\u1ea3n ph\u1ea9m m\u1ea1ng c\u1ee7a h\u1ecd trong m\u00f4 h\u00ecnh OSI.</p> <p>V\u00ed d\u1ee5: load balancer tr\u00ean \u0111\u00e1m m\u00e2y th\u01b0\u1eddng \u0111\u01b0\u1ee3c chia l\u00e0m hai lo\u1ea1i - L4 v\u00e0 L7.</p> <p>L7 load balancer ngh\u0129a l\u00e0 n\u00f3 ho\u1ea1t \u0111\u1ed9ng \u1edf t\u1ea7ng giao th\u1ee9c \u1ee9ng d\u1ee5ng nh\u01b0 HTTP v\u00e0 HTTPS. </p> <p></p> <p>L4 load balancer th\u00ec ho\u1ea1t \u0111\u1ed9ng \u1edf t\u1ea7ng giao v\u1eadn.</p> <p></p>"},{"location":"ByteByteGo/process-vs-thread/","title":"Process vs. Thread","text":""},{"location":"ByteByteGo/process-vs-thread/#nguon","title":"Ngu\u1ed3n","text":"<p> FANG Interview Question | Process vs Thread</p>"},{"location":"ByteByteGo/process-vs-thread/#chuong-trinh-program-la-gi","title":"Ch\u01b0\u01a1ng tr\u00ecnh (Program) l\u00e0 g\u00ec?","text":"<p>M\u1ed9t ch\u01b0\u01a1ng tr\u00ecnh (Program) l\u00e0 m\u1ed9t file th\u1ef1c thi (executable). N\u00f3 ch\u1ee9a m\u00e3 ngu\u1ed3n, ho\u1eb7c m\u1ed9t t\u1eadp c\u00e1c h\u01b0\u1edbng d\u1eabn x\u1eed l\u00fd \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef th\u00e0nh m\u1ed9t file tr\u00ean \u1ed5 \u0111\u0129a.</p> <p></p>"},{"location":"ByteByteGo/process-vs-thread/#tien-trinh-process-la-gi","title":"Ti\u1ebfn tr\u00ecnh (Process) l\u00e0 g\u00ec?","text":"<p>Khi m\u00e3 ngu\u1ed3n c\u1ee7a ch\u01b0\u01a1ng tr\u00ecnh \u0111\u01b0\u1ee3c \u0111\u01b0a v\u00e0o trong b\u1ed9 nh\u1edb v\u00e0 \u0111\u01b0\u1ee3c th\u1ef1c thi b\u1edfi b\u1ed9 x\u1eed l\u00fd, n\u00f3 tr\u1edf th\u00e0nh m\u1ed9t ti\u1ebfn tr\u00ecnh (Process).</p> <p></p> <p>M\u1ed9t process \u0111ang ho\u1ea1t \u0111\u1ed9ng c\u0169ng c\u1ea7n t\u00e0i nguy\u00ean m\u00e0 ch\u01b0\u01a1ng tr\u00ecnh c\u1ea7n \u0111\u1ec3 ch\u1ea1y. T\u00e0i nguy\u00ean n\u00e0y \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd b\u1edfi h\u1ec7 \u0111i\u1ec1u h\u00e0nh. M\u1ed9t s\u1ed1 v\u00ed d\u1ee5 nh\u01b0 thanh ghi x\u1eed l\u00fd, b\u1ed9 \u0111\u1ebfm ch\u01b0\u01a1ng tr\u00ecnh, con tr\u1ecf stack, c\u00e1c trang b\u1ed9 nh\u1edb \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh cho stack v\u00e0 heap c\u1ee7a process, v\u00e2n v\u00e2n...</p> <p>M\u1ed7i process c\u00f3 kh\u00f4ng gian \u0111\u1ecba ch\u1ec9 b\u1ed9 nh\u1edb ri\u00eang. M\u1ed9t process kh\u00f4ng th\u1ec3 g\u00e2y h\u1ea1i \u0111\u1ebfn kh\u00f4ng gian b\u1ed9 nh\u1edb c\u1ee7a m\u1ed9t process kh\u00e1c. \u0110i\u1ec1u n\u00e0y c\u00f3 ngh\u0129a l\u00e0 n\u1ebfu m\u1ed9t process g\u1eb7p s\u1ef1 c\u1ed1, c\u00e1c process kh\u00e1c v\u1eabn c\u00f3 th\u1ec3 ti\u1ebfp t\u1ee5c ch\u1ea1y. Tr\u00ecnh duy\u1ec7t Chrome v\u1eadn d\u1ee5ng \u0111i\u1ec1u n\u00e0y r\u1ea5t t\u1ed1t. M\u1ed7i tab c\u1ee7a Chrome l\u00e0 m\u1ed9t process. Khi m\u1ed9t tab g\u1eb7p s\u1ef1 c\u1ed1 do l\u1ed7i hay b\u1ecb t\u1ea5n c\u00f4ng, c\u00e1c tab kh\u00e1c kh\u00f4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng.</p>"},{"location":"ByteByteGo/process-vs-thread/#luong-thread-la-gi","title":"Lu\u1ed3ng (Thread) l\u00e0 g\u00ec?","text":"<p>Lu\u1ed3ng (thread) l\u00e0 m\u1ed9t \u0111\u01a1n v\u1ecb th\u1ef1c thi b\u00ean trong m\u1ed9t process. M\u1ed7i process c\u00f3 \u00edt nh\u1ea5t m\u1ed9t thread, c\u00f2n g\u1ecdi l\u00e0 main thread. M\u1ed9t process c\u00f3 th\u1ec3 c\u00f3 nhi\u1ec1u thread.</p> <p></p> <p>M\u1ed7i thread c\u00f3 m\u1ed9t stack ri\u00eang. Tr\u01b0\u1edbc \u0111\u00f3 ta \u0111\u1ec1 c\u1eadp \u0111\u1ebfn vi\u1ec7c c\u00e1c thanh ghi, b\u1ed9 \u0111\u1ebfm ch\u01b0\u01a1ng tr\u00ecnh, con tr\u1ecf stack l\u00e0 m\u1ed9t ph\u1ea7n c\u1ee7a m\u1ed9t process. Gi\u1edd ta c\u00f3 th\u1ec3 n\u00f3i \u0111\u00fang h\u01a1n r\u1eb1ng ch\u00fang l\u00e0 m\u1ed9t ph\u1ea7n c\u1ee7a m\u1ed9t thread.</p> <p>C\u00e1c thread trong m\u1ed9t process chia s\u1ebb c\u00f9ng m\u1ed9t kh\u00f4ng gian \u0111\u1ecba ch\u1ec9 b\u1ed9 nh\u1edb. Kh\u00f4ng gian \u0111\u1ecba ch\u1ec9 b\u1ed9 nh\u1edb chung n\u00e0y c\u0169ng c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 giao ti\u1ebfp gi\u1eefa c\u00e1c thread v\u1edbi nhau. Tuy nhi\u00ean, m\u1ed9t thread g\u1eb7p s\u1ef1 c\u1ed1 c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn c\u1ea3 process g\u1eb7p l\u1ed7i.</p> <p></p>"},{"location":"ByteByteGo/process-vs-thread/#he-ieu-hanh-khoi-chay-thread-hoac-process-tren-cpu-nhu-the-nao","title":"H\u1ec7 \u0111i\u1ec1u h\u00e0nh kh\u1edfi ch\u1ea1y thread ho\u1eb7c process tr\u00ean CPU nh\u01b0 th\u1ebf n\u00e0o?","text":"<p>Vi\u1ec7c n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi context switching (thay \u0111\u1ed5i b\u1ed1i c\u1ea3nh).</p> <p></p> <p>Trong khi \u0111ang context switch, m\u1ed9t process \u0111\u01b0\u1ee3c mang ra (switch) kh\u1ecfi CPU \u0111\u1ec3 cho m\u1ed9t process kh\u00e1c c\u00f3 th\u1ec3 ch\u1ea1y. H\u1ec7 \u0111i\u1ec1u h\u00e0nh l\u01b0u tr\u1ea1ng th\u00e1i c\u1ee7a process hi\u1ec7n t\u1ea1i (b\u1ecb switch ra) \u0111\u1ec3 c\u00f3 th\u1ec3 kh\u00f4i ph\u1ee5c v\u00e0 ti\u1ebfp t\u1ee5c ch\u1ea1y v\u00e0o m\u1ed9t th\u1eddi \u0111i\u1ec3m kh\u00e1c. Sau \u0111\u00f3 n\u00f3 kh\u00f4i ph\u1ee5c tr\u1ea1ng th\u00e1i tr\u01b0\u1edbc \u0111\u00f3 c\u1ee7a m\u1ed9t process kh\u00e1c v\u00e0 ti\u1ebfp t\u1ee5c ch\u1ea1y process \u0111\u00f3.</p> <p></p> <p></p> <p>Context switch r\u1ea5t t\u1ed1n k\u00e9m. N\u00f3 bao g\u1ed3m vi\u1ec7c l\u01b0u v\u00e0 t\u1ea3i d\u1eef li\u1ec7u v\u00e0o thanh ghi, thay \u0111\u1ed5i trang b\u1ed9 nh\u1edb, v\u00e0 c\u1eadp nh\u1eadt nhi\u1ec1u c\u1ea5u tr\u00fac d\u1eef li\u1ec7u trong kernel. Thay \u0111\u1ed5i th\u1ef1c thi gi\u1eefa c\u00e1c lu\u1ed3ng c\u0169ng c\u1ea7n context switching.</p> <p></p> <p></p> <p>Th\u00f4ng th\u01b0\u1eddng th\u00ec context switch tr\u00ean thread s\u1ebd nhanh h\u01a1n tr\u00ean process. Thread th\u00ec c\u00f3 \u00edt tr\u1ea1ng th\u00e1i h\u01a1n v\u00e0 quan tr\u1ecdng h\u01a1n l\u00e0 c\u00e1c thread c\u00f3 c\u00f9ng kh\u00f4ng gian \u0111\u1ecba ch\u1ec9 b\u1ed9 nh\u1edb, n\u00ean kh\u00f4ng c\u1ea7n ph\u1ea3i thay \u0111\u1ed5i trang c\u00e1c b\u1ed9 nh\u1edb \u1ea3o, \u0111\u00e2y c\u0169ng l\u00e0 thao t\u00e1c t\u1ed1n k\u00e9m nh\u1ea5t trong context switch.</p> <p></p> <p>Context switch t\u1ed1n k\u00e9m n\u00ean c\u00f3 m\u1ed9t s\u1ed1 c\u01a1 ch\u1ebf \u0111\u1ec3 t\u1ed1i thi\u1ec3u ho\u00e1 s\u1ef1 t\u1ed1n k\u00e9m n\u00e0y, v\u00ed d\u1ee5 nh\u01b0 fiber v\u00e0 coroutine.</p> <p></p> <p>C\u00e1c c\u01a1 ch\u1ebf n\u00e0y gi\u1ea3m t\u1ed1n k\u00e9m nh\u01b0ng t\u0103ng \u0111\u1ed9 ph\u1ee9c t\u1ea1p c\u1ee7a context switch. N\u00f3i chung, ch\u00fang \u0111\u01b0\u1ee3c l\u00ean l\u1ecbch m\u1ed9t c\u00e1ch h\u1ee3p t\u00e1c v\u1edbi nhau, ngh\u0129a l\u00e0, m\u1ed9t th\u1eb1ng ph\u1ea3i \u0111\u01b0a quy\u1ec1n \u0111i\u1ec1u khi\u1ec3n cho th\u1eb1ng c\u00f2n l\u1ea1i \u0111\u1ec3 th\u1eb1ng c\u00f2n l\u1ea1i c\u00f3 th\u1ec3 ch\u1ea1y, gi\u00fap cho \u1ee9ng d\u1ee5ng t\u1ef1 m\u00ecnh l\u1eadp l\u1ecbch. Tr\u00e1ch nhi\u1ec7m thu\u1ed9c v\u1ec1 \u1ee9ng d\u1ee5ng \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng m\u1ed9t task k\u00e9o d\u00e0i c\u00f3 th\u1ec3 t\u1ea1m ng\u01b0ng b\u1eb1ng c\u00e1ch trao quy\u1ec1n \u0111i\u1ec1u khi\u1ebfn theo \u0111\u1ecbnh k\u1ef3.</p> <p></p>"},{"location":"ByteByteGo/proxy-vs-reverse-proxy/","title":"Proxy vs. Reverse Proxy","text":""},{"location":"ByteByteGo/proxy-vs-reverse-proxy/#nguon","title":"Ngu\u1ed3n","text":"<p> Proxy vs Reverse Proxy (Real-world Examples)</p>"},{"location":"ByteByteGo/proxy-vs-reverse-proxy/#forward-proxy","title":"Forward Proxy","text":"<p>C\u00f3 hai lo\u1ea1i proxy ph\u1ed5 bi\u1ebfn l\u00e0 forward proxy (proxy chuy\u1ec3n ti\u1ebfp) v\u00e0 reverse proxy (proxy ng\u01b0\u1ee3c).</p> <p>Forward proxy l\u00e0 m\u1ed9t server n\u1eb1m gi\u1eefa m\u1ed9t nh\u00f3m c\u00e1c m\u00e1y client v\u00e0 m\u1ea1ng internet. Khi nh\u1eefng m\u00e1y client \u0111\u00f3 g\u1eedi request l\u00ean c\u00e1c trang web tr\u00ean m\u1ea1ng internet, forward proxy s\u1ebd \u0111\u00f3ng vai tr\u00f2 l\u00e0 trung gian \u0111\u1ec3 ch\u1eb7n c\u00e1c request \u0111\u00f3, v\u00e0 giao ti\u1ebfp v\u1edbi web server thay m\u1eb7t cho c\u00e1c m\u00e1y client \u0111\u00f3.</p> <p></p> <p>Ng\u01b0\u1eddi ta c\u1ea7n forward proxy v\u00ec m\u1ed9t v\u00e0i l\u00fd do sau.</p> <p>Th\u1ee9 nh\u1ea5t, forward proxy b\u1ea3o v\u1ec7 danh t\u00ednh tr\u1ef1c tuy\u1ebfn c\u1ee7a client. B\u1eb1ng c\u00e1ch d\u00f9ng forward proxy \u0111\u1ec3 k\u1ebft n\u1ed1i v\u1edbi m\u1ed9t trang web, \u0111\u1ecba ch\u1ec9 IP c\u1ee7a client s\u1ebd kh\u00f4ng b\u1ecb server t\u00ecm ra, server s\u1ebd ch\u1ec9 nh\u00ecn th\u1ea5y \u0111\u1ecba ch\u1ec9 c\u1ee7a proxy. Nh\u01b0 v\u1eady s\u1ebd kh\u00f3 h\u01a1n \u0111\u1ec3 t\u00ecm ra \u0111\u01b0\u1ee3c client.</p> <p>Th\u1ee9 hai, m\u1ed9t forward proxy c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 b\u1ecf qua c\u00e1c h\u1ea1n ch\u1ebf v\u1ec1 duy\u1ec7t web. M\u1ed9t s\u1ed1 t\u1ed5 ch\u1ee9c nh\u01b0 ch\u00ednh ph\u1ee7, tr\u01b0\u1eddng h\u1ecdc v\u00e0 doanh nghi\u1ec7p l\u1edbn s\u1eed d\u1ee5ng t\u01b0\u1eddng l\u1eeda \u0111\u1ec3 h\u1ea1n ch\u1ebf quy\u1ec1n truy c\u1eadp internet. B\u1eb1ng c\u00e1ch k\u1ebft n\u1ed1i v\u1edbi forward proxy b\u00ean ngo\u00e0i t\u01b0\u1eddng l\u1eeda, client c\u00f3 kh\u1ea3 n\u0103ng v\u01b0\u1ee3t qua nh\u1eefng h\u1ea1n ch\u1ebf n\u00e0y. Tuy nhi\u00ean kh\u00f4ng ph\u1ea3i l\u00fac n\u00e0o c\u0169ng v\u01b0\u1ee3t qua \u0111\u01b0\u1ee3c v\u00ec b\u1ea3n th\u00e2n t\u01b0\u1eddng l\u1eeda c\u00f3 th\u1ec3 ch\u1eb7n k\u1ebft n\u1ed1i v\u1edbi proxy.</p> <p>Th\u1ee9 ba, c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng forward proxy \u0111\u1ec3 ch\u1eb7n quy\u1ec1n truy c\u1eadp v\u00e0o m\u1ed9t s\u1ed1 n\u1ed9i dung nh\u1ea5t \u0111\u1ecbnh. \u0110i\u1ec1u n\u00e0y kh\u00f4ng c\u00f3 g\u00ec l\u1ea1 khi c\u00e1c tr\u01b0\u1eddng h\u1ecdc v\u00e0 doanh nghi\u1ec7p s\u1ebd c\u1ea5u h\u00ecnh m\u1ea1ng c\u1ee7a h\u1ecd \u0111\u1ec3 k\u1ebft n\u1ed1i t\u1ea5t c\u1ea3 client v\u1edbi web th\u00f4ng qua m\u1ed9t proxy v\u00e0 \u00e1p d\u1ee5ng c\u00e1c b\u1ed9 l\u1ecdc \u0111\u1ec3 kh\u00f4ng cho ph\u00e9p truy c\u1eadp c\u00e1c trang web nh\u01b0 m\u1ea1ng x\u00e3 h\u1ed9i. C\u1ea7n l\u01b0u \u00fd r\u1eb1ng forward proxy th\u01b0\u1eddng y\u00eau c\u1ea7u client c\u1ea5u h\u00ecnh \u1ee9ng d\u1ee5ng c\u1ee7a client tr\u1ecf \u0111\u1ebfn proxy. </p>"},{"location":"ByteByteGo/proxy-vs-reverse-proxy/#transparent-proxy","title":"Transparent Proxy","text":"<p>\u0110\u1ed1i v\u1edbi c\u00e1c t\u1ed5 ch\u1ee9c l\u1edbn, h\u1ecd th\u01b0\u1eddng s\u1eed d\u1ee5ng m\u1ed9t k\u1ef9 thu\u1eadt g\u1ecdi l\u00e0 transparent proxy (proxy minh b\u1ea1ch) \u0111\u1ec3 h\u1ee3p l\u00fd ho\u00e1 qu\u00e1 tr\u00ecnh.</p> <p>M\u1ed9t transparent proxy ho\u1ea1t \u0111\u1ed9ng v\u1edbi c\u00e1c c\u00f4ng t\u1eafc t\u1ea7ng 4 (OSI) \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng chuy\u1ec3n h\u01b0\u1edbng m\u1ed9t s\u1ed1 lo\u1ea1i l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp nh\u1ea5t \u0111\u1ecbnh \u0111\u1ebfn proxy. Kh\u00f4ng c\u1ea7n ph\u1ea3i c\u1ea5u h\u00ecnh client \u0111\u1ec3 s\u1eed d\u1ee5ng n\u00f3. R\u1ea5t kh\u00f3 \u0111\u1ec3 b\u1ecf qua m\u1ed9t transparent proxy khi client \u0111ang \u1edf tr\u00ean m\u1ea1ng c\u1ee7a t\u1ed5 ch\u1ee9c.</p> <p></p> <p>T\u00f3m l\u1ea1i, forward proxy n\u1eb1m gi\u1eefa client v\u00e0 internet v\u00e0 ho\u1ea1t \u0111\u1ed9ng thay m\u1eb7t cho client.</p>"},{"location":"ByteByteGo/proxy-vs-reverse-proxy/#reverse-proxy","title":"Reverse Proxy","text":"<p>Reverse proxy n\u1eb1m gi\u1eefa internet v\u00e0 c\u00e1c web server. N\u00f3 ch\u1eb7n c\u00e1c request t\u1eeb client v\u00e0 giao ti\u1ebfp v\u1edbi web server thay m\u1eb7t cho client.</p> <p></p> <p>C\u00f3 m\u1ed9t s\u1ed1 l\u00fd do v\u00ec sao m\u1ed9t website s\u1ebd d\u00f9ng reverse proxy.</p> <p>Th\u1ee9 nh\u1ea5t, m\u1ed9t reverse proxy c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 b\u1ea3o v\u1ec7 m\u1ed9t trang web. \u0110\u1ecba ch\u1ec9 IP c\u1ee7a trang web \u0111\u01b0\u1ee3c \u1ea9n \u0111\u1eb1ng sau reverse proxy v\u00e0 kh\u00f4ng \u0111\u01b0\u1ee3c ti\u1ebft l\u1ed9 cho client. \u0110i\u1ec1u n\u00e0y khi\u1ebfn vi\u1ec7c t\u1ed5 ch\u1ee9c m\u1ed9t cu\u1ed9c t\u1ea5n c\u00f4ng t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5 (DDoS) v\u00e0o m\u1ed9t trang web tr\u1edf n\u00ean kh\u00f3 h\u01a1n nhi\u1ec1u.</p> <p>Th\u1ee9 hai, m\u1ed9t reverse proxy \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 c\u00e2n b\u1eb1ng t\u1ea3i (load balancing). M\u1ed9t trang web n\u1ed5i ti\u1ebfng c\u00f3 th\u1ec3 ph\u1ea3i x\u1eed l\u00fd h\u00e0ng tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng m\u1ed7i ng\u00e0y, n\u00f3 kh\u00f3 c\u00f3 th\u1ec3 x\u1eed l\u00fd l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp l\u1edbn nh\u01b0 v\u1eady v\u1edbi m\u1ed9t server. M\u1ed9t reverse proxy c\u00f3 th\u1ec3 c\u00e2n b\u1eb1ng m\u1ed9t l\u01b0\u1ee3ng l\u1edbn request \u0111\u1ebfn web server b\u1eb1ng c\u00e1ch ph\u00e2n ph\u1ed1i l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp \u0111\u1ebfn m\u1ed9t nh\u00f3m l\u1edbn c\u00e1c web server, v\u00e0 ng\u0103n ch\u1eb7n hi\u1ec7u qu\u1ea3 b\u1ea5t k\u1ef3 m\u1ed9t server n\u00e0o trong s\u1ed1 ch\u00fang b\u1ecb qu\u00e1 t\u1ea3i. L\u01b0u \u00fd r\u1eb1ng ta gi\u1ea3 s\u1eed reverse proxy c\u00f3 th\u1ec3 x\u1eed l\u00fd l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp \u0111\u1ebfn.</p> <p>C\u00e1c d\u1ecbch v\u1ee5 nh\u01b0 Cloudflare \u0111\u1eb7t c\u00e1c reverse proxy server \u1edf h\u00e0ng tr\u0103m \u0111\u1ecba \u0111i\u1ec3m tr\u00ean kh\u1eafp th\u1ebf gi\u1edbi. \u0110i\u1ec1u n\u00e0y \u0111\u1eb7t reverse proxy g\u1ea7n v\u1edbi ng\u01b0\u1eddi d\u00f9ng, v\u00e0 \u0111\u1ed3ng th\u1eddi cung c\u1ea5p dung l\u01b0\u1ee3ng x\u1eed l\u00fd l\u1edbn.</p> <p>Th\u1ee9 ba, m\u1ed9t reverse proxy c\u00f3 th\u1ec3 cache c\u00e1c static content. M\u1ed9t ph\u1ea7n c\u1ee7a content c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c cache v\u00e0o reverse proxy trong m\u1ed9t kho\u1ea3ng th\u1eddi gian. N\u1ebfu c\u00f9ng m\u1ed9t ph\u1ea7n content \u0111\u00f3 d\u01b0\u1ee3c request l\u1ea1i t\u1eeb reverse proxy, th\u00f4ng tin \u0111\u00e3 cache c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 nhanh ch\u00f3ng.</p> <p>Th\u1ee9 t\u01b0, reverse proxy c\u00f3 th\u1ec3 x\u1eed l\u00fd m\u00e3 ho\u00e1 SSL. B\u1eaft tay SSL r\u1ea5t t\u1ed1n k\u00e9m v\u1ec1 m\u1eb7t t\u00ednh to\u00e1n. M\u1ed9t reverse proxy c\u00f3 th\u1ec3 gi\u1ea3i ph\u00f3ng c\u00e1c server kh\u1ecfi c\u00e1c thao t\u00e1c t\u1ed1n k\u00e9m n\u00e0y. THay v\u00ec x\u1eed l\u00fd SSL cho t\u1ea5t c\u1ea3 client, m\u1ed9t trang web ch\u1ec9 c\u1ea7n x\u1eed l\u00fd b\u1eaft tay SSL t\u1eeb m\u1ed9t s\u1ed1 \u00edt reverse proxy.</p>"},{"location":"ByteByteGo/proxy-vs-reverse-proxy/#cac-lop-reverse-proxy","title":"C\u00e1c l\u1edbp reverse proxy","text":"<p>Reverse proxy \u1edf kh\u1eafp m\u1ecdi n\u01a1i. V\u1edbi m\u1ed9t trang web hi\u1ec7n \u0111\u1ea1i, kh\u00f4ng c\u00f3 g\u00ec l\u1ea1 khi c\u00f3 nhi\u1ec1u l\u1edbp reverse proxy. </p> <p>L\u1edbp \u0111\u1ea7u ti\u00ean c\u00f3 th\u1ec3 l\u00e0 m\u1ed9t d\u1ecbch v\u1ee5 bi\u00ean nh\u01b0 Cloudflare. C\u00e1c reverse proxy \u0111\u01b0\u1ee3c tri\u1ec3n khai t\u1edbi h\u00e0ng tr\u0103m \u0111\u1ecba \u0111i\u1ec3m tr\u00ean to\u00e0n th\u1ebf gi\u1edbi \u0111\u1ec3 g\u1ea7n v\u1edbi ng\u01b0\u1eddi d\u00f9ng.</p> <p>L\u1edbp th\u1ee9 hai c\u00f3 th\u1ec3 l\u00e0 API gateway ho\u1eb7c load balance t\u1ea1i nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 host. Nhi\u1ec1u nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\u00e1m m\u00e2y k\u1ebft h\u1ee3p 2 l\u1edbp n\u00e0y th\u00e0nh m\u1ed9t d\u1ecbch v\u1ee5 \u0111\u1ea7u v\u00e0o duy nh\u1ea5t.</p> <p>Ng\u01b0\u1eddi d\u00f9ng s\u1ebd v\u00e0o m\u1ea1ng \u0111\u00e1m m\u00e2y \u1edf g\u1ea7n v\u1edbi ng\u01b0\u1eddi d\u00f9ng v\u00e0 t\u1eeb \u0111\u00f3, reverse proxy k\u1ebft n\u1ed1i qua m\u1ea1ng c\u00e1p quang t\u1ed1c \u0111\u1ed9 cao v\u1edbi load balancer, n\u01a1i request \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i \u0111\u1ec1u tr\u00ean m\u1ed9t c\u1ee5m web server.</p> <p></p>"},{"location":"ByteByteGo/python-cpp-java/","title":"Python vs. C++ vs. Java","text":""},{"location":"ByteByteGo/python-cpp-java/#nguon","title":"Ngu\u1ed3n","text":"<p> Python Vs C++ Vs Java!</p>"},{"location":"ByteByteGo/python-cpp-java/#c","title":"C++","text":"<p>C++ l\u00e0 m\u1ed9t ng\u00f4n ng\u1eef l\u1eadp tr\u00ecnh c\u1ea7n bi\u00ean d\u1ecbch. Qu\u00e1 tr\u00ecnh b\u1eaft \u0111\u1ea7u khi code \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn m\u1ed9t Tr\u00ecnh bi\u00ean d\u1ecbch (Compiler). Tr\u00ecnh bi\u00ean d\u1ecbch ph\u00e2n t\u00edch t\u1ec9 m\u1ec9 code v\u00e0 d\u1ecbch n\u00f3 th\u00e0nh m\u00e3 m\u00e1y - nh\u1eefng l\u1ec7nh CPU \u0111\u01a1n gi\u1ea3n nh\u01b0 add, move v\u00e0 jump. </p> <p></p> <p>Sau \u0111\u00f3, tr\u00ecnh bi\u00ean d\u1ecbch t\u1ea1o ra m\u1ed9t file th\u1ef1c thi ch\u1ee9a m\u00e3 m\u00e1y. \u0110\u00e2y l\u00e0 ch\u01b0\u01a1ng tr\u00ecnh \u0111\u1ed9c l\u1eadp c\u00f3 th\u1ec3 ch\u1ea1y tr\u00ean b\u1ea5t k\u1ef3 m\u00e1y t\u00ednh n\u00e0o t\u01b0\u01a1ng th\u00edch. \u0110i\u1ec1u n\u00e0y l\u00e0m cho C++ tr\u1edf th\u00e0nh l\u1ef1a ch\u1ecdn l\u00fd t\u01b0\u1edfng cho c\u00e1c t\u00e1c v\u1ee5 y\u00eau c\u1ea7u hi\u1ec7u su\u1ea5t cao, nh\u01b0 l\u1eadp tr\u00ecnh game hay l\u1eadp tr\u00ecnh h\u1ec7 th\u1ed1ng.</p> <p></p> <p>C\u00e1c ng\u00f4n ng\u1eef bi\u00ean d\u1ecbch nh\u01b0 C++, Go, v\u00e0 Rust m\u1ea5t th\u1eddi gian bi\u00ean d\u1ecbch ban \u0111\u1ea7u, nh\u01b0ng khi ch\u1ea1y th\u00ec r\u1ea5t nhanh v\u00ec CPU kh\u00f4ng c\u1ea7n ph\u1ea3i di\u1ec5n gi\u1ea3i ho\u1eb7c bi\u00ean d\u1ecbch m\u00e3 ngay l\u00fac ch\u1ea1y.</p>"},{"location":"ByteByteGo/python-cpp-java/#python","title":"Python","text":"<p>Python, ng\u01b0\u1ee3c l\u1ea1i, l\u00e0 m\u1ed9t ng\u00f4n ng\u1eef \u0111\u01b0\u1ee3c di\u1ec5n d\u1ecbch (interpreted). Thay v\u00ec bi\u00ean d\u1ecbch, m\u00e3 ngu\u1ed3n Python \u0111\u01b0\u1ee3c g\u1eedi tr\u1ef1c ti\u1ebfp \u0111\u1ebfn Tr\u00ecnh di\u1ec5n d\u1ecbch (Interpreter), n\u00f3 s\u1ebd \u0111\u1ecdc v\u00e0 th\u1ef1c thi code theo th\u1eddi gian th\u1ef1c. \u0110i\u1ec1u n\u00e0y l\u00e0m cho Python c\u1ef1c k\u1ef3 linh ho\u1ea1t v\u00e0 d\u1ec5 s\u1eed d\u1ee5ng, ph\u00f9 h\u1ee3p cho c\u00e1c tr\u01b0\u1eddng h\u1ee3p y\u00eau c\u1ea7u ph\u00e1t tri\u1ec3n nhanh v\u00e0 d\u1ec5 \u0111\u1ecdc. </p> <p></p> <p>Python l\u00e0 l\u1ef1a ch\u1ecdn \u01b0a th\u00edch c\u1ee7a c\u00e1c data scientist, data educator, v\u00e0 web dev, v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng v\u1ec1 ph\u00e2n t\u00edch d\u1eef li\u1ec7u v\u00e0 ph\u00e1t tri\u1ec3n web. Tuy nhi\u00ean, vi\u1ec7c th\u1ef1c thi t\u1eebng d\u00f2ng m\u00e3 l\u00e0m Python th\u01b0\u1eddng ch\u1eadm h\u01a1n so v\u1edbi ng\u00f4n ng\u1eef bi\u00ean d\u1ecbch. C\u00e1c ng\u00f4n ng\u1eef di\u1ec5n d\u1ecbch ph\u1ed5 bi\u1ebfn kh\u00e1c bao g\u1ed3m Javascript, Ruby, v\u00e0 Perl.</p>"},{"location":"ByteByteGo/python-cpp-java/#java","title":"Java","text":"<p>Java s\u1eed d\u1ee5ng c\u00e1ch ti\u1ebfp c\u1eadn k\u1ebft h\u1ee3p (hybrid). Code Java tr\u01b0\u1edbc h\u1ebft \u0111\u01b0\u1ee3c bi\u00ean d\u1ecbch th\u00e0nh bytecode, sau \u0111\u00f3 \u0111\u01b0\u1ee3c th\u1ef1c thi b\u1edfi M\u00e1y \u1ea3o Java (JVM). </p> <p></p> <p>JVM c\u00f3 Tr\u00ecnh bi\u00ean d\u1ecbch t\u1ee9c th\u1eddi (JIT), gi\u00fap chuy\u1ec3n \u0111\u1ed5i bytecode th\u00e0nh m\u00e3 m\u00e1y t\u1ed1i \u01b0u ngay tr\u01b0\u1edbc khi th\u1ef1c thi, l\u00e0m cho m\u00e3 Java ch\u1ea1y nhanh h\u01a1n so v\u1edbi ng\u00f4n ng\u1eef di\u1ec5n d\u1ecbch. </p> <p></p> <p>M\u1ed9t l\u1ee3i th\u1ebf c\u1ee7a Java l\u00e0 t\u00ednh kh\u1ea3 chuy\u1ec3n: JVM c\u00f3 m\u1eb7t tr\u00ean h\u1ea7u h\u1ebft c\u00e1c h\u1ec7 \u0111i\u1ec1u h\u00e0nh, do \u0111\u00f3 m\u00e3 Java c\u00f3 th\u1ec3 ch\u1ea1y tr\u00ean b\u1ea5t k\u1ef3 thi\u1ebft b\u1ecb n\u00e0o m\u00e0 kh\u00f4ng c\u1ea7n bi\u00ean d\u1ecbch l\u1ea1i. </p> <p></p> <p>Java c\u0169ng \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf cho vi\u1ec7c an to\u00e0n v\u00e0 b\u1ea3o m\u1eadt cho b\u1ed9 nh\u1edb, v\u1edbi c\u00e1c t\u00ednh n\u0103ng nh\u01b0 t\u1ef1 \u0111\u1ed9ng qu\u1ea3n l\u00fd b\u1ed9 nh\u1edb, gi\u00fap Java ph\u00f9 h\u1ee3p v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng l\u1edbn cho doanh nghi\u1ec7p, y\u00eau c\u1ea7u s\u1ef1 \u1ed5n \u0111\u1ecbnh, b\u1ea3o m\u1eadt v\u00e0 t\u00ednh m\u1edf r\u1ed9ng cao. C\u00e1c c\u00f4ng ty c\u00f4ng ngh\u1ec7 h\u00e0ng \u0111\u1ea7u s\u1eed d\u1ee5ng Java \u0111\u1ec3 v\u1eadn h\u00e0nh c\u00e1c h\u1ec7 th\u1ed1ng quan tr\u1ecdng - v\u00ed d\u1ee5, \u1ee9ng d\u1ee5ng Android \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n b\u1eb1ng Java, v\u00e0 Netflix s\u1eed d\u1ee5ng Java tr\u00ean to\u00e0n b\u1ed9 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng c\u1ee7a m\u00ecnh. C# v\u00e0 Kotlin l\u00e0 m\u1ed9t s\u1ed1 v\u00ed d\u1ee5 kh\u00e1c trong nh\u00f3m ng\u00f4n ng\u1eef n\u00e0y.</p>"},{"location":"ByteByteGo/python-cpp-java/#ket-luan","title":"K\u1ebft lu\u1eadn","text":"<p>Nh\u1edd c\u00e1c ti\u1ebfn b\u1ed9 nh\u01b0 Tr\u00ecnh bi\u00ean d\u1ecbch t\u1ee9c th\u1eddi, ranh gi\u1edbi gi\u1eefa ng\u00f4n ng\u1eef di\u1ec5n d\u1ecbch v\u00e0 bytecode \u0111ang m\u1edd d\u1ea7n. C\u00e1c tr\u00ecnh duy\u1ec7t JavaScript hi\u1ec7n \u0111\u1ea1i s\u1eed d\u1ee5ng JIT \u0111\u1ec3 t\u1ed1i \u01b0u hi\u1ec7u su\u1ea5t. Tuy nhi\u00ean, JavaScript v\u1eabn r\u01a1i v\u00e0o lo\u1ea1i ng\u00f4n ng\u1eef di\u1ec5n d\u1ecbch. C++ cung c\u1ea5p hi\u1ec7u su\u1ea5t th\u00f4, Python linh ho\u1ea1t v\u00e0 d\u1ec5 s\u1eed d\u1ee5ng, c\u00f2n Java c\u00e2n b\u1eb1ng c\u1ea3 hai.</p>"},{"location":"ByteByteGo/rest-api/","title":"REST API l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/rest-api/#nguon","title":"Ngu\u1ed3n","text":"<p> What Is REST API? Examples And How To Use It</p>"},{"location":"ByteByteGo/rest-api/#api-la-gi","title":"API l\u00e0 g\u00ec?","text":"<p>API, hay \u0111\u1ea7y \u0111\u1ee7 h\u01a1n l\u00e0 Application Programming Interface, l\u00e0 m\u1ed9t c\u00e1ch \u0111\u1ec3 hai m\u00e1y t\u00ednh giao ti\u1ebfp v\u1edbi nhau.</p> <p>Chu\u1ea9n API chung \u0111\u01b0\u1ee3c d\u00f9ng b\u1edfi ph\u1ea7n l\u1edbn c\u00e1c \u1ee9ng d\u1ee5ng web v\u00e0 di \u0111\u1ed9ng \u0111\u1ec3 giao ti\u1ebfp v\u1edbi c\u00e1c server \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 REST, hay \u0111\u1ea7y \u0111\u1ee7 h\u01a1n l\u00e0 REpresentational State Transfer.</p> <p>REST nghe c\u00f3 v\u1ebb h\u00e0n l\u00e2m. N\u00f3 kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t d\u1ea1ng \u0111\u1eb7c t\u1ea3 g\u00ec c\u1ea3. N\u00f3 l\u00e0 m\u1ed9t t\u1eadp h\u1ee3p c\u00e1c quy t\u1eafc \u0111\u00e3 tr\u1edf th\u00e0nh chu\u1ea9n chung cho vi\u1ec7c x\u00e2y d\u1ef1ng web API t\u1eeb \u0111\u1ea7u nh\u1eefng n\u0103m 2000. M\u1ed9t API tu\u00e2n th\u1ee7 chu\u1ea9n REST th\u00ec \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 m\u1ed9t RESTful API. M\u1ed9t s\u1ed1 v\u00ed d\u1ee5 c\u00f3 th\u1ec3 k\u1ec3 ra l\u00e0 Twilio, Stripe v\u00e0 Google Maps.</p> <p></p>"},{"location":"ByteByteGo/rest-api/#co-ban-ve-rest-api","title":"C\u01a1 b\u1ea3n v\u1ec1 REST API","text":"<p>M\u1ed9t RESTful API t\u1ed5 ch\u1ee9c c\u00e1c t\u00e0i nguy\u00ean theo m\u1ed9t t\u1eadp c\u00e1c URI duy nh\u1ea5t, hay \u0111\u1ea7y \u0111\u1ee7 h\u01a1n l\u00e0 Uniform Resource Identifier. C\u00e1c URI n\u00e0y ph\u00e2n bi\u1ec7t c\u00e1c lo\u1ea1i t\u00e0i nguy\u00ean kh\u00e1c nhau tr\u00ean server. Sau \u0111\u00e2y l\u00e0 v\u00e0i v\u00ed d\u1ee5.</p> <p></p> <p>C\u00e1c t\u00e0i nguy\u00ean n\u00ean \u0111\u01b0\u1ee3c nh\u00f3m theo danh t\u1eeb, kh\u00f4ng n\u00ean l\u00e0 \u0111\u1ed9ng t\u1eeb. M\u1ed9t API d\u00f9ng \u0111\u1ec3 l\u1ea5y t\u1ea5t c\u1ea3 products n\u00ean d\u00f9ng <code>/products</code> ch\u1ee9 kh\u00f4ng n\u00ean d\u00f9ng <code>/getAllProducts</code>. Client t\u01b0\u01a1ng t\u00e1c v\u1edbi t\u00e0i nguy\u00ean b\u1eb1ng c\u00e1ch t\u1ea1o m\u1ed9t request \u0111\u1ebfn endpoint t\u01b0\u01a1ng \u1ee9ng v\u1edbi t\u00e0i nguy\u00ean \u0111\u00f3 th\u00f4ng qua HTTP. Request n\u00e0y c\u00f3 format c\u1ee5 th\u1ec3. N\u00f3 bao g\u1ed3m URI c\u1ee7a t\u00e0i nguy\u00ean ta mu\u1ed1n truy c\u1eadp, tr\u01b0\u1edbc URI l\u00e0 m\u1ed9t HTTP verb, th\u1ee9 s\u1ebd n\u00f3i cho server bi\u1ebft ta mu\u1ed1n l\u00e0m g\u00ec v\u1edbi t\u00e0i nguy\u00ean \u0111\u00f3.</p> <p></p>"},{"location":"ByteByteGo/rest-api/#crud-la-gi","title":"CRUD l\u00e0 g\u00ec?","text":"<p>M\u1ed9t POST request cho th\u1ea5y ta mu\u1ed1n t\u1ea1o (CREATE) m\u1ed9t t\u00e0i nguy\u00ean m\u1edbi. M\u1ed9t GET request cho th\u1ea5y ta mu\u1ed1n \u0111\u1ecdc (READ) t\u00e0i nguy\u00ean c\u00f3 s\u1eb5n. M\u1ed9t PUT request cho th\u1ea5y ta mu\u1ed1n c\u1eadp nh\u1eadt (UPDATE) m\u1ed9t t\u00e0i nguy\u00ean hi\u1ec7n c\u00f3. M\u1ed9t DELETE request cho th\u1ea5y ta mu\u1ed1n xo\u00e1 (DELETE) m\u1ed9t t\u00e0i nguy\u00ean hi\u1ec7n c\u00f3. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u00e3 nghe qua t\u1eeb vi\u00eat t\u1eaft CRUD, 4 th\u1ee9 tr\u00ean k\u1ebft h\u1ee3p l\u1ea1i ch\u00ednh l\u00e0 n\u00f3.</p> <p>Body c\u1ee7a request c\u00f3 th\u1ec3 c\u00f3 HTTP request body ch\u1ee9a data, th\u01b0\u1eddng l\u00e0 m\u00e3 ho\u00e1 theo JSON. </p> <p></p> <p>Server nh\u1eadn request, x\u1eed l\u00fd n\u00f3, sau \u0111\u00f3 format k\u1ebft qu\u1ea3 th\u00e0nh m\u1ed9t response. D\u00f2ng \u0111\u1ea7u ti\u00ean c\u1ee7a response ch\u1ee9a HTTP status code \u0111\u1ec3 n\u00f3i cho client bi\u1ebft chuy\u1ec7n g\u00ec \u0111\u00e3 x\u1ea3y ra v\u1edbi request.</p> <p>M\u1ed9t RESTful API \u0111\u01b0\u1ee3c c\u00e0i \u0111\u1eb7t t\u1ed1t s\u1ebd tr\u1ea3 v\u1ec1 \u0111\u00fang HTTP status code. Code 2xx ngh\u0129a l\u00e0 request \u0111\u00e3 th\u1ef1c hi\u1ec7n th\u00e0nh c\u00f4ng. Code 4xx ngh\u0129a l\u00e0 \u0111\u00e3 c\u00f3 l\u1ed7i g\u00ec \u0111\u00f3 x\u1ea3y ra v\u1edbi request, v\u00ed d\u1ee5 nh\u01b0 request kh\u00f4ng \u0111\u00fang \u0111\u1ecbnh d\u1ea1ng. Code 5xx ngh\u0129a l\u00e0 c\u00f3 v\u1ea5n \u0111\u1ec1 v\u1edbi server khi th\u1ef1c hi\u1ec7n request, nh\u01b0 vi\u1ec7c server s\u1eadp.</p> <p></p> <p>Client c\u00f3 th\u1ec3 ch\u1ecdn \u0111\u1ec3 th\u1eed l\u1ea1i request 5xx v\u1eeba r\u1ed3i. Ta n\u00f3i \"c\u00f3 th\u1ec3 th\u1eed l\u1ea1i\" v\u00ec m\u1ed9t s\u1ed1 request kh\u00f4ng idempotent, v\u00e0 c\u00e1c request \u0111\u00f3 c\u1ea7n \u0111\u01b0\u1ee3c ch\u00fa \u00fd nhi\u1ec1u h\u01a1n khi th\u1eed l\u1ea1i. M\u1ed9t API g\u1ecdi l\u00e0 idempotent ngh\u0129a l\u00e0 khi g\u1ecdi c\u00f9ng m\u1ed9t request nhi\u1ec1u l\u1ea7n th\u00ec \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn t\u00e0i nguy\u00ean s\u1ebd nh\u01b0 khi ch\u1ec9 g\u1ecdi m\u1ed9t l\u1ea7n. C\u00e1c POST request th\u01b0\u1eddng kh\u00f4ng idempotent v\u00ec ch\u00f9ng th\u01b0\u1eddng \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 t\u1ea1o t\u00e0i nguy\u00ean m\u1edbi.</p> <p>Response body c\u00f3 th\u1ec3 c\u00f3 ho\u1eb7c kh\u00f4ng, v\u00e0 c\u00f3 th\u1ec3 ch\u1ee9a data, th\u01b0\u1eddng \u0111\u01b0\u1ee3c m\u00e3 ho\u00e1 theo JSON.</p> <p></p> <p>C\u00e0i \u0111\u1eb7t REST n\u00ean theo h\u01b0\u1edbng stateless, ngh\u0129a l\u00e0 c\u1ea3 2 ph\u00eda server v\u00e0 client \u0111\u1ec1u kh\u00f4ng l\u01b0u th\u00f4ng tin c\u1ee7a nhau v\u00e0 m\u1ecdi v\u00f2ng request response (chu k\u00ec) \u0111\u1ec1u \u0111\u1ed9c l\u1eadp v\u1edbi nhau. \u0110i\u1ec1u n\u00e0y khi\u1ebfn cho c\u00e1c \u1ee9ng d\u1ee5ng web d\u1ec5 d\u00e0ng scale up h\u01a1n.</p> <p>N\u1ebfu m\u1ed9t endpoint tr\u1ea3 v\u1ec1 l\u01b0\u1ee3ng th\u00f4ng tin l\u1edbn, c\u1ea7n d\u00f9ng pagination (ph\u00e2n trang). Chu\u1ea9n pagination th\u01b0\u1eddng \u0111\u01b0\u1ee3c d\u00f9ng l\u00e0 v\u1edbi c\u00e1c tham s\u1ed1 \"offset\" v\u00e0 \"limit\". V\u00ed d\u1ee5 <code>/products?offset=50&amp;limit=25</code> ngh\u0129a l\u00e0 ta l\u1ea5y 25 product t\u1eeb product th\u1ee9 50 tr\u1edf \u0111i. N\u1ebfu c\u00e1c tham s\u1ed1 tr\u00ean kh\u00f4ng \u0111\u01b0\u1ee3c truy\u1ec1n v\u00e0o, ta c\u1ea7n d\u00f9ng c\u00e1c tham s\u1ed1 m\u1eb7c \u0111\u1ecbnh c\u1ee7a ch\u00fang.</p> <p>Cu\u1ed1i c\u00f9ng, versioning API r\u1ea5t quan tr\u1ecdng. Versioning cho ph\u00e9p k\u0129 s\u01b0 c\u00f3 th\u1ec3 ti\u1ebfp t\u1ee5c cung c\u1ea5p c\u00e1c phi\u00ean b\u1ea3n tr\u01b0\u1edbc c\u1ee7a c\u00e1c API m\u00e0 kh\u00f4ng ph\u1ea3i xo\u00e1 ho\u00e0n to\u00e0n ch\u00fang \u0111i. \u0110i\u1ec1u n\u00e0y gi\u00fap client c\u00f3 \u0111\u1ee7 th\u1eddi gian \u0111\u1ec3 chuy\u1ec3n qua API version m\u1edbi. C\u00f3 nhi\u1ec1u c\u00e1ch versioning, ph\u1ed5 bi\u1ebfn nh\u1ea5t l\u00e0 \u0111\u1eb7t ti\u1ec1n t\u1ed1 <code>/v1/</code>, <code>/v2/</code> tr\u01b0\u1edbc t\u00e0i nguy\u00ean tr\u00ean URI, v\u00ed d\u1ee5 <code>/v1/products</code>, <code>/v2/products</code>.</p>"},{"location":"ByteByteGo/scan-to-pay/","title":"Scan to Pay l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/scan-to-pay/#nguon","title":"Ngu\u1ed3n","text":"<p> Scan to Pay in 2 Minutes</p>"},{"location":"ByteByteGo/scan-to-pay/#scan-to-pay-hoat-ong-nhu-the-nao","title":"Scan to Pay ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\u00e0o?","text":"<p>Scan to Pay l\u00e0 m\u1ed9t ph\u01b0\u01a1ng th\u1ee9c thanh to\u00e1n ph\u1ed5 bi\u1ebfn trong nh\u1eefng \u1ee9ng d\u1ee5ng v\u00ed \u0111i\u1ec7n t\u1eed nh\u01b0 Paytm, PayPal v\u00e0 Venmo. C\u00e1c \u1ee9ng d\u1ee5ng n\u00e0y thanh to\u00e1n b\u1eb1ng c\u00e1ch qu\u00e9t m\u00e3 QR t\u1ea1i \u0111i\u1ec3m b\u00e1n h\u00e0ng.</p> <p>\u0110\u1ec3 hi\u1ec3u \u0111\u01b0\u1ee3c c\u00e1ch th\u1ee9c Scan to Pay ho\u1ea1t \u0111\u1ed9ng, ta s\u1ebd chia n\u00f3 th\u00e0nh hai ph\u1ea7n:</p> <ol> <li>Sinh ra m\u00e3 QR cho c\u00e1c \u0111i\u1ec3m b\u00e1n h\u00e0ng v\u00e0 hi\u1ec3n th\u1ecb tr\u00ean m\u00e0n h\u00ecnh.</li> <li>Qu\u00e9t m\u00e3 QR \u0111\u00f3 v\u00e0 thanh to\u00e1n v\u1edbi \u1ee9ng d\u1ee5ng v\u00ed \u0111i\u1ec7n t\u1eed.</li> </ol>"},{"location":"ByteByteGo/scan-to-pay/#sinh-ma-qr","title":"Sinh m\u00e3 QR","text":"<p>Khi kh\u00e1ch h\u00e0ng mu\u1ed1n thanh to\u00e1n, thu ng\u00e2n nh\u1ea5n n\u00fat Checkout (1). M\u00e1y c\u1ee7a thu ng\u00e2n s\u1ebd g\u1eedi t\u1ed5ng ti\u1ec1n v\u00e0 m\u00e3 ho\u00e1 \u0111\u01a1n \u0111\u1ebfn nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 thanh to\u00e1n (Payment Service Provider - PSP) (2). PSP l\u01b0u th\u00f4ng tin n\u00e0y v\u00e0o database v\u00e0 sinh ra m\u1ed9t URL tr\u1ecf \u0111\u1ebfn m\u1ed9t m\u00e3 QR (3). PSP tr\u1ea3 URL ch\u1ee9a m\u00e3 QR \u0111\u1ebfn m\u00e1y t\u00ednh c\u1ee7a thu ng\u00e2n (4) (5). M\u00e1y c\u1ee7a thu ng\u00e2n g\u1eedi m\u00e3 QR d\u1ebfn thi\u1ebft b\u1ecb thanh to\u00e1n \u0111\u1ea7u cu\u1ed1i (6). Thi\u1ebft b\u1ecb n\u00e0y s\u1ebd hi\u1ec3n th\u1ecb m\u00e3 QR (7). T\u1ea5t c\u1ea3 c\u00e1c b\u01b0\u1edbc n\u00e0y s\u1ebd \u0111\u01b0\u1ee3c ho\u00e0n t\u1ea5t trong kho\u1ea3ng m\u1ed9t gi\u00e2y. </p>"},{"location":"ByteByteGo/scan-to-pay/#thanh-toan-bang-ung-dung","title":"Thanh to\u00e1n b\u1eb1ng \u1ee9ng d\u1ee5ng","text":"<p>Gi\u1edd kh\u00e1ch h\u00e0ng s\u1ebd tr\u1ea3 b\u1eb1ng \u1ee9ng d\u1ee5ng v\u00ed \u0111i\u1ec7n t\u1eed b\u1eb1ng c\u00e1ch qu\u00e9t m\u00e3 QR n\u00e0y (8). T\u1ed5ng ti\u1ec1n c\u1ea7n tr\u1ea3 s\u1ebd \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb tr\u00ean \u1ee9ng d\u1ee5ng. Sau khi x\u00e1c nh\u1eadn t\u1ed5ng ti\u1ec1n c\u1ea7n thanh to\u00e1n, kh\u00e1ch b\u1ea5m n\u00fat Thanh to\u00e1n (9). \u1ee8ng d\u1ee5ng v\u00ed \u0111i\u1ec7n t\u1eed b\u00e1o cho PSP r\u1eb1ng QR code \u0111\u00e3 \u0111\u01b0\u1ee3c thanh to\u00e1n (10). PSP \u0111\u00e1nh d\u1ea5u r\u1eb1ng QR code \u0111\u00e3 \u0111\u01b0\u1ee3c thanh to\u00e1n v\u00e0 tr\u1ea3 v\u1ec1 th\u00e0nh c\u00f4ng cho \u1ee9ng d\u1ee5ng v\u00ed \u0111i\u1ec7n t\u1eed (11). PSP sau \u0111\u00f3 b\u00e1o cho ng\u01b0\u1eddi b\u00e1n r\u1eb1ng kh\u00e1ch \u0111\u00e3 tr\u1ea3 v\u1edbi m\u00e3 QR kia (12).</p> <p></p> <p>\u0110\u00e2y l\u00e0 c\u00e1ch thanh to\u00e1n d\u00f9ng m\u00e3 QR \u0111\u1ed9ng. N\u00f3 \"\u0111\u1ed9ng\" v\u00ec QR \u0111\u01b0\u1ee3c sinh ra ch\u1ec9 cho m\u1ed9t l\u1ea7n s\u1eed d\u1ee5ng. Ta c\u0169ng c\u00f3 th\u1ec3 thanh to\u00e1n b\u1eb1ng c\u00e1ch qu\u00e9t m\u00e3 QR \u0111\u01b0\u1ee3c in \u1edf \u0111i\u1ec3m b\u00e1n h\u00e0ng. \u0110\u00e2y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 m\u00e3 QR t\u0129nh. N\u00f3 ho\u1ea1t \u0111\u1ed9ng h\u01a1i kh\u00e1c m\u1ed9t ch\u00fat v\u00e0 s\u1ebd \u0111\u01b0\u1ee3c \u0111\u1ec1 c\u1eadp trong m\u1ed9t b\u00e0i vi\u1ebft kh\u00e1c.</p>"},{"location":"ByteByteGo/serverless-ditching/","title":"Amazon Prime Video t\u1eeb b\u1ecf AWS Serverless, ti\u1ebft ki\u1ec7m 90% chi ph\u00ed","text":""},{"location":"ByteByteGo/serverless-ditching/#nguon","title":"Ngu\u1ed3n","text":"<p> Amazon Prime Video Ditches AWS Serverless, Saves 90%</p>"},{"location":"ByteByteGo/serverless-ditching/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Trong b\u00e0i vi\u1ebft n\u00e0y, ta s\u1ebd th\u1ea3o lu\u1eadn m\u1ed9t case study kh\u00e1 th\u00fa v\u1ecb trong ki\u1ebfn tr\u00fac ph\u1ea7n m\u1ec1m. G\u1ea7n \u0111\u00e2y, Amazon Prime Video g\u00e2y tranh c\u00e3i khi chia s\u1ebb tr\u1ea3i nghi\u1ec7m chuy\u1ec3n service gi\u00e1m s\u00e1t t\u1eeb ki\u1ebfn tr\u00fac serverless sang ki\u1ebfn tr\u00fac monolithic, gi\u00fap gi\u1ea3m t\u1edbi 90% chi ph\u00ed. H\u00e3y c\u00f9ng t\u00ecm hi\u1ec3u xem nh\u00e9.</p>"},{"location":"ByteByteGo/serverless-ditching/#chi-tiet","title":"Chi ti\u1ebft","text":""},{"location":"ByteByteGo/serverless-ditching/#serverless","title":"Serverless","text":"<p>D\u1ecbch v\u1ee5 Prime Video c\u1ea7n gi\u00e1m s\u00e1t ch\u1ea5t l\u01b0\u1ee3ng h\u00e0ng ng\u00e0n live stream theo th\u1eddi gian th\u1ef1c. C\u00f4ng c\u1ee5 gi\u00e1m s\u00e1t n\u00e0y nh\u1eadn di\u1ec7n c\u00e1c s\u1ef1 c\u1ed1 v\u1ec1 ch\u1ea5t l\u01b0\u1ee3ng nh\u01b0 block corruption, video freeze, v\u00e0 c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u1ed3ng b\u1ed9. Qu\u00e1 tr\u00ecnh n\u00e0y g\u1ed3m ba b\u01b0\u1edbc: b\u1ed9 chuy\u1ec3n \u0111\u1ed5i media, b\u1ed9 ph\u00e1t hi\u1ec7n l\u1ed7i, v\u00e0 th\u00f4ng b\u00e1o theo th\u1eddi gian th\u1ef1c.</p> <p></p> <p>Phi\u00ean b\u1ea3n ban \u0111\u1ea7u c\u1ee7a d\u1ecbch v\u1ee5 n\u00e0y s\u1eed d\u1ee5ng m\u1ed9t h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n v\u1edbi AWS Step Functions v\u00e0 Lambda, gi\u00fap h\u1ecd x\u00e2y d\u1ef1ng d\u1ecbch v\u1ee5 nhanh ch\u00f3ng. Tuy nhi\u00ean, ki\u1ebfn tr\u00fac n\u00e0y d\u1eabn \u0111\u1ebfn chi ph\u00ed cao v\u00e0 c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 m\u1edf r\u1ed9ng.</p> <p>C\u00f3 hai thao t\u00e1c t\u1ed1n k\u00e9m trong thi\u1ebft k\u1ebf n\u00e0y. \u0110\u1ea7u ti\u00ean l\u00e0 qu\u00e1 tr\u00ecnh \u0111i\u1ec1u ph\u1ed1i (orchestration). AWS Step Functions t\u00ednh ph\u00ed ng\u01b0\u1eddi d\u00f9ng d\u1ef1a tr\u00ean c\u00e1c l\u1ea7n chuy\u1ec3n tr\u1ea1ng th\u00e1i (state transitions), v\u00e0 quy tr\u00ecnh \u0111i\u1ec1u ph\u1ed1i th\u1ef1c hi\u1ec7n nhi\u1ec1u l\u1ea7n chuy\u1ec3n tr\u1ea1ng th\u00e1i m\u1ed7i gi\u00e2y. Th\u1ee9 hai l\u00e0 vi\u1ec7c truy\u1ec1n d\u1eef li\u1ec7u gi\u1eefa c\u00e1c th\u00e0nh ph\u1ea7n ph\u00e2n t\u00e1n. D\u1eef li\u1ec7u trung gian \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong Amazon S3, v\u00e0 vi\u1ec7c truy\u1ec1n d\u1eef li\u1ec7u s\u1ebd c\u00e0ng t\u1ed1n k\u00e9m khi th\u1ef1c hi\u1ec7n \u1edf quy m\u00f4 l\u1edbn.</p> <p></p>"},{"location":"ByteByteGo/serverless-ditching/#monolithic","title":"Monolithic","text":"<p>\u0110\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 chi ph\u00ed, Prime Video \u0111\u00e3 \u00e1p d\u1ee5ng ki\u1ebfn tr\u00fac monolithic. B\u1ed9 chuy\u1ec3n \u0111\u1ed5i media v\u00e0 b\u1ed9 ph\u00e1t hi\u1ec7n l\u1ed7i \u0111\u01b0\u1ee3c tri\u1ec3n khai trong c\u00f9ng m\u1ed9t process, gi\u00fap lo\u1ea1i b\u1ecf nhu c\u1ea7u s\u1eed d\u1ee5ng S3 l\u00e0m kho l\u01b0u tr\u1eef trung gian, gi\u1ea3m chi ph\u00ed truy\u1ec1n d\u1eef li\u1ec7u v\u00e0 \u0111\u01a1n gi\u1ea3n h\u00f3a logic \u0111i\u1ec1u ph\u1ed1i. Thay \u0111\u1ed5i n\u00e0y gi\u00fap ti\u1ebft ki\u1ec7m chi ph\u00ed l\u00ean t\u1edbi 90%.</p> <p></p>"},{"location":"ByteByteGo/serverless-ditching/#tranh-cai","title":"Tranh c\u00e3i","text":"<p>\u0110i\u1ec1u quan tr\u1ecdng c\u1ea7n l\u01b0u \u00fd l\u00e0 case study n\u00e0y ch\u1ec9 ra m\u1ed9t tr\u01b0\u1eddng h\u1ee3p c\u1ee5 th\u1ec3 m\u00e0 ki\u1ebfn tr\u00fac monolithic c\u00f3 l\u1ee3i. Anh em m\u1ea1ng x\u00e3 h\u1ed9i \u0111\u00e3 d\u1eady s\u00f3ng v\u1edbi nhi\u1ec1u \u00fd ki\u1ebfn kh\u00e1c nhau. Tuy nhi\u00ean, \u0111i\u1ec3m c\u00ednh l\u00e0 Amazon Prime Video \u0111\u00e3 tu\u00e2n theo t\u00f4n ch\u1ec9 \"Serverless tr\u01b0\u1edbc\", \u0111\u1ec3 h\u1ecd th\u1eed nghi\u1ec7m nhanh ch\u00f3ng v\u00e0 m\u1edf r\u1ed9ng khi c\u1ea7n. Amazon b\u1eaft \u0111\u1ea7u nhanh v\u1edbi m\u1ed9t nguy\u00ean m\u1eabu s\u1eed d\u1ee5ng c\u00e1c th\u00e0nh ph\u1ea7n serverless, sau \u0111\u00f3 chuy\u1ec3n sang m\u1ed9t gi\u1ea3i ph\u00e1p hi\u1ec7u qu\u00e1 v\u00e0 c\u00f3 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng khi c\u1ea7n. \u0110\u00e2y l\u00e0 m\u1ed9t c\u00e1ch ti\u1ebfp c\u1eadn th\u00f4ng minh trong ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m.</p> <p>Qu\u00e1 tr\u00ecnh chuy\u1ec3n \u0111\u1ed5i l\u00e0 m\u1ed9t b\u01b0\u1edbc t\u00e1i c\u1ea5u tr\u00fac (refactoring), kh\u00f4ng ph\u1ea3i l\u00e0 vi\u1ec7c thay \u0111\u1ed5i ho\u00e0n to\u00e0n to\u00e0n b\u1ed9 h\u1ec7 th\u1ed1ng. CTO c\u1ee7a Amazon, Werner Vogels, nh\u1ea5n m\u1ea1nh t\u1ea7m quan tr\u1ecdng c\u1ee7a vi\u1ec7c ph\u00e1t tri\u1ec3n c\u00e1c h\u1ec7 th\u1ed1ng ph\u1ea7n m\u1ec1m c\u00f3 th\u1ec3 ti\u1ebfn h\u00f3a v\u00e0 gi\u1eef t\u00e2m th\u1ebf c\u1edfi m\u1edf khi xem x\u00e9t l\u1ea1i ki\u1ebfn tr\u00fac: \"X\u00e2y d\u1ef1ng c\u00e1c h\u1ec7 th\u1ed1ng ph\u1ea7n m\u1ec1m c\u00f3 kh\u1ea3 n\u0103ng ti\u1ebfn h\u00f3a l\u00e0 m\u1ed9t chi\u1ebfn l\u01b0\u1ee3c, kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t c\u00e1i \u0111\u1ee9c tin n\u00e0o \u0111\u00f3 m\u00e0 ta ph\u1ea3i tu\u00e2n theo. Vi\u1ec7c xem x\u00e9t l\u1ea1i c\u00e1c ki\u1ebfn tr\u00fac v\u1edbi t\u00e2m th\u1ebf c\u1edfi m\u1edf l\u00e0 \u0111i\u1ec1u b\u1eaft bu\u1ed9c.\" C\u1ef1u Ph\u00f3 Ch\u1ee7 t\u1ecbch c\u1ee7a Amazon, Adrian Cockcroft, gi\u1ea3i th\u00edch ph\u01b0\u01a1ng ph\u00e1p \"Serverless tr\u01b0\u1edbc\" m\u00e0 \u0111\u1ed9i ng\u0169 Prime Video theo \u0111u\u1ed5i v\u00e0 gi\u1ea3i th\u00edch th\u00eam r\u1eb1ng \u00f4ng kh\u00f4ng \u1ee7ng h\u1ed9 vi\u1ec7c ch\u1ec9 d\u00f9ng serverless, c\u1ea7n c\u00f3 c\u00e1c c\u00e1ch ti\u1ebfp c\u1eadn linh ho\u1ea1t.</p> <p>Nghi\u00ean c\u1ee9u \u0111i\u1ec3n h\u00ecnh n\u00e0y cho th\u1ea5y r\u1eb1ng microservices kh\u00f4ng ph\u1ea3i l\u00fac n\u00e0o c\u0169ng l\u00e0 l\u1ef1a ch\u1ecdn t\u1ed1t nh\u1ea5t, v\u00e0 ch\u00fang ta n\u00ean c\u1edfi m\u1edf h\u01a1n trong vi\u1ec7c th\u1ea3o lu\u1eadn v\u1ec1 vi\u1ec7c ph\u00e1t tri\u1ec3n c\u00e1c ki\u1ebfn tr\u00fac d\u1ef1a tr\u00ean nh\u1eefng tr\u01b0\u1eddng h\u1ee3p c\u1ee5 th\u1ec3. Vi\u1ec7c ph\u00e2n t\u00e1ch c\u00e1c th\u00e0nh ph\u1ea7n th\u00e0nh c\u00e1c microservices ph\u00e2n t\u00e1n c\u00f3 th\u1ec3 k\u00e8m theo chi ph\u00ed l\u1edbn, v\u00e0 c\u1ea7n ph\u1ea3i c\u00e2n nh\u1eafc k\u1ef9 l\u01b0\u1ee1ng gi\u1eefa c\u00e1i l\u1ee3i v\u00e0 c\u00e1i h\u1ea1i tr\u01b0\u1edbc khi \u0111\u01b0a ra quy\u1ebft \u0111\u1ecbnh.</p> <p></p> <p>\u0110\u00e2y l\u00e0 minh ch\u1ee9ng cho th\u1ea5y t\u1ea7m quan tr\u1ecdng c\u1ee7a vi\u1ec7c xem x\u00e9t t\u1eebng tr\u01b0\u1eddng h\u1ee3p khi l\u1ef1a ch\u1ecdn ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng. N\u00f3 ch\u1ee9ng t\u1ecf r\u1eb1ng kh\u00f4ng c\u00f3 gi\u1ea3i ph\u00e1p n\u00e0o l\u00e0 ph\u00f9 h\u1ee3p cho t\u1ea5t c\u1ea3 trong ki\u1ebfn tr\u00fac ph\u1ea7n m\u1ec1m. B\u1ea1n c\u1ea7n ph\u1ea3i gi\u1eef m\u1ed9t c\u00e1i nh\u00ecn kh\u00e1ch quan v\u00e0 kh\u00f4ng c\u00f3 tr\u01b0\u1eddng h\u1ee3p n\u00e0o gi\u1ed1ng nhau c\u1ea3.</p> <p></p>"},{"location":"ByteByteGo/sql-execution-order/","title":"Th\u1ee9 t\u1ef1 th\u1ef1c thi truy v\u1ea5n SQL","text":""},{"location":"ByteByteGo/sql-execution-order/#nguon","title":"Ngu\u1ed3n","text":"<p> Secret To Optimizing SQL Queries - Understand The SQL Execution Order</p>"},{"location":"ByteByteGo/sql-execution-order/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Trong b\u00e0i n\u00e0y, ta s\u1ebd n\u00f3i v\u1ec1 vi\u1ec7c th\u1ef1c thi truy v\u1ea5n SQL. Ta s\u1ebd \u0111i qua qu\u00e1 tr\u00ecnh th\u1ef1c thi c\u1ee7a m\u1ed9t truy v\u1ea5n SQL, c\u00e1c k\u1ef9 thu\u1eadt t\u1ed1i \u01b0u v\u00e0 nh\u1eefng c\u00e1ch s\u1eed d\u1ee5ng t\u1ed1t nh\u1ea5t.</p>"},{"location":"ByteByteGo/sql-execution-order/#cau-lenh-sql-mau","title":"C\u00e2u l\u1ec7nh SQL m\u1eabu","text":"<p>D\u01b0\u1edbi \u0111\u00e2y s\u1ebd l\u00e0 truy v\u1ea5n m\u00e0 ta s\u1ebd d\u00f9ng:</p> <p></p> <p>Trong truy v\u1ea5n n\u00e0y, ta t\u00ecm top 10 kh\u00e1ch h\u00e0ng (<code>customers</code>) chi ti\u00eau \u00edt nh\u1ea5t 1000 \u0111\u00f4 (<code>total_spent</code>) cho c\u00e1c \u0111\u01a1n h\u00e0ng k\u1ec3 t\u1eeb ng\u00e0y 01/01/2023 b\u1eb1ng c\u00e1ch join 2 b\u1ea3ng <code>customers</code> v\u00e0 <code>orders</code>, nh\u00f3m theo <code>customer_id</code>. Ta hi\u1ec3n th\u1ecb t\u1ed5ng s\u1ed1 \u0111\u01a1n h\u00e0ng (<code>total_orders</code>) v\u00e0 t\u1ed5ng s\u1ed1 ti\u1ec1n \u0111\u00e3 chi (<code>total_spent</code>) c\u1ee7a m\u1ed7i kh\u00e1ch h\u00e0ng, s\u1eafp x\u1ebfp theo t\u1ed5ng s\u1ed1 ti\u1ec1n \u0111\u00e3 chi gi\u1ea3m d\u1ea7n.</p>"},{"location":"ByteByteGo/sql-execution-order/#ke-hoach-thuc-thi-truy-van","title":"K\u1ebf ho\u1ea1ch th\u1ef1c thi truy v\u1ea5n","text":"<p>Tr\u01b0\u1edbc khi ph\u00e2n t\u00edch truy v\u1ea5n \u1edf tr\u00ean, ta s\u1ebd c\u00f9ng th\u1ea3o lu\u1eadn v\u1ec1 k\u1ebf ho\u1ea1ch th\u1ef1c thi (execution plan) truy v\u1ea5n SQL.</p> <p>C\u00e1c h\u1ec7 th\u1ed1ng database t\u1ea1o ra c\u00e1c plan n\u00e0y \u0111\u1ec3 t\u1ed1i \u01b0u ho\u00e1 truy v\u1ea5n, c\u0169ng nh\u01b0 khi\u1ebfn n\u00f3 d\u00f9ng \u00edt t\u00e0i nguy\u00ean nh\u1ea5t c\u00f3 th\u1ec3. Hi\u1ec3u \u0111\u01b0\u1ee3c plan s\u1ebd gi\u00fap b\u1ea1n t\u1ed1i \u01b0u \u0111\u01b0\u1ee3c truy v\u1ea5n c\u1ee7a m\u00ecnh, l\u00e0m t\u0103ng hi\u1ec7u su\u1ea5t truy v\u1ea5n.</p> <p>C\u00e1c execution plan cung c\u1ea5p c\u00e1c th\u00f4ng tin nh\u01b0 chi ph\u00ed \u01b0\u1edbc t\u00ednh c\u1ee7a truy v\u1ea5n, c\u00e1c thu\u1eadt to\u00e1n join \u0111\u01b0\u1ee3c ch\u1ecdn v\u00e0 danh s\u00e1ch c\u00e1c thao t\u00e1c th\u1ef1c thi.</p> <p></p>"},{"location":"ByteByteGo/sql-execution-order/#menh-e-from-va-join","title":"M\u1ec7nh \u0111\u1ec1 FROM v\u00e0 JOIN","text":"<p>\u0110\u00e2y l\u00e0 n\u01a1i ta s\u1ebd ch\u1ecdn c\u00e1c b\u1ea3ng \u0111\u1ec3 s\u1eed d\u1ee5ng v\u00e0 ch\u1ec9 \u0111\u1ecbnh c\u00e1ch \u0111\u1ec3 join ch\u00fang.</p> <p>Trong truy v\u1ea5n \u1edf tr\u00ean, ta d\u00f9ng b\u1ea3ng <code>customers</code> v\u00e0 join n\u00f3 v\u1edbi b\u1ea3ng <code>orders</code> v\u1edbi m\u1ed9t c\u00e1i ID chung v\u00e0 tu\u1ef3 ch\u1ec9nh c\u00e1c c\u1ed9t \u0111\u1ec3 hi\u1ec3n th\u1ecb. D\u00f9ng index cho c\u00e1c c\u1ed9t d\u00f9ng \u0111\u1ec3 join s\u1ebd t\u0103ng hi\u1ec7u su\u1ea5t join l\u00ean \u0111\u00e1ng k\u1ec3. Nh\u1edb \u0111\u1eb7t index th\u00edch h\u1ee3p cho c\u00e1c b\u1ea3ng tr\u01b0\u1edbc khi join nh\u00e9.</p> <p></p> <p>C\u00e1c ki\u1ec3u index nh\u01b0 B-Tree hay Bitmap Index c\u00f3 th\u1ec3 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn hi\u1ec7u su\u1ea5t truy v\u1ea5n d\u1ef1a tr\u00ean vi\u1ec7c ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u (data distribution) v\u00e0 lo\u1ea1i truy v\u1ea5n (query type).</p> <p></p>"},{"location":"ByteByteGo/sql-execution-order/#menh-e-where","title":"M\u1ec7nh \u0111\u1ec1 WHERE","text":"<p>M\u1ec7nh \u0111\u1ec1 WHERE l\u1ecdc d\u1eef li\u1ec7u b\u1eb1ng c\u00e1ch cho n\u00f3 qua m\u1ed9t \u0111i\u1ec1u ki\u1ec7n n\u00e0o \u0111\u00f3. Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, n\u00f3 s\u1ebd l\u1ecdc c\u00e1c \u0111\u01a1n h\u00e0ng t\u1eeb ng\u00e0y 01/01/2023. \u0110i\u1ec1u quan tr\u1ecdng c\u1ea7n nh\u1edb l\u00e0 ph\u1ea3i vi\u1ebft \u0111\u01b0\u1ee3c m\u1ed9t truy v\u1ea5n sargable \u0111\u1ec3 t\u1eadn d\u1ee5ng \u0111\u01b0\u1ee3c index m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p></p> <p>Sargable \u1edf \u0111\u00e2y l\u00e0 Search ARGument ABLE. \u1ede \u0111\u00e2y n\u00f3 n\u00f3i \u0111\u1ebfn c\u00e1c truy v\u1ea5n c\u00f3 th\u1ec3 t\u1eadn d\u1ee5ng \u0111\u01b0\u1ee3c index \u0111\u1ec3 th\u1ef1c thi nhanh h\u01a1n. Ta c\u00f9ng \u0111i s\u00e2u v\u00e0o xem n\u00f3 nh\u01b0 th\u1ebf n\u00e0o nh\u00e9.</p> <p>Khi b\u1ea1n n\u00f3i m\u1ed9t truy v\u1ea5n l\u00e0 sargable, n\u00f3 c\u00f3 ngh\u0129a l\u00e0 truy v\u1ea5n c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng index m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 \u0111\u1ec3 t\u0103ng t\u1ed1c th\u1ef1c thi. N\u00f3i c\u00e1ch kh\u00e1c, n\u00f3 c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng index \u0111\u1ec3 l\u1ecdc d\u1eef li\u1ec7u nhanh h\u01a1n. </p> <p></p> <p>Vi\u1ebft ra \u0111\u01b0\u1ee3c truy v\u1ea5n sargable r\u1ea5t l\u00e0 quan tr\u1ecdng trong vi\u1ec7c t\u1ed1i \u01b0u hi\u1ec7u su\u1ea5t database. Trong m\u1ed9t truy v\u1ea5n sargable (nh\u01b0 trong v\u00ed d\u1ee5 c\u1ee7a ch\u00fang ta), ta tr\u1ef1c ti\u1ebfp so s\u00e1nh c\u1ed9t <code>order_date</code> v\u1edbi m\u1ed9t ng\u00e0y th\u00e1ng c\u1ee5 th\u1ec3, \u0111i\u1ec1u n\u00e0y gi\u00fap database engine c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng index tr\u00ean c\u1ed9t \u0111\u00f3, nh\u1eb1m nhanh ch\u00f3ng l\u1ecdc d\u1eef li\u1ec7u theo \u0111i\u1ec1u ki\u1ec7n ta \u0111\u1eb7t ra.</p> <p>Tr\u00e1i l\u1ea1i, n\u1ebfu ta vi\u1ebft m\u1ec7nh \u0111\u1ec1 <code>WHERE</code> l\u00e0 <code>WHERE YEAR(order_date) &gt;= 2023</code> th\u00ec database engine kh\u00f4ng th\u1ec3 t\u1eadn d\u1ee5ng \u0111\u01b0\u1ee3c index tr\u00ean c\u1ed9t <code>order_date</code>, b\u1edfi v\u00ec h\u00e0m <code>YEAR()</code> s\u1ebd ph\u1ea3i \u0111\u01b0\u1ee3c g\u1ecdi tr\u00ean m\u1ed7i d\u00f2ng d\u1eef li\u1ec7u, \u0111i\u1ec1u n\u00e0y s\u1ebd l\u00e0m ch\u1eadm truy v\u1ea5n \u0111i r\u1ea5t nhi\u1ec1u, ngay c\u1ea3 khi c\u00f3 index tr\u00ean c\u1ed9t. N\u00f3 ch\u1eadm do ph\u1ea3i qu\u00e9t qua nhi\u1ec1u d\u00f2ng h\u01a1n. Nh\u1eefng m\u1ec7nh \u0111\u1ec1 nh\u01b0 v\u1eady s\u1ebd l\u00e0m truy v\u1ea5n c\u1ee7a ch\u00fang ta tr\u1edf th\u00e0nh truy v\u1ea5n non-sargable.</p> <p>\u0110\u1ec3 vi\u1ebft \u0111\u01b0\u1ee3c truy v\u1ea5n sargable, ta c\u1ea7n:</p> <ol> <li>Tr\u00e1nh d\u00f9ng c\u00e1c h\u00e0m ho\u1eb7c t\u00ednh to\u00e1n tr\u00ean c\u00e1c c\u1ed9t \u0111\u00e3 index trong m\u1ec7nh \u0111\u1ec1 <code>WHERE</code>.</li> <li>So s\u00e1nh tr\u1ef1c ti\u1ebfp n\u1ebfu c\u00f3 th\u1ec3, thay v\u00ec d\u00f9ng h\u00e0m tr\u00ean c\u1ed9t.</li> <li>N\u1ebfu th\u1ef1c s\u1ef1 ph\u1ea3i d\u00f9ng m\u1ed9t h\u00e0m tr\u00ean c\u1ed9t, b\u1ea1n c\u00f3 th\u1ec3 t\u1ea1o m\u1ed9t c\u1ed9t m\u1edbi \u0111\u00e3 t\u00ednh to\u00e1n s\u1eb5n, ho\u1eb7c d\u00f9ng index d\u1ef1a tr\u00ean h\u00e0m, n\u1ebfu database h\u1ed7 tr\u1ee3.</li> </ol>"},{"location":"ByteByteGo/sql-execution-order/#menh-e-group-by-va-having","title":"M\u1ec7nh \u0111\u1ec1 GROUP BY v\u00e0 HAVING","text":"<p>Ta nh\u00f3m c\u00e1c b\u1ea3n ghi theo <code>customer_id</code> v\u00e0 l\u1ecdc c\u00e1c nh\u00f3m theo \u0111i\u1ec1u ki\u1ec7n <code>total_spent &gt;= 1000</code>. Truy v\u1ea5n n\u00e0y t\u00ecm c\u00e1c kh\u00e1ch h\u00e0ng chi ti\u00eau \u00edt nh\u1ea5t 1000 \u0111\u00f4.</p> <p></p>"},{"location":"ByteByteGo/sql-execution-order/#menh-e-select","title":"M\u1ec7nh \u0111\u1ec1 SELECT","text":"<p>Gi\u1edd ta m\u1edbi <code>SELECT</code> n\u00f3 ra \u0111\u00e2y. N\u00f3 ch\u1ec9 \u0111\u1ecbnh c\u00e1c c\u1ed9t ta mu\u1ed1n trong k\u1ebft qu\u1ea3. Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, ta ch\u1ecdn <code>customer_id</code>, <code>total_orders</code> v\u00e0 <code>total_spent</code>. M\u1eb7c d\u00f9 <code>SELECT</code> th\u01b0\u1eddng \u0111\u01b0\u1ee3c ghi ra \u0111\u1ea7u ti\u00ean trong truy v\u1ea5n, n\u00f3 \u0111\u01b0\u1ee3c th\u1ef1c thi r\u1ea5t xa trong th\u1ee9 t\u1ef1 th\u1ef1c thi truy v\u1ea5n.</p> <p></p> <p>\u0110\u1ec3 t\u1ed1i \u01b0u m\u1ec7nh \u0111\u1ec1 <code>SELECT</code>, b\u1ea1n n\u00ean index m\u1ed9t s\u1ed1 c\u1ed9t tr\u01b0\u1edbc \u0111\u00f3, \u0111\u1eb7c bi\u1ec7t l\u00e0 c\u00e1c c\u1ed9t \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong m\u1ec7nh \u0111\u1ec1 <code>SELECT</code>, <code>WHERE</code> v\u00e0 <code>JOIN</code>. \u0110i\u1ec1u n\u00e0y gi\u00fap database engine l\u1ea5y \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u tr\u1ef1c ti\u1ebfp t\u1eeb index, gi\u00fap gi\u1ea3m chi ph\u00ed truy v\u1ea5n, thay v\u00ec ph\u1ea3i qu\u00e9t qua nhi\u1ec1u d\u00f2ng d\u1eef li\u1ec7u.</p>"},{"location":"ByteByteGo/sql-execution-order/#menh-e-order-by-va-limit","title":"M\u1ec7nh \u0111\u1ec1 ORDER BY v\u00e0 LIMIT","text":"<p>\u0110\u1ec3 t\u1ed1i \u01b0u 2 m\u1ec7nh \u0111\u1ec1 <code>ORDER BY</code> v\u00e0 <code>LIMIT</code>, b\u1ea1n n\u00ean s\u1eed d\u1ee5ng m\u1ed9t t\u1eadp k\u1ebft qu\u1ea3 nh\u1ecf h\u01a1n \u0111\u1ec3 s\u1eafp x\u1ebfp v\u00e0 gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng k\u1ebft qu\u1ea3 tr\u1ea3 v\u1ec1. \u0110i\u1ec1u n\u00e0y gi\u00fap gi\u1ea3m chi ph\u00ed s\u1eafp x\u1ebfp v\u00e0 gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng k\u1ebft qu\u1ea3 tr\u1ea3 v\u1ec1.</p> <p>V\u1edbi t\u1eadp l\u1edbn, tr\u00e1nh s\u1eafp x\u1ebfp c\u1ea3 t\u1eadp, g\u00e2y t\u0103ng b\u1ed9 nh\u1edb c\u1ea7n s\u1eed d\u1ee5ng v\u00e0 t\u0103ng th\u1eddi gian th\u1ef1c thi. D\u00f9ng c\u00e1c index th\u00edch h\u1ee3p \u0111\u1ec3 t\u0103ng t\u1ed1c s\u1eafp x\u1ebfp v\u00e0 gi\u1ea3m s\u1ed1 l\u01b0\u1ee3ng d\u1eef li\u1ec7u c\u1ea7n s\u1eafp x\u1ebfp trong b\u1ed9 nh\u1edb.</p> <p></p>"},{"location":"ByteByteGo/ssl-tls-https/","title":"SSL, TLS v\u00e0 HTTPS","text":""},{"location":"ByteByteGo/ssl-tls-https/#nguon","title":"Ngu\u1ed3n","text":"<p> SSL, TLS, HTTPS Explained</p>"},{"location":"ByteByteGo/ssl-tls-https/#https","title":"HTTPS","text":"<p>V\u1edbi giao th\u1ee9c HTTP th\u00f4ng th\u01b0\u1eddng, giao ti\u1ebfp gi\u1eefa tr\u00ecnh duy\u1ec7t v\u00e0 m\u00e1y ch\u1ee7 s\u1ebd \u1edf d\u01b0\u1edbi d\u1ea1ng plain text (ngh\u0129a l\u00e0 v\u0103n b\u1ea3n m\u00e0 con ng\u01b0\u1eddi c\u00f3 th\u1ec3 \u0111\u1ecdc \u0111\u01b0\u1ee3c). \u0110i\u1ec1u n\u00e0y \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c m\u1eadt kh\u1ea9u hay s\u1ed1 th\u1ebb ng\u00e2n h\u00e0ng c\u1ee7a ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111\u1ecdc b\u1edfi b\u1ea5t c\u1ee9 ai c\u00f3 th\u1ec3 chen v\u00e0o giao ti\u1ebfp n\u00e0y.</p> <p>HTTPS \u0111\u01b0\u1ee3c t\u1ea1o ra \u0111\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y. N\u00f3 gi\u00fap th\u00f4ng tin truy\u1ec1n \u0111i tr\u00ean internet s\u1ebd kh\u00f4ng b\u1ecb hi\u1ec3u \u0111\u01b0\u1ee3c tr\u1eeb ng\u01b0\u1eddi g\u1eedi v\u00e0 ng\u01b0\u1eddi nh\u1eadn.</p> <p>HTTPS l\u00e0 b\u1ea3n m\u1edf r\u1ed9ng c\u1ee7a giao th\u1ee9c HTTP. V\u1edbi HTTPS, th\u00f4ng tin \u0111\u01b0\u1ee3c truy\u1ec1n \u0111i d\u01b0\u1edbi d\u1ea1ng m\u00e3 ho\u00e1 v\u1edbi m\u1ed9t th\u1ee9 \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 TLS (Transport Layer Security). N\u1ebfu th\u00f4ng tin m\u00e3 ho\u00e1 n\u00e0y l\u1ecdt v\u00e0o tay hacker, h\u1eafn c\u0169ng kh\u00f4ng th\u1ec3 \u0111\u1ecdc \u0111\u01b0\u1ee3c n\u1ed9i dung th\u1ef1c s\u1ef1 trong \u0111\u00f3.</p> <p></p>"},{"location":"ByteByteGo/ssl-tls-https/#ssltls","title":"SSL/TLS","text":"<p>B\u1eaft tay TLS bao g\u1ed3m m\u1ed9t s\u1ed1 b\u01b0\u1edbc nh\u01b0 sau:</p> <p>\u0110\u1ea7u ti\u00ean, gi\u1ed1ng nh\u01b0 HTTP, tr\u00ecnh duy\u1ec7t s\u1ebd ti\u1ebfn h\u00e0nh thi\u1ebft l\u1eadp m\u1ed9t k\u1ebft n\u1ed1i TCP v\u1edbi server th\u00f4ng qua b\u1eaft tay 3 b\u01b0\u1edbc TCP.</p> <p>B\u1eaft tay TLS b\u1eaft \u0111\u1ea7u \u1edf b\u01b0\u1edbc 2, n\u00f3 s\u1ebd b\u1eaft \u0111\u1ea7u v\u1edbi vi\u1ec7c client g\u1eedi m\u1ed9t tin nh\u1eafn hello l\u00ean server. Trong tin nh\u1eafn hello n\u00e0y, tr\u00ecnh duy\u1ec7t s\u1ebd cho server bi\u1ebft m\u1ed9t s\u1ed1 th\u1ee9 nh\u01b0 sau:</p> <ol> <li>Tr\u00ecnh duy\u1ec7t h\u1ed7 tr\u1ee3 phi\u00ean b\u1ea3n TLS n\u00e0o, c\u00f3 th\u1ec3 l\u00e0 TLS 1.2 hay 1.3 g\u00ec \u0111\u00f3.</li> <li>Tr\u00ecnh duy\u1ec7t h\u1ed7 tr\u1ee3 cyber suite n\u00e0o. Cyber suite l\u00e0 m\u1ed9t t\u1eadp c\u00e1c thu\u1eadt to\u00e1n m\u00e3 ho\u00e1 m\u00e0 tr\u00ecnh duy\u1ec7t c\u00f3 th\u1ec3 d\u00f9ng \u0111\u1ec3 m\u00e3 ho\u00e1 th\u00f4ng tin.</li> </ol> <p>Sau khi nh\u1eadn tin hello, server c\u00f3 th\u1ec3 ch\u1ecdn cyber suite v\u00e0 phi\u00ean b\u1ea3n TLS \u0111\u1ec3 d\u00f9ng d\u1ef1a v\u00e0o th\u00f4ng tin trong tin nh\u1eafn hello, sau \u0111\u00f3 n\u00f3 s\u1ebd g\u1eedi l\u1ea1i m\u1ed9t tin hello tr\u1ea3 v\u1ec1 cho client \u0111\u1ec3 n\u00f3i cho client bi\u1ebft l\u00e0 server s\u1ebd d\u00f9ng c\u00e1c c\u00f4ng c\u1ee5 g\u00ec trong vi\u1ec7c giao ti\u1ebfp v\u1edbi client. Ti\u1ebfp \u0111\u00f3 server g\u1eedi m\u1ed9t certificate cho client. Certificate ch\u1ee9a kh\u00e1 nhi\u1ec1u th\u1ee9 nh\u01b0ng trong \u0111\u00f3 public key r\u1ea5t quan tr\u1ecdng. Client d\u00f9ng public key n\u00e0y \u0111\u1ec3 m\u00e3 ho\u00e1 th\u00f4ng tin c\u1ea7n g\u1eedi l\u00ean server, server s\u1ebd gi\u1ea3i m\u00e3 b\u1eb1ng private key \u1edf s\u1eb5n tr\u00ean server, v\u00e0 ch\u1ec9 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i m\u00e3 b\u1edfi private key m\u00e0 th\u00f4i. \u0110\u00e2y l\u00e0 m\u00e3 ho\u00e1 b\u1ea5t \u0111\u1ed1i x\u1ee9ng, public key v\u00e0 private key l\u00e0 m\u1ed9t c\u1eb7p \u0111i \u0111\u00f4i v\u1edbi nhau. B\u01b0\u1edbc cu\u1ed1i c\u1ee7a b\u01b0\u1edbc 2 l\u00e0 khi server g\u1eedi m\u1ed9t request hello done v\u1ec1 ph\u00eda client. \u0110\u1ebfn \u0111\u00e2y th\u00ec client \u0111\u00e3 nh\u1eadn \u0111\u01b0\u1ee3c server certificate v\u00e0 c\u1ea3 hai \u0111\u1ed3ng \u00fd v\u1ec1 phi\u00ean b\u1ea3n TLS, c\u0169ng nh\u01b0 cyber suite s\u1ebd d\u00f9ng \u0111\u1ec3 giao ti\u1ebfp v\u1edbi nhau.</p> <p>\u1ede b\u01b0\u1edbc 3, client v\u00e0 server s\u1ebd t\u1ea1o ra m\u1ed9t key m\u00e3 ho\u00e1 d\u00f9ng chung v\u1edbi nhau \u0111\u1ec3 m\u00e3 ho\u00e1 th\u00f4ng tin. To\u00e0n b\u1ed9 request trong b\u01b0\u1edbc n\u00e0y g\u1eedi t\u1eeb client l\u00ean server s\u1ebd \u0111\u01b0\u1ee3c m\u00e3 ho\u00e1 b\u1edfi public key m\u00e0 client \u0111\u00e3 nh\u1eadn trong b\u01b0\u1edbc tr\u01b0\u1edbc \u0111\u00f3. Client s\u1ebd t\u1ea1o ra m\u1ed9t key m\u00e3 ho\u00e1 kh\u00e1c \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 session key, sau \u0111\u00f3 d\u00f9ng public key \u0111\u1ec3 m\u00e3 ho\u00e1 key n\u00e0y, r\u1ed3i g\u1eedi key \u0111\u00e3 m\u00e3 ho\u00e1 n\u00e0y l\u00ean cho server, server gi\u1ea3i m\u00e3 c\u00e1i key \u0111\u00e3 \u0111\u01b0\u1ee3c m\u00e3 ho\u00e1 n\u00e0y (b\u1eb1ng private key) \u0111\u1ec3 l\u1ea5y session key g\u1ed1c.</p> <p>Gi\u1edd c\u1ea3 hai \u0111\u1ec1u \u0111\u00e3 c\u00f3 session key, client v\u00e0 server \u0111\u00e3 c\u00f3 th\u1ec3 trao \u0111\u1ed5i th\u00f4ng tin (c\u00f3 m\u00e3 ho\u00e1) trong b\u01b0\u1edbc 4. \u1ede \u0111\u00e2y ta d\u00f9ng m\u00e3 ho\u00e1 \u0111\u1ed1i x\u1ee9ng, d\u00f9ng session key. L\u00fd do v\u00ec sao hai b\u00ean c\u00f3 th\u1ec3 m\u00e3 ho\u00e1 v\u00e0 gi\u1ea3i m\u00e3 th\u00ec d\u1ef1a v\u00e0o cyber suite m\u00e0 ch\u00fang \u0111\u00e3 trao \u0111\u1ed5i tr\u01b0\u1edbc \u0111\u00f3.</p> <p></p> <p>\u0110\u1ebfn \u0111\u00e2y b\u1ea1n c\u00f3 th\u1ec3 c\u00f3 m\u1ed9t c\u00e2u h\u1ecfi, r\u1eb1ng sao kh\u00f4ng d\u00f9ng m\u00e3 ho\u00e1 b\u1ea5t \u0111\u1ed1i x\u1ee9ng lu\u00f4n \u0111i, l\u1ea1i c\u00f2n \u0111\u1ed5i qua \u0111\u1ed1i x\u1ee9ng l\u00e0m g\u00ec? L\u00fd do l\u00e0 b\u1edfi m\u00e3 ho\u00e1 b\u1ea5t \u0111\u1ed1i x\u1ee9ng t\u1ed1n nhi\u1ec1u t\u00e0i nguy\u00ean (th\u1eddi gian, b\u1ed9 nh\u1edb,...). N\u00f3 kh\u00f4ng th\u1ef1c s\u1ef1 ph\u00f9 h\u1ee3p v\u1edbi vi\u1ec7c truy\u1ec1n t\u1ea3i th\u00f4ng tin l\u1edbn.</p>"},{"location":"ByteByteGo/ssl-tls-https/#mo-rong","title":"M\u1edf r\u1ed9ng","text":"<p>C\u00f3 hai v\u1ea5n \u0111\u1ec1 c\u1ea7n b\u00e0n \u1edf \u0111\u00e2y.</p> <p>Th\u1ee9 nh\u1ea5t, TLS b\u1ea3n m\u1edbi nh\u1ea5t l\u00e0 1.3 v\u00e0 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1edfi t\u1ea5t c\u1ea3 c\u00e1c tr\u00ecnh duy\u1ec7t t\u00ean tu\u1ed5i, sao l\u1ea1i n\u00f3i v\u1ec1 TLS 1.2? (\u1ede tr\u00ean l\u00e0 ti\u1ebfn tr\u00ecnh c\u1ee7a TLS 1.2). Ta c\u00f3 th\u1ec3 th\u1ea5y r\u1eb1ng TLS 1.2 c\u1ea7n 2 network round-trip trong khi TLS 1.3 ch\u1ec9 c\u1ea7n 1 round-trip. N\u00f3i v\u1ec1 TLS 1.2 s\u1ebd d\u1ec5 hi\u1ec3u h\u01a1n l\u00e0 n\u00f3i v\u1ec1 TLS 1.3 v\u00ec 1.3 l\u00e0 phi\u00ean b\u1ea3n 1.2 \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u. Concept c\u1ee7a TLS 1.2 v\u1eabn l\u00e0 concept ch\u00ednh c\u1ee7a TLS 1.3.</p> <p>Th\u1ee9 hai, \u1edf v\u00ed d\u1ee5 tr\u00ean, ta d\u00f9ng RSA \u0111\u1ec3 m\u00f4 ph\u1ecfng m\u00e3 ho\u00e1 b\u1ea5t \u0111\u1ed1i x\u1ee9ng \u0111\u1ec3 truy\u1ec1n session key l\u00ean server. RSA \u0111\u01b0\u1ee3c ch\u1ecdn v\u00ec n\u00f3 d\u1ec5 hi\u1ec3u h\u01a1n \u0111a s\u1ed1 c\u00e1c thu\u1eadt to\u00e1n m\u00e3 ho\u00e1 b\u1ea5t \u0111\u1ed1i x\u1ee9ng kh\u00e1c. Tuy v\u1eady m\u00e3 ho\u00e1 b\u1ea5t \u0111\u1ed1i x\u1ee9ng kh\u00f4ng ph\u1ea3i c\u00e1ch duy nh\u1ea5t \u0111\u1ec3 truy\u1ec1n session key gi\u1eefa client v\u00e0 server. Trong TLS 1.3, RSA kh\u00f4ng c\u00f2n \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3. Diffie-Hellman l\u00e0 l\u1ef1a ch\u1ecdn th\u00f4ng d\u1ee5ng h\u01a1n. Diffie\u2013Hellman ph\u1ee9c t\u1ea1p h\u01a1n nh\u01b0ng \u0111\u1ea1i kh\u00e1i th\u00ec n\u00f3 \u00e1p d\u1ee5ng to\u00e1n h\u1ecdc n\u00e2ng cao v\u1edbi c\u00e1c s\u1ed1 nguy\u00ean t\u1ed1 l\u1edbn \u0111\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c session key m\u00e0 kh\u00f4ng c\u1ea7n g\u1eedi public key qua internet.</p>"},{"location":"ByteByteGo/sso/","title":"Single Sign-on (SSO) l\u00e0 g\u00ec?","text":""},{"location":"ByteByteGo/sso/#nguon","title":"Ngu\u1ed3n","text":"<p> What Is Single Sign-on (SSO)? How It Works</p>"},{"location":"ByteByteGo/sso/#ang-nhap-mot-lan-single-sign-on-sso-la-gi","title":"\u0110\u0103ng nh\u1eadp m\u1ed9t l\u1ea7n (Single Sign-on - SSO) l\u00e0 g\u00ec?","text":"<p>SSO (hay Single Sign-on, \u0110\u0103ng nh\u1eadp m\u1ed9t l\u1ea7n) l\u00e0 m\u1ed9t s\u01a1 \u0111\u1ed3 x\u00e1c th\u1ef1c. N\u00f3 cho ph\u00e9p ng\u01b0\u1eddi d\u00f9ng truy c\u1eadp an to\u00e0n v\u00e0o nhi\u1ec1u \u1ee9ng d\u1ee5ng v\u00e0 d\u1ecbch v\u1ee5 v\u1edbi m\u1ed9t ID duy nh\u1ea5t. </p> <p></p> <p>Khi SSO \u0111\u01b0\u1ee3c t\u00edch h\u1ee3p v\u00e0o c\u00e1c \u1ee9ng d\u1ee5ng nh\u01b0 Gmail, Workday hay Slack, n\u00f3 cung c\u1ea5p m\u1ed9t c\u1eeda s\u1ed5 hay trang \u0111\u0103ng nh\u1eadp cho c\u00f9ng m\u1ed9t b\u1ed9 th\u00f4ng tin x\u00e1c th\u1ef1c. V\u1edbi SSO, ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 truy c\u1eadp nhi\u1ec1u \u1ee9ng d\u1ee5ng m\u00e0 kh\u00f4ng ph\u1ea3i \u0111\u0103ng nh\u1eadp m\u1ed7i l\u1ea7n.</p> <p></p> <p>SSO \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng tr\u00ean m\u1ed9t kh\u00e1i ni\u1ec7m g\u1ecdi l\u00e0 danh t\u00ednh li\u00ean k\u1ebft (federated identity). N\u00f3 cho ph\u00e9p chia s\u1ebb th\u00f4ng tin nh\u1eadn d\u1ea1ng tr\u00ean c\u00e1c h\u1ec7 th\u1ed1ng \u0111\u00e1ng tin c\u1eady nh\u01b0ng \u0111\u1ed9c l\u1eadp. </p> <p></p> <p>C\u00f3 hai giao th\u1ee9c ph\u1ed5 bi\u1ebfn cho qu\u00e1 tr\u00ecnh x\u00e1c th\u1ef1c n\u00e0y.</p> <p>SAML, hay ng\u00f4n ng\u1eef \u0111\u00e1nh d\u1ea5u x\u00e1c nh\u1eadn b\u1ea3o m\u1eadt (Security assertion markup language), l\u00e0 m\u1ed9t ti\u00eau chu\u1ea9n m\u1edf d\u1ef1a tr\u00ean XML \u0111\u1ec3 trao \u0111\u1ed5i th\u00f4ng tin nh\u00e2n d\u1ea1ng gi\u1eefa c\u00e1c d\u1ecbch v\u1ee5. Ta th\u01b0\u1eddng th\u1ea5y n\u00f3 trong m\u00f4i tr\u01b0\u1eddng l\u00e0m vi\u1ec7c, c\u00f4ng s\u1edf. </p> <p>M\u1ed9t giao th\u1ee9c kh\u00e1c l\u00e0 OpenID Connect. C\u00f3 l\u1ebd ai c\u0169ng bi\u1ebft c\u00e1i n\u00e0y r\u1ed3i. Khi ta d\u00f9ng t\u00e0i kho\u1ea3n Google c\u00e1 nh\u00e2n \u0111\u1ec3 \u0111\u0103ng nh\u1eadp v\u00e0o c\u00e1c \u1ee9ng d\u1ee5ng nh\u01b0 YouTuble, ta \u0111ang d\u00f9ng OpenID Connect. N\u00f3 d\u00f9ng JWT (JSON Web Token) \u0111\u1ec3 chia s\u1ebb th\u00f4ng tin nh\u00e2n d\u1ea1ng gi\u1eefa c\u00e1c d\u1ecbch v\u1ee5.</p>"},{"location":"ByteByteGo/sso/#quy-trinh-sso","title":"Quy tr\u00ecnh SSO","text":"<p>Ta s\u1ebd t\u1eadp trung v\u00e0o SAML.</p> <p>(1) M\u1ed9t nh\u00e2n vi\u00ean v\u0103n ph\u00f2ng truy c\u1eadp m\u1ed9t \u1ee9ng d\u1ee5ng nh\u01b0 Gmail. Theo SAML, Gmail trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y l\u00e0 m\u1ed9t nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 (Service Provider). </p> <p>(2) M\u00e1y ch\u1ee7 Gmail ph\u00e1t hi\u1ec7n ra ng\u01b0\u1eddi d\u00f9ng n\u00e0y \u0111\u1ebfn t\u1eeb m\u1ed9t work domain (ngh\u0129a l\u00e0 kh\u00f4ng ph\u1ea3i t\u1eeb <code>@gmail.com</code>, c\u00f3 th\u1ec3 \u0111\u1ebfn t\u1eeb <code>@sea.com</code> ch\u1eb3ng h\u1ea1n), v\u00e0 tr\u1ea3 v\u1ec1 m\u1ed9t y\u00eau c\u1ea7u x\u00e1c th\u1ef1c SAML (SAML Authentication Request - SAR) v\u1ec1 cho tr\u00ecnh duy\u1ec7t. </p> <p>(3) Tr\u00ecnh duy\u1ec7t chuy\u1ec3n h\u01b0\u1edbng ng\u01b0\u1eddi d\u00f9ng \u0111\u1ebfn nh\u00e0 cung c\u1ea5p danh t\u00ednh (Identity Provider) cho c\u00f4ng ty \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh trong y\u00eau c\u1ea7u x\u00e1c th\u1ef1c SAML. Okta, Auth0 v\u00e0 OneLogin l\u00e0 m\u1ed9t s\u1ed1 v\u00ed d\u1ee5 v\u1ec1 nh\u00e0 cung c\u1ea5p danh t\u00ednh th\u01b0\u01a1ng m\u1ea1i. </p> <p>(4) + (5) Nh\u00e0 cung c\u1ea5p danh t\u00ednh hi\u1ec3n th\u1ecb trang \u0111\u0103ng nh\u1eadp \u0111\u1ec3 ng\u01b0\u1eddi d\u00f9ng \u0111\u0103ng nh\u1eadp v\u00e0o. </p> <p>(6) Sau khi \u0111\u01b0\u1ee3c x\u00e1c th\u1ef1c, nh\u00e0 cung c\u1ea5p danh t\u00ednh t\u1ea1o SAML response v\u00e0 tr\u1ea3 v\u1ec1 cho tr\u00ecnh duy\u1ec7t. \u0110\u00e2y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 x\u00e1c nh\u1eadn SAML (SAML Assertion). X\u00e1c nh\u1eadn SAML l\u00e0 m\u1ed9t t\u00e0i li\u1ec7u XML \u0111\u01b0\u1ee3c k\u00fd b\u1eb1ng kho\u00e1 c\u00f3 ch\u1ee9a th\u00f4ng tin v\u1ec1 ng\u01b0\u1eddi d\u00f9ng v\u00e0 nh\u1eefng g\u00ec ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 truy c\u1eadp v\u1edbi nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5.</p> <p>(7) Tr\u00ecnh duy\u1ec7t chuy\u1ec3n ti\u1ebfp x\u00e1c nh\u1eadn SAML \u0111\u00e3 k\u00fd t\u1edbi nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5.</p> <p>(8) Nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 x\u00e1c th\u1ef1c r\u1eb1ng x\u00e1c nh\u1eadn SAML \u0111\u00e3 \u0111\u01b0\u1ee3c k\u00fd b\u1edfi b\u00ean cung c\u1ea5p danh t\u00ednh. Qu\u00e1 tr\u00ecnh x\u00e1c th\u1ef1c n\u00e0y th\u01b0\u1eddng \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi m\u00e3 ho\u00e1 kho\u00e1 c\u00f4ng khai. </p> <p>(9) Nh\u00e0 cung c\u1ea5p d\u1ecbch v\u1ee5 tr\u1ea3 l\u1ea1i t\u00e0i nguy\u00ean \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 cho tr\u00ecnh duy\u1ec7t d\u1ef1a tr\u00ean nh\u1eefng g\u00ec ng\u01b0\u1eddi d\u00f9ng \u0111\u01b0\u1ee3c ph\u00e9p truy c\u1eadp nh\u01b0 \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh trong x\u00e1c nh\u1eadn SAML. </p> <p>V\u1eady l\u00e0 xong quy tr\u00ecnh \u0111\u0103ng nh\u1eadp SSO c\u01a1 b\u1ea3n.</p> <p></p> <p>Gi\u1edd ta c\u00f9ng xem \u0111i\u1ec1u g\u00ec s\u1ebd x\u1ea3y ra khi ng\u01b0\u1eddi d\u00f9ng \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn m\u1ed9t \u1ee9ng d\u1ee5ng t\u00edch h\u1ee3p SSO kh\u00e1c, nh\u01b0 Workday. </p> <p>(1) Ng\u01b0\u1eddi d\u00f9ng truy c\u1eadp Workday.</p> <p>(2) M\u00e1y ch\u1ee7 Workday, nh\u01b0 trong v\u00ed d\u1ee5 v\u1edbi Gmail, ph\u00e1t hi\u1ec7n work domain v\u00e0 g\u1eedi y\u00eau c\u1ea7u x\u00e1c th\u1ef1c SAML v\u1ec1 tr\u00ecnh duy\u1ec7t. </p> <p>(3) Tr\u00ecnh duy\u1ec7t l\u1ea1i chuy\u1ec3n h\u01b0\u1edbng ng\u01b0\u1eddi d\u00f9ng \u0111\u1ebfn Nh\u00e0 cung c\u1ea5p danh t\u00ednh. </p> <p>(4) V\u00ec ng\u01b0\u1eddi d\u00f9ng \u0111\u00e3 \u0111\u0103ng nh\u1eadp b\u1eb1ng\u00a0Nh\u00e0 cung c\u1ea5p danh t\u00ednh n\u00ean ng\u01b0\u1eddi d\u00f9ng s\u1ebd b\u1ecf qua quy tr\u00ecnh \u0111\u0103ng nh\u1eadp v\u00e0 thay v\u00e0o \u0111\u00f3, n\u00f3 s\u1ebd t\u1ea1o m\u1ed9t x\u00e1c nh\u1eadn SAML cho Workday, n\u00eau chi ti\u1ebft nh\u1eefng g\u00ec ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 truy c\u1eadp \u1edf \u0111\u00f3. </p> <p>(5) + (6) X\u00e1c nh\u1eadn SAML \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1\u00a0tr\u00ecnh duy\u1ec7t v\u00e0 chuy\u1ec3n ti\u1ebfp \u0111\u1ebfn Workday. </p> <p>(7) + (8) Workday x\u00e1c th\u1ef1c x\u00e1c nh\u1eadn \u0111\u00e3 k\u00fd\u00a0v\u00e0 c\u1ea5p cho ng\u01b0\u1eddi d\u00f9ng quy\u1ec1n truy c\u1eadp t\u01b0\u01a1ng \u1ee9ng.</p> <p></p> <p>Tr\u01b0\u1edbc \u0111\u00f3 ta c\u0169ng \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u0111\u1ebfn OpenID Connect. Quy tr\u00ecnh c\u1ee7a OpenID Connect t\u01b0\u01a1ng t\u1ef1 nh\u01b0 SAML, nh\u01b0ng thay v\u00ec chuy\u1ec3n t\u00e0i li\u1ec7u XML \u0111\u00e3 k\u00fd, OpenID Connect chuy\u1ec3n v\u1edbi JWT. JWT l\u00e0 m\u1ed9t t\u00e0i li\u1ec7u JSON \u0111\u00e3 k\u00fd.</p> <p></p> <p>Chi ti\u1ebft tri\u1ec3n khai h\u01a1i kh\u00e1c m\u1ed9t ch\u00fat, nh\u01b0ng kh\u00e1i ni\u1ec7m t\u1ed5ng th\u1ec3 th\u00ec t\u01b0\u01a1ng t\u1ef1 nhau. </p>"},{"location":"ByteByteGo/sso/#vay-chung-ta-nen-su-dung-phuong-phap-sso-nao","title":"V\u1eady ch\u00fang ta n\u00ean s\u1eed d\u1ee5ng ph\u01b0\u01a1ng ph\u00e1p SSO n\u00e0o?","text":"<p>C\u1ea3 hai c\u00e1ch tri\u1ec3n khai \u0111\u1ec1u an to\u00e0n. \u0110\u1ed1i v\u1edbi m\u00f4i tr\u01b0\u1eddng doanh nghi\u1ec7p, n\u01a1i th\u01b0\u1eddng chuy\u1ec3n vi\u1ec7c qu\u1ea3n l\u00fd danh t\u00ednh cho m\u1ed9t n\u1ec1n t\u1ea3ng danh t\u00ednh th\u01b0\u01a1ng m\u1ea1i (nh\u01b0 Microsoft, Okta, Thales, JumpCloud, Duo, PingIdentity, RSA, OneLogin, SecureAuth), th\u00ec c\u00e1c n\u1ec1n t\u1ea3ng n\u00e0y h\u1ed7 tr\u1ee3 m\u1ea1nh m\u1ebd cho c\u1ea3 hai. </p> <p>Quy\u1ebft \u0111\u1ecbnh sau \u0111\u00f3 s\u1ebd ph\u1ee5 thu\u1ed9c v\u00e0o \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c\u00a0t\u00edch h\u1ee3p v\u00e0 giao th\u1ee9c n\u00e0o\u00a0d\u1ec5 t\u00edch h\u1ee3p h\u01a1n. N\u1ebfu vi\u1ebft m\u1ed9t \u1ee9ng d\u1ee5ng web m\u1edbi, vi\u1ec7c t\u00edch h\u1ee3p v\u1edbi m\u1ed9t s\u1ed1 n\u1ec1n t\u1ea3ng\u00a0OpenID Connect ph\u1ed5 bi\u1ebfn h\u01a1n nh\u01b0 Google,\u00a0Facebook v\u00e0 Github c\u00f3 l\u1ebd l\u00e0 m\u1ed9t l\u1ef1a ch\u1ecdn an to\u00e0n.</p>"},{"location":"ByteByteGo/stackoverflow-architecture/","title":"H\u1ec7 th\u1ed1ng c\u1ee7a Stack Overflow c\u00f3 g\u00ec hay?","text":""},{"location":"ByteByteGo/stackoverflow-architecture/#nguon","title":"Ngu\u1ed3n","text":"<p> Uncovering Stack Overflow's Shocking Architecture</p>"},{"location":"ByteByteGo/stackoverflow-architecture/#trong-phim","title":"Trong phim","text":"<p>H\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng r\u1eb1ng b\u1ea1n \u0111\u01b0\u1ee3c giao cho vi\u1ec7c thi\u1ebft k\u1ebf l\u1ea1i trang Stack Overflow (n\u1ebfu b\u1ea1n ch\u01b0a bi\u1ebft n\u00f3 l\u00e0 g\u00ec th\u00ec h\u00e3y gh\u00e9 th\u0103m t\u1ea1i \u0111\u00e2y). B\u1ea1n tr\u1ea3 l\u1eddi r\u1eb1ng b\u1ea1n s\u1ebd thi\u1ebft k\u1ebf m\u1ed9t s\u1ed1 server t\u1ea1i ch\u1ed7 trong m\u1ed9t \u1ee9ng d\u1ee5ng nguy\u00ean kh\u1ed1i (monolith), ch\u1ec9 \u0111\u1ec3 nh\u1eadn v\u1ec1 s\u1ef1 ng\u1ea1c nhi\u00ean c\u1ee7a \u0111\u1ed3ng nghi\u1ec7p. Th\u1ef1c ra th\u00ec, \u0111\u00f3 l\u1ea1i ch\u00ednh x\u00e1c l\u00e0 \u0111i\u1ec1u m\u00e0 Stack Overflow \u0111\u00e3 l\u00e0m.</p> <p>C\u00f3 l\u1ebd b\u1ea1n \u0111\u00e3 mong r\u1eb1ng m\u1ed9t n\u1ec1n t\u1ea3ng kh\u1ed5ng l\u1ed3 nh\u01b0 Stack Overflow s\u1ebd \u0111i theo nh\u1eefng xu h\u01b0\u1edbng thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng th\u1ecbnh h\u00e0nh v\u00e0o th\u1eddi \u0111i\u1ec3m n\u00e0y. M\u1ed9t c\u00f4ng ty c\u00f4ng ngh\u1ec7 l\u1edbn s\u1ebd ph\u00e1c th\u1ea3o h\u1ec7 th\u1ed1ng v\u1edbi c\u00e1c microservice \u0111\u1ec3 chia h\u1ec7 th\u1ed1ng ra th\u00e0nh t\u1eebng ph\u1ea7n nh\u1ecf, m\u1ed7i c\u00e1i \u0111\u1ec1u c\u00f3 database ri\u00eang. N\u00f3 s\u1ebd d\u00f9ng cache r\u1ea5t nhi\u1ec1u v\u00e0 giao ti\u1ebfp b\u1ea5t \u0111\u1ed3ng b\u1ed9 qua message queue g\u00ec \u0111\u00f3. M\u1ed9t s\u1ed1 c\u00f3 th\u1ec3 theo CQRS c\u00f9ng event sourcing. Th\u00eam n\u1eefa th\u00ec ai l\u1ea1i ch\u1eb3ng mu\u1ed1n n\u1eafm b\u1eaft c\u01a1 h\u1ed9i \u0111\u1ec3 th\u00eam th\u1eaft t\u00ed concept v\u1ec1 h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n nh\u01b0 eventual consistency hay \u0111\u1ecbnh l\u00fd CAP. Kh\u00e1 l\u00e0 \u1ea5n t\u01b0\u1ee3ng ph\u1ea3i kh\u00f4ng. </p>"},{"location":"ByteByteGo/stackoverflow-architecture/#ngoai-oi","title":"Ngo\u00e0i \u0111\u1eddi","text":"<p>Nh\u01b0ng nh\u1eefng th\u1ee9 tr\u00ean kh\u00f4ng h\u1ec1 t\u1ed3n t\u1ea1i trong thi\u1ebft k\u1ebf hi\u1ec7n t\u1ea1i c\u1ee7a Stack Overflow \u0111\u00e2u nh\u00e9. Trong m\u1ed9t th\u1ebf gi\u1edbi ph\u1ee7 \u0111\u1ea7y microservice, Kubernetes v\u00e0 c\u00e1c gi\u1ea3i ph\u00e1p \u0111\u00e1m m\u00e2y, Stack Overflow l\u1ea1i \u0111i m\u1ed9t m\u00ecnh m\u1ed9t ng\u1ef1a. Thay v\u00ec ch\u1ea1y theo xu h\u01b0\u1edbng, Stack Overflow ki\u00ean \u0111\u1ecbnh v\u1edbi ki\u1ebfn tr\u00fac m\u00e0 h\u1ecd cho l\u00e0 t\u1ed1t nh\u1ea5t cho ho\u00e0n c\u1ea3nh c\u1ee7a h\u1ecd.</p> <p></p> <p>\u0110\u00f3 l\u00e0 m\u1ed9t \u1ee9ng d\u1ee5ng nguy\u00ean kh\u1ed1i \u0111\u1ec3 x\u1eed l\u00fd trang h\u1ecfi \u0111\u00e1p ch\u00ednh v\u1edbi ch\u1ec9 9 web server t\u1ea1i ch\u1ed7 (h\u00ecnh tr\u00ean ghi 6 nh\u01b0ng \u0111\u00fang l\u00e0 9 nh\u00e9). H\u1ecd kh\u00f4ng d\u00f9ng gi\u1ea3i ph\u00e1p \u0111\u00e1m m\u00e2y hay microservice g\u00ec c\u1ea3 nh\u01b0ng v\u1eabn c\u00f3 th\u1ec3 x\u1eed l\u00fd l\u01b0\u1ee3ng truy c\u1eadp c\u1ef1c l\u1edbn v\u1edbi c\u00e1ch ti\u1ebfp c\u1eadn \u0111\u1ed9c \u0111\u00e1o. Thay v\u00ec chu\u1ea9n b\u1ecb cho vi\u1ec7c thay \u0111\u1ed5i li\u00ean t\u1ee5c, h\u1ecd \u0111\u00e3 thi\u1ebft k\u1ebf m\u1ed9t h\u1ec7 th\u1ed1ng t\u1ed1i \u01b0u cho \u0111\u1ed9 tr\u1ec5 t\u1ea3i v\u00e0 ph\u00e2n ph\u1ed1i b\u1ed9 nh\u1edb. C\u00e1c server n\u00e0y ch\u1ea1y ch\u1ec9 t\u1ed1n t\u1ea7m 5-10% s\u1ee9c ch\u1ee9a, n\u00ean c\u00f3 r\u1ea5t nhi\u1ec1u ch\u1ed7 \u0111\u1ec3 ph\u00e1t tri\u1ec3n. D\u00f9 80% l\u01b0\u1ee3ng truy c\u1eadp l\u00e0 kh\u00f4ng \u0111\u0103ng nh\u1eadp (\u1ea9n danh), trang web n\u00e0y v\u1eabn cho th\u1ea5y hi\u1ec7u su\u1ea5t \u0111\u00e1ng kinh ng\u1ea1c. Ngay c\u1ea3 trang \u0111\u01b0\u1ee3c truy c\u1eadp nhi\u1ec1u nh\u1ea5t l\u00e0 trang danh s\u00e1ch c\u00e2u h\u1ecfi c\u0169ng kh\u00f4ng \u0111\u01b0\u1ee3c cache m\u00e0 v\u1eabn c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c render trong 20 ms.</p> <p>Hi\u1ec7u su\u1ea5t kinh d\u1ecb n\u00e0y \u0111\u01b0\u1ee3c ti\u1ebfp s\u1ee9c b\u1edfi 1.5 Terabyte RAM trong SQL Server c\u1ee7a h\u1ecd, \u0111\u1ec3 truy c\u1eadp nhanh 33% c\u1ea3 database l\u1edbn trong b\u1ed9 nh\u1edb. \u0110i\u1ec1u n\u00e0y ch\u1ee9ng t\u1ecf nh\u1eefng concept m\u1edbi nh\u1ea5t, th\u1ecbnh h\u00e0nh nh\u1ea5t kh\u00f4ng ph\u1ea3i l\u00fac n\u00e0o c\u0169ng l\u00e0 t\u1ed1t nh\u1ea5t. Hi\u1ec3u bi\u1ebft s\u00e2u v\u1ec1 m\u1ed9t h\u01b0\u1edbng kh\u00f3 n\u00e0o \u0111\u00f3 c\u00f3 th\u1ec3 c\u00f3 l\u1ee3i h\u01a1n nhi\u1ec1u vi\u1ec7c ch\u1ea1y theo xu h\u01b0\u1edbng.</p>"},{"location":"ByteByteGo/stackoverflow-architecture/#ket","title":"K\u1ebft","text":"<p>C\u00e2u chuy\u1ec7n c\u1ee7a Stack Overflow l\u00e0 m\u1ed9t case study \u0111i\u1ec3n h\u00ecnh \u0111\u1ec3 nh\u1eafc ta nh\u1edb r\u1eb1ng c\u00f4ng ngh\u1ec7 kh\u00f4ng ph\u1ea3i m\u1ea3ng m\u00e0 c\u00f3 m\u1ed9t gi\u1ea3i ph\u00e1p cho t\u1ea5t c\u1ea3 c\u00e1c v\u1ea5n \u0111\u1ec1. Th\u1ee9 ho\u1ea1t \u0111\u1ed9ng \u0111\u01b0\u1ee3c trong m\u1ed9t tr\u01b0\u1eddng h\u1ee3p l\u1ea1i c\u00f3 th\u1ec3 kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng trong m\u1ed9t tr\u01b0\u1eddng h\u1ee3p kh\u00e1c. Vi\u1ec7c nh\u1ea5n m\u1ea1nh s\u1ef1 c\u1ea7n thi\u1ebft ph\u1ea3i li\u00ean k\u1ebft ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng v\u1edbi business v\u00e0 y\u00eau c\u1ea7u k\u1ef9 thu\u1eadt c\u1ee5 th\u1ec3 thay v\u00ec theo xu h\u01b0\u1edbng m\u1ed9t c\u00e1ch m\u00f9 qu\u00e1ng trong ng\u00e0nh th\u1ef1c s\u1ef1 r\u1ea5t quan tr\u1ecdng.</p>"},{"location":"ByteByteGo/storing-passwords/","title":"L\u01b0u m\u1eadt kh\u1ea9u v\u00e0o database nh\u01b0 th\u1ebf n\u00e0o cho \u0111\u00fang?","text":""},{"location":"ByteByteGo/storing-passwords/#nguon","title":"Ngu\u1ed3n","text":"<p> System Design: How to store passwords in the database?</p>"},{"location":"ByteByteGo/storing-passwords/#luu-mat-khau-trong-database","title":"L\u01b0u m\u1eadt kh\u1ea9u trong database","text":"<p>Khi thi\u1ebft k\u1ebf \u1ee9ng d\u1ee5ng c\u00f3 ng\u01b0\u1eddi d\u00f9ng, m\u1ed9t trong nh\u1eefng \u0111i\u1ec1u t\u1ed1i quan tr\u1ecdng ch\u00ednh l\u00e0 l\u01b0u m\u1eadt kh\u1ea9u ng\u01b0\u1eddi d\u00f9ng theo c\u00e1ch n\u00e0o \u0111\u00f3 m\u00e0 c\u00e1c hacker kh\u00f4ng th\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c m\u1eadt kh\u1ea9u g\u1ed1c khi database g\u1eb7p v\u1ea5n \u0111\u1ec1 b\u1ea3o m\u1eadt. \u0110\u1ea7u ti\u00ean l\u00e0 \u0111i\u1ec1u c\u1ea7n tr\u00e1nh: Kh\u00f4ng l\u01b0u m\u1eadt kh\u1ea9u d\u01b0\u1edbi d\u1ea1ng t\u01b0\u1eddng minh</p> <p>B\u1ea5t c\u1ee9 ai c\u00f3 quy\u1ec1n truy c\u1eadp n\u1ed9i b\u1ed9 v\u00e0o database \u0111\u1ec1u c\u00f3 th\u1ec3 th\u1ea5y c\u00e1c m\u1eadt kh\u1ea9u. N\u1ebfu database b\u1ecb hack, k\u1ebb t\u1ea5n c\u00f4ng s\u1ebd d\u1ec5 d\u00e0ng l\u1ea5y \u0111\u01b0\u1ee3c t\u1ea5t c\u1ea3 c\u00e1c m\u1eadt kh\u1ea9u.</p> <p>V\u1eady ta c\u1ea7n l\u00e0m g\u00ec \u0111\u1ec3 l\u01b0u m\u1eadt kh\u1ea9u m\u1ed9t c\u00e1ch an to\u00e0n trong database? Open Web Application Security Project (OWASP) cung c\u1ea5p cho ch\u00fang ta m\u1ed9t s\u1ed1 h\u01b0\u1edbng d\u1eabn l\u00e0m sao \u0111\u1ec3 l\u01b0u m\u1eadt kh\u1ea9u. M\u1ed9t s\u1ed1 c\u00e1ch nh\u01b0 sau:</p>"},{"location":"ByteByteGo/storing-passwords/#dung-mot-thuat-toan-hash-hien-ai","title":"D\u00f9ng m\u1ed9t thu\u1eadt to\u00e1n hash hi\u1ec7n \u0111\u1ea1i","text":"<p>Hash l\u00e0 h\u00e0m m\u1ed9t chi\u1ec1u. Ngh\u0129a l\u00e0 b\u1ea1n s\u1ebd kh\u00f4ng th\u1ec3 gi\u1ea3i m\u00e3 m\u1ed9t hash \u0111\u1ec3 ra gi\u00e1 tr\u1ecb g\u1ed1c. N\u1ebfu k\u1ebb t\u1ea5n c\u00f4ng l\u1ea5y \u0111\u01b0\u1ee3c m\u1eadt kh\u1ea9u \u0111\u00e3 hash, h\u1eafn kh\u00f4ng th\u1ec3 d\u00f9ng c\u00e1i hash \u0111\u00f3 \u0111\u1ec3 l\u1ea5y quy\u1ec1n truy c\u1eadp v\u00e0o \u1ee9ng d\u1ee5ng. </p> <p></p> <p>Quan tr\u1ecdng l\u00e0 ph\u1ea3i d\u00f9ng m\u1ed9t h\u00e0m hash hi\u1ec7n \u0111\u1ea1i \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf cho vi\u1ec7c l\u01b0u m\u1eadt kh\u1ea9u. C\u00e1c h\u00e0m n\u00e0y th\u01b0\u1eddng \"ch\u1eadm\" (v\u00ed d\u1ee5 nh\u01b0 <code>bcrypt</code>) v\u00ec c\u1ea7n nhi\u1ec1u t\u00e0i nguy\u00ean h\u01a1n \u0111\u1ec3 t\u00ednh gi\u00e1 tr\u1ecb hash. \u0110i\u1ec1u \u0111\u00f3 l\u00e0m cho vi\u1ec7c t\u1ea5n c\u00f4ng kh\u00f3 kh\u0103n h\u01a1n. </p> <p>L\u01b0u \u00fd r\u1eb1ng m\u1ed9t s\u1ed1 h\u00e0m hash c\u0169 nh\u01b0 <code>MD5</code> hay <code>SHA-1</code> l\u00e0 c\u00e1c h\u00e0m \"nhanh\". Ch\u00fang \u00edt an to\u00e0n h\u01a1n v\u00e0 kh\u00f4ng n\u00ean \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng.</p>"},{"location":"ByteByteGo/storing-passwords/#salt-mat-khau","title":"Salt m\u1eadt kh\u1ea9u","text":"<p>Theo h\u01b0\u1edbng d\u1eabn c\u1ee7a OWASP, salt l\u00e0 m\u1ed9t x\u00e2u duy nh\u1ea5t \u0111\u01b0\u1ee3c t\u1ea1o ng\u1eabu nhi\u00ean v\u00e0 n\u00f3 s\u1ebd \u0111\u01b0\u1ee3c th\u00eam v\u00e0o m\u1ed7i m\u1eadt kh\u1ea9u trong qu\u00e1 tr\u00ecnh hash.</p> <p></p> <p>T\u1ea1i sao c\u1ea7n ph\u1ea3i salt m\u1eadt kh\u1ea9u? L\u01b0u m\u1eadt kh\u1ea9u theo d\u1ea1ng hash l\u00e0 \u0111i\u1ec1u ki\u1ec7n c\u1ea7n, nh\u01b0ng ch\u01b0a ph\u1ea3i \u0111i\u1ec1u ki\u1ec7n \u0111\u1ee7. K\u1ebb t\u1ea5n c\u00f4ng c\u00f3 th\u1ec3 b\u1ebb \u0111\u01b0\u1ee3c hash m\u1ed9t chi\u1ec1u v\u1edbi c\u00e1c gi\u00e1 tr\u1ecb t\u00ednh tr\u01b0\u1edbc (v\u00ed d\u1ee5 hash c\u1ee7a <code>abc</code> l\u00e0 <code>xyz</code>, v\u00e0 s\u1ebd c\u00f3 r\u00e2t nhi\u1ec1u mapping nh\u01b0 th\u1ebf, khi k\u1ebb t\u1ea5n c\u00f4ng th\u1ea5y m\u1ed9t hash <code>xyz</code> ch\u1eb3ng h\u1ea1n, h\u1eafn s\u1ebd so s\u00e1nh v\u1edbi mapping v\u00e0 th\u1ea5y x\u00e2u g\u1ed1c l\u00e0 <code>abc</code>, v\u1eady l\u00e0 h\u1eafn bi\u1ebft m\u1eadt kh\u1ea9u l\u00e0 <code>abc</code>). M\u1ed9t s\u1ed1 ki\u1ec3u t\u1ea5n c\u00f4ng ph\u1ed5 bi\u1ebfn l\u00e0 rainbow table v\u00e0 lookup d\u1ef1a tr\u00ean database. K\u1ebb t\u1ea5n c\u00f4ng c\u00f3 th\u1ec3 d\u00f9ng c\u00e1c k\u1ef9 thu\u1eadt n\u00e0y \u0111\u1ec3 t\u00ecm ra m\u1eadt kh\u1ea9u trong v\u00e0i gi\u00e2y.</p> <p></p> <p>Th\u00eam salt v\u00e0o s\u1ebd gi\u00fap hash c\u00f3 gi\u00e1 tr\u1ecb duy nh\u1ea5t cho m\u1ed7i m\u1eadt kh\u1ea9u. K\u0129 thu\u1eadt \u0111\u01a1n gi\u1ea3n n\u00e0y l\u00e0m cho vi\u1ec7c t\u00ednh tr\u01b0\u1edbc gi\u00e1 tr\u1ecb hash k\u00e9m hi\u1ec7u qu\u1ea3 h\u01a1n.</p> <p>L\u01b0u m\u1eadt kh\u1ea9u v\u1edbi salt v\u00e0o database ki\u1ec3u g\u00ec? \u0110\u1ea7u ti\u00ean th\u00eam salt v\u00e0o sau m\u1eadt kh\u1ea9u \u0111\u00e3 nh\u1eadp. Sau \u0111\u00f3 t\u00ednh hash c\u1ee7a x\u00e2u k\u1ebft qu\u1ea3 v\u1edbi m\u1ed9t h\u00e0m hash n\u00e0o \u0111\u00f3. C\u00e1i hash n\u00e0y s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u v\u00e0o database c\u00f9ng v\u1edbi salt. L\u01b0u \u00fd r\u1eb1ng salt \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 t\u1ea1o hash duy nh\u1ea5t. N\u00f3 kh\u00f4ng ph\u1ea3i l\u00e0 x\u00e2u b\u00ed m\u1eadt g\u00ec c\u1ea3 v\u00e0 c\u00f3 th\u1ec3 l\u01b0u d\u01b0\u1edbi d\u1ea1ng t\u01b0\u1eddng minh trong database.</p> <p></p>"},{"location":"ByteByteGo/storing-passwords/#xac-nhan-mot-mat-khau-trong-database","title":"X\u00e1c nh\u1eadn m\u1ed9t m\u1eadt kh\u1ea9u trong database","text":"<p>Gi\u1edd khi user b\u1ea5m n\u00fat \u0110\u0103ng nh\u1eadp, l\u00e0m sao ta c\u00f3 th\u1ec3 x\u00e1c nh\u1eadn m\u1eadt kh\u1ea9u \u0111\u00f3 \u0111\u00fang l\u00e0 m\u1eadt kh\u1ea9u c\u1ee7a user?</p> <p>\u0110\u1ea7u ti\u00ean, ta l\u1ea5y salt c\u1ee7a user t\u1eeb database. Sau \u0111\u00f3 ta th\u00eam salt v\u00e0o sau m\u1eadt kh\u1ea9u m\u00e0 user nh\u1eadp v\u00e0o, sau \u0111\u00f3 hash x\u00e2u k\u1ebft qu\u1ea3. So s\u00e1nh k\u1ebft qu\u1ea3 n\u00e0y v\u1edbi hash l\u01b0u trong database. N\u1ebfu gi\u1ed1ng nhau th\u00ec m\u1eadt kh\u1ea9u nh\u1eadp v\u00e0o l\u00e0 ch\u00ednh x\u00e1c.</p> <p></p>"},{"location":"ByteByteGo/system-design-interview-guide/","title":"H\u01b0\u1edbng d\u1eabn t\u1eebng b\u01b0\u1edbc ph\u1ecfng v\u1ea5n System Design","text":""},{"location":"ByteByteGo/system-design-interview-guide/#nguon","title":"Ngu\u1ed3n","text":"<p> System Design Interview: A Step-By-Step Guide</p>"},{"location":"ByteByteGo/system-design-interview-guide/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>Trong b\u00e0i n\u00e0y, ta s\u1ebd n\u00f3i v\u1ec1 khu\u00f4n m\u1eabu ph\u1ecfng v\u1ea5n System Design (thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng) m\u00e0 ch\u00fang t\u00f4i \u0111\u00e3 s\u1eed d\u1ee5ng trong s\u00e1ch c\u1ee7a m\u00ecnh (System Design Interview - An Insider's Guide - Alex Xu, s\u00e1ch n\u00e0y \u0111\u00e3 c\u00f3 Volume 2).</p> <p>M\u00e0 v\u00ec sao l\u1ea1i c\u1ea7n m\u1ed9t c\u00e1i khu\u00f4n m\u1eabu nh\u01b0 th\u1ebf nh\u1ec9? Ph\u1ecfng v\u1ea5n l\u00e0 m\u1ed9t qu\u00e1 tr\u00ecnh c\u0103ng th\u1eb3ng. Ta c\u00f3 r\u1ea5t \u00edt th\u1eddi gian \u0111\u1ec3 th\u1ec3 hi\u1ec7n nh\u1eefng g\u00ec m\u00ecnh c\u00f3 th\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c. N\u1ebfu kh\u00f4ng c\u00f3 s\u01b0\u1eddn, d\u00e0n \u00fd, khu\u00f4n m\u1eabu hay m\u1ed9t c\u1ea5u tr\u00fac n\u00e0o \u0111\u1ec3 theo, ta c\u00f3 th\u1ec3 s\u1ebd l\u00e3ng ph\u00ed th\u1eddi gian qu\u00fd b\u00e1u v\u00e0o nh\u1eefng v\u1ea5n \u0111\u1ec1 h\u1ec7 th\u1ed1ng kh\u00f4ng quan tr\u1ecdng. Ph\u1ecfng v\u1ea5n kh\u00f4ng c\u00f3 c\u1ea5u tr\u00fac l\u00e0m cho ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n b\u1ea1n g\u1eb7p kh\u00f3 \u0111\u1ec3 theo d\u00f5i.</p>"},{"location":"ByteByteGo/system-design-interview-guide/#cac-buoc-phong-van","title":"C\u00e1c b\u01b0\u1edbc ph\u1ecfng v\u1ea5n","text":"<p>Khu\u00f4n m\u1eabu c\u1ee7a ch\u00fang t\u00f4i l\u00e0 m\u1ed9t c\u1ea5u tr\u00fac \u0111\u00e3 \u0111\u01b0\u1ee3c ch\u1ee9ng minh hi\u1ec7u qu\u1ea3 trong th\u1eddi gian d\u00e0i. N\u00f3 \u0111\u01a1n gi\u1ea3n v\u00e0 m\u1ea1nh m\u1ebd. N\u00f3 gi\u00fap ta h\u1ecfi \u0111\u00fang c\u00e2u h\u1ecfi v\u00e0 t\u1eadp trung v\u00e0o \u0111\u00fang th\u1ee9 c\u1ea7n thi\u1ebft trong ph\u1ecfng v\u1ea5n. D\u01b0\u1edbi \u0111\u00e2y l\u00e0 4 b\u01b0\u1edbc trong khu\u00f4n m\u1eabu n\u00e0y.</p> <ol> <li>Hi\u1ec3u v\u1ea5n \u0111\u1ec1 v\u00e0 x\u00e1c \u0111\u1ecbnh ph\u1ea1m vi thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng.</li> <li>\u0110\u1ec1 xu\u1ea5t thi\u1ebft k\u1ebf t\u1ed5ng quan cho h\u1ec7 th\u1ed1ng.</li> <li>Thi\u1ebft k\u1ebf chi ti\u1ebft.</li> <li>K\u1ebft th\u00fac.</li> </ol> <p>C\u1ea5u tr\u00fac n\u00e0y hi\u1ec7u qu\u1ea3 trong m\u1ed9t cu\u1ed9c ph\u1ecfng v\u1ea5n System Design d\u00e0i 45 \u0111\u1ebfn 60 ph\u00fat. Th\u00f4ng th\u01b0\u1eddng, 5 ph\u00fat \u0111\u1ea7u l\u00e0 cho ph\u1ea7n gi\u1edbi thi\u1ec7u v\u00e0 5 ph\u00fat cu\u1ed1i l\u00e0 cho ph\u1ea7n h\u1ecfi \u0111\u00e1p. Ph\u1ea7n ch\u00ednh c\u1ee7a cu\u1ed9c ph\u1ecfng v\u1ea5n ch\u1ec9 kho\u1ea3ng 35 \u0111\u1ebfn 45 ph\u00fat.</p> <p>Ch\u00fang t\u00f4i \u0111\u1ec1 xu\u1ea5t d\u00e0nh kho\u1ea3ng 5 ph\u00fat cho b\u01b0\u1edbc 1, 20 ph\u00fat cho b\u01b0\u1edbc 2, 15 ph\u00fat cho b\u01b0\u1edbc 3 v\u00e0 5 ph\u00fat cho b\u01b0\u1edbc 4. B\u1ea1n c\u00f3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh th\u1eddi gian m\u1ed7i ph\u1ea7n theo \u00fd th\u00edch, kh\u00f4ng nh\u1ea5t thi\u1ebft ph\u1ea3i theo ch\u00ednh x\u00e1c nh\u01b0 v\u1eady, mi\u1ec5n l\u00e0 b\u1ea1n \u0111\u1ee7 th\u1eddi gian.</p> <p>C\u00f9ng \u0111i v\u00e0o t\u1eebng b\u01b0\u1edbc nh\u00e9.</p>"},{"location":"ByteByteGo/system-design-interview-guide/#buoc-1-hieu-van-e-va-xac-inh-pham-vi-thiet-ke-he-thong","title":"B\u01b0\u1edbc 1 - Hi\u1ec3u v\u1ea5n \u0111\u1ec1 v\u00e0 x\u00e1c \u0111\u1ecbnh ph\u1ea1m vi thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng","text":"<p>C\u00e2u h\u1ecfi thi\u1ebft k\u1ebf h\u1ec7 th\u01b0\u1eddng l\u00e0 c\u00e2u h\u1ecfi m\u1edf. \u0110\u00f4i khi c\u00e2u h\u1ecfi \u0111\u01b0\u1ee3c tr\u00ecnh b\u00e0y m\u1ed9t c\u00e1ch kh\u00e1 m\u01a1 h\u1ed3. \u0110i\u1ec1u n\u00e0y gi\u00fap ki\u1ec3m tra kh\u1ea3 n\u0103ng t\u1ed5 ch\u1ee9c suy ngh\u0129 v\u00e0 t\u1eadp trung v\u00e0o nh\u1eefng g\u00ec quan tr\u1ecdng.</p> <p>Nhi\u1ec7m v\u1ee5 c\u1ee7a ta l\u00e0 h\u1ecfi c\u00e0ng nhi\u1ec1u c\u00e2u h\u1ecfi c\u00e0ng t\u1ed1t \u0111\u1ec3 hi\u1ec3u r\u00f5 c\u00e2u h\u1ecfi. N\u1ebfu ta \u0111i ngay v\u00e0o gi\u1ea3i ph\u00e1p m\u00e0 kh\u00f4ng hi\u1ec3u r\u00f5 v\u1ea5n \u0111\u1ec1, ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n s\u1ebd kh\u00f4ng \u0111\u00e1nh gi\u00e1 t\u1ed1t b\u1ea1n v\u00e0 s\u1ebd lo\u1ea1i b\u1ea1n g\u1ea7n nh\u01b0 ngay l\u1eadp t\u1ee9c.</p> <p>M\u00e0 n\u00ean h\u1ecfi nh\u1eefng c\u00e2u n\u00e0o nh\u1ec9? M\u1ee5c ti\u00eau c\u1ee7a ta l\u00e0 l\u00e0m r\u00f5 \u0111\u1ec1 b\u00e0i. Ta mu\u1ed1n hi\u1ec3u t\u1ea1i sao ta x\u00e2y d\u1ef1ng c\u00e1i h\u1ec7 th\u1ed1ng n\u00e0y, ng\u01b0\u1eddi d\u00f9ng l\u00e0 ai v\u00e0 c\u1ea7n x\u00e2y d\u1ef1ng nh\u1eefng t\u00ednh n\u0103ng n\u00e0o (y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng - functional requirements).</p> <p>V\u00ed d\u1ee5, n\u1ebfu \u0111\u1ec1 b\u00e0i l\u00e0 thi\u1ebft k\u1ebf m\u1ed9t \u1ee9ng d\u1ee5ng chat, b\u1ea1n c\u1ea7n ph\u1ea3i th\u1ea5y r\u1eb1ng c\u00f3 nhi\u1ec1u lo\u1ea1i \u1ee9ng d\u1ee5ng chat kh\u00e1c nhau tr\u00ean th\u1ecb tr\u01b0\u1eddng. C\u00f3 \u1ee9ng d\u1ee5ng chat nh\u00f3m ri\u00eang t\u01b0 v\u00e0 nh\u00f3m nh\u1ecf nh\u01b0 WhatsApp, \u1ee9ng d\u1ee5ng chat v\u0103n ph\u00f2ng nh\u01b0 Slack ho\u1eb7c \u1ee9ng d\u1ee5ng chat nh\u00f3m l\u1edbn nh\u01b0 Discord. M\u1ed7i lo\u1ea1i \u0111\u1ec1u c\u00f3 nh\u1eefng kh\u00f3 kh\u0103n v\u00e0 r\u00e0ng bu\u1ed9c thi\u1ebft k\u1ebf ri\u00eang. \u0110\u00edch \u0111\u1ebfn l\u00e0 hi\u1ec3u r\u00f5 c\u00e1c t\u00ednh n\u0103ng ta \u0111ang x\u00e2y d\u1ef1ng theo th\u1ee9 t\u1ef1 \u01b0u ti\u00ean. Ta n\u00ean t\u1eadp trung v\u00e0o m\u1ed9t s\u1ed1 t\u00ednh n\u0103ng quan tr\u1ecdng nh\u1ea5t th\u00f4i. B\u1ea1n c\u1ea7n th\u1ea3o lu\u1eadn v\u00e0 nh\u1eadn s\u1ef1 \u0111\u1ed3ng \u00fd c\u1ee7a ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n v\u1ec1 danh s\u00e1ch c\u00e1c t\u00ednh n\u0103ng.</p> <p>Ngo\u00e0i c\u00e1c t\u00ednh n\u0103ng c\u1ea7n x\u00e2y d\u1ef1ng (functional requirements), b\u1ea1n c\u0169ng c\u1ea7n h\u1ecfi ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n \u0111\u1ec3 l\u00e0m r\u00f5 c\u00e1c y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng (non-functional requirements). V\u1edbi ph\u1ecfng v\u1ea5n System Design, ta n\u00ean t\u1eadp trung v\u00e0o quy m\u00f4 (scale) v\u00e0 hi\u1ec7u su\u1ea5t (performance). C\u00e1c y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng n\u00e0y l\u00e0m cho thi\u1ebft k\u1ebf tr\u1edf n\u00ean \u0111\u1ed9c \u0111\u00e1o v\u00e0 th\u00e1ch th\u1ee9c h\u01a1n. V\u00ed d\u1ee5, thi\u1ebft k\u1ebf m\u1ed9t \u1ee9ng d\u1ee5ng nh\u00e1i Twitter d\u00e0nh cho v\u00e0i tr\u0103m ng\u01b0\u1eddi d\u00f9ng th\u00ec d\u1ec5 h\u01a1n l\u00e0 thi\u1ebft k\u1ebf n\u00f3 cho h\u00e0ng tri\u1ec7u ng\u01b0\u1eddi d\u00f9ng v\u1edbi m\u1ed9t s\u1ed1 t\u00e0i kho\u1ea3n ph\u1ed5 bi\u1ebfn c\u00f3 h\u00e0ng tri\u1ec7u ng\u01b0\u1eddi theo d\u00f5i. Th\u1ebf m\u1edbi \u0111\u1ed9c v\u00e0 kh\u00f3. Kinh nghi\u1ec7m m\u00e0 c\u00f4ng vi\u1ec7c m\u1edbi y\u00eau c\u1ea7u c\u00e0ng nhi\u1ec1u th\u00ec b\u1ea1n c\u00e0ng c\u1ea7n ph\u1ea3i ch\u1ee9ng t\u1ecf n\u0103ng l\u1ef1c x\u1eed l\u00fd c\u00e1c y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng n\u00e0y.</p> <p>\u0110\u1ec3 c\u00f3 \u0111\u01b0\u1ee3c c\u00e1i nh\u00ecn t\u1ed5ng quan v\u1ec1 quy m\u00f4 c\u1ee7a h\u1ec7 th\u1ed1ng c\u00f9ng nh\u1eefng kh\u00f3 kh\u0103n c\u00f3 th\u1ec3 x\u1ea3y ra khi thi\u1ebft k\u1ebf, ta c\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n m\u1ed9t s\u1ed1 t\u00ednh to\u00e1n v\u1ec1 h\u1ec7 th\u1ed1ng. N\u00ean nh\u1edb l\u00e0 \u0111\u1ebfn \u0111\u00e2y ta v\u1eabn ch\u01b0a thi\u1ebft k\u1ebf g\u00ec c\u1ea3, cho n\u00ean t\u00ednh to\u00e1n \u1edf \u0111\u00e2y ch\u1ec9 \u01b0\u1edbc ch\u1eebng th\u00f4i. M\u1ee5c ti\u00eau l\u00e0 c\u00f3 \u0111\u01b0\u1ee3c c\u00e1i nh\u00ecn t\u1ed5ng quan v\u1ec1 quy m\u00f4 h\u1ec7 th\u1ed1ng.</p> <p>To\u00e0n b\u1ed9 b\u01b0\u1edbc 1 n\u00e0y c\u1ea7n kho\u1ea3ng 5 ph\u00fat. Cu\u1ed1i c\u00f9ng, ta s\u1ebd c\u00f3 m\u1ed9t danh s\u00e1ch ng\u1eafn c\u00e1c t\u00ednh n\u0103ng \u0111\u1ec3 thi\u1ebft k\u1ebf, c\u00f9ng v\u1edbi m\u1ed9t s\u1ed1 y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng c\u1ea7n ph\u1ea3i tho\u1ea3 m\u00e3n.</p>"},{"location":"ByteByteGo/system-design-interview-guide/#buoc-2-e-xuat-thiet-ke-tong-quan-cho-he-thong","title":"B\u01b0\u1edbc 2 - \u0110\u1ec1 xu\u1ea5t thi\u1ebft k\u1ebf t\u1ed5ng quan cho h\u1ec7 th\u1ed1ng","text":"<p>Trong b\u01b0\u1edbc n\u00e0y, m\u1ee5c ti\u00eau l\u00e0 \u0111\u1ec1 xu\u1ea5t m\u1ed9t thi\u1ebft k\u1ebf t\u1ed5ng quan v\u00e0 nh\u1eadn s\u1ef1 \u0111\u1ed3ng thu\u1eadn c\u1ee7a ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n.</p>"},{"location":"ByteByteGo/system-design-interview-guide/#thiet-ke-api","title":"Thi\u1ebft k\u1ebf API","text":"<p>V\u1edbi ph\u1ea7n l\u1edbn c\u00e1c \u0111\u1ec1 b\u00e0i, ta s\u1ebd theo c\u00e1ch ti\u1ebfp c\u1eadn t\u1eeb tr\u00ean xu\u1ed1ng v\u00e0 b\u1eaft \u0111\u1ea7u v\u1edbi c\u00e1c API. C\u00e1c API t\u1ea1o n\u00ean m\u1ed9t tho\u1ea3 thu\u1eadn gi\u1eefa ng\u01b0\u1eddi d\u00f9ng cu\u1ed1i v\u00e0 backend. Sau khi thu th\u1eadp c\u00e1c y\u00eau c\u1ea7u, ta s\u1ebd bi\u1ebft \u0111\u01b0\u1ee3c nh\u1eefng API n\u00e0o c\u1ea7n thi\u1ebft. Tr\u1eeb khi c\u00f3 ch\u1ec9 \u0111\u1ecbnh kh\u00e1c, ta n\u00ean tu\u00e2n theo quy \u01b0\u1edbc RESTful. \u0110\u1ecbnh ngh\u0129a c\u1ea9n th\u1eadn c\u00e1c tham s\u1ed1 request v\u00e0 response c\u1ee7a m\u1ed7i API. Nh\u1edb d\u00e0nh th\u1eddi gian \u0111\u1ec3 xem x\u00e9t k\u1ef9 c\u00e1c API, x\u00e1c minh r\u1eb1ng ch\u00fang \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng. M\u1ed9t \u0111i\u1ec1u quan tr\u1ecdng c\u1ea7n nh\u1edb l\u00e0 kh\u00f4ng t\u1ea1o ra c\u00e1c API kh\u00f4ng li\u00ean quan g\u00ec \u0111\u1ebfn c\u00e1c y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng.</p> <p>Th\u00eam n\u1eefa, m\u1ed9t s\u1ed1 \u0111\u1ec1 b\u00e0i c\u00f3 th\u1ec3 y\u00eau c\u1ea7u giao ti\u1ebfp hai chi\u1ec1u gi\u1eefa client v\u00e0 server. WebSocket l\u00e0 m\u1ed9t l\u1ef1a ch\u1ecdn t\u1ed1t, nh\u01b0ng nh\u1edb r\u1eb1ng socket service nh\u01b0 websocket th\u00ec stateful, n\u00f3 kh\u00e1 kh\u00f3 \u0111\u1ec3 v\u1eadn h\u00e0nh \u1edf quy m\u00f4 l\u1edbn. N\u1ebfu ph\u1ea3i thi\u1ebft k\u1ebf \u1edf quy m\u00f4 l\u1edbn, n\u00ean chu\u1ea9n b\u1ecb m\u1ed9t c\u00e1ch thi\u1ebft k\u1ebf WebSocket trong ph\u1ea7n Thi\u1ebft k\u1ebf chi ti\u1ebft.</p>"},{"location":"ByteByteGo/system-design-interview-guide/#ve-bieu-o-thiet-ke-tong-quan","title":"V\u1ebd bi\u1ec3u \u0111\u1ed3 thi\u1ebft k\u1ebf t\u1ed5ng quan","text":"<p>Sau khi xong ph\u1ea7n API gi\u1eefa client v\u00e0 server, ph\u1ea7n ti\u1ebfp theo l\u00e0 v\u1ebd bi\u1ec3u \u0111\u1ed3 thi\u1ebft k\u1ebf t\u1ed5ng quan. Bi\u1ec3u \u0111\u1ed3 l\u00e0 b\u1ea3n thi\u1ebft k\u1ebf t\u1ed5ng quan m\u00e0 ta c\u00f3 th\u1ec3 tham kh\u1ea3o. Ta d\u00f9ng n\u00f3 \u0111\u1ec3 x\u00e1c minh r\u1eb1ng thi\u1ebft k\u1ebf \u0111\u00e1p \u1ee9ng t\u1ea5t c\u1ea3 c\u00e1c y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng. V\u00ed d\u1ee5 nh\u01b0 h\u00ecnh d\u01b0\u1edbi.</p> <p></p> <p>V\u1edbi nhi\u1ec1u \u0111\u1ec1 b\u00e0i, m\u1ecdi th\u1ee9 th\u01b0\u1eddng b\u1eaft \u0111\u1ea7u v\u1edbi m\u1ed9t load balancer ho\u1eb7c m\u1ed9t API gateway. Sau \u0111\u00f3 l\u00e0 c\u00e1c service \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng. Nhi\u1ec1u service c\u1ea7n m\u1ed9t s\u1ed1 h\u00ecnh th\u1ee9c l\u01b0u tr\u1eef. \u0110\u00e2y l\u00e0 n\u01a1i ta s\u1ebd ho\u00e0n thi\u1ec7n thi\u1ebft k\u1ebf b\u1eb1ng c\u00e1c gi\u1edbi thi\u1ec7u l\u1edbp l\u01b0u tr\u1eef d\u1eef li\u1ec7u.</p> <p>Th\u01b0\u1eddng th\u00ec ta ch\u01b0a c\u1ea7n ph\u1ea3i n\u00f3i ra ta s\u1ebd d\u00f9ng database g\u00ec \u1edf \u0111\u00e2y, c\u00e1i n\u00e0y s\u1ebd n\u00f3i trong ph\u1ea7n Thi\u1ebft k\u1ebf chi ti\u1ebft n\u1ebfu c\u1ea7n, v\u00e0 ch\u1ec9 sau khi ta \u0111\u00e3 ra \u0111\u01b0\u1ee3c data schema. V\u00ed d\u1ee5, v\u1edbi m\u1ed9t service b\u1ea3n \u0111\u1ed3 nh\u01b0 Google Maps, client th\u01b0\u1eddng c\u1ea7n g\u1eedi c\u00e1c c\u1eadp nh\u1eadt v\u1ecb tr\u00ed GPS th\u01b0\u1eddng xuy\u00ean \u0111\u1ebfn server. Ta s\u1ebd th\u00eam v\u00e0o thi\u1ebft k\u1ebf m\u1ed9t c\u00e1i data store v\u1ecb tr\u00ed, service c\u1eadp nh\u1eadt v\u1ecb tr\u00ed s\u1ebd cho data v\u00e0o \u0111\u00f3.</p> <p></p> <p>L\u1eb7p l\u1ea1i c\u00e1c b\u01b0\u1edbc tr\u00ean v\u00e0 ho\u00e0n thi\u1ec7n bi\u1ec3u \u0111\u1ed3 thi\u1ebft k\u1ebf t\u1ed5ng quan cho t\u1ea5t c\u1ea3 c\u00e1c t\u00ednh n\u0103ng ch\u00ednh. M\u1ed9t m\u1eb9o nh\u1ecf n\u00e0y, trong b\u01b0\u1edbc thi\u1ebft k\u1ebf t\u1ed5ng quan, h\u00e3y chu\u1ea9n b\u1ecb c\u00e1c \u0111i\u1ec3m c\u1ea7n th\u1ea3o lu\u1eadn cho ph\u1ea7n sau, tr\u00e1nh sa v\u00e0o chi ti\u1ebft thi\u1ebft k\u1ebf qu\u00e1 s\u1edbm. Cu\u1ed1i c\u00f9ng, ta s\u1ebd c\u00f3 m\u1ed9t bi\u1ec3u \u0111\u1ed3 thi\u1ebft k\u1ebf t\u1ed5ng quan ho\u00e0n ch\u1ec9nh.</p>"},{"location":"ByteByteGo/system-design-interview-guide/#thiet-ke-data-model-va-schema","title":"Thi\u1ebft k\u1ebf data model v\u00e0 schema","text":"<p>Ph\u1ea7n cu\u1ed1i c\u00f9ng trong thi\u1ebft k\u1ebf t\u1ed5ng quan l\u00e0 thi\u1ebft k\u1ebf ra data model v\u00e0 schema. \u1ede \u0111\u00e2y ta n\u00ean th\u1ea3o lu\u1eadn v\u1ec1 nh\u1eefng khu\u00f4n m\u1eabu truy c\u1eadp d\u1eef li\u1ec7u v\u00e0 t\u1ef7 l\u1ec7 \u0111\u1ecdc/ghi d\u1eef li\u1ec7u. Khi \u1edf quy m\u00f4 l\u1edbn, m\u00f4 h\u00ecnh d\u1eef li\u1ec7u c\u00f3 th\u1ec3 \u1ea3nh h\u01b0\u1edfng \u0111\u00e1ng k\u1ec3 \u0111\u1ebfn hi\u1ec7u su\u1ea5t c\u1ee7a thi\u1ebft k\u1ebf. N\u1ebfu n\u00f3 \u0111\u01a1n gi\u1ea3n, ta c\u0169ng c\u00f3 th\u1ec3 th\u1ea3o lu\u1eadn v\u1ec1 c\u00e1c database v\u00e0 c\u00e1c t\u00f9y ch\u1ecdn indexing.</p> <p>\u1ede \u0111\u00e2y ta c\u1ea7n quy\u1ebft \u0111\u1ecbnh m\u1ed9t s\u1ed1 th\u1ee9. N\u1ebfu m\u00f4 h\u00ecnh d\u1eef li\u1ec7u l\u00e0 ph\u1ea7n quan tr\u1ecdng c\u1ee7a thi\u1ebft k\u1ebf \u0111\u1ec3 \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng, ta c\u00f3 th\u1ec3 ho\u00e3n ph\u1ea7n th\u1ea3o lu\u1eadn n\u00e0y cho ph\u1ea7n thi\u1ebft k\u1ebf chi ti\u1ebft.</p> <p>Sau khi xong ph\u1ea7n t\u1ed5ng quan r\u1ed3i, h\u00e3y review l\u1ea1i thi\u1ebft k\u1ebf. H\u00e3y \u0111\u1ea3m b\u1ea3o r\u1eb1ng m\u1ed7i t\u00ednh n\u0103ng xong t\u1eeb \u0111\u1ea7u t\u1edbi cu\u1ed1i v\u1ec1 c\u01a1 b\u1ea3n.</p>"},{"location":"ByteByteGo/system-design-interview-guide/#buoc-3-thiet-ke-chi-tiet","title":"B\u01b0\u1edbc 3 - Thi\u1ebft k\u1ebf chi ti\u1ebft","text":"<p>M\u1ee5c ti\u00eau c\u1ee7a b\u01b0\u1edbc n\u00e0y l\u00e0 \u0111\u1ec3 ch\u1ee9ng minh r\u1eb1ng ta c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh c\u00e1c v\u1ea5n \u0111\u1ec1 ti\u1ec1m t\u00e0ng v\u00e0 \u0111\u01b0a ra c\u00e1c gi\u1ea3i ph\u00e1p v\u00e0 th\u1ea3o lu\u1eadn v\u1ec1 c\u00e1c trade-off. Ta n\u00ean l\u00e0m vi\u1ec7c c\u00f9ng v\u1edbi ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n \u0111\u1ec3 quy\u1ebft \u0111\u1ecbnh nh\u1eefng g\u00ec n\u00ean \u0111\u01b0\u1ee3c th\u1ea3o lu\u1eadn s\u00e2u h\u01a1n. </p> <p>B\u01b0\u1edbc n\u00e0y l\u00e0 n\u01a1i c\u00e1c y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng l\u00ean ng\u00f4i. Level c\u00e0ng cao th\u00ec b\u01b0\u1edbc n\u00e0y c\u00e0ng quan tr\u1ecdng. N\u00ean nh\u1edb l\u00e0 kh\u00f4ng c\u00f3 m\u1ed9t c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0o ph\u00f9 h\u1ee3p v\u1edbi t\u1ea5t c\u1ea3 c\u00e1c tr\u01b0\u1eddng h\u1ee3p.</p> <p>Tr\u1ef1c gi\u00e1c c\u1ee7a b\u1ea1n s\u1ebd c\u00f3 t\u00e1c d\u1ee5ng \u1edf \u0111\u00e2y. \u0110\u00f4i khi ng\u00f4n ng\u1eef c\u01a1 th\u1ec3 c\u1ee7a ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n s\u1ebd l\u00e0 g\u1ee3i \u00fd cho b\u1ea1n r\u1eb1ng h\u1ecd kh\u00f4ng h\u00e0i l\u00f2ng v\u1edbi m\u1ed9t s\u1ed1 ph\u1ea7n c\u1ee7a thi\u1ebft k\u1ebf. Quan tr\u1ecdng l\u00e0 ph\u1ea3i nh\u1eadn ra nh\u1eefng g\u1ee3i \u00fd n\u00e0y v\u00e0 \u0111\u1ea3m b\u1ea3o c\u00e1c v\u1ea5n \u0111\u1ec1 \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. </p> <p>M\u1ed9t c\u00e1ch m\u00e0 ta c\u00f3 th\u1ec3 \u00e1p d\u1ee5ng l\u00e0 h\u1ecfi. Ta c\u00f3 th\u1ec3 li\u1ec7t k\u00ea c\u00e1c l\u00fd do \u0111\u1ec3 ch\u1ecdn m\u1ed9t gi\u1ea3i ph\u00e1p c\u1ee5 th\u1ec3 v\u00e0 h\u1ecfi xem h\u1ecd c\u00f3 th\u1eafc m\u1eafc g\u00ec kh\u00f4ng. Khi ta \u0111\u00e3 ch\u1ecdn ra m\u1ed9t ho\u1eb7c hai v\u1ea5n \u0111\u1ec1 \u0111\u1ec3 th\u1ea3o lu\u1eadn s\u00e2u h\u01a1n, ta n\u00ean \u0111\u01b0a ra nhi\u1ec1u gi\u1ea3i ph\u00e1p v\u00e0 th\u1ea3o lu\u1eadn v\u1ec1 c\u00e1c trade-off c\u1ee7a m\u1ed7i l\u1ef1a ch\u1ecdn.</p> <p>C\u00f3 m\u1ed9t s\u1ed1 m\u1eb9o nh\u01b0 sau:</p> <ol> <li>Ta n\u00ean n\u00eau r\u00f5 v\u1ea5n \u0111\u1ec1. V\u00ed d\u1ee5, \u0111\u1ed1i v\u1edbi thi\u1ebft k\u1ebf Google Maps, vi\u1ec7c ghi QPS \u1edf m\u1ee9c 1 tri\u1ec7u / gi\u00e2y v\u00e0o database th\u00ec qu\u00e1 cao so v\u1edbi kh\u1ea3 n\u0103ng x\u1eed l\u00fd c\u1ee7a m\u1ed9t database. </li> <li>Ta n\u00ean \u0111\u01b0a ra \u00edt nh\u1ea5t hai gi\u1ea3i ph\u00e1p. Ti\u1ebfp t\u1ee5c v\u1edbi v\u00ed d\u1ee5 tr\u00ean, ta c\u00f3 th\u1ec3 \u0111\u1ec1 xu\u1ea5t gi\u1ea3m t\u1ea7n su\u1ea5t c\u1eadp nh\u1eadt v\u1ecb tr\u00ed cho m\u1ed7i ng\u01b0\u1eddi d\u00f9ng, ho\u1eb7c ch\u1ecdn m\u1ed9t database NoSQL c\u00f3 th\u1ec3 x\u1eed l\u00fd \u0111\u01b0\u1ee3c t\u1ed1c \u0111\u1ed9 ghi. </li> <li>Ta n\u00ean th\u1ea3o lu\u1eadn v\u1ec1 c\u00e1c trade-off c\u1ee7a c\u00e1c gi\u1ea3i ph\u00e1p. Nh\u1edb s\u1eed d\u1ee5ng c\u00e1c con s\u1ed1 \u0111\u1ec3 ch\u1ee9ng minh l\u1ef1a ch\u1ecdn c\u1ee7a m\u00ecnh.</li> <li>Cu\u1ed1i c\u00f9ng, ta ch\u1ecdn m\u1ed9t gi\u1ea3i ph\u00e1p v\u00e0 th\u1ea3o lu\u1eadn v\u1edbi ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n. L\u1eb7p l\u1ea1i c\u00e1c b\u01b0\u1edbc n\u00e0y cho c\u00e1c v\u1ea5n \u0111\u1ec1 kh\u00e1c.</li> </ol> <p>Trung b\u00ecnh trong m\u1ed9t cu\u1ed9c ph\u1ecfng v\u1ea5n, ta ch\u1ec9 c\u00f3 th\u1eddi gian \u0111\u1ec3 th\u1ea3o lu\u1eadn s\u00e2u h\u01a1n v\u00e0o 2 ho\u1eb7c 3 v\u1ea5n \u0111\u1ec1. </p>"},{"location":"ByteByteGo/system-design-interview-guide/#buoc-4-ket-thuc","title":"B\u01b0\u1edbc 4 - K\u1ebft th\u00fac","text":"<p>Ta n\u00ean d\u00e0nh v\u00e0i ph\u00fat \u0111\u1ec3 t\u00f3m t\u1eaft thi\u1ebft k\u1ebf. \u1ede \u0111\u00e2y ta n\u00ean t\u1eadp trung v\u00e0o nh\u1eefng ph\u1ea7n \u0111\u1ed9c \u0111\u00e1o th\u00f4i, v\u00e0 l\u00e0m nhanh th\u00f4i nh\u00e9. N\u00ean \u0111\u1ec3 l\u1ea1i \u0111\u1ee7 th\u1eddi gian \u1edf cu\u1ed1i cu\u1ed9c ph\u1ecfng v\u1ea5n \u0111\u1ec3 h\u1ecfi ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n c\u00e1c c\u00e2u h\u1ecfi v\u1ec1 c\u00f4ng ty.</p>"},{"location":"ByteByteGo/system-patterns/","title":"7 ki\u1ec3u h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n th\u00f4ng d\u1ee5ng","text":""},{"location":"ByteByteGo/system-patterns/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 7 Most-Used Distributed System Patterns</p>"},{"location":"ByteByteGo/system-patterns/#ambassador","title":"Ambassador","text":"<p>\u0110\u1ea7u ti\u00ean l\u00e0 h\u1ec7 th\u1ed1ng ki\u1ec3u Ambassador (\u0111\u1ea1i s\u1ee9).</p> <p>T\u01b0\u1edfng t\u01b0\u1ee3ng r\u1eb1ng b\u1ea1n l\u00e0 m\u1ed9t CEO b\u1eadn r\u1ed9n v\u1edbi m\u1ed9t tr\u1ee3 l\u00fd ri\u00eang x\u1eed l\u00fd t\u1ea5t c\u1ea3 c\u00e1c cu\u1ed9c h\u1eb9n v\u00e0 giao ti\u1ebfp v\u1edbi c\u1ea5p d\u01b0\u1edbi cho b\u1ea1n. \u0110\u00f3 ch\u00ednh x\u00e1c l\u00e0 nh\u1eefng g\u00ec h\u1ec7 th\u1ed1ng ki\u1ec3u Ambassador s\u1ebd l\u00e0m cho \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n.</p> <p>N\u00f3 ho\u1ea1t \u0111\u1ed9ng nh\u01b0 m\u1ed9t \u0111i\u1ec3m trung chuy\u1ec3n cho \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n v\u00e0 c\u00e1c service m\u00e0 \u1ee9ng d\u1ee5ng \u0111\u00f3 giao ti\u1ebfp, gi\u1ea3m t\u1ea3i c\u00e1c t\u00e1c v\u1ee5 nh\u01b0 logging, monitoring hay x\u1eed l\u00fd c\u00e1c l\u1ea7n th\u1eed l\u1ea1i.</p> <p>V\u00ed d\u1ee5, Kubernetes s\u1eed d\u1ee5ng Envoy l\u00e0m Ambassador \u0111\u1ec3 \u0111\u01a1n gi\u1ea3n ho\u00e1 vi\u1ec7c giao ti\u1ebfp gi\u1eefa c\u00e1c service.</p> <p>H\u1ec7 th\u1ed1ng ki\u1ec3u Ambassador s\u1ebd gi\u00fap gi\u1ea3m \u0111\u1ed9 tr\u1ec5, t\u0103ng c\u01b0\u1eddng b\u1ea3o m\u1eadt v\u00e0 c\u1ea3i thi\u1ec7n ki\u1ebfn tr\u00fac t\u1ed5ng th\u1ec3 c\u1ee7a c\u00e1c h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n.</p> <p></p>"},{"location":"ByteByteGo/system-patterns/#circuit-breaker","title":"Circuit Breaker","text":"<p>Ti\u1ebfp theo l\u00e0 Circuit Breaker (b\u1ed9 ng\u1eaft m\u1ea1ch)</p> <p>T\u01b0\u1edfng t\u01b0\u1ee3ng m\u1ed9t \u0111\u01b0\u1eddng \u1ed1ng n\u01b0\u1edbc trong nh\u00e0 b\u1ea1n b\u1ecb v\u1ee1. \u0110i\u1ec1u \u0111\u1ea7u ti\u00ean b\u1ea1n c\u1ea7n l\u00e0m l\u00e0 kho\u00e1 van ch\u00ednh \u0111\u1ec3 tr\u00e1nh h\u1ecfng th\u00eam. H\u1ec7 th\u1ed1ng ki\u1ec3u Circuit Breaker ho\u1ea1t \u0111\u1ed9ng t\u01b0\u01a1ng t\u1ef1, ng\u0103n l\u1ed7i ph\u00e2n t\u1ea7ng trong c\u00e1c h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n. </p> <p>Khi m\u1ed9t service b\u1ecb h\u1ecfng, Circuit Breaker s\u1ebd d\u1eebng c\u00e1c request, cho ph\u00e9p service \u0111\u00f3 kh\u00f4i ph\u1ee5c l\u1ea1i. Th\u01b0 vi\u1ec7n Hystrix c\u1ee7a Netflix s\u1eed d\u1ee5ng thi\u1ebft k\u1ebf n\u00e0y. </p> <p></p> <p>N\u00f3 \u0111\u1ea3m b\u1ea3o m\u1ed9t h\u1ec7 th\u1ed1ng linh ho\u1ea1t h\u01a1n. Thi\u1ebft k\u1ebf n\u00e0y c\u00f3 th\u1ec3 \u0111\u1eb7c bi\u1ec7t\u00a0h\u1eefu \u00edch khi x\u1eed l\u00fd c\u00e1c microservice\u00a0ho\u1eb7c \u1ee9ng d\u1ee5ng \u0111\u00e1m m\u00e2y, n\u01a1i\u00a0c\u00f3 nhi\u1ec1u kh\u1ea3 n\u0103ng x\u1ea3y ra l\u1ed7i h\u01a1n.</p> <p></p>"},{"location":"ByteByteGo/system-patterns/#cqrs","title":"CQRS","text":"<p>Thi\u1ebft k\u1ebf ti\u1ebfp theo l\u00e0 CQRS (Command\u00a0Query Responsibility Segregation - Ph\u00e2n t\u00e1ch tr\u00e1ch nhi\u1ec7m truy v\u1ea5n l\u1ec7nh). CQRS gi\u1ed1ng nh\u01b0 vi\u1ec7c c\u00f3 m\u1ed9t nh\u00e0 h\u00e0ng v\u1edbi\u00a0c\u00e1c h\u00e0ng \u0111\u1ee3i ri\u00eang bi\u1ec7t \u0111\u1ec3 g\u1ecdi m\u00f3n v\u00e0 nh\u1eadn m\u00f3n.</p> <p>B\u1eb1ng vi\u1ec7c t\u00e1ch ri\u00eang c\u00e1c thao t\u00e1c ghi\u00a0v\u00e0 \u0111\u1ecdc, ta c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng quy m\u00f4 v\u00e0 t\u1ed1i \u01b0u h\u00f3a t\u1eebng thao t\u00e1c m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp.</p> <p>V\u00ed d\u1ee5, m\u1ed9t trang th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed c\u00f3 th\u1ec3 c\u00f3 nhi\u1ec1u\u00a0request \u0111\u1ecdc s\u1ea3n ph\u1ea9m nh\u01b0ng\u00a0\u00edt request ghi \u0111\u1ec3 \u0111\u1eb7t h\u00e0ng h\u01a1n.</p> <p>CQRS cho ph\u00e9p x\u1eed l\u00fd t\u1eebng thao t\u00e1c m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3. Thi\u1ebft k\u1ebf ki\u1ec3u n\u00e0y tr\u1edf n\u00ean hi\u1ec7u qu\u1ea3 trong\u00a0c\u00e1c h\u1ec7 th\u1ed1ng m\u00e0 ho\u1ea1t \u0111\u1ed9ng \u0111\u1ecdc v\u00e0 ghi c\u00f3\u00a0c\u00e1c \u0111\u1eb7c \u0111i\u1ec3m hi\u1ec7u su\u1ea5t kh\u00e1c nhau, v\u1edbi\u00a0c\u00e1c y\u00eau c\u1ea7u v\u1ec1 \u0111\u1ed9 tr\u1ec5 ho\u1eb7c t\u00e0i nguy\u00ean kh\u00e1c nhau.</p> <p></p>"},{"location":"ByteByteGo/system-patterns/#event-sourcing","title":"Event Sourcing","text":"<p>Ti\u1ebfp theo l\u00e0 Event Sourcing. Ta c\u00f3 th\u1ec3 xem Event Sourcing nh\u01b0 vi\u1ec7c ghi nh\u1eadt k\u00fd v\u1ec1 c\u00e1c s\u1ef1 ki\u1ec7n x\u1ea3y ra trong cu\u1ed9c s\u1ed1ng. Thay v\u00ec c\u1eadp nh\u1eadt tr\u1ef1c ti\u1ebfp c\u00e1c b\u1ea3n ghi, ta l\u01b0u c\u00e1c s\u1ef1 ki\u1ec7n \u0111\u1ea1i di\u1ec7n cho c\u00e1c thay \u0111\u1ed5i \u0111\u00e3 x\u1ea3y ra.</p> <p></p> <p>Ph\u01b0\u01a1ng ph\u00e1p n\u00e0y cung c\u1ea5p to\u00e0n b\u1ed9 l\u1ecbch s\u1eed c\u1ee7a\u00a0h\u1ec7 th\u1ed1ng, \u0111\u1ed3ng th\u1eddi cho ph\u00e9p ki\u1ec3m tra v\u00e0 g\u1ee1 l\u1ed7i t\u1ed1t h\u01a1n.</p> <p>Git version control l\u00e0 m\u1ed9t v\u00ed d\u1ee5 hay v\u1ec1 Event Sourcing, trong \u0111\u00f3 m\u1ed7i commit t\u01b0\u1ee3ng tr\u01b0ng cho m\u1ed9t thay \u0111\u1ed5i g\u00ec \u0111\u00f3.</p> <p>V\u1edbi Event Sourcing, ta c\u00f3 th\u1ec3 tri\u1ec3n khai c\u00e1c t\u00ednh n\u0103ng n\u00e2ng cao nh\u01b0 time-travel debugging ho\u1eb7c ph\u00e1t l\u1ea1i c\u00e1c s\u1ef1 ki\u1ec7n v\u1edbi m\u1ee5c \u0111\u00edch ph\u00e2n t\u00edch.</p> <p></p>"},{"location":"ByteByteGo/system-patterns/#leader-election","title":"Leader Election","text":"<p>T\u01b0\u1edfng t\u01b0\u1ee3ng r\u1eb1ng ta c\u00f3 m\u1ed9t l\u1edbp h\u1ecdc g\u1ed3m c\u00e1c h\u1ecdc sinh b\u1ea7u ra m\u1ed9t l\u1edbp tr\u01b0\u1edfng.</p> <p>Trong m\u1ed9t h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n, thi\u1ebft k\u1ebf ki\u1ec3u Leader Election \u0111\u1ea3m b\u1ea3o ch\u1ec9 m\u1ed9t node ch\u1ecbu tr\u00e1ch nhi\u1ec7m v\u1ec1 m\u1ed9t nhi\u1ec7m v\u1ee5 ho\u1eb7c t\u00e0i nguy\u00ean c\u1ee5 th\u1ec3. Khi m\u1ed9t node leader b\u1ecb l\u1ed7i, c\u00e1c node c\u00f2n l\u1ea1i s\u1ebd b\u1ea7u ra m\u1ed9t node leader m\u1edbi.</p> <p>ZooKeeper v\u00e0 etcd s\u1eed d\u1ee5ng thi\u1ebft k\u1ebf n\u00e0y\u00a0\u0111\u1ec3 qu\u1ea3n l\u00fd c\u1ea5u h\u00ecnh ph\u00e2n t\u00e1n.</p> <p>B\u1eb1ng c\u00e1ch c\u00f3 m\u1ed9t leader \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh, ta c\u00f3 th\u1ec3\u00a0tr\u00e1nh xung \u0111\u1ed9t v\u00e0 \u0111\u1ea3m b\u1ea3o\u00a0vi\u1ec7c ra quy\u1ebft \u0111\u1ecbnh nh\u1ea5t qu\u00e1n tr\u00ean to\u00e0n h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n.</p> <p></p>"},{"location":"ByteByteGo/system-patterns/#pub-sub","title":"Pub / Sub","text":"<p>Thi\u1ebft k\u1ebf Publisher / Subscriber (xu\u1ea5t b\u1ea3n / \u0111\u0103ng k\u00fd, vi\u1ebft t\u1eaft l\u00e0 pub/sub) gi\u1ed1ng nh\u01b0 m\u1ed9t d\u1ecbch v\u1ee5 chuy\u1ec3n ph\u00e1t b\u00e1o. Pub/Sub\u00a0gi\u1ed1ng nh\u01b0 m\u1ed9t d\u1ecbch v\u1ee5 chuy\u1ec3n ph\u00e1t b\u00e1o.</p> <p>C\u00e1c publisher ph\u00e1t ra c\u00e1c event m\u00e0\u00a0kh\u00f4ng bi\u1ebft ai s\u1ebd nh\u1eadn c\u00e1c event \u0111\u00f3,\u00a0v\u00e0 c\u00e1c subscriber l\u1eafng nghe\u00a0c\u00e1c event m\u00e0 ch\u00fang quan t\u00e2m.</p> <p></p> <p>Thi\u1ebft n\u00e0y cho ph\u00e9p kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng v\u00e0 t\u00ednh m\u00f4-\u0111un ho\u00e1 t\u1ed1t h\u01a1n.</p> <p>V\u00ed d\u1ee5, Google Cloud Pub/Sub cho ph\u00e9p nh\u1eafn tin kh\u00f4ng \u0111\u1ed3ng b\u1ed9 gi\u1eefa c\u00e1c service, gi\u00fap vi\u1ec7c b\u1ea3o tr\u00ec v\u00e0 m\u1edf r\u1ed9ng c\u00e1c \u1ee9ng d\u1ee5ng ph\u1ee9c t\u1ea1p tr\u1edf n\u00ean d\u1ec5 d\u00e0ng h\u01a1n.</p> <p>C\u00e1c h\u1ec7 th\u1ed1ng Pub/Sub r\u1ea5t ph\u00f9 h\u1ee3p v\u1edbi c\u00e1c tr\u01b0\u1eddng h\u1ee3p\u00a0khi ta c\u1ea7n ph\u1ed5 bi\u1ebfn c\u00e1c thay \u0111\u1ed5i ho\u1eb7c c\u1eadp nh\u1eadt\u00a0tr\u00ean nhi\u1ec1u th\u00e0nh ph\u1ea7n, ch\u1eb3ng h\u1ea1n nh\u01b0 c\u1eadp nh\u1eadt\u00a0h\u1ed3 s\u01a1 c\u1ee7a ng\u01b0\u1eddi d\u00f9ng tr\u00ean c\u00e1c service kh\u00e1c nhau.</p> <p></p>"},{"location":"ByteByteGo/system-patterns/#sharding","title":"Sharding","text":"<p>Sharding gi\u1ed1ng nh\u01b0 vi\u1ec7c chia m\u1ed9t chi\u1ebfc b\u00e1nh pizza l\u1edbn th\u00e0nh\u00a0nh\u1eefng l\u00e1t nh\u1ecf h\u01a1n \u0111\u1ec3 d\u1ec5 x\u1eed l\u00fd h\u01a1n.</p> <p>\u0110\u00e2y l\u00e0 m\u1ed9t k\u1ef9 thu\u1eadt ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u tr\u00ean nhi\u1ec1u node trong m\u1ed9t h\u1ec7 th\u1ed1ng.</p> <p>N\u00f3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t v\u00e0 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng.</p> <p>M\u1ed7i shard ch\u1ee9a m\u1ed9t t\u1eadp h\u1ee3p con d\u1eef li\u1ec7u, gi\u00fap gi\u1ea3m t\u1ea3i cho b\u1ea5t k\u1ef3 node n\u00e0o.</p> <p></p> <p>C\u00e1c c\u01a1 s\u1edf d\u1eef li\u1ec7u nh\u01b0 MongoDB v\u00e0 Cassandra s\u1eed d\u1ee5ng sharding\u00a0\u0111\u1ec3 x\u1eed l\u00fd l\u01b0\u1ee3ng l\u1edbn d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p>Sharding c\u0169ng c\u00f3 th\u1ec3 gi\u00fap ta\u00a0\u0111\u1ea1t \u0111\u01b0\u1ee3c data locality t\u1ed1t h\u01a1n,\u00a0gi\u1ea3m \u0111\u1ed9 tr\u1ec5 c\u1ee7a m\u1ea1ng v\u00e0\u00a0t\u0103ng t\u1ed1c th\u1ef1c thi truy v\u1ea5n.</p> <p></p>"},{"location":"ByteByteGo/system-patterns/#bonus","title":"Bonus","text":"<p>Trong ph\u1ea7n n\u00e0y ta s\u1ebd n\u00f3i v\u1ec1 thi\u1ebft k\u1ebf ki\u1ec3u Strangler Fig.</p> <p>Thi\u1ebft k\u1ebf n\u00e0y \u0111\u01b0\u1ee3c l\u1ea5y c\u1ea3m h\u1ee9ng\u00a0t\u1eeb c\u00e2y sung b\u00f3p c\u1ed5,\u00a0l\u00e0 c\u00e2y m\u1ecdc xung quanh c\u00e1c c\u00e2y kh\u00e1c\u00a0v\u00e0 cu\u1ed1i c\u00f9ng thay th\u1ebf ch\u00fang.</p> <p></p> <p>Trong ph\u1ea7n m\u1ec1m, thi\u1ebft k\u1ebf Strangler Fig l\u00e0 m\u1ed9t ph\u01b0\u01a1ng ph\u00e1p\u00a0\u0111\u1ec3 d\u1ea7n d\u1ea7n thay th\u1ebf c\u00e1c h\u1ec7 th\u1ed1ng c\u0169 b\u1eb1ng c\u00e1c h\u1ec7 th\u1ed1ng m\u1edbi.</p> <p>Thay v\u00ec th\u1ef1c hi\u1ec7n migrate th\u1eb3ng sang h\u1ec7 th\u1ed1ng m\u1edbi m\u1ed9t c\u00e1ch \u0111\u1ea7y r\u1ee7i ro, ta c\u00f3 th\u1ec3 thay th\u1ebf t\u1eebng ph\u1ea7n c\u1ee7a\u00a0h\u1ec7 th\u1ed1ng c\u0169 b\u1eb1ng c\u00e1c th\u00e0nh ph\u1ea7n m\u1edbi.</p> <p>Thi\u1ebft n\u00e0y c\u00f3 th\u1ec3 gi\u00fap ta qu\u1ea3n l\u00fd r\u1ee7i ro v\u00e0\u00a0s\u1ef1 ph\u1ee9c t\u1ea1p li\u00ean quan \u0111\u1ebfn vi\u1ec7c migrate h\u1ec7 th\u1ed1ng.</p> <p></p>"},{"location":"ByteByteGo/top-redis-use-cases/","title":"Top 5 \u1ee9ng d\u1ee5ng c\u1ee7a Redis","text":""},{"location":"ByteByteGo/top-redis-use-cases/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 5 Redis Use Cases</p>"},{"location":"ByteByteGo/top-redis-use-cases/#redis-la-gi","title":"Redis l\u00e0 g\u00ec?","text":"<p>Redis l\u00e0 m\u1ed9t d\u1ea1ng c\u01a1 s\u1edf d\u1eef li\u1ec7u l\u01b0u tr\u1eef data trong b\u1ed9 nh\u1edb. N\u00f3 th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng nh\u01b0 l\u00e0 cache. N\u00f3 h\u1ed7 tr\u1ee3 nhi\u1ec1u d\u1ea1ng c\u1ea5u tr\u00fac d\u1eef li\u1ec7u kh\u00e1c nhau, nh\u01b0 string, hash, list, set v\u00e0 sorted set.</p> <p>Redis n\u1ed5i ti\u1ebfng v\u00ec t\u1ed1c \u0111\u1ed9 c\u1ef1c cao. V\u00e0 v\u00ec sao l\u1ea1i nh\u01b0 v\u1eady th\u00ec \u0111\u00e3 c\u00f3 m\u1ed9t b\u00e0i vi\u1ebft n\u00f3i v\u1ec1 \u0111i\u1ec1u n\u00e0y r\u1ed3i.</p>"},{"location":"ByteByteGo/top-redis-use-cases/#cache","title":"Cache","text":"<p>\u1ee8ng d\u1ee5ng \u0111\u1ea7u ti\u00ean c\u1ee7a Redis d\u0129 nhi\u00ean l\u00e0 l\u01b0u t\u1ea1m data \u0111\u1ec3 l\u00e0m cho \u1ee9ng d\u1ee5ng web nhanh h\u01a1n. V\u1edbi \u1ee9ng d\u1ee5ng n\u00e0y, Redis l\u01b0u tr\u1eef c\u00e1c data \u0111\u01b0\u1ee3c request th\u01b0\u1eddng xuy\u00ean trong b\u1ed9 nh\u1edb. N\u00f3 cho ph\u00e9p web server tr\u1ea3 v\u1ec1 c\u00e1c data n\u00e0y m\u1ed9t c\u00e1ch nhanh ch\u00f3ng. \u0110i\u1ec1u n\u00e0y l\u00e0m gi\u1ea3m t\u1ea3i l\u00ean database v\u00e0 c\u1ea3i thi\u1ec7n th\u1eddi gian tr\u1ea3 v\u1ec1 c\u1ee7a \u1ee9ng d\u1ee5ng.</p> <p></p> <p>V\u1edbi quy m\u00f4 l\u1edbn h\u01a1n, cache \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i trong m\u1ed9t c\u1ee5m c\u00e1c Redis server. Sharding l\u00e0 m\u1ed9t k\u0129 thu\u1eadt ph\u1ed5 bi\u1ebfn \u0111\u1ec3 ph\u00e2n ph\u1ed1i t\u1ea3i \u0111\u1ec1u cho c\u00e1c server trong c\u1ee5m.</p> <p></p> <p>M\u1ed9t s\u1ed1 \u1ee9ng d\u1ee5ng nh\u1ecf kh\u00e1c khi d\u00f9ng distributed Redis cache c\u00f3 vi\u1ec7c set TTL (Time-To-Live - th\u1eddi gian s\u1ed1ng) v\u00e0 x\u1eed l\u00fd thundering herd (Thundering herd x\u1ea3y ra khi c\u00f3 m\u1ed9t l\u01b0\u1ee3ng l\u1edbn process hay thread \u0111\u1ee3i m\u1ed9t event n\u00e0o \u0111\u00f3 nh\u01b0ng ch\u1ec9 c\u00f3 m\u1ed9t process \u0111\u01b0\u1ee3c x\u1eed l\u00fd event \u0111\u00f3 th\u00f4i. Khi c\u00e1c process \u0111\u01b0\u1ee3c b\u1eadt, ch\u00fang s\u1ebd gi\u00e0nh nhau \u0111\u1ec3 x\u1eed l\u00fd event. C\u00e1c process n\u00e0y s\u1ebd tranh nhau t\u00e0i nguy\u00ean, c\u00f3 th\u1ec3 l\u00e0m treo m\u00e1y).</p> <p></p>"},{"location":"ByteByteGo/top-redis-use-cases/#session-data","title":"Session Data","text":"<p>\u1ee8ng d\u1ee5ng ti\u1ebfp theo l\u00e0 khi d\u00f9ng Redis nh\u01b0 m\u1ed9t n\u01a1i ch\u1ee9a session. N\u00f3 cho ph\u00e9p chia s\u1ebb session data gi\u1eefa c\u00e1c stateless server. Khi m\u1ed9t user \u0111\u0103ng nh\u1eadp v\u00e0o m\u1ed9t \u1ee9ng d\u1ee5ng web, session data s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u v\u00e0o Redis, c\u00f9ng v\u1edbi session ID duy nh\u1ea5t \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 cho client d\u01b0\u1edbi d\u1ea1ng cookie. Khi user g\u1eedi request l\u00ean cho \u1ee9ng d\u1ee5ng, session ID s\u1ebd \u0111\u01b0\u1ee3c l\u1ed3ng v\u00e0o request, v\u00e0 server s\u1ebd l\u1ea5y session data t\u1eeb Redis v\u1edbi ID n\u00e0y. L\u01b0u \u00fd r\u1eb1ng Redis l\u00e0 in-memory database, n\u00ean session data l\u01b0u trong Redis s\u1ebd b\u1ecb m\u1ea5t n\u1ebfu Redis server kh\u1edfi \u0111\u1ed9ng l\u1ea1i.</p> <p></p>"},{"location":"ByteByteGo/top-redis-use-cases/#replication","title":"Replication","text":"<p>M\u1eb7c d\u00f9 Redis cung c\u1ea5p t\u00ednh l\u00e2u d\u00e0i cho d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u v\u1edbi c\u00e1c l\u1ef1a ch\u1ecdn nh\u01b0 snapshot v\u00e0 AOF (Append-Only File), th\u1ee9 c\u00f3 th\u1ec3 gi\u00fap ta l\u01b0u session data v\u00e0o \u1ed5 c\u1ee9ng v\u00e0 reload l\u1ea1i n\u00f3 v\u00e0o memory n\u1ebfu kh\u1edfi \u0111\u1ed9ng l\u1ea1i server, c\u00e1c l\u1ef1a ch\u1ecdn n\u00e0y th\u01b0\u1eddng m\u1ea5t r\u1ea5t nhi\u1ec1u th\u1eddi gian \u0111\u1ec3 \u0111\u01b0a d\u1eef li\u1ec7u t\u1eeb \u1ed5 c\u1ee9ng v\u00e0o memory \u0111\u1ec3 c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng trong th\u1ef1c t\u1ebf. Trong nhi\u1ec1u tr\u01b0\u1eddng h\u1ee3p, replication th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng h\u01a1n. Data s\u1ebd \u0111\u01b0\u1ee3c sao ch\u00e9p v\u00e0o m\u1ed9t b\u1ea3n sao Redis. Trong tr\u01b0\u1eddng h\u1ee3p Redis ch\u00ednh b\u1ecb crash, b\u1ea3n sao s\u1ebd \u0111\u01b0\u1ee3c \u0111\u01b0a v\u00e0o thay th\u1ebf b\u1ea3n g\u1ed1c \u0111\u1ec3 ti\u1ebfp t\u1ee5c c\u00f4ng vi\u1ec7c.</p> <p></p> <p></p>"},{"location":"ByteByteGo/top-redis-use-cases/#distributed-lock","title":"Distributed Lock","text":"<p>Distributed Lock (kho\u00e1) \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng khi nhi\u1ec1u node trong \u1ee9ng d\u1ee5ng c\u1ea7n truy c\u1eadp v\u00e0o m\u1ed9t s\u1ed1 t\u00e0i nguy\u00ean \u0111\u01b0\u1ee3c chia s\u1ebb. </p> <p></p> <p>Redis \u0111\u01b0\u1ee3c d\u00f9ng l\u00e0m distributed lock v\u1edbi c\u00e1c l\u1ec7nh c\u00f3 t\u00ednh atomic nh\u01b0 <code>SETNX</code> (<code>SET if Not eXists</code>). N\u00f3 cho ph\u00e9p ng\u01b0\u1eddi g\u1ecdi set m\u1ed9t key ch\u1ec9 khi key \u0111\u00f3 ch\u01b0a t\u1ed3n t\u1ea1i trong Redis.</p> <p>N\u00f3 ho\u1ea1t \u0111\u1ed9ng nh\u01b0 sau: </p> <ul> <li>Client 1 th\u1eed l\u1ea5y lock b\u1eb1ng c\u00e1ch set key v\u1edbi m\u1ed9t gi\u00e1 tr\u1ecb duy nh\u1ea5t n\u00e0o \u0111\u00f3 v\u00e0 th\u1eddi gian s\u1ed1ng v\u1edbi l\u1ec7nh <code>SETNX</code> (<code>SETNX lock 1234abcd EX 3</code>). </li> <li>N\u1ebfu key kh\u00f4ng t\u1ed3n t\u1ea1i trong Redis, <code>SETNX</code> s\u1ebd tr\u1ea3 v\u1ec1 1, cho bi\u1ebft r\u1eb1ng lock \u0111\u00e3 \u0111\u01b0\u1ee3c l\u1ea5y b\u1edfi client 1. Client 1 xong vi\u1ec7c v\u00e0 th\u1ea3 lock ra b\u1eb1ng c\u00e1ch xo\u00e1 c\u00e1i key \u0111\u00f3. </li> <li>N\u1ebfu key v\u1eabn c\u00f2n \u0111ang t\u1ed3n t\u1ea1i trong Redis, <code>SETNX</code> tr\u1ea3 v\u1ec1 0, cho bi\u1ebft l\u00e0 lock \u0111\u00e3 \u0111\u01b0\u1ee3c l\u1ea5y b\u1edfi m\u1ed9t client kh\u00e1c. Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, client 1 \u0111\u1ee3i v\u00e0 th\u1eed <code>SETNX</code> l\u1ea1i cho \u0111\u1ebfn khi lock \u0111\u01b0\u1ee3c th\u1ea3 b\u1edfi client kia \u0111\u00f3.</li> </ul> <p></p> <p>L\u01b0u \u00fd r\u1eb1ng ph\u1ea7n c\u00e0i \u0111\u1eb7t n\u00e0y c\u00f3 th\u1ec3 \u0111\u1ee7 t\u1ed1t v\u1edbi nhi\u1ec1u use case, nh\u01b0ng v\u1eabn sinh ra l\u1ed7i. Trong th\u1ef1c t\u1ebf, c\u00f3 r\u1ea5t nhi\u1ec1u th\u01b0 vi\u1ec7n Redis cung c\u1ea5p cho ch\u00fang ta nhi\u1ec1u ki\u1ec3u c\u00e0i \u0111\u1eb7t distributed lock ch\u1ea5t l\u01b0\u1ee3ng cao nh\u01b0 sau:</p> <p></p>"},{"location":"ByteByteGo/top-redis-use-cases/#rate-limiter","title":"Rate Limiter","text":"<p>Rate Limiter l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 \u0111\u1ec3 ki\u1ec3m so\u00e1t s\u1ed1 l\u01b0\u1ee3ng request \u0111\u1ebfn v\u1edbi server trong m\u1ed9t kho\u1ea3ng th\u1eddi gian. Redis c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng nh\u01b0 m\u1ed9t rate limiter b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng c\u00e1c l\u1ec7nh t\u0103ng b\u1ed9 \u0111\u1ebfm v\u00e0 thi\u1ebft l\u1eadp th\u1eddi gian s\u1ed1ng cho c\u00e1c b\u1ed9 \u0111\u1ebfm \u0111\u00f3.</p> <p></p> <p>M\u1ed9t thu\u1eadt to\u00e1n rate limiter \u0111\u01a1n gi\u1ea3n ho\u1ea1t \u0111\u1ed9ng nh\u01b0 sau: V\u1edbi m\u1ed9t request \u0111\u1ebfn server, IP c\u1ee7a request hay user ID \u0111\u01b0\u1ee3c d\u00f9ng l\u00e0m key. S\u1ed1 request c\u1ee7a c\u00e1i key \u0111\u00f3 \u0111\u01b0\u1ee3c t\u0103ng l\u00ean nh\u1edd l\u1ec7nh <code>INCR</code> trong Redis. Bi\u1ebfn \u0111\u1ebfm hi\u1ec7n t\u1ea1i \u0111\u01b0\u1ee3c so v\u1edbi gi\u1edbi h\u1ea1n (rate limit). N\u1ebfu v\u1eabn trong gi\u1edbi h\u1ea1n, request \u0111\u01b0\u1ee3c cho ti\u1ebfp t\u1ee5c x\u1eed l\u00fd, c\u00f2n n\u1ebfu kh\u00f4ng th\u00ec request b\u1ecb t\u1eeb ch\u1ed1i.</p> <p></p> <p></p> <p>C\u00e1c key \u0111\u01b0\u1ee3c set \u0111\u1ec3 h\u1ebft h\u1ea1n sau m\u1ed9t kho\u1ea3ng th\u1eddi gian, v\u00ed d\u1ee5 nh\u01b0 m\u1ed9t ph\u00fat, \u0111\u1ec3 reset bi\u1ebfn \u0111\u1ebfm cho kho\u1ea3ng th\u1eddi gian ti\u1ebfp theo. </p> <p></p> <p>M\u1ed9t s\u1ed1 thu\u1eadt to\u00e1n rate limiter ph\u1ee9c t\u1ea1p h\u01a1n nh\u01b0 Leaky Bucket c\u0169ng c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c c\u00e0i \u0111\u1eb7t b\u1eb1ng Redis.</p> <p></p>"},{"location":"ByteByteGo/top-redis-use-cases/#gaming-leaderboard","title":"Gaming Leaderboard","text":"<p>V\u1edbi m\u1ed9t s\u1ed1 game v\u1eeba v\u00e0 nh\u1ecf, Redis cung c\u1ea5p kh\u1ea3 n\u0103ng \u0111\u1ec3 c\u00e1c l\u1eadp tr\u00ecnh vi\u00ean t\u1ea1o ra nhi\u1ec1u lo\u1ea1i b\u1ea3ng x\u1ebfp h\u1ea1ng kh\u00e1c nhau. Sorted Set l\u00e0 m\u1ed9t d\u1ea1ng c\u1ea5u tr\u00fac d\u1eef li\u1ec7u c\u00f3 th\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y. Sorted Set l\u00e0 m\u1ed9t t\u1eadp c\u00e1c ph\u1ea7n t\u1eed kh\u00e1c nhau \u0111\u00f4i m\u1ed9t, v\u1edbi m\u1ed9t tr\u1ecdng s\u1ed1 \u0111\u01b0\u1ee3c g\u00e1n cho m\u1ed7i ph\u1ea7n t\u1eed. C\u00e1c ph\u1ea7n t\u1eed \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp theo tr\u1ecdng s\u1ed1 n\u00e0y. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p vi\u1ec7c l\u1ea5y nhanh c\u00e1c ph\u1ea7n t\u1eed b\u1eb1ng tr\u1ecdng s\u1ed1 trong th\u1eddi gian \\(log\\).</p> <p></p> <p></p>"},{"location":"ByteByteGo/vertical-vs-horizontal-scaling/","title":"Vertical vs. Horizontal Scaling","text":""},{"location":"ByteByteGo/vertical-vs-horizontal-scaling/#nguon","title":"Ngu\u1ed3n","text":"<p> Vertical Vs Horizontal Scaling: Key Differences You Should Know</p>"},{"location":"ByteByteGo/vertical-vs-horizontal-scaling/#vertical-scaling-nang-cap-scaling-theo-chieu-doc","title":"Vertical Scaling (n\u00e2ng c\u1ea5p - scaling theo chi\u1ec1u d\u1ecdc)","text":"<p>Scaling d\u1ecdc (vertical scaling) c\u00f3 ngh\u0129a l\u00e0 th\u00eam s\u1ee9c m\u1ea1nh v\u00e0o server hi\u1ec7n t\u1ea1i, c\u00f3 th\u1ec3 bao g\u1ed3m vi\u1ec7c t\u0103ng th\u00eam CPU, RAM, \u1ed5 c\u1ee9ng, ho\u1eb7c b\u0103ng th\u00f4ng m\u1ea1ng. V\u00ed d\u1ee5, n\u1ebfu c\u01a1 s\u1edf d\u1eef li\u1ec7u \u0111\u00e1m m\u00e2y c\u1ee7a b\u1ea1n \u0111\u1ea1t \u0111\u1ebfn gi\u1edbi h\u1ea1n dung l\u01b0\u1ee3ng tr\u00ean m\u1ed9t server 8-core ban \u0111\u1ea7u, b\u1ea1n c\u00f3 th\u1ec3 n\u00e2ng c\u1ea5p l\u00ean m\u1ed9t server 32-core v\u1edbi \u1ed5 SSD nhanh h\u01a1n, 96GB RAM v\u00e0 m\u1ea1ng 10 gigabit. Gi\u1edd n\u00f3 c\u00f3 th\u1ec3 ch\u1ecbu t\u1ea3i t\u1ed1t h\u01a1n.</p> <p></p> <p>\u01afu \u0111i\u1ec3m:</p> <ul> <li>\u0110\u01a1n gi\u1ea3n \u0111\u1ec3 th\u1ef1c hi\u1ec7n: N\u00e2ng c\u1ea5p ph\u1ea7n c\u1ee9ng hi\u1ec7n c\u00f3 d\u1ec5 h\u01a1n so v\u1edbi vi\u1ec7c thi\u1ebft l\u1eadp server m\u1edbi.</li> <li>Ti\u1ebft ki\u1ec7m chi ph\u00ed ng\u1eafn h\u1ea1n: B\u1ea1n ch\u1ec9 tr\u1ea3 ti\u1ec1n cho c\u00e1c t\u00e0i nguy\u00ean b\u1ed5 sung c\u1ea7n thi\u1ebft.</li> <li>T\u1ea5t c\u1ea3 ch\u1ea1y tr\u00ean m\u1ed9t m\u00e1y, gi\u00fap b\u1ea3o tr\u00ec v\u00e0 n\u00e2ng c\u1ea5p d\u1ec5 d\u00e0ng h\u01a1n.</li> </ul> <p>Nh\u01b0\u1ee3c \u0111i\u1ec3m:</p> <ul> <li>Single point of failure: N\u1ebfu server g\u1eb7p s\u1ef1 c\u1ed1, m\u1ecdi th\u1ee9 \u0111\u1ec1u b\u1ecb ng\u01b0ng tr\u1ec7.</li> <li>Gi\u1edbi h\u1ea1n m\u1edf r\u1ed9ng: C\u00f3 gi\u1edbi h\u1ea1n v\u1eadt l\u00fd v\u1ec1 vi\u1ec7c m\u1ed9t server c\u00f3 th\u1ec3 m\u1ea1nh \u0111\u1ebfn \u0111\u00e2u.</li> <li>Chi ph\u00ed cao khi quy m\u00f4 l\u1edbn: N\u00e2ng c\u1ea5p ph\u1ea7n c\u1ee9ng cao c\u1ea5p c\u00f3 th\u1ec3 r\u1ea5t \u0111\u1eaft \u0111\u1ecf.</li> </ul>"},{"location":"ByteByteGo/vertical-vs-horizontal-scaling/#horizontal-scaling-mo-rong-scaling-theo-chieu-ngang","title":"Horizontal Scaling (m\u1edf r\u1ed9ng - scaling theo chi\u1ec1u ngang)","text":"<p>Scaling ngang (horizontal scaling) l\u00e0 th\u00eam nhi\u1ec1u server v\u00e0o h\u1ea1 t\u1ea7ng v\u00e0 ph\u00e2n ph\u1ed1i kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c gi\u1eefa ch\u00fang, c\u00f2n \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 \"scale out\". Thay v\u00ec d\u1ed3n t\u1ea5t c\u1ea3 v\u00e0o m\u1ed9t m\u00e1y m\u1ea1nh, b\u1ea1n c\u00f3 th\u1ec3 tr\u1ea3i r\u1ed9ng kh\u1ea3 n\u0103ng tr\u00ean ba m\u00e1y 8-core. V\u1edbi s\u1ef1 ph\u1ed5 bi\u1ebfn c\u1ee7a d\u1ecbch v\u1ee5 \u0111\u00e1m m\u00e2y c\u00f3 auto-scaling v\u00e0 serverless computing, c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0y \u0111\u00e3 \u0111\u01a1n gi\u1ea3n h\u00f3a vi\u1ec7c m\u1edf r\u1ed9ng cho m\u1ed9t s\u1ed1 kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c.</p> <p></p> <p>\u01afu \u0111i\u1ec3m:</p> <ul> <li>T\u00ednh s\u1eb5n s\u00e0ng cao: H\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n cung c\u1ea5p kh\u1ea3 n\u0103ng d\u1ef1 ph\u00f2ng v\u1edbi c\u00e1c server thay th\u1ebf v\u00e0 c\u01a1 ch\u1ebf chuy\u1ec3n \u0111\u1ed5i d\u1ef1 ph\u00f2ng.</li> <li>D\u1ef1 \u0111o\u00e1n tr\u01b0\u1edbc kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng: B\u1ea1n c\u00f3 th\u1ec3 th\u00eam nhi\u1ec1u server khi c\u1ea7n, m\u1edf r\u1ed9ng kh\u1ea3 n\u0103ng theo nhu c\u1ea7u.</li> <li>C\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t: Ph\u00e2n ph\u1ed1i kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c gi\u00fap c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t t\u1ed5ng th\u1ec3.</li> <li>Ti\u1ebft ki\u1ec7m chi ph\u00ed d\u00e0i h\u1ea1n: Ph\u00e2n ph\u1ed1i c\u00f4ng vi\u1ec7c tr\u00ean nhi\u1ec1u m\u00e1y ch\u1ee7 hi\u1ec7u qu\u1ea3 h\u01a1n c\u00f3 th\u1ec3 r\u1ebb h\u01a1n so v\u1edbi vi\u1ec7c n\u00e2ng c\u1ea5p ph\u1ea7n c\u1ee9ng cao c\u1ea5p.</li> </ul> <p>Nh\u01b0\u1ee3c \u0111i\u1ec3m:</p> <ul> <li>Ph\u1ee9c t\u1ea1p h\u01a1n: Thi\u1ebft l\u1eadp v\u00e0 qu\u1ea3n l\u00fd h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n ph\u1ee9c t\u1ea1p h\u01a1n qu\u1ea3n l\u00fd m\u1ed9t m\u00e1y ch\u1ee7 \u0111\u01a1n l\u1ebb, \u0111\u1eb7c bi\u1ec7t l\u00e0 \u0111\u1ed1i v\u1edbi c\u00e1c h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i nh\u01b0 c\u01a1 s\u1edf d\u1eef li\u1ec7u.</li> <li>Chi ph\u00ed ban \u0111\u1ea7u cao h\u01a1n: Vi\u1ec7c ph\u00e2n m\u1ea3nh c\u01a1 s\u1edf d\u1eef li\u1ec7u ho\u1eb7c \u1ee9ng d\u1ee5ng \u0111\u1ec3 ph\u00e2n ph\u1ed1i c\u00f4ng vi\u1ec7c c\u00f3 th\u1ec3 ph\u1ee9c t\u1ea1p v\u00e0 y\u00eau c\u1ea7u n\u1ed7 l\u1ef1c ph\u00e1t tri\u1ec3n \u0111\u00e1ng k\u1ec3. \u0110\u1ea3m b\u1ea3o t\u00ednh nh\u1ea5t qu\u00e1n d\u1eef li\u1ec7u gi\u1eefa c\u00e1c m\u00e1y ch\u1ee7 c\u1ea7n c\u01a1 ch\u1ebf sao ch\u00e9p d\u1eef li\u1ec7u, t\u0103ng th\u00eam g\u00e1nh n\u1eb7ng v\u00e0 chi ph\u00ed v\u1eadn h\u00e0nh. Vi\u1ec7c ph\u00e2n ph\u1ed1i l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp hi\u1ec7u qu\u1ea3 tr\u00ean nhi\u1ec1u m\u00e1y ch\u1ee7 y\u00eau c\u1ea7u m\u1ed9t gi\u1ea3i ph\u00e1p c\u00e2n b\u1eb1ng t\u1ea3i m\u1ea1nh m\u1ebd, c\u00f3 th\u1ec3 t\u0103ng th\u00eam chi ph\u00ed ph\u1ea7n c\u1ee9ng ho\u1eb7c ph\u1ea7n m\u1ec1m cho h\u1ec7 th\u1ed1ng c\u1ee7a b\u1ea1n.</li> </ul>"},{"location":"ByteByteGo/vertical-vs-horizontal-scaling/#vay-chon-cai-nao","title":"V\u1eady ch\u1ecdn c\u00e1i n\u00e0o?","text":"<p>V\u1eady n\u00ean ch\u1ecdn scaling d\u1ecdc hay scaling ngang? C\u00e2u tr\u1ea3 l\u1eddi t\u00f9y thu\u1ed9c v\u00e0o nhi\u1ec1u y\u1ebfu t\u1ed1:</p> <ul> <li>Ng\u00e2n s\u00e1ch: Scaling d\u1ecdc th\u01b0\u1eddng r\u1ebb h\u01a1n trong ng\u1eafn h\u1ea1n, nh\u01b0ng scaling ngang c\u00f3 th\u1ec3 hi\u1ec7u qu\u1ea3 h\u01a1n v\u1ec1 chi ph\u00ed trong d\u00e0i h\u1ea1n.</li> <li>Kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c: N\u1ebfu kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c c\u1ee7a b\u1ea1n kh\u00f4ng \u1ed5n \u0111\u1ecbnh ho\u1eb7c t\u0103ng \u0111\u1ed9t bi\u1ebfn, scaling ngang c\u00f3 th\u1ec3 gi\u00fap b\u1ea1n x\u1eed l\u00fd nhu c\u1ea7u \u0111\u1ec9nh \u0111i\u1ec3m.</li> <li>Y\u00eau c\u1ea7u hi\u1ec7u su\u1ea5t: N\u1ebfu \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n y\u00eau c\u1ea7u hi\u1ec7u su\u1ea5t cao, scaling ngang c\u00f3 th\u1ec3 gi\u00fap ph\u00e2n ph\u1ed1i t\u1ea3i v\u00e0 c\u1ea3i thi\u1ec7n kh\u1ea3 n\u0103ng ph\u1ea3n h\u1ed3i.</li> </ul> <p>M\u1ed9t y\u1ebfu t\u1ed1 quan tr\u1ecdng kh\u00e1c l\u00e0 chi ph\u00ed ph\u00e1t tri\u1ec3n v\u00e0 v\u1eadn h\u00e0nh b\u1ed5 sung n\u1ebfu \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n y\u00eau c\u1ea7u c\u00e1c c\u01a1 ch\u1ebf ph\u1ee9c t\u1ea1p nh\u01b0 sharding.</p> <p>D\u00f9 ch\u1ecdn ph\u01b0\u01a1ng ph\u00e1p n\u00e0o, h\u00e3y nh\u1edb r\u1eb1ng m\u1edf r\u1ed9ng h\u1ea1 t\u1ea7ng l\u00e0 c\u1ea3 m\u1ed9t h\u00e0nh tr\u00ecnh, kh\u00f4ng ph\u1ea3i l\u00e0 \u0111\u00edch \u0111\u1ebfn. Nhu c\u1ea7u h\u1ea1 t\u1ea7ng c\u1ee7a b\u1ea1n s\u1ebd thay \u0111\u1ed5i theo th\u1eddi gian khi doanh nghi\u1ec7p ph\u00e1t tri\u1ec3n, v\u00ec v\u1eady h\u00e3y s\u1eb5n s\u00e0ng \u0111i\u1ec1u ch\u1ec9nh v\u00e0 thay \u0111\u1ed5i chi\u1ebfn l\u01b0\u1ee3c m\u1edf r\u1ed9ng c\u1ee7a m\u00ecnh.</p>"},{"location":"ByteByteGo/webhooks/","title":"Nh\u1eefng \u0111i\u1ec1u c\u1ea7n bi\u1ebft v\u1ec1 Webhook","text":""},{"location":"ByteByteGo/webhooks/#nguon","title":"Ngu\u1ed3n","text":"<p> Top 3 Things You Should Know About Webhooks!</p>"},{"location":"ByteByteGo/webhooks/#tinh-huong","title":"T\u00ecnh hu\u1ed1ng","text":"<p>H\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng b\u1ea1n c\u00f3 m\u1ed9t website th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed. Kh\u00e1ch c\u1ee7a b\u1ea1n h\u00e0o h\u1ee9ng mua s\u1eb5m tr\u00ean trang, th\u00eam \u0111\u1ed3 v\u00e0o gi\u1ecf h\u00e0ng, b\u1ea5m \u0111\u1eb7t h\u00e0ng. C\u00e1c request n\u00e0y \u0111\u01b0\u1ee3c g\u1eedi qua API gateway \u0111\u1ebfn Order Service, sau \u0111\u00f3 chuy\u1ec3n \u0111\u1ebfn Payment Service \u0111\u1ec3 x\u1eed l\u00fd giao d\u1ecbch. \u0110\u00e2y l\u00e0 l\u00fac Payment Service Provider (PSP) b\u00ean ngo\u00e0i, nh\u01b0 Stripe, b\u1eaft \u0111\u1ea7u tham gia.</p> <p></p> <p>V\u1eady l\u00e0m sao Stripe giao ti\u1ebfp v\u1edbi website c\u1ee7a b\u1ea1n \u0111\u1ec3 x\u00e1c nh\u1eadn thanh to\u00e1n? Tr\u01b0\u1edbc \u0111\u00e2y, ph\u01b0\u01a1ng ph\u00e1p ph\u1ed5 bi\u1ebfn l\u00e0 short polling. N\u00f3 gi\u1ed1ng nh\u01b0 vi\u1ec7c li\u00ean t\u1ee5c h\u1ecfi: \"Xong ch\u01b0a? Gi\u1edd sao?\". Payment Service s\u1ebd ki\u1ec3m tra v\u1edbi Stripe li\u00ean t\u1ee5c cho \u0111\u1ebfn khi nh\u1eadn \u0111\u01b0\u1ee3c x\u00e1c nh\u1eadn. Tuy nhi\u00ean, short polling ti\u00eau t\u1ed1n t\u00e0i nguy\u00ean v\u00ec ph\u1ea3i g\u1eedi request li\u00ean t\u1ee5c.</p> <p></p> <p>Long polling l\u00e0 phi\u00ean b\u1ea3n ki\u00ean nh\u1eabn h\u01a1n c\u1ee7a short polling. Thay v\u00ec h\u1ecfi li\u00ean t\u1ee5c, server gi\u1eef y\u00eau c\u1ea7u m\u1edf v\u00e0 ch\u1ec9 ph\u1ea3n h\u1ed3i khi c\u00f3 th\u00f4ng tin m\u1edbi. M\u1eb7c d\u00f9 hi\u1ec7u qu\u1ea3 h\u01a1n, nh\u01b0ng v\u1eabn t\u1ed1n t\u00e0i nguy\u00ean v\u00ec server ph\u1ea3i duy tr\u00ec k\u1ebft n\u1ed1i ch\u1edd.</p> <p></p> <p>Gi\u1edd \u0111\u1ebfn webhooks. Thay v\u00ec y\u00eau c\u1ea7u Stripe li\u00ean t\u1ee5c, b\u1ea1n ch\u1ec9 c\u1ea7n n\u00f3i: \"G\u1eedi k\u1ebft qu\u1ea3 qua c\u00e1i URL n\u00e0y cho t\u00f4i khi c\u00f3 nh\u00e9\". Khi thanh to\u00e1n ho\u00e0n t\u1ea5t, Stripe s\u1ebd t\u1ef1 \u0111\u1ed9ng g\u1eedi c\u1eadp nh\u1eadt \u0111\u1ebfn URL c\u1ee7a b\u1ea1n. Kh\u00f4ng c\u00f2n l\u00e3ng ph\u00ed t\u00e0i nguy\u00ean n\u1eefa.</p> <p></p> <p>M\u1ed9t s\u1ed1 m\u1eb9o hay khi s\u1eed d\u1ee5ng webhooks:</p> <ul> <li>C\u01a1 ch\u1ebf d\u1ef1 ph\u00f2ng b\u1eb1ng polling. Trong tr\u01b0\u1eddng h\u1ee3p server webhook kh\u00f4ng ph\u1ea3n h\u1ed3i, s\u1eed d\u1ee5ng polling \u0111\u1ecbnh k\u1ef3 \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o kh\u00f4ng b\u1ecf l\u1ee1 c\u00e1c c\u1eadp nh\u1eadt quan tr\u1ecdng.</li> </ul> <p></p> <ul> <li>B\u1ea3o m\u1eadt v\u1edbi secret v\u00e0 tokens. Ch\u1ec9 cho ph\u00e9p c\u00e1c request c\u00f3 x\u00e1c th\u1ef1c truy c\u1eadp v\u00e0o endpoint webhook c\u1ee7a b\u1ea1n \u0111\u1ec3 tr\u00e1nh vi\u1ec7c b\u1ecb gi\u1ea3 m\u1ea1o.</li> </ul> <p></p> <ul> <li>T\u00ednh idempotent. Webhook c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c g\u1eedi nhi\u1ec1u l\u1ea7n, v\u00ec v\u1eady h\u00e3y \u0111\u1ea3m b\u1ea3o vi\u1ec7c nh\u1eadn nhi\u1ec1u request kh\u00f4ng g\u00e2y l\u1ed7i b\u1eb1ng c\u00e1ch x\u1eed l\u00fd ch\u1ec9 m\u1ed9t l\u1ea7n duy nh\u1ea5t. Th\u00eam m\u1ed9t ID v\u00e0o m\u1ed7i request \u0111\u1ec3 ph\u00e2n bi\u1ec7t.</li> </ul> <p></p> <ul> <li>X\u1eed l\u00fd l\u01b0u l\u01b0\u1ee3ng l\u1edbn. N\u1ebfu trang web c\u1ee7a b\u1ea1n c\u00f3 l\u01b0\u1ee3ng truy c\u1eadp cao, h\u00e3y chu\u1ea9n b\u1ecb s\u1eb5n h\u1ea1 t\u1ea7ng \u0111\u1ec3 \u0111\u1ed1i ph\u00f3 v\u1edbi \u0111\u1ee3t t\u0103ng \u0111\u1ed9t bi\u1ebfn l\u01b0u l\u01b0\u1ee3ng webhook, s\u1eed d\u1ee5ng queue \u0111\u1ec3 t\u00e1ch bi\u1ec7t vi\u1ec7c nh\u1eadn v\u00e0 x\u1eed l\u00fd s\u1ef1 ki\u1ec7n.</li> </ul> <p></p> <p>Cu\u1ed1i c\u00f9ng, n\u1ebfu b\u1ea1n c\u1ea7n d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c v\u1edbi \u0111\u1ed9 tr\u1ec5 c\u1ef1c th\u1ea5p, c\u00f3 th\u1ec3 xem x\u00e9t k\u1ebft n\u1ed1i socket thay v\u00ec webhooks. Socket gi\u00fap t\u1ed1i \u01b0u hi\u1ec7u su\u1ea5t h\u01a1n nh\u01b0ng kh\u00f3 thi\u1ebft l\u1eadp v\u00e0 duy tr\u00ec h\u01a1n.</p> <p></p> <p>Webhooks mang l\u1ea1i hi\u1ec7u qu\u1ea3 l\u1edbn khi \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng \u0111\u00fang c\u00e1ch, gi\u00fap t\u1ed1i \u01b0u h\u00f3a t\u00e0i nguy\u00ean v\u00e0 gi\u1ea3m thi\u1ec3u chi ph\u00ed.</p>"},{"location":"ByteByteGo/what-happen-when-access-url/","title":"Chuy\u1ec7n g\u00ec s\u1ebd x\u1ea3y ra khi ta truy c\u1eadp v\u00e0o m\u1ed9t \u0111\u01b0\u1eddng d\u1eabn (URL) tr\u00ean tr\u00ecnh duy\u1ec7t?","text":""},{"location":"ByteByteGo/what-happen-when-access-url/#nguon","title":"Ngu\u1ed3n","text":"<p> What happens when you type a URL into your browser?</p>"},{"location":"ByteByteGo/what-happen-when-access-url/#url-la-gi","title":"URL l\u00e0 g\u00ec?","text":"<p>URL, hay t\u00ean \u0111\u1ea7y \u0111\u1ee7 l\u00e0 Universal Resources Locator, bao g\u1ed3m 4 ph\u1ea7n. V\u00ed d\u1ee5 v\u1edbi URL sau:</p> <p></p> <p>Trong \u0111\u00f3:</p> <ul> <li>Scheme cho tr\u00ecnh duy\u1ec7t bi\u1ebft r\u1eb1ng ta s\u1ebd k\u1ebft n\u1ed1i \u0111\u1ebfn m\u1ed9t server b\u1eb1ng giao th\u1ee9c trong scheme (\u1edf \u0111\u00e2y l\u00e0 giao th\u1ee9c HTTP). M\u1ed9t scheme ph\u1ed5 bi\u1ebfn kh\u00e1c l\u00e0 HTTPS, v\u1edbi s\u1ef1 kh\u00e1c bi\u1ec7t l\u00e0 k\u1ebft n\u1ed1i \u0111\u1ebfn server s\u1ebd \u0111\u01b0\u1ee3c m\u00e3 ho\u00e1.</li> <li>Domain l\u00e0 t\u00ean mi\u1ec1n c\u1ee7a website.</li> <li>Path v\u00e0 Resource th\u01b0\u1eddng kh\u00f4ng c\u00f3 s\u1ef1 kh\u00e1c bi\u1ec7t r\u00f5 r\u00e0ng. C\u00f3 th\u1ec3 xem ch\u00fang l\u1ea7n l\u01b0\u1ee3t l\u00e0 th\u01b0 m\u1ee5c v\u00e0 t\u1eadp tin trong m\u1ed9t \u1ed5 c\u1ee9ng b\u00ecnh th\u01b0\u1eddng. Ch\u00fang k\u1ebft h\u1ee3p v\u1edbi nhau t\u1ea1o th\u00e0nh t\u00e0i nguy\u00ean v\u00e0 ta mu\u1ed1n t\u1ea3i v\u1ec1 tr\u00ecnh duy\u1ec7t.</li> </ul>"},{"location":"ByteByteGo/what-happen-when-access-url/#dns-la-gi","title":"DNS l\u00e0 g\u00ec?","text":"<p>DNS, hay t\u00ean \u0111\u1ea7y \u0111\u1ee7 l\u00e0 Domain Name System, \u0111\u01b0\u1ee3c xem nh\u01b0 cu\u1ed1n danh b\u1ea1 tr\u00ean internet. DNS c\u00f3 t\u00e1c d\u1ee5ng chuy\u1ec3n \u0111\u1ed5i t\u00ean mi\u1ec1n th\u00e0nh \u0111\u1ecba ch\u1ec9 IP gi\u00fap tr\u00ecnh duy\u1ec7t c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh \u0111\u01b0\u1ee3c t\u00e0i nguy\u00ean c\u1ea7n t\u00ecm n\u1eb1m \u1edf \u0111\u00e2u tr\u00ean m\u1ea1ng internet.</p> <p>Th\u00f4ng th\u01b0\u1eddng, \u0111\u1ecba ch\u1ec9 IP \u1ee9ng v\u1edbi t\u00ean mi\u1ec1n \u0111\u01b0\u1ee3c cached l\u1ea1i ngay t\u1ea1i tr\u00ecnh duy\u1ec7t trong m\u1ed9t kho\u1ea3ng th\u1eddi gian ng\u1eafn sau khi tr\u00ecnh duy\u1ec7t truy c\u1eadp v\u00e0o m\u1ed9t URL. Cache n\u00e0y c\u0169ng hi\u1ec7n di\u1ec7n trong h\u1ec7 \u0111i\u1ec1u h\u00e0nh \u0111\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c IP nhanh h\u01a1n l\u00e0 khi ph\u1ea3i tra trong DNS.</p>"},{"location":"ByteByteGo/what-happen-when-access-url/#vay-chuyen-gi-se-xay-ra-khi-truy-cap-vao-mot-uong-dan-url-tren-trinh-duyet","title":"V\u1eady chuy\u1ec7n g\u00ec s\u1ebd x\u1ea3y ra khi truy c\u1eadp v\u00e0o m\u1ed9t \u0111\u01b0\u1eddng d\u1eabn (URL) tr\u00ean tr\u00ecnh duy\u1ec7t?","text":"<p>\u0110\u1ea7u ti\u00ean, ng\u01b0\u1eddi d\u00f9ng s\u1ebd g\u00f5 URL v\u00e0o thanh \u0111\u1ecba ch\u1ec9 (Address) tr\u00ean tr\u00ecnh duy\u1ec7t.</p> <p>Sau \u0111\u00f3, tr\u00ecnh duy\u1ec7t s\u1ebd th\u1eed t\u00ecm IP \u1ee9ng v\u1edbi t\u00ean mi\u1ec1n c\u1ee7a URL trong cache c\u1ee7a n\u00f3. N\u1ebfu kh\u00f4ng t\u00ecm ra, tr\u00ecnh duy\u1ec7t s\u1ebd h\u1ecfi cache c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh \u0111\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c \u0111\u1ecba ch\u1ec9 IP. N\u1ebfu v\u1eabn kh\u00f4ng t\u00ecm ra, ta \u0111\u1ebfn b\u01b0\u1edbc ti\u1ebfp theo.</p> <p>Tr\u00ecnh duy\u1ec7t s\u1ebd g\u1eedi truy v\u1ea5n l\u00ean DNS Resolver \u0111\u1ec3 t\u00ecm ra \u0111\u1ecba ch\u1ec9 IP. Vi\u1ec7c n\u00e0y bao g\u1ed3m m\u1ed9t chu\u1ed7i c\u00e1c y\u00eau c\u1ea7u cho \u0111\u1ebfn khi c\u00f3 \u0111\u01b0\u1ee3c \u0111\u1ecba ch\u1ec9 IP. DNS Resolver s\u1ebd t\u00ecm trong c\u00e1c DNS Server tr\u00ean internet \u0111\u1ec3 gi\u00fap tr\u00ecnh duy\u1ec7t t\u00ecm IP. L\u01b0u \u00fd l\u00e0 m\u1ed7i y\u00eau c\u1ea7u trong chu\u1ed7i c\u00e1c y\u00eau c\u1ea7u \u0111\u1ec1u \u0111\u01b0\u1ee3c cached l\u1ea1i nh\u1eb1m gi\u00fap cho DNS Resolver c\u0169ng nh\u01b0 c\u00e1c DNS Server thu\u1eadn ti\u1ec7n h\u01a1n cho nh\u1eefng l\u1ea7n t\u00ecm ki\u1ebfm ti\u1ebfp theo.</p> <p>Sau b\u01b0\u1edbc 2, gi\u1edd ta \u0111\u00e3 c\u00f3 \u0111\u1ecba ch\u1ec9 IP c\u1ee7a URL. Tr\u00ecnh duy\u1ec7t l\u00fac n\u00e0y s\u1ebd t\u1ea1o ra m\u1ed9t k\u1ebft n\u1ed1i TCP \u0111\u1ebfn server \u1ee9ng v\u1edbi \u0111\u1ecba ch\u1ec9 IP n\u00e0y. Qu\u00e1 tr\u00ecnh b\u1eaft tay gi\u1eefa tr\u00ecnh duy\u1ec7t v\u00e0 server c\u0169ng s\u1ebd x\u1ea3y ra \u1edf \u0111\u00e2y (th\u01b0\u1eddng l\u00e0 b\u1eaft tay 3 b\u01b0\u1edbc). \u0110\u1ec3 gi\u00fap cho vi\u1ec7c k\u1ebft n\u1ed1i di\u1ec5n ra nhanh h\u01a1n, c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay d\u00f9ng m\u1ed9t th\u1ee9 g\u1ecdi l\u00e0 k\u1ebft n\u1ed1i keep-alive \u0111\u1ec3 s\u1eed d\u1ee5ng l\u1ea1i k\u1ebft n\u1ed1i TCP \u0111\u00e3 \u0111\u01b0\u1ee3c t\u1ea1o nhi\u1ec1u nh\u1ea5t c\u00f3 th\u1ec3.</p> <p>N\u1ebfu giao th\u1ee9c l\u00e0 HTTPS, qu\u00e1 tr\u00ecnh k\u1ebft n\u1ed1i s\u1ebd c\u00f3 nhi\u1ec1u b\u01b0\u1edbc h\u01a1n. N\u00f3 y\u00eau c\u1ea7u m\u1ed9t qu\u00e1 tr\u00ecnh b\u1eaft tay ph\u1ee9c t\u1ea1p h\u01a1n g\u1ecdi l\u00e0 b\u1eaft tay SSL/TLS \u0111\u1ec3 t\u1ea1o ra k\u1ebft n\u1ed1i an to\u00e0n (\u0111\u00e3 \u0111\u01b0\u1ee3c m\u00e3 ho\u00e1) gi\u1eefa tr\u00ecnh duy\u1ec7t v\u00e0 server. Qu\u00e1 tr\u00ecnh b\u1eaft tay n\u00e0y t\u1ed1n kha kh\u00e1 t\u00e0i nguy\u00ean v\u00e0 tr\u00ecnh duy\u1ec7t th\u01b0\u1eddng s\u1eed d\u1ee5ng m\u1ed9t trick g\u1ecdi l\u00e0 SSL session resumption \u0111\u1ec3 ti\u1ebft ki\u1ec7m t\u00e0i nguy\u00ean.</p> <p>\u1ede b\u01b0\u1edbc 4, tr\u00ecnh duy\u1ec7t g\u1eedi HTTP request l\u00ean server v\u1edbi k\u1ebft n\u1ed1i TCP tr\u01b0\u1edbc \u0111\u00f3. HTTP l\u00e0 m\u1ed9t giao th\u1ee9c kh\u00e1 \u0111\u01a1n gi\u1ea3n. Server x\u1eed l\u00fd request v\u00e0 tr\u1ea3 v\u1ec1 response \u1edf b\u01b0\u1edbc 5. Tr\u00ecnh duy\u1ec7t nh\u1eadn response v\u00e0 render HTML content cho ch\u00fang ta.</p> <p>Ngo\u00e0i ra ta c\u00f2n c\u00f3 th\u00eam nh\u1eefng t\u00e0i nguy\u00ean kh\u00e1c \u0111\u1ec3 t\u1ea3i v\u1ec1 nh\u01b0 JS bundles hay h\u00ecnh \u1ea3nh. Tr\u00ecnh duy\u1ec7t s\u1ebd th\u1ef1c hi\u1ec7n l\u1ea1i c\u00e1c b\u01b0\u1edbc tr\u00ean \u0111\u1ec3 l\u1ea5y t\u1ea5t c\u1ea3 c\u00e1c t\u00e0i nguy\u00ean \u0111\u00f3 v\u1ec1.</p>"},{"location":"ByteByteGo/why-jwt-popular/","title":"T\u1ea1i sao JSON Web Token (JWT) ph\u1ed5 bi\u1ebfn?","text":""},{"location":"ByteByteGo/why-jwt-popular/#nguon","title":"Ngu\u1ed3n","text":"<p> Why is JWT popular?</p>"},{"location":"ByteByteGo/why-jwt-popular/#jwt-la-gi","title":"JWT l\u00e0 g\u00ec?","text":"<p>JSON Web Tokens, hay c\u00f2n \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn v\u1edbi c\u00e1i t\u00ean vi\u1ebft t\u1eaft JWT, l\u00e0 m\u1ed9t ph\u01b0\u01a1ng ph\u00e1p m\u1ea1nh m\u1ebd \u0111\u1ec3 truy\u1ec1n t\u1ea3i th\u00f4ng tin m\u1ed9t c\u00e1ch an to\u00e0n gi\u1eefa c\u00e1c b\u00ean, d\u01b0\u1edbi d\u1ea1ng \u0111\u1ed1i t\u01b0\u1ee3ng JSON.</p> <p></p> <p>JWT \u0111\u00e3 tr\u1edf th\u00e0nh n\u1ec1n t\u1ea3ng c\u1ee7a b\u1ea3o m\u1eadt web v\u00ec nhi\u1ec1u l\u00fd do. Tr\u01b0\u1edbc ti\u00ean, n\u00f3i v\u1ec1 JSON, \u0111\u00e2y l\u00e0 m\u1ed9t \u0111\u1ecbnh d\u1ea1ng trao \u0111\u1ed5i d\u1eef li\u1ec7u nh\u1eb9, d\u1ec5 \u0111\u1ecdc v\u00e0 ghi cho con ng\u01b0\u1eddi hi\u1ec3u \u0111\u01b0\u1ee3c, v\u00e0 \u0111\u1ee7 \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 m\u00e1y m\u00f3c c\u00f3 th\u1ec3 parse v\u00e0 sinh ra. </p> <p></p> <p>JSON l\u00e0 c\u1ed1t l\u00f5i c\u1ee7a JWT v\u00ec n\u00f3 \u0111\u1ea1i di\u1ec7n cho ph\u1ea7n payload, n\u01a1i b\u1ea1n l\u01b0u tr\u1eef d\u1eef li\u1ec7u c\u1ea7n truy\u1ec1n t\u1ea3i.</p> <p></p>"},{"location":"ByteByteGo/why-jwt-popular/#cau-truc-cua-jwt","title":"C\u1ea5u tr\u00fac c\u1ee7a JWT","text":"<p>JWT c\u00f3 c\u1ea5u tr\u00fac g\u1ed3m ba ph\u1ea7n: header, payload v\u00e0 signature. M\u1ed7i ph\u1ea7n \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a base64 v\u00e0 ph\u00e2n t\u00e1ch b\u1eb1ng d\u1ea5u ch\u1ea5m. </p> <p></p> <p>Header th\u01b0\u1eddng bao g\u1ed3m lo\u1ea1i token (JWT) v\u00e0 thu\u1eadt to\u00e1n \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng, nh\u01b0 HMAC SHA256 ho\u1eb7c RSA. Payload l\u00e0 n\u01a1i ch\u1ee9a c\u00e1c claim (y\u00eau c\u1ea7u). Claim l\u00e0 c\u00e1c tuy\u00ean b\u1ed1 v\u1ec1 m\u1ed9t th\u1ef1c th\u1ec3 (entity), th\u01b0\u1eddng l\u00e0 ng\u01b0\u1eddi d\u00f9ng, k\u00e8m theo m\u1ed9t s\u1ed1 d\u1eef li\u1ec7u b\u1ed5 sung. C\u00f3 ba lo\u1ea1i claim: \u0111\u00e3 \u0111\u0103ng k\u00fd, c\u00f4ng khai v\u00e0 ri\u00eang t\u01b0. Claim \u0111\u00e3 \u0111\u0103ng k\u00fd l\u00e0 nh\u1eefng y\u00eau c\u1ea7u \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a s\u1eb5n, nh\u01b0 th\u00f4ng tin v\u1ec1 ng\u01b0\u1eddi ph\u00e1t h\u00e0nh, th\u1eddi gian h\u1ebft h\u1ea1n v\u00e0 \u0111\u1ed1i t\u01b0\u1ee3ng.</p> <p>M\u1eb7c d\u00f9 JWT payload c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a b\u1eb1ng JSON Web Encryption (JWE), h\u1ea7u h\u1ebft c\u00e1c c\u00e0i \u0111\u1eb7t ch\u1ec9 s\u1eed d\u1ee5ng ch\u1eef k\u00fd \u0111i\u1ec7n t\u1eed m\u00e0 kh\u00f4ng m\u00e3 h\u00f3a payload. \u0110i\u1ec1u n\u00e0y c\u00f3 ngh\u0129a l\u00e0 d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c encode nh\u01b0ng kh\u00f4ng \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a an to\u00e0n v\u00e0 c\u00f3 th\u1ec3 b\u1ecb \u0111\u1ecdc n\u1ebfu b\u1ecb ch\u1eb7n. V\u00ec v\u1eady, kh\u00f4ng n\u00ean g\u1eedi th\u00f4ng tin nh\u1ea1y c\u1ea3m qua JWT tr\u1eeb khi n\u00f3 \u0111\u00e3 \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a.</p> <p></p> <p>Th\u1ebf c\u00f2n vi\u1ec7c k\u00fd (sign) v\u00e0o c\u00e1c token th\u00ec sao. K\u00fd gi\u1ed1ng nh\u01b0 \u0111\u00f3ng d\u1ea5u m\u1ed9t phong b\u00ec b\u1eb1ng con d\u1ea5u s\u00e1p \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o n\u00f3 kh\u00f4ng b\u1ecb gi\u1ea3 m\u1ea1o. C\u00f3 hai lo\u1ea1i thu\u1eadt to\u00e1n k\u00fd ch\u00ednh: Thu\u1eadt to\u00e1n \u0111\u1ed1i x\u1ee9ng, nh\u01b0 HMAC SHA256, s\u1eed d\u1ee5ng c\u00f9ng m\u1ed9t kh\u00f3a b\u00ed m\u1eadt \u0111\u1ec3 k\u00fd v\u00e0 x\u00e1c minh. </p> <p></p> <p>Thu\u1eadt to\u00e1n b\u1ea5t \u0111\u1ed1i x\u1ee9ng, nh\u01b0 RSA, s\u1eed d\u1ee5ng c\u1eb7p kh\u00f3a c\u00f4ng khai/b\u00ed m\u1eadt, trong \u0111\u00f3 kh\u00f3a b\u00ed m\u1eadt k\u00fd token v\u00e0 kh\u00f3a c\u00f4ng khai x\u00e1c minh n\u00f3. </p> <p></p> <p>Khi ch\u1ecdn thu\u1eadt to\u00e1n, b\u1ea1n n\u00ean c\u00e2n nh\u1eafc nhu c\u1ea7u c\u1ee7a m\u00ecnh. Kh\u00f3a \u0111\u1ed1i x\u1ee9ng nhanh v\u00e0 \u0111\u01a1n gi\u1ea3n, nh\u01b0ng kh\u00f3a b\u00ed m\u1eadt ph\u1ea3i \u0111\u01b0\u1ee3c chia s\u1ebb tr\u01b0\u1edbc gi\u1eefa c\u00e1c b\u00ean. Kh\u00f3a b\u1ea5t \u0111\u1ed1i x\u1ee9ng cho ph\u00e9p x\u00e1c minh ng\u01b0\u1eddi t\u1ea1o m\u00e0 kh\u00f4ng c\u1ea7n chia s\u1ebb kh\u00f3a ri\u00eang t\u01b0, nh\u01b0ng ch\u1eadm h\u01a1n.</p>"},{"location":"ByteByteGo/why-jwt-popular/#su-dung-jwt","title":"S\u1eed d\u1ee5ng JWT","text":"<p>JWT \u0111\u00e3 k\u00fd s\u1ebd cung c\u1ea5p t\u00ednh x\u00e1c th\u1ef1c, \u1ee7y quy\u1ec1n v\u00e0 trao \u0111\u1ed5i th\u00f4ng tin an to\u00e0n. Sau khi \u0111\u0103ng nh\u1eadp, server t\u1ea1o m\u1ed9t JWT \u0111\u00e3 k\u00fd ch\u1ee9a th\u00f4ng tin ng\u01b0\u1eddi d\u00f9ng v\u00e0 g\u1eedi l\u1ea1i cho client. Client s\u1eed d\u1ee5ng token n\u00e0y \u0111\u1ec3 truy c\u1eadp c\u00e1c t\u00e0i nguy\u00ean \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 b\u1eb1ng c\u00e1ch g\u1eedi n\u00f3 trong HTTP header. JWT th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong c\u00e1c ti\u00eau chu\u1ea9n nh\u01b0 OAuth2 v\u00e0 OpenID Connect \u0111\u1ec3 x\u00e1c th\u1ef1c v\u00e0 \u1ee7y quy\u1ec1n.</p> <p></p> <p>Tuy nhi\u00ean, c\u1ea7n hi\u1ec3u khi n\u00e0o kh\u00f4ng n\u00ean s\u1eed d\u1ee5ng JWT. V\u00ec payload m\u1eb7c \u0111\u1ecbnh kh\u00f4ng \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a, n\u00f3 kh\u00f4ng n\u00ean ch\u1ee9a th\u00f4ng tin nh\u1ea1y c\u1ea3m. Ngo\u00e0i ra, JWT kh\u00f4ng l\u00fd t\u01b0\u1edfng \u0111\u1ec3 qu\u1ea3n l\u00fd session c\u1ee7a ng\u01b0\u1eddi d\u00f9ng v\u00ec ch\u00fang kh\u00f4ng l\u01b0u tr\u1ea1ng th\u00e1i (stateless). Vi\u1ec7c thu h\u1ed3i quy\u1ec1n truy c\u1eadp c\u1ee7a JWT c\u00f3 th\u1ec3 kh\u00f3 kh\u0103n.</p> <p>M\u1ed9t s\u1ed1 l\u1ed7 h\u1ed5ng ph\u1ed5 bi\u1ebfn c\u1ea7n l\u01b0u \u00fd bao g\u1ed3m: \u0111\u00e1nh c\u1eafp token, khi k\u1ebb t\u1ea5n c\u00f4ng l\u1ea5y tr\u1ed9m JWT h\u1ee3p l\u1ec7 \u0111\u1ec3 m\u1ea1o danh ng\u01b0\u1eddi d\u00f9ng; JWT c\u0169ng c\u00f3 th\u1ec3 b\u1ecb t\u1ea5n c\u00f4ng n\u1ebfu s\u1eed d\u1ee5ng c\u00e1c thu\u1eadt to\u00e1n hash y\u1ebfu; c\u00e1c cu\u1ed9c t\u1ea5n c\u00f4ng brute force t\u1ef1 \u0111\u1ed9ng c\u00f3 th\u1ec3 c\u1ed1 g\u1eafng b\u1ebb kh\u00f3a ch\u1eef k\u00fd c\u1ee7a token.</p> <p>\u0110\u1ec3 gi\u1ea3m thi\u1ec3u r\u1ee7i ro khi s\u1eed d\u1ee5ng JWT, m\u1ed9t s\u1ed1 ph\u01b0\u01a1ng ph\u00e1p t\u1ed1t nh\u1ea5t l\u00e0: gi\u1eef cho payload nh\u1ecf g\u1ecdn, ch\u1ec9 ch\u1ee9a c\u00e1c claim c\u1ea7n thi\u1ebft; s\u1eed d\u1ee5ng th\u1eddi gian h\u1ebft h\u1ea1n ng\u1eafn cho token khi c\u00f3 th\u1ec3; l\u01b0u tr\u1eef token m\u1ed9t c\u00e1ch an to\u00e0n v\u00e0 v\u00f4 hi\u1ec7u h\u00f3a b\u1ea5t k\u1ef3 token n\u00e0o b\u1ecb l\u1ed9; v\u00e0 s\u1eed d\u1ee5ng c\u00e1c thu\u1eadt to\u00e1n ch\u1eef k\u00fd m\u1ea1nh m\u1ebd.</p> <p>\u01afu \u0111i\u1ec3m c\u1ee7a JWT r\u1ea5t r\u00f5 r\u00e0ng: JWT ch\u1ee9a \u0111\u1ea7y \u0111\u1ee7 th\u00f4ng tin, d\u1ec5 di chuy\u1ec3n v\u00e0 kh\u00f4ng c\u1ea7n l\u01b0u tr\u1eef tr\u00ean server. Tuy nhi\u00ean, ch\u00fang c\u0169ng d\u1ec5 b\u1ecb \u0111\u00e1nh c\u1eafp, v\u00e0 n\u1ebfu b\u1ecb \u0111\u00e1nh c\u1eafp th\u1eadt, n\u00f3 c\u00f3 th\u1ec3 cung c\u1ea5p quy\u1ec1n truy c\u1eadp t\u00e0i nguy\u00ean c\u1ee7a b\u1ea1n cho ng\u01b0\u1eddi kh\u00e1c. Payload c\u0169ng c\u00f3 th\u1ec3 to ra n\u1ebfu ch\u1ee9a qu\u00e1 nhi\u1ec1u th\u00f4ng tin, \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn hi\u1ec7u su\u1ea5t.</p> <p>T\u00f3m l\u1ea1i, JWT cung c\u1ea5p m\u1ed9t ph\u01b0\u01a1ng ph\u00e1p d\u1ec5 m\u1edf r\u1ed9ng \u0111\u1ec3 x\u1eed l\u00fd x\u00e1c th\u1ef1c, \u1ee7y quy\u1ec1n v\u00e0 trao \u0111\u1ed5i th\u00f4ng tin n\u1ebfu \u0111\u01b0\u1ee3c tri\u1ec3n khai c\u1ea9n th\u1eadn.</p>"},{"location":"ByteByteGo/why-kafka-fast/","title":"T\u1ea1i sao Kafka l\u1ea1i nhanh nh\u01b0 v\u1eady?","text":""},{"location":"ByteByteGo/why-kafka-fast/#nguon","title":"Ngu\u1ed3n","text":"<p> System Design: Why is Kafka fast?</p>"},{"location":"ByteByteGo/why-kafka-fast/#nhanh-la-nhanh-nhu-the-nao","title":"Nhanh l\u00e0 nhanh nh\u01b0 th\u1ebf n\u00e0o?","text":"<p>Kafka \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u ho\u00e1 cho th\u00f4ng l\u01b0\u1ee3ng l\u1edbn. N\u00f3 \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 di chuy\u1ec3n m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng b\u1ea3n ghi l\u1edbn trong m\u1ed9t kho\u1ea3ng th\u1eddi gian ng\u1eafn. C\u00f3 th\u1ec3 t\u01b0\u1edfng t\u01b0\u1ee3ng m\u1ed9t \u0111\u01b0\u1eddng \u1ed1ng c\u1ef1c l\u1edbn c\u00f3 n\u01b0\u1edbc ch\u1ea3y qua. \u0110\u01b0\u1eddng k\u00ednh \u1ed1ng c\u00e0ng l\u1edbn th\u00ec th\u1ec3 t\u00edch n\u01b0\u1edbc c\u00f3 th\u1ec3 \u0111i qua c\u0169ng l\u1edbn theo.</p> <p>V\u00ec v\u1eady, n\u00f3i Kafka nhanh l\u00e0 \u0111\u1ec1 c\u1eadp \u0111\u1ebfn kh\u1ea3 n\u0103ng v\u1eadn chuy\u1ec3n nhi\u1ec1u d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 c\u1ee7a Kafka.</p>"},{"location":"ByteByteGo/why-kafka-fast/#thiet-ke-cua-kafka","title":"Thi\u1ebft k\u1ebf c\u1ee7a Kafka","text":"<p>Hi\u1ec7u su\u1ea5t c\u1ee7a Kafka \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3p l\u1edbn b\u1edfi thi\u1ebft k\u1ebf \u0111\u1eb7c bi\u1ec7t c\u1ee7a n\u00f3. Ta s\u1ebd t\u1eadp trung v\u00e0o hai t\u00ednh ch\u1ea5t c\u1ee7a thi\u1ebft k\u1ebf n\u00e0y.</p> <p>T\u00ednh ch\u1ea5t \u0111\u1ea7u ti\u00ean l\u00e0 s\u1ef1 ph\u1ee5 thu\u1ed9c c\u1ee7a Kafka v\u00e0o I/O tu\u1ea7n t\u1ef1. M\u00e0 I/O tu\u1ea7n t\u1ef1 (sequential I/O) l\u00e0 c\u00e1i g\u00ec? Ta s\u1ebd c\u00f9ng nhau t\u00ecm hi\u1ec3u.</p> <p>C\u00f3 m\u1ed9t quan ni\u1ec7n sai l\u1ea7m ph\u1ed5 bi\u1ebfn l\u00e0 truy c\u1eadp v\u00e0o \u1ed5 \u0111\u0129a th\u00ec ch\u1eadm h\u01a1n truy c\u1eadp v\u00e0o b\u1ed9 nh\u1edb, nh\u01b0ng th\u1ef1c ra th\u00ec \u0111i\u1ec1u n\u00e0y ph\u1ea7n nhi\u1ec1u ph\u1ee5 thu\u1ed9c v\u00e0o c\u00e1c ki\u1ec3u truy c\u1eadp d\u1eef li\u1ec7u. C\u00f3 hai ki\u1ec3u nh\u01b0 v\u1eady: ng\u1eabu nhi\u00ean (random) v\u00e0 tu\u1ea7n t\u1ef1 (sequential).</p> <p>\u0110\u1ed1i v\u1edbi \u1ed5 c\u1ee9ng, n\u00f3 c\u1ea7n th\u1eddi gian \u0111\u1ec3 \u0111i\u1ec1u ch\u1ec9nh con ch\u1ea1y (arm), theo ngh\u0129a \u0111en, \u0111\u1ebfn c\u00e1c v\u1ecb tr\u00ed kh\u00e1c nhau tr\u00ean \u0111\u0129a t\u1eeb. \u0110\u00e2y l\u00e0 nguy\u00ean nh\u00e2n khi\u1ebfn truy c\u1eadp ng\u1eabu nhi\u00ean b\u1ecb ch\u1eadm. Tuy nhi\u00ean, \u0111\u1ed1i v\u1edbi truy c\u1eadp tu\u1ea7n t\u1ef1, con ch\u1ea1y kh\u00f4ng c\u1ea7n ch\u1ea1y nhi\u1ec1u nh\u01b0 th\u1ebf, n\u00ean vi\u1ec7c \u0111\u1ecdc v\u00e0 ghi t\u1eebng kh\u1ed1i d\u1eef li\u1ec7u m\u1ed9t s\u1ebd nhanh h\u01a1n nhi\u1ec1u.</p> <p></p> <p>Kafka t\u1eadn d\u1ee5ng l\u1ee3i th\u1ebf n\u00e0y b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng log ch\u1ec9 th\u00eam v\u00e0o sau (append-only log) l\u00e0 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u ch\u00ednh c\u1ee7a n\u00f3. Append-only log ch\u1ec9 th\u00eam d\u1eef li\u1ec7u m\u1edbi v\u00e0o cu\u1ed1i file. Ki\u1ec3u truy c\u1eadp n\u00e0y l\u00e0 tu\u1ea7n t\u1ef1.</p> <p></p> <p>Gi\u1edd th\u00eam m\u1ed9t ch\u00fat th\u1ed1ng k\u00ea nh\u00e9. V\u1edbi ph\u1ea7n c\u1ee9ng hi\u1ec7n \u0111\u1ea1i, gi\u1ea3 s\u1eed ta c\u00f3 m\u1ed9t lo\u1ea1t c\u00e1c \u1ed5 c\u1ee9ng nh\u01b0 th\u1ebf, t\u1ed1c \u0111\u1ed9 ghi tu\u1ea7n t\u1ef1 \u0111\u1ea1t h\u00e0ng tr\u0103m MB m\u1ed7i gi\u00e2y, trong khi t\u1ed1c \u0111\u1ed9 ghi ng\u1eabu nhi\u00ean ch\u1ec9 \u0111\u01b0\u1ee3c v\u00e0i tr\u0103m KB tr\u00ean gi\u00e2y. Truy c\u1eadp tu\u1ea7n t\u1ef1 r\u00f5 r\u00e0ng l\u00e0 nhanh h\u01a1n. S\u1eed d\u1ee5ng \u1ed5 c\u1ee9ng c\u0169ng c\u00f3 l\u1ee3i th\u1ebf v\u1ec1 chi ph\u00ed. So v\u1edbi SSD, HDD c\u00f3 gi\u00e1 ch\u1ec9 b\u1eb1ng m\u1ed9t ph\u1ea7n ba nh\u01b0ng dung l\u01b0\u1ee3ng th\u00ec g\u1ea5p kho\u1ea3ng ba l\u1ea7n. </p> <p></p> <p></p> <p>Cung c\u1ea5p cho Kafka m\u1ed9t l\u01b0\u1ee3ng l\u1edbn dung l\u01b0\u1ee3ng gi\u00e1 r\u1ebb m\u00e0 kh\u00f4ng ph\u1ea3i \u0111\u00e1nh \u0111\u1ed5i v\u1ec1 m\u1eb7t hi\u1ec7u n\u0103ng ngh\u0129a l\u00e0 Kafka c\u00f3 th\u1ec3 l\u01b0u gi\u1eef th\u00f4ng tin m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 v\u1ec1 m\u1eb7t chi ph\u00ed trong th\u1eddi gian d\u00e0i. Tr\u01b0\u1edbc Kafka th\u00ec h\u1ea7u nh\u01b0 \u00edt ng\u01b0\u1eddi d\u00e1m ngh\u0129 t\u1edbi \u0111i\u1ec1u n\u00e0y.</p> <p>T\u00ednh ch\u1ea5t th\u1ee9 hai c\u1ee7a thi\u1ebft k\u1ebf Kafka \u0111\u00f3 l\u00e0 vi\u1ec7c t\u1eadp trung v\u00e0o hi\u1ec7u qu\u1ea3. Kafka di chuy\u1ec3n r\u1ea5t nhi\u1ec1u d\u1eef li\u1ec7u t\u1eeb m\u1ea1ng sang \u1ed5 \u0111\u0129a, v\u00e0 t\u1eeb \u1ed5 \u0111\u0129a l\u00ean m\u1ea1ng. \u0110i\u1ec1u quan tr\u1ecdng \u1edf \u0111\u00e2y l\u00e0 ph\u1ea3i b\u1ecf \u0111i nh\u1eefng b\u1ea3n copy th\u1eeba khi di chuy\u1ec3n gi\u1eefa c\u00e1c trang (trong \u1ed5 \u0111\u0129a) v\u00e0 c\u00e1c trang d\u1eef li\u1ec7u gi\u1eefa \u1ed5 \u0111\u0129a v\u00e0 m\u1ea1ng.</p> <p>\u0110\u00e2y l\u00e0 l\u00fac nguy\u00ean t\u1eafc kh\u00f4ng sao ch\u00e9p (zero-copy principle) \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng. C\u00e1c h\u1ec7 \u0111i\u1ec1u h\u00e0nh unix hi\u1ec7n \u0111\u1ea1i \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u ho\u00e1 cao \u0111\u1ec3 truy\u1ec1n d\u1eef li\u1ec7u t\u1eeb \u0111\u0129a l\u00ean m\u1ea1ng m\u00e0 kh\u00f4ng ph\u1ea3i sao ch\u00e9p d\u1eef li\u1ec7u qu\u00e1 nhi\u1ec1u. Tr\u01b0\u1edbc ti\u00ean ta h\u00e3y xem c\u00e1ch Kafka g\u1eedi m\u1ed9t trang d\u1eef li\u1ec7u t\u1eeb \u0111\u0129a \u0111\u1ebfn consumer khi zero-copy kh\u00f4ng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng. D\u1eef li\u1ec7u s\u1ebd \u0111\u01b0\u1ee3c load t\u1eeb \u0111\u0129a l\u00ean cache c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh.</p> <p>Ti\u1ebfp theo, d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c sao ch\u00e9p t\u1eeb cache h\u1ec7 \u0111i\u1ec1u h\u00e0nh \u0111\u1ebfn \u1ee9ng d\u1ee5ng Kafka. Sau \u0111\u00f3 d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c sao ch\u00e9p t\u1eeb Kafka v\u00e0o b\u1ed9 \u0111\u1ec7m socket. R\u1ed3i d\u1eef li\u1ec7u l\u1ea1i \u0111\u01b0\u1ee3c sao ch\u00e9p t\u1eeb b\u1ed9 \u0111\u1ec7m socket \u0111\u1ebfn b\u1ed9 \u0111\u1ec7m NIC (network interface card). Cu\u1ed1i c\u00f9ng th\u00ec d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c g\u1eedi l\u00ean m\u1ea1ng \u0111\u1ebfn consumer.</p> <p>R\u00f5 r\u00e0ng l\u00e0 nh\u01b0 v\u1eady kh\u00f4ng \u1ed5n. C\u00f3 4 b\u1ea3n sao d\u1eef li\u1ec7u v\u00e0 2 system call. Gi\u1edd so v\u1edbi zero-copy xem. B\u01b0\u1edbc 1 gi\u1eef nghuy\u00ean, d\u1eef li\u1ec7u s\u1ebd \u0111\u01b0\u1ee3c load t\u1eeb \u0111\u0129a l\u00ean cache c\u1ee7a h\u1ec7 \u0111i\u1ec1u h\u00e0nh.</p> <p>V\u1edbi zero-copy, \u1ee9ng d\u1ee5ng Kafka d\u00f9ng m\u1ed9t system call g\u1ecdi l\u00e0 <code>sendfile()</code> \u0111\u1ec3 n\u00f3i cho h\u1ec7 \u0111i\u1ec1u h\u00e0nh sao ch\u00e9p th\u1eb3ng d\u1eef li\u1ec7u t\u1eeb cache h\u1ec7 \u0111i\u1ec1u h\u00e0nh sang b\u1ed9 \u0111\u1ec7m NIC. V\u1edbi c\u00e1ch n\u00e0y, b\u1ea3n sao duy nh\u1ea5t l\u00e0 t\u1eeb cache h\u1ec7 \u0111i\u1ec1u h\u00e0nh sang b\u1ed9 \u0111\u1ec7m NIC. V\u1edbi m\u1ed9t network card hi\u1ec7n \u0111\u1ea1i, sao ch\u00e9p \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi DMA (direct memory access - truy c\u1eadp b\u1ed9 nh\u1edb tr\u1ef1c ti\u1ebfp). Khi d\u00f9ng DMA, CPU kh\u00f4ng tham gia v\u00e0o nhi\u1ec7m v\u1ee5 n\u00e0y, khi\u1ebfn cho n\u00f3 c\u00f2n hi\u1ec7u qu\u1ea3 h\u01a1n.</p> <p></p> <p>T\u00f3m l\u1ea1i, I/O tu\u1ea7n t\u1ef1 v\u00e0 nguy\u00ean t\u1eafc kh\u00f4ng sao ch\u00e9p l\u00e0 n\u1ec1n t\u1ea3ng cho hi\u1ec7u su\u1ea5t cao c\u1ee7a Kafka. Kafka s\u1eed d\u1ee5ng c\u00e1c k\u0129 thu\u1eadt kh\u00e1c \u0111\u1ec3 t\u1ed1i \u0111a ho\u00e1 hi\u1ec7u qu\u1ea3 t\u1eeb ph\u1ea7n c\u1ee9ng, nh\u01b0ng hai t\u00ednh ch\u1ea5t n\u00e0y v\u1eabn l\u00e0 quan tr\u1ecdng nh\u1ea5t.</p>"},{"location":"ByteByteGo/why-redis-fast/","title":"V\u00ec sao Redis l\u1ea1i nhanh?","text":""},{"location":"ByteByteGo/why-redis-fast/#nguon","title":"Ngu\u1ed3n","text":"<p> System Design: Why is single-threaded Redis so fast?</p>"},{"location":"ByteByteGo/why-redis-fast/#redis-la-gi","title":"Redis l\u00e0 g\u00ec?","text":"<p>Redis l\u00e0 m\u1ed9t d\u1ea1ng c\u01a1 s\u1edf d\u1eef li\u1ec7u l\u01b0u tr\u1eef data trong b\u1ed9 nh\u1edb. N\u00f3 th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng nh\u01b0 l\u00e0 cache. N\u00f3 h\u1ed7 tr\u1ee3 nhi\u1ec1u d\u1ea1ng c\u1ea5u tr\u00fac d\u1eef li\u1ec7u kh\u00e1c nhau, nh\u01b0 string, hash, list, set v\u00e0 sorted set. Redis r\u1ea5t ch\u1eafc ch\u1eafn, d\u1ec5 s\u1eed d\u1ee5ng v\u00e0 c\u00f3 t\u1ed1c \u0111\u1ed9 r\u1ea5t t\u1ed1t. C\u00e1c y\u1ebfu t\u1ed1 n\u00e0y l\u00fd gi\u1ea3i v\u00ec sao n\u00f3 l\u00e0 m\u1ed9t trong nh\u1eefng lo\u1ea1i c\u01a1 s\u1edf d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c y\u00eau th\u00edch nh\u1ea5t, theo kh\u1ea3o s\u00e1t th\u01b0\u1eddng ni\u00ean tr\u00ean Stack Overflow.</p>"},{"location":"ByteByteGo/why-redis-fast/#co-so-du-lieu-in-memory","title":"C\u01a1 s\u1edf d\u1eef li\u1ec7u in-memory","text":"<p>L\u00fd do \u0111\u1ea7u ti\u00ean m\u00e0 Redis nhanh l\u00e0 v\u00ec n\u00f3 l\u00e0 m\u1ed9t c\u01a1 s\u1edf d\u1eef li\u1ec7u in-memory, t\u1ee9c l\u00e0 d\u00f9ng RAM, ch\u1ee9 kh\u00f4ng ph\u1ea3i \u1ed5 c\u1ee9ng. </p> <p></p> <p>Truy c\u1eadp v\u00e0o b\u1ed9 nh\u1edb nhanh h\u01a1n r\u1ea5t r\u1ea5t nhi\u1ec1u l\u1ea7n so v\u1edbi truy c\u1eadp ng\u1eabu nhi\u00ean tr\u00ean \u0111\u0129a. Vi\u1ec7c truy c\u1eadp v\u00e0o b\u1ed9 nh\u1edb mang l\u1ea1i th\u00f4ng l\u01b0\u1ee3ng \u0111\u1ecdc v\u00e0 ghi cao c\u00f9ng v\u1edbi \u0111\u1ed9 tr\u1ec5 th\u1ea5p. \u0110\u1ed5i l\u1ea1i th\u00ec d\u1eef li\u1ec7u kh\u00f4ng th\u1ec3 l\u1edbn h\u01a1n b\u1ed9 nh\u1edb.</p> <p></p> <p>V\u1ec1 m\u1eb7t c\u00e0i \u0111\u1eb7t, c\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u trong b\u1ed9 nh\u1edb d\u1ec5 c\u00e0i \u0111\u1eb7t h\u01a1n nhi\u1ec1u so v\u1edbi c\u00e0i tr\u00ean \u0111\u0129a. \u0110i\u1ec1u n\u00e0y gi\u00fap code \u0111\u01a1n gi\u1ea3n v\u00e0 g\u00f3p ph\u1ea7n v\u00e0o s\u1ef1 \u1ed5n \u0111\u1ecbnh v\u1eefng ch\u1eafc c\u1ee7a Redis.</p> <p></p>"},{"location":"ByteByteGo/why-redis-fast/#on-luong","title":"\u0110\u01a1n lu\u1ed3ng","text":"<p>Redis ch\u1ee7 y\u1ebfu l\u00e0 \u0111\u01a1n lu\u1ed3ng. V\u00ec sao m\u1ed9t thi\u1ebft k\u1ebf \u0111\u01a1n lu\u1ed3ng l\u1ea1i cho ta hi\u1ec7u su\u1ea5t cao nh\u01b0 v\u1eady? T\u1eadn d\u1ee5ng h\u1ebft c\u00e1c core trong CPU v\u1edbi \u0111a lu\u1ed3ng kh\u00f4ng ph\u1ea3i nhanh h\u01a1n sao?</p> <p>C\u00e1c \u1ee9ng d\u1ee5ng \u0111a lu\u1ed3ng y\u00eau c\u1ea7u lock ho\u1eb7c c\u00e1c c\u01a1 ch\u1ebf \u0111\u1ed3ng b\u1ed9 ho\u00e1 kh\u00e1c. Ch\u00fang n\u1ed5i ti\u1ebfng l\u00e0 kh\u00f3 gi\u1ea3i th\u00edch. Trong nhi\u1ec1u \u1ee9ng d\u1ee5ng, th\u00eam ph\u1ee9c t\u1ea1p ch\u1ec9 t\u1ed5 g\u00e2y th\u00eam l\u1ed7i v\u00e0 m\u1ea5t \u0111i s\u1ef1 \u1ed5n \u0111\u1ecbnh, g\u00e2y kh\u00f3 kh\u0103n cho vi\u1ec7c duy tr\u00ec hi\u1ec7u su\u1ea5t cao.</p> <p></p> <p>Trong tr\u01b0\u1eddng h\u1ee3p c\u1ee7a Redis, code \u0111\u01a1n lu\u1ed3ng r\u1ea5t d\u1ec5 hi\u1ec3u. Nh\u01b0ng m\u00e0 l\u00e0m th\u1ebf n\u00e0o \u0111\u1ec3 code \u0111\u01a1n lu\u1ed3ng n\u00e0y c\u00f3 th\u1ec3 x\u1eed l\u00fd h\u00e0ng ng\u00e0n request v\u00e0 response c\u00f9ng l\u00fac? Lu\u1ed3ng kh\u00f4ng b\u1ecb block \u0111\u1ec3 x\u1eed l\u00fd t\u1eebng request m\u1ed9t \u00e0? \u0110\u00e2y l\u00e0 l\u00fac I/O multiplexing ph\u00e1t huy t\u00e1c d\u1ee5ng. V\u1edbi I/O multiplexing, h\u1ec7 \u0111i\u1ec1u h\u00e0nh cho ph\u00e9p m\u1ed9t lu\u1ed3ng c\u00f3 th\u1ec3 \u0111\u1ee3i c\u00f9ng l\u00fac tr\u00ean nhi\u1ec1u k\u1ebft n\u1ed1i socket. Th\u00f4ng th\u01b0\u1eddng th\u00ec \u0111i\u1ec1u n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi c\u00e1c system call nh\u01b0 <code>select</code> hay <code>poll</code>. C\u00e1c system call n\u00e0y kh\u00f4ng hi\u1ec7u qu\u1ea3 l\u1eafm khi c\u00f3 h\u00e0ng ng\u00e0n k\u1ebft n\u1ed1i.</p> <p></p> <p>Tr\u00ean linux, <code>epoll</code> l\u00e0 m\u1ed9t bi\u1ebfn th\u1ec3 hi\u1ec7u qu\u1ea3 c\u1ee7a I/O multiplexing gi\u00fap h\u1ed7 tr\u1ee3 h\u00e0ng ng\u00e0n k\u1ebft n\u1ed1i c\u00f9ng l\u00fac. M\u1ed9t nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a thi\u1ebft k\u1ebf \u0111\u01a1n lu\u1ed3ng l\u00e0 n\u00f3 kh\u00f4ng t\u1eadn d\u1ee5ng \u0111\u01b0\u1ee3c t\u1ea5t c\u1ea3 c\u00e1c core c\u1ee7a CPU trong ph\u1ea7n c\u1ee9ng ng\u00e0y nay. Kh\u00f4ng hi\u1ebfm c\u00e1c tr\u01b0\u1eddng h\u1ee3p c\u00f3 nhi\u1ec1u instance Redis ch\u1ea1y tr\u00ean c\u00f9ng m\u1ed9t m\u00e1y ch\u1ee7 \u0111\u1ec3 t\u1eadn d\u1ee5ng nhi\u1ec1u core CPU h\u01a1n.</p>"},{"location":"ByteByteGo/why-redis-fast/#cac-cau-truc-du-lieu-hieu-qua","title":"C\u00e1c c\u1ea5u tr\u00fac d\u1eef li\u1ec7u hi\u1ec7u qu\u1ea3","text":"<p>V\u00ec Redis l\u00e0 c\u01a1 s\u1edf d\u1eef li\u1ec7u in-memory, n\u00f3 c\u00f3 th\u1ec3 t\u1eadn d\u1ee5ng m\u1ed9t s\u1ed1 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u b\u1eadc th\u1ea5p hi\u1ec7u qu\u1ea3 m\u00e0 kh\u00f4ng ph\u1ea3i lo l\u1eafng l\u00e0m sao \u0111\u1ec3 l\u01b0u ch\u00fang v\u00e0o \u0111\u0129a m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3. Danh s\u00e1ch li\u00ean k\u1ebft, skip list, hash table l\u00e0 m\u1ed9t s\u1ed1 v\u00ed d\u1ee5.</p> <p></p>"},{"location":"ByteByteGo/why-redis-fast/#ket","title":"K\u1ebft","text":"<p>Ng\u00e0y nay th\u00ec ta c\u00f3 th\u1ec3 th\u1ea5y m\u1ed9t s\u1ed1 \u1ee9ng d\u1ee5ng c\u00e0i \u0111\u1eb7t t\u01b0\u01a1ng th\u00edch v\u1edbi Redis \u0111\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c hi\u1ec7u su\u1ea5t c\u00f2n cao h\u01a1n n\u1eefa t\u1eeb m\u1ed9t m\u00e1y ch\u1ee7. V\u1edbi t\u00ednh d\u1ec5 s\u1eed d\u1ee5ng, t\u00ednh \u1ed5n \u0111\u1ecbnh v\u1eefng ch\u1eafc v\u00e0 hi\u1ec7u su\u1ea5t cao c\u1ee7a Redis, n\u00f3 v\u1eabn cung c\u1ea5p m\u1ed9t gi\u1ea3i ph\u00e1p m\u1ea1nh m\u1ebd v\u1ec1 m\u1eb7t hi\u1ec7u su\u1ea5t v\u00e0 \u0111\u1ed9 \u1ed5n \u0111\u1ecbnh cho th\u1ecb tr\u01b0\u1eddng.</p>"},{"location":"ByteByteGo/why-system-design-interview-important/","title":"V\u00ec sao ph\u1ecfng v\u1ea5n System Design l\u1ea1i quan tr\u1ecdng?","text":""},{"location":"ByteByteGo/why-system-design-interview-important/#nguon","title":"Ngu\u1ed3n","text":"<p> Why Is System Design Interview Important?</p>"},{"location":"ByteByteGo/why-system-design-interview-important/#phong-van-system-design-la-gi","title":"Ph\u1ecfng v\u1ea5n System Design l\u00e0 g\u00ec?","text":"<p>Ph\u1ecfng v\u1ea5n v\u1ec1 System Design (thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng) l\u00e0 m\u1ed9t ph\u1ea7n quan tr\u1ecdng trong qu\u00e1 tr\u00ecnh tuy\u1ec3n d\u1ee5ng k\u1ef9 s\u01b0 ph\u1ea7n m\u1ec1m, \u0111\u1eb7c bi\u1ec7t l\u00e0 t\u1ea1i c\u00e1c c\u00f4ng ty c\u00f4ng ngh\u1ec7 l\u1edbn.</p> <p>X\u00e2y d\u1ef1ng ph\u1ea7n m\u1ec1m l\u00e0 m\u1ed9t qu\u00e1 tr\u00ecnh t\u1ed1n k\u00e9m. C\u00e1c c\u00f4ng ty n\u00e0y c\u1ea7n k\u1ef9 s\u01b0 c\u00f3 kinh nghi\u1ec7m c\u00f9ng v\u1edbi k\u1ef9 n\u0103ng m\u1ea1nh v\u1ec1 thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng. \u0110i\u1ec1u n\u00e0y l\u00e0m t\u0103ng kh\u1ea3 n\u0103ng h\u1ecd c\u00f3 th\u1ec3 b\u1eaft tay v\u00e0o thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng ngay khi b\u1eaft \u0111\u1ea7u l\u00e0m vi\u1ec7c, v\u00e0 c\u00e1c cu\u1ed9c ph\u1ecfng v\u1ea5n System Design l\u00e0 ph\u01b0\u01a1ng ph\u00e1p ch\u1ee7 y\u1ebfu \u0111\u1ec3 \u0111\u00e1nh gi\u00e1 nh\u1eefng k\u1ef9 n\u0103ng \u0111\u00f3.</p> <p>C\u00e1c cu\u1ed9c ph\u1ecfng v\u1ea5n System Design \u0111\u01b0\u1ee3c coi tr\u1ecdng h\u01a1n nhi\u1ec1u \u0111\u1ed1i v\u1edbi c\u00e1c k\u1ef9 s\u01b0 c\u1ea5p cao. V\u1edbi h\u1ea7u h\u1ebft c\u00e1c c\u00f4ng ty l\u1edbn, c\u00e1c v\u1ecb tr\u00ed staff (c\u1ea5p cao) y\u00eau c\u1ea7u nhi\u1ec1u v\u00f2ng System Design. C\u0169ng h\u1ee3p l\u00fd th\u00f4i, c\u00e0ng nhi\u1ec1u kinh nghi\u1ec7m ph\u00e1t tri\u1ec3n ph\u1ea7n m\u1ec1m, ta c\u00e0ng c\u1ea7n k\u1ef9 n\u0103ng thi\u1ebft k\u1ebf \u0111\u1ec3 l\u00e0m vi\u1ec7c. N\u00f3i c\u00e1ch kh\u00e1c, c\u00e1ch ta th\u1ec3 hi\u1ec7n trong c\u00e1c v\u00f2ng System Design s\u1ebd \u1ea3nh h\u01b0\u1edfng l\u1edbn \u0111\u1ebfn level v\u00e0 l\u01b0\u01a1ng c\u1ee7a b\u1ea1n khi \u0111\u01b0\u1ee3c tuy\u1ec3n d\u1ee5ng.</p>"},{"location":"ByteByteGo/why-system-design-interview-important/#cac-cong-ty-coi-trong-ieu-gi-trong-cac-vong-system-design","title":"C\u00e1c c\u00f4ng ty coi tr\u1ecdng \u0111i\u1ec1u g\u00ec trong c\u00e1c v\u00f2ng System Design?","text":"<p>\u0110\u00f3 l\u00e0 c\u00e1ch ta gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 v\u00e0 c\u00e1ch ta ngh\u0129 v\u1ec1 vi\u1ec7c thi\u1ebft k\u1ebf c\u00e1c h\u1ec7 th\u1ed1ng quy m\u00f4 l\u1edbn. </p> <ul> <li>Ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n mu\u1ed1n xem ta c\u00f3 th\u1ec3 \u0111\u01b0a ra c\u00e1c quy\u1ebft \u0111\u1ecbnh v\u00e0 \u0111\u01b0a ra l\u00fd do cho c\u00e1c s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i gi\u1eefa c\u00e1c tu\u1ef3 ch\u1ecdn thi\u1ebft k\u1ebf kh\u00e1c nhau trong khi c\u00e2n b\u1eb1ng c\u00e1c r\u00e0ng bu\u1ed9c kh\u00e1c nhau c\u1ee7a h\u1ec7 th\u1ed1ng hay kh\u00f4ng. </li> <li>Ng\u01b0\u1eddi ta s\u1ebd mu\u1ed1n xem l\u00e0 ta c\u00f3 th\u1ec3 truy\u1ec1n \u0111\u1ea1t \u00fd t\u01b0\u1edfng c\u1ee7a b\u1ea3n th\u00e2n m\u1ed9t c\u00e1ch r\u00f5 r\u00e0ng hay kh\u00f4ng. </li> <li>Ng\u01b0\u1eddi ta mu\u1ed1n xem l\u00e0 ta c\u00f3 th\u1ec3 l\u00e0m vi\u1ec7c t\u1ed1t trong team hay kh\u00f4ng. </li> </ul>"},{"location":"ByteByteGo/why-system-design-interview-important/#nen-va-khong-nen-lam-khi-phong-van","title":"N\u00ean v\u00e0 kh\u00f4ng n\u00ean l\u00e0m khi ph\u1ecfng v\u1ea5n","text":"<p>V\u1edbi nh\u1eefng y\u1ebfu t\u1ed1 \u0111\u00f3, sau \u0111\u00e2y l\u00e0 nh\u1eefng \u0111i\u1ec1u n\u00ean v\u00e0 kh\u00f4ng n\u00ean l\u00e0m trong v\u00f2ng System Design. </p> <ul> <li>N\u00ean hi\u1ec3u b\u00e0i to\u00e1n v\u00e0 c\u00e1c y\u00eau c\u1ea7u tr\u01b0\u1edbc khi thi\u1ebft k\u1ebf: Th\u00f4ng th\u01b0\u1eddng, c\u00e1c c\u00e2u h\u1ecfi s\u1ebd r\u1ea5t m\u01a1 h\u1ed3, h\u00e3y l\u00e0m r\u00f5 nh\u1eefng y\u00eau c\u1ea7u c\u1ee7a b\u00e0i to\u00e1n b\u1eb1ng c\u00e1ch h\u1ecfi ng\u01b0\u1eddi ph\u1ecfng v\u1ea5n. </li> <li>Kh\u00f4ng n\u00ean \u0111\u01b0a ra gi\u1ea3i ph\u00e1p ngay m\u00e0 ch\u01b0a hi\u1ec3u h\u1ebft b\u00e0i to\u00e1n. </li> <li>N\u00ean c\u00e2n nh\u1eafc nhi\u1ec1u c\u00e1ch thi\u1ebft k\u1ebf v\u00e0 n\u00f3i ra r\u00f5 r\u00e0ng s\u1ef1 \u0111\u00e1nh \u0111\u1ed5i gi\u1eefa ch\u00fang. </li> <li>N\u00ean c\u00e2n nh\u1eafc t\u00ednh m\u1edf r\u1ed9ng, \u0111\u1ed9 tr\u1ec5 v\u00e0 c\u00e1c y\u00eau c\u1ea7u phi ch\u1ee9c n\u0103ng kh\u00e1c. C\u00e0ng l\u00ean level cao, b\u1ea1n c\u00e0ng c\u1ea7n ph\u1ea3i quan t\u00e2m \u0111\u1ebfn c\u00e1c kh\u00eda c\u1ea1nh phi ch\u1ee9c n\u0103ng khi thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng. </li> <li>Kh\u00f4ng n\u00ean th\u00eam nh\u1eefng s\u1ef1 ph\u1ee9c t\u1ea1p kh\u00f4ng c\u1ea7n thi\u1ebft v\u00e0o thi\u1ebft k\u1ebf. H\u00e3y giao ti\u1ebfp r\u00f5 r\u00e0ng v\u00e0 gi\u1ea3i th\u00edch nh\u1eefng l\u00fd do cho c\u00e1c quy\u1ebft \u0111\u1ecbnh thi\u1ebft k\u1ebf c\u1ee7a b\u1ea1n.</li> </ul> <p>Ch\u00fac may m\u1eafn!</p>"},{"location":"misc/chrome-blog/inside-browser-1/","title":"B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 1)","text":""},{"location":"misc/chrome-blog/inside-browser-1/#nguon","title":"Ngu\u1ed3n","text":"<p> Inside look at modern web browser (part 1) - Chrome Developers Blog</p>"},{"location":"misc/chrome-blog/inside-browser-1/#cpu-gpu-bo-nho-va-kien-truc-a-tien-trinh","title":"CPU, GPU, b\u1ed9 nh\u1edb, v\u00e0 ki\u1ebfn tr\u00fac \u0111a ti\u1ebfn tr\u00ecnh","text":"<p>Trong series 4 ph\u1ea7n n\u00e0y, ta s\u1ebd \u0111i s\u00e2u v\u00e0o tr\u00ecnh duy\u1ec7t Chrome t\u1eeb ki\u1ebfn tr\u00fac b\u1eadc cao \u0111\u1ebfn c\u00e1c chi ti\u1ebft c\u1ee7a qu\u00e1 tr\u00ecnh render (k\u1ebft xu\u1ea5t). N\u1ebfu b\u1ea1n t\u1eebng th\u1eafc m\u1eafc l\u00e0m sao tr\u00ecnh duy\u1ec7t bi\u1ebfn code c\u1ee7a b\u1ea1n th\u00e0nh m\u1ed9t trang web, ho\u1eb7c t\u1ea1i sao m\u1ed9t k\u1ef9 thu\u1eadt c\u1ee5 th\u1ec3 n\u00e0o \u0111\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t, th\u00ec series n\u00e0y l\u00e0 d\u00e0nh cho b\u1ea1n.</p> <p>Trong ph\u1ea7n 1 c\u1ee7a series n\u00e0y, ta s\u1ebd xem x\u00e9t \u0111\u1ebfn thu\u1eadt ng\u1eef core computing (\u0111i\u1ec7n to\u00e1n l\u00f5i) v\u00e0 ki\u1ebfn tr\u00fac \u0111a ti\u1ebfn tr\u00ecnh c\u1ee7a Chrome.</p>"},{"location":"misc/chrome-blog/inside-browser-1/#nhan-may-tinh-chua-cpu-va-gpu","title":"Nh\u00e2n m\u00e1y t\u00ednh ch\u1ee9a CPU v\u00e0 GPU","text":"<p>\u0110\u1ec3 hi\u1ec3u m\u00f4i tr\u01b0\u1eddng m\u00e0 tr\u00ecnh duy\u1ec7t s\u1ebd ch\u1ea1y, ta c\u1ea7n hi\u1ec3u m\u1ed9t s\u1ed1 th\u00e0nh ph\u1ea7n trong m\u00e1y t\u00ednh tr\u01b0\u1edbc \u0111\u00e3.</p>"},{"location":"misc/chrome-blog/inside-browser-1/#cpu","title":"CPU","text":"<p>\u0110\u1ea7u ti\u00ean l\u00e0 CPU (Central Processing Unit - \u0111\u01a1n v\u1ecb x\u1eed l\u00fd trung t\u00e2m). CPU c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c xem nh\u01b0 n\u00e3o b\u1ed9 c\u1ee7a m\u00e1y t\u00ednh. M\u1ed9t nh\u00e2n CPU, nh\u01b0 trong h\u00ecnh l\u00e0 m\u1ed9t ki\u1ec3u nh\u00e2n vi\u00ean v\u0103n ph\u00f2ng, c\u00f3 th\u1ec3 x\u1eed l\u00fd nhi\u1ec1u t\u00e1c v\u1ee5 l\u1ea7n l\u01b0\u1ee3t. N\u00f3 c\u00f3 th\u1ec3 x\u1eed l\u00fd m\u1ecdi th\u1ee9 t\u1eeb to\u00e1n cho \u0111\u1ebfn m\u1ef9 thu\u1eadt. Trong qu\u00e1 kh\u1ee9, h\u1ea7u h\u1ebft c\u00e1c CPU l\u00e0 m\u1ed9t chip \u0111\u01a1n. M\u1ed9t core gi\u1ed1ng nh\u01b0 m\u1ed9t CPU kh\u00e1c \u1edf trong c\u00f9ng m\u1ed9t con ch\u1ecbp. Trong ph\u1ea7n c\u1ee9ng hi\u1ec7n \u0111\u1ea1i, ta th\u01b0\u1eddng c\u00f3 nhi\u1ec1u h\u01a1n m\u1ed9t core, mang l\u1ea1i nhi\u1ec1u s\u1ee9c m\u1ea1nh t\u00ednh to\u00e1n h\u01a1n cho \u0111i\u1ec7n tho\u1ea1i v\u00e0 laptop c\u1ee7a b\u1ea1n.</p> <p></p> H\u00ecnh 1: 4 core l\u00e0m vi\u1ec7c nh\u01b0 nh\u00e2n vi\u00ean v\u0103n ph\u00f2ng x\u1eed l\u00fd c\u00e1c l\u1ea7n l\u01b0\u1ee3t c\u00e1c t\u00e1c v\u1ee5 nh\u1eadn \u0111\u01b0\u1ee3c"},{"location":"misc/chrome-blog/inside-browser-1/#gpu","title":"GPU","text":"<p>GPU (Graphics Processing Unit - \u0111\u01a1n v\u1ecb x\u1eed l\u00fd \u0111\u1ed3 ho\u1ea1) l\u00e0 m\u1ed9t ph\u1ea7n kh\u00e1c c\u1ee7a m\u00e1y t\u00ednh. Kh\u00e1c v\u1edbi CPU, GPU x\u1eed l\u00fd c\u00e1c t\u00e1c v\u1ee5 \u0111\u01a1n gi\u1ea3n nh\u01b0ng tr\u00ean nhi\u1ec1u core m\u1ed9t l\u1ea7n. Gi\u1ed1ng nh\u01b0 t\u00ean g\u1ecdi th\u00ec ban \u0111\u1ea7u n\u00f3 \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n \u0111\u1ec3 x\u1eed l\u00fd \u0111\u1ed3 ho\u1ea1. \u0110\u00e2y l\u00e0 l\u00fd do v\u00ec sao m\u00e0 trong c\u00e1c tr\u01b0\u1eddng h\u1ee3p \"d\u00f9ng GPU\" hay \"\u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1edfi GPU\" th\u01b0\u1eddng \u0111i li\u1ec1n v\u1edbi render nhanh v\u00e0 t\u01b0\u01a1ng t\u00e1c m\u01b0\u1ee3t m\u00e0. Trong nh\u1eefng n\u0103m g\u1ea7n \u0111\u00e2y, v\u1edbi \u0111i\u1ec7n to\u00e1n \u0111\u01b0\u1ee3c GPU t\u0103ng t\u1ed1c, ng\u00e0y c\u00e0ng c\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n \u0111\u01b0\u1ee3c nhi\u1ec1u t\u00ednh to\u00e1n h\u01a1n ch\u1ec9 tr\u00ean GPU.</p> <p></p> H\u00ecnh 2: Nhi\u1ec1u core c\u1ea7m c\u1edd l\u00ea cho th\u1ea5y ch\u00fang \u0111ang x\u1eed l\u00fd m\u1ed9t t\u00e1c v\u1ee5 \u0111\u01a1n gi\u1ea3n <p>Khi b\u1ea1n kh\u1edfi \u0111\u1ed9ng m\u1ed9t \u1ee9ng d\u1ee5ng tr\u00ean m\u00e1y t\u00ednh ho\u1eb7c \u0111i\u1ec7n tho\u1ea1i, CPU v\u00e0 GPU l\u00e0 nh\u1eefng th\u1ee9 ch\u00ednh y\u1ebfu c\u1ee7a \u1ee9ng d\u1ee5ng. Th\u00f4ng th\u01b0\u1eddng, c\u00e1c \u1ee9ng d\u1ee5ng ch\u1ea1y tr\u00ean CPU v\u00e0 GPU s\u1eed d\u1ee5ng c\u00e1c c\u01a1 ch\u1ebf do h\u1ec7 \u0111i\u1ec1u h\u00e0nh cung c\u1ea5p.</p> <p></p> H\u00ecnh 3: Ba l\u1edbp ki\u1ebfn tr\u00fac m\u00e1y t\u00ednh. Ph\u1ea7n c\u1ee9ng m\u00e1y t\u00ednh n\u1eb1m d\u01b0\u1edbi c\u00f9ng, H\u1ec7 \u0111i\u1ec1u h\u00e0nh n\u1eb1m gi\u1eefa, c\u00f2n \u1ee8ng d\u1ee5ng n\u1eb1m tr\u00ean c\u00f9ng"},{"location":"misc/chrome-blog/inside-browser-1/#khoi-chay-chuong-trinh-tren-process-va-thread","title":"Kh\u1edfi ch\u1ea1y ch\u01b0\u01a1ng tr\u00ecnh tr\u00ean Process v\u00e0 Thread","text":"<p>M\u1ed9t kh\u00e1i ni\u1ec7m n\u1eefa c\u1ea7n n\u1eafm tr\u01b0\u1edbc khi \u0111i s\u00e2u v\u00e0o ki\u1ebfn tr\u00fac tr\u00ecnh duy\u1ec7t l\u00e0 Process v\u00e0 Thread. M\u1ed9t process c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c xem nh\u01b0 m\u1ed9t ch\u01b0\u01a1ng tr\u00ecnh th\u1ef1c thi c\u1ee7a \u1ee9ng d\u1ee5ng. M\u1ed9t thread l\u00e0 th\u1ee9 n\u1eb1m b\u00ean trong process v\u00e0 th\u1ef1c thi b\u1ea5t k\u1ef3 ph\u1ea7n n\u00e0o trong ch\u01b0\u01a1ng tr\u00ecnh c\u1ee7a process c\u1ee7a n\u00f3.</p> <p></p> H\u00ecnh 4: Process l\u00e0 h\u00ecnh ch\u1eef nh\u1eadt n\u1eb1m ngo\u00e0i, c\u00f2n Thread th\u00ec l\u00e0 m\u1ea5y con c\u00e1 b\u00ean trong Process <p>Khi b\u1ea1n kh\u1edfi \u0111\u1ed9ng m\u1ed9t \u1ee9ng d\u1ee5ng, m\u1ed9t process s\u1ebd \u0111\u01b0\u1ee3c t\u1ea1o ra. Ch\u01b0\u01a1ng tr\u00ecnh c\u00f3 th\u1ec3 t\u1ea1o c\u00e1c thread \u0111\u1ec3 gi\u00fap ch\u01b0\u01a1ng tr\u00ecnh ho\u1ea1t \u0111\u1ed9ng, nh\u01b0ng kh\u00f4ng b\u1eaft bu\u1ed9c. H\u1ec7 \u0111i\u1ec1u h\u00e0nh cung c\u1ea5p cho process m\u1ed9t kh\u1ed1i b\u1ed9 nh\u1edb \u0111\u1ec3 ho\u1ea1t \u0111\u1ed9ng v\u00e0 t\u1ea5t c\u1ea3 c\u00e1c tr\u1ea1ng th\u00e1i c\u1ee7a \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c gi\u1eef trong kh\u00f4ng gian b\u1ed9 nh\u1edb ri\u00eang \u0111\u00f3. Khi \u0111\u00f3ng \u1ee9ng d\u1ee5ng, process n\u00e0y c\u0169ng bi\u1ebfn m\u1ea5t v\u00e0 h\u1ec7 \u0111i\u1ec1u h\u00e0nh s\u1ebd gi\u1ea3i ph\u00f3ng b\u1ed9 nh\u1edb.</p> <p></p> H\u00ecnh 5: S\u01a1 \u0111\u1ed3 process s\u1eed d\u1ee5ng kh\u00f4ng gian b\u1ed9 nh\u1edb v\u00e0 l\u01b0u tr\u1eef d\u1eef li\u1ec7u c\u1ee7a \u1ee9ng d\u1ee5ng <p>M\u1ed9t process c\u00f3 th\u1ec3 y\u00eau c\u1ea7u h\u1ec7 \u0111i\u1ec1u h\u00e0nh kh\u1edfi \u0111\u1ed9ng m\u1ed9t process kh\u00e1c \u0111\u1ec3 ch\u1ea1y c\u00e1c t\u00e1c v\u1ee5 kh\u00e1c nhau. Khi \u0111i\u1ec1u n\u00e0y x\u1ea3y ra, c\u00e1c ph\u1ea7n kh\u00e1c nhau c\u1ee7a b\u1ed9 nh\u1edb \u0111\u01b0\u1ee3c ph\u00e2n b\u1ed1 cho process m\u1edbi. N\u1ebfu hai process c\u1ea7n giao ti\u1ebfp v\u1edbi nhau, ch\u00fang s\u1ebd d\u00f9ng IPC (Inter Process Communication - Giao ti\u1ebfp gi\u1eefa c\u00e1c process). Nhi\u1ec1u \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 ho\u1ea1t \u0111\u1ed9ng theo c\u00e1ch n\u00e0y sao cho n\u1ebfu m\u1ed9t worker process b\u1ecb treo, n\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c kh\u1edfi \u0111\u1ed9ng l\u1ea1i m\u00e0 kh\u00f4ng ph\u1ea3i d\u1eebng c\u00e1c process kh\u00e1c \u0111ang ch\u1ea1y c\u00e1c ph\u1ea7n kh\u00e1c nhau c\u1ee7a \u1ee9ng d\u1ee5ng.</p> <p></p> H\u00ecnh 6: S\u01a1 \u0111\u1ed3 c\u00e1c process ri\u00eang bi\u1ec7t giao ti\u1ebfp v\u1edbi nhau th\u00f4ng qua IPC"},{"location":"misc/chrome-blog/inside-browser-1/#kien-truc-trinh-duyet","title":"Ki\u1ebfn tr\u00fac tr\u00ecnh duy\u1ec7t","text":"<p>Gi\u1edd th\u00ec tr\u00ecnh duy\u1ec7t \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng d\u1ef1a tr\u00ean process v\u00e0 thread nh\u01b0 th\u1ebf n\u00e0o? C\u00f3 th\u1ec3 l\u00e0 m\u1ed9t process v\u1edbi nhi\u1ec1u thread kh\u00e1c nhau ho\u1eb7c nhi\u1ec1u process kh\u00e1c nhau v\u1edbi m\u1ed9t \u00edt thread giao ti\u1ebfp v\u1edbi nhau qua IPC.</p> <p></p> H\u00ecnh 7: C\u00e1c ki\u1ebfn tr\u00fac tr\u00ecnh duy\u1ec7t kh\u00e1c nhau trong s\u01a1 \u0111\u1ed3 process/thread <p>M\u1ed9t l\u01b0u \u00fd quan tr\u1ecdng l\u00e0 c\u00e1c ki\u1ebfn tr\u00fac kh\u00e1c nhau n\u00e0y l\u00e0 c\u00e1c chi ti\u1ebft c\u00e0i \u0111\u1eb7t. Kh\u00f4ng c\u00f3 m\u1ed9t chu\u1ea9n n\u00e0o cho vi\u1ec7c t\u1ea1o ra m\u1ed9t tr\u00ecnh duy\u1ec7t. C\u00e1ch ti\u1ebfp c\u1eadn \u0111\u1ec3 x\u00e2y d\u1ef1ng tr\u00ecnh duy\u1ec7t n\u00e0y c\u00f3 th\u1ec3 kh\u00e1c ho\u00e0n to\u00e0n v\u1edbi c\u00e1ch ti\u1ebfp c\u1eadn \u0111\u1ec3 x\u00e2y d\u1ef1ng m\u1ed9t tr\u00ecnh duy\u1ec7t kh\u00e1c.</p> <p>Ta s\u1ebd ch\u1ec9 t\u1eadp trung v\u00e0o ki\u1ebfn tr\u00fac b\u00e2y gi\u1edd c\u1ee7a Chrome \u0111\u01b0\u1ee3c mi\u00eau t\u1ea3 trong s\u01a1 \u0111\u1ed3 b\u00ean d\u01b0\u1edbi.</p> <p>\u1ede tr\u00ean c\u00f9ng l\u00e0 process tr\u00ecnh duy\u1ec7t ph\u1ed1i h\u1ee3p v\u1edbi c\u00e1c process kh\u00e1c \u0111\u1ec3 \u0111\u1ea3m nhi\u1ec7m c\u00e1c ph\u1ea7n kh\u00e1c nhau c\u1ee7a \u1ee9ng d\u1ee5ng. V\u1edbi renderer process, nhi\u1ec1u process \u0111\u01b0\u1ee3c t\u1ea1o ra v\u00e0 g\u00e1n cho m\u1ed7i tab. Cho \u0111\u1ebfn g\u1ea7n \u0111\u00e2y, Chrome cho m\u1ed7i tab m\u1ed9t process khi c\u00f3 th\u1ec3; gi\u1edd n\u00f3 c\u1ed1 g\u1eafng cho m\u1ed7i trang m\u1ed9t process ri\u00eang, k\u1ec3 c\u1ea3 iframe (\u1ede ph\u1ea7n Site Isolation).</p> <p></p> H\u00ecnh 8: S\u01a1 \u0111\u1ed3 ki\u1ebfn tr\u00fac \u0111a ti\u1ebfn tr\u00ecnh c\u1ee7a Chrome. Renderer Process c\u00f3 nhi\u1ec1u l\u1edbp \u0111\u1ec3 bi\u1ec3u di\u1ec5n vi\u1ec7c Chrome ch\u1ea1y nhi\u1ec1u process \u1edf \u0111\u00e2y cho m\u1ed7i tab"},{"location":"misc/chrome-blog/inside-browser-1/#cac-process-ieu-khien-cai-gi","title":"C\u00e1c Process \u0111i\u1ec1u khi\u1ec3n c\u00e1i g\u00ec?","text":"<p>B\u1ea3ng sau cho th\u1ea5y c\u00e1c process c\u1ee7a Chrome v\u00e0 nh\u1eefng th\u1ee9 ch\u00fang \u0111i\u1ec1u khi\u1ec3n:</p> Process \u0110i\u1ec1u khi\u1ec3n Tr\u00ecnh duy\u1ec7t \u0110i\u1ec1u khi\u1ec3n ph\u1ea7n \"chrome\" c\u1ee7a \u1ee9ng d\u1ee5ng bao g\u1ed3m thanh \u0111\u1ecba ch\u1ec9, bookmark, n\u00fat quay l\u1ea1i trang tr\u01b0\u1edbc v\u00e0 \u0111i ti\u1ebfp trang sau.  X\u1eed l\u00fd c\u00e1c ph\u1ea7n \u1ea9n, \u0111\u1eb7c quy\u1ec1n c\u1ee7a tr\u00ecnh duy\u1ec7t nh\u01b0 network request hay truy c\u1eadp file. Renderer \u0110i\u1ec1u khi\u1ec3n b\u1ea5t c\u1ee9 c\u00e1i g\u00ec trong tab, n\u01a1i m\u00e0 website \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb. Plugin \u0110i\u1ec1u khi\u1ec3n b\u1ea5t k\u1ef3 plugin n\u00e0o d\u00f9ng b\u1edfi website, v\u00ed d\u1ee5 nh\u01b0 flash. GPU X\u1eed l\u00fd c\u00e1c t\u00e1c v\u1ee5 GPU ri\u00eang bi\u1ec7t, t\u00e1ch ra kh\u1ecfi c\u00e1c process kh\u00e1c. N\u00f3 \u0111\u01b0\u1ee3c ph\u00e2n ra ri\u00eang v\u00ec c\u00e1c GPU x\u1eed l\u00fd c\u00e1c y\u00eau c\u1ea7u t\u1eeb nhi\u1ec1u \u1ee9ng d\u1ee5ng v\u00e0 v\u1ebd ch\u00fang tr\u00ean c\u00f9ng m\u1ed9t ch\u1ed7 <p></p> H\u00ecnh 9: C\u00e1c process kh\u00e1c nhau tr\u1ecf v\u00e0o c\u00e1c ph\u1ea7n kh\u00e1c nhau tr\u00ean UI c\u1ee7a tr\u00ecnh duy\u1ec7t <p>C\u00f2n c\u00f3 nhi\u1ec1u process h\u01a1n n\u1eefa nh\u01b0 l\u00e0 process cho c\u00e1c ti\u1ec7n \u00edch m\u1edf r\u1ed9ng hay process cho c\u00e1c ti\u1ec7n \u00edch kh\u00e1c. N\u1ebfu b\u1ea1n mu\u1ed1n xem c\u00f3 bao nhi\u00eau process \u0111ang ch\u1ea1y trong Chrome, b\u1ea5m v\u00e0o d\u1ea5u ba ch\u1ea5m \u1edf g\u00f3c ph\u1ea3i tr\u00ean c\u1ee7a Chrome, ch\u1ecdn More Tools, r\u1ed3i ch\u1ecdn Task Manager. M\u1ed9t c\u1eeda s\u1ed5 s\u1ebd hi\u1ec7n l\u00ean v\u1edbi danh s\u00e1ch c\u00e1c process \u0111ang ch\u1ea1y v\u00e0 ch\u00fang \u0111ang d\u00f9ng bao nhi\u00eau CPU / B\u1ed9 nh\u1edb.</p>"},{"location":"misc/chrome-blog/inside-browser-1/#loi-ich-cua-kien-truc-a-tien-trinh-trong-chrome","title":"L\u1ee3i \u00edch c\u1ee7a ki\u1ebfn tr\u00fac \u0111a ti\u1ebfn tr\u00ecnh trong Chrome","text":"<p>Tr\u01b0\u1edbc \u0111\u00f3, ta \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u0111\u1ebfn vi\u1ec7c Chrome s\u1eed d\u1ee5ng nhi\u1ec1u renderer process. Trong tr\u01b0\u1eddng h\u1ee3p \u0111\u01a1n gi\u1ea3n nh\u1ea5t, ta c\u00f3 th\u1ec3 t\u01b0\u1edfng t\u01b0\u1ee3ng m\u1ed7i tab c\u00f3 m\u1ed9t renderer process ri\u00eang. Gi\u1ea3 s\u1eed b\u1ea1n c\u00f3 3 tab \u0111ang m\u1edf v\u00e0 m\u1ed7i tab \u0111\u01b0\u1ee3c ch\u1ea1y b\u1edfi m\u1ed9t renderer process \u0111\u1ed9c l\u1eadp. N\u1ebfu m\u1ed9t tab b\u1ecb treo, th\u00ec b\u1ea1n c\u00f3 th\u1ec3 \u0111\u00f3ng tab \u0111\u00f3 trong khi v\u1eabn gi\u1eef cho c\u00e1c tab kh\u00e1c ho\u1ea1t \u0111\u1ed9ng. N\u1ebfu t\u1ea5t c\u1ea3 c\u00e1c tab \u0111ang ch\u1ea1y tr\u00ean m\u1ed9t process, khi m\u1ed9t tab treo, c\u00e1c tab kh\u00e1c c\u0169ng treo lu\u00f4n. Kh\u00e1 bu\u1ed3n.</p> <p></p> H\u00ecnh 10: S\u01a1 \u0111\u1ed3 cho th\u1ea5y nhi\u1ec1u process ch\u1ea1y tr\u00ean m\u1ed7i tab <p>M\u1ed9t l\u1ee3i \u00edch kh\u00e1c c\u1ee7a vi\u1ec7c t\u00e1ch c\u00f4ng vi\u1ec7c c\u1ee7a tr\u00ecnh duy\u1ec7t th\u00e0nh nhi\u1ec1u process l\u00e0 do t\u00ednh b\u1ea3o m\u1eadt v\u00e0 \u0111\u1ed9c l\u1eadp. V\u00ec c\u00e1c h\u1ec7 \u0111i\u1ec1u h\u00e0nh cung c\u1ea5p m\u1ed9t c\u00e1ch \u0111\u1ec3 h\u1ea1n ch\u1ebf c\u00e1c quy\u1ec1n c\u1ee7a c\u00e1c process, tr\u00ecnh duy\u1ec7t c\u00f3 th\u1ec3 sandbox m\u1ed9t s\u1ed1 process nh\u1ea5t \u0111\u1ecbnh t\u1eeb c\u00e1c t\u00ednh n\u0103ng nh\u1ea5t \u0111\u1ecbnh. V\u00ed d\u1ee5, tr\u00ecnh duy\u1ec7t Chrome h\u1ea1n ch\u1ebf quy\u1ec1n truy c\u1eadp file tu\u1ef3 \u00fd \u0111\u1ed1i v\u1edbi c\u00e1c process x\u1eed l\u00fd \u0111\u1ea7u v\u00e0o tu\u1ef3 \u00fd c\u1ee7a ng\u01b0\u1eddi d\u00f9ng nh\u01b0 renderer process.</p> <p>V\u00ec c\u00e1c process c\u00f3 kh\u00f4ng gian b\u1ed9 nh\u1edb ri\u00eang n\u00ean ch\u00fang th\u01b0\u1eddng ch\u1ee9a b\u1ea3n sao c\u1ee7a c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng chung (nh\u01b0 V8 l\u00e0 c\u00f4ng c\u1ee5 JavaScript c\u1ee7a Chrome). \u0110i\u1ec1u n\u00e0y ngh\u0129a l\u00e0 s\u1eed d\u1ee5ng nhi\u1ec1u b\u1ed9 nh\u1edb h\u01a1n v\u00ec ch\u00fang kh\u00f4ng th\u1ec3 \u0111\u01b0\u1ee3c chia s\u1ebb theo c\u00e1ch truy\u1ec1n th\u1ed1ng n\u1ebfu ch\u00fang l\u00e0 c\u00e1c thread trong c\u00f9ng m\u1ed9t process. \u0110\u1ec3 ti\u1ebft ki\u1ec7m b\u1ed9 nh\u1edb, Chrome \u0111\u1eb7t gi\u1edbi h\u1ea1n v\u1ec1 s\u1ed1 process c\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n. Gi\u1edbi h\u1ea1n kh\u00e1c nhau tu\u1ef3 v\u00e0o dung l\u01b0\u1ee3ng b\u1ed9 nh\u1edb v\u00e0 s\u1ee9c m\u1ea1nh CPU m\u00e0 thi\u1ebft b\u1ecb c\u00f3, nh\u01b0ng khi Chrome \u0111\u1ea1t gi\u1edbi h\u1ea1n, n\u00f3 s\u1ebd b\u1eaft \u0111\u1ea7u ch\u1ea1y nhi\u1ec1u tab c\u1ee7a c\u00f9ng m\u1ed9t trang tr\u00ean c\u00f9ng m\u1ed9t process.</p>"},{"location":"misc/chrome-blog/inside-browser-1/#tiet-kiem-nhieu-bo-nho-hon-servicification-trong-chrome","title":"Ti\u1ebft ki\u1ec7m nhi\u1ec1u b\u1ed9 nh\u1edb h\u01a1n - Servicification trong Chrome","text":"<p>C\u00e1ch ti\u1ebfp c\u1eadn t\u01b0\u01a1ng t\u1ef1 c\u0169ng \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng cho process tr\u00ecnh duy\u1ec7t. Chrome \u0111ang ti\u1ebfn h\u00e0nh c\u00e1c thay \u0111\u1ed5i v\u1ec1 ki\u1ebfn tr\u00fac \u0111\u1ec3 ch\u1ea1y t\u1eebng ph\u1ea7n c\u1ee7a tr\u00ecnh duy\u1ec7t d\u01b0\u1edbi d\u1ea1ng m\u1ed9t service cho ph\u00e9p ph\u00e2n chia d\u1ec5 d\u00e0ng c\u00e1c process kh\u00e1c nhau ho\u1eb7c t\u1ed5ng h\u1ee3p th\u00e0nh m\u1ed9t.</p> <p>\u00dd t\u01b0\u1edfng chung l\u00e0 khi Chrome \u0111ang ch\u1ea1y tr\u00ean ph\u1ea7n c\u1ee9ng m\u1ea1nh m\u1ebd, n\u00f3 c\u00f3 th\u1ec3 chia t\u1eebng service th\u00e0nh c\u00e1c process kh\u00e1c nhau \u0111\u1ec3 gi\u1eef t\u00ednh \u1ed5n \u0111\u1ecbnh. Nh\u01b0ng n\u1ebfu ch\u1ea1y tr\u00ean m\u1ed9t thi\u1ebft b\u1ecb h\u1ea1n ch\u1ebf t\u00e0i nguy\u00ean, Chrome s\u1ebd h\u1ee3p nh\u1ea5t c\u00e1c service th\u00e0nh m\u1ed9t process \u0111\u1ec3 ti\u1ebft ki\u1ec7m b\u1ed9 nh\u1edb. C\u00e1ch ti\u1ebfp c\u1eadn t\u01b0\u01a1ng t\u1ef1 v\u1ec1 h\u1ee3p nh\u1ea5t c\u00e1c process \u0111\u1ec3 s\u1eed d\u1ee5ng \u00edt b\u1ed9 nh\u1edb h\u01a1n \u0111\u00e3 \u0111\u01b0\u1ee3c d\u00f9ng tr\u00ean c\u00e1c n\u1ec1n t\u1ea3ng kh\u00e1c nh\u01b0 Android tr\u01b0\u1edbc khi c\u00f3 s\u1ef1 thay \u0111\u1ed5i n\u00e0y.</p> <p></p> H\u00ecnh 11: S\u01a1 \u0111\u1ed3 Servicification trong Chrome d\u1ecbch chuy\u1ec3n c\u00e1c service kh\u00e1c nhau v\u00e0o nhi\u1ec1u process v\u00e0 m\u1ed9t process tr\u00ecnh duy\u1ec7t \u0111\u01a1n"},{"location":"misc/chrome-blog/inside-browser-1/#renderer-process-tren-moi-frame-site-isolation","title":"Renderer process tr\u00ean m\u1ed7i frame - Site Isolation","text":"<p>Site Isolation (c\u00e1ch ly trang web) l\u00e0 m\u1ed9t t\u00ednh n\u0103ng \u0111\u01b0\u1ee3c gi\u1edbi thi\u1ec7u g\u1ea7n \u0111\u00e2y trong Chrome, n\u00f3 ch\u1ea1y c\u00e1c renderer process kh\u00e1c nhau cho t\u1eebng iframe c\u1ee7a c\u00e1c trang web kh\u00e1c (cross-site iframe) tr\u00ean c\u00f9ng m\u1ed9t tab. Ta \u0111\u00e3 n\u00f3i v\u1ec1 m\u1ed9t renderer process tr\u00ean m\u1ed7i tab cho ph\u00e9p c\u00e1c iframe c\u1ee7a c\u00e1c trang web kh\u00e1c ch\u1ea1y m\u1ed9t renderer process v\u1edbi kh\u00f4ng gian b\u1ed9 nh\u1edb chia s\u1ebb tr\u00ean c\u00e1c site kh\u00e1c nhau. Ch\u1ea1y <code>a.com</code> v\u00e0 <code>b.com</code> tr\u00ean c\u00f9ng m\u1ed9t renderer process nghe c\u00f3 v\u1ebb \u1ed5n. Same Origin Policy (ch\u00ednh s\u00e1ch xu\u1ea5t x\u1ee9 gi\u1ed1ng nhau) l\u00e0 m\u00f4 h\u00ecnh b\u1ea3o m\u1eadt c\u1ed1t l\u00f5i c\u1ee7a web; n\u00f3 b\u1ea3o \u0111\u1ea3m m\u1ed9t trang web kh\u00f4ng th\u1ec3 truy c\u1eadp d\u1eef li\u1ec7u t\u1eeb c\u00e1c web kh\u00e1c m\u00e0 kh\u00f4ng c\u00f3 s\u1ef1 \u0111\u1ed3ng \u00fd. B\u1ecf qua ch\u00ednh s\u00e1ch n\u00e0y l\u00e0 m\u1ed9t l\u1ed7 h\u1ed5ng l\u1edbn cho c\u00e1c cu\u1ed9c t\u1ea5n c\u00f4ng m\u1ea1ng. Vi\u1ec7c c\u00e1ch ly c\u00e1c process l\u00e0 c\u00e1ch hi\u1ec7u qu\u1ea3 nh\u1ea5t \u0111\u1ec3 t\u00e1ch c\u00e1c trang web. V\u1edbi Meltdown v\u00e0 Spectre, r\u00f5 r\u00e0ng h\u01a1n l\u00e0 ch\u00fang ta c\u1ea7n t\u00e1ch c\u00e1c trang web b\u1eb1ng c\u00e1c process. V\u1edbi Site Isolation \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng m\u1eb7c \u0111\u1ecbnh tr\u00ean Chrome desktop t\u1eeb b\u1ea3n 67, m\u1ed7i iframe c\u1ee7a c\u00e1c trang web kh\u00e1c trong m\u1ed9t tab c\u00f3 m\u1ed9t renderer process ri\u00eang.</p> <p></p> H\u00ecnh 12: S\u01a1 \u0111\u1ed3 Site Isolation; nhi\u1ec1u renderer process tr\u1ecf v\u00e0o c\u00e1c iframe trong c\u00f9ng m\u1ed9t trang web <p>Cho ph\u00e9p Site Isolation l\u00e0 m\u1ed9t n\u1ed7 l\u1ef1c trong nhi\u1ec1u n\u0103m c\u1ee7a \u0111\u1ed9i ng\u0169 k\u1ef9 s\u01b0. Site Isolation kh\u00f4ng \u0111\u01a1n gi\u1ea3n ch\u1ec9 l\u00e0 ch\u1ec9 \u0111\u1ecbnh c\u00e1c renderer process kh\u00e1c nhau; v\u1ec1 c\u01a1 b\u1ea3n n\u00f3 thay \u0111\u1ed5i c\u00e1ch c\u00e1c iframe giao ti\u1ebfp v\u1edbi nhau. M\u1edf devtools tr\u00ean m\u1ed9t trang c\u00f3 iframe ch\u1ea1y tr\u00ean c\u00e1c process kh\u00e1c nhau ngh\u0129a l\u00e0 devtools ph\u1ea3i tri\u1ec3n khai c\u00f4ng vi\u1ec7c h\u1eadu tr\u01b0\u1eddng \u0111\u1ec3 l\u00e0m n\u00f3 xu\u1ea5t hi\u1ec7n li\u1ec1n m\u1ea1ch. Ngay c\u1ea3 vi\u1ec7c ch\u1ea1y <code>Ctrl+F</code> \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 t\u00ecm m\u1ed9t t\u1eeb trong trang c\u0169ng c\u00f3 ngh\u0129a l\u00e0 t\u00ecm ki\u1ebfm tr\u00ean nhi\u1ec1u renderer process kh\u00e1c nhau. B\u1ea1n c\u00f3 th\u1ec3 th\u1ea5y v\u00ec sao c\u00e1c k\u1ef9 s\u01b0 tr\u00ecnh duy\u1ec7t n\u00f3i v\u1ec1 vi\u1ec7c ph\u00e1t h\u00e0nh Site Isolation nh\u01b0 l\u00e0 m\u1ed9t c\u1ed9t m\u1ed1c \u0111\u1ec9nh cao!</p>"},{"location":"misc/chrome-blog/inside-browser-1/#ket-phan-1","title":"K\u1ebft ph\u1ea7n 1","text":"<p>Trong ph\u1ea7n n\u00e0y, ta \u0111\u00e3 \u0111i qua g\u00f3c nh\u00ecn c\u01a1 b\u1ea3n c\u1ee7a ki\u1ebfn tr\u00fac tr\u00ecnh duy\u1ec7t v\u00e0 l\u1ee3i \u00edch c\u1ee7a ki\u1ebfn tr\u00fac \u0111a ti\u1ebfn tr\u00ecnh. Ta c\u0169ng \u0111i qua Servicification v\u00e0 Site Isolation trong Chrome, nh\u1eefng th\u1ee9 c\u1ef1c k\u1ef3 li\u00ean quan \u0111\u1ebfn ki\u1ebfn tr\u00fac \u0111a ti\u1ebfn tr\u00ecnh. Trong ph\u1ea7n sau, ta s\u1ebd kh\u00e1m ph\u00e1 chuy\u1ec7n g\u00ec x\u1ea3y ra gi\u1eefa c\u00e1c process v\u00e0 thread n\u00e0y \u0111\u1ec3 hi\u1ec3n th\u1ecb website.</p>"},{"location":"misc/chrome-blog/inside-browser-2/","title":"B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 2)","text":""},{"location":"misc/chrome-blog/inside-browser-2/#nguon","title":"Ngu\u1ed3n","text":"<p> Inside look at modern web browser (part 2) - Chrome Developers Blog</p>"},{"location":"misc/chrome-blog/inside-browser-2/#chuyen-xay-ra-khi-ieu-huong","title":"Chuy\u1ec7n x\u1ea3y ra khi \u0111i\u1ec1u h\u01b0\u1edbng","text":"<p>\u0110\u00e2y l\u00e0 ph\u1ea7n 2 trong series 4 ph\u1ea7n t\u00ecm hi\u1ec3u v\u1ec1 Chrome. Trong ph\u1ea7n 1, ta t\u00ecm hi\u1ec3u l\u00e0m sao c\u00e1c process v\u00e0 thread kh\u00e1c nhau x\u1eed l\u00fd c\u00e1c ph\u1ea7n kh\u00e1c nhau trong tr\u00ecnh duy\u1ec7t. \u1ede ph\u1ea7n n\u00e0y, ta \u0111i s\u00e2u h\u01a1n v\u1ec1 vi\u1ec7c l\u00e0m th\u1ebf n\u00e0o m\u1ed7i process v\u00e0 thread giao ti\u1ebfp v\u1edbi nhau \u0111\u1ec3 hi\u1ec3n th\u1ecb m\u1ed9t trang web.</p> <p>Ta b\u1eaft \u0111\u1ea7u v\u1edbi m\u1ed9t use case \u0111\u01a1n gi\u1ea3n nh\u01b0 sau: B\u1ea1n \u0111i\u1ec1n URL v\u00e0o tr\u00ecnh duy\u1ec7t, tr\u00ecnh duy\u1ec7t l\u1ea5y data t\u1eeb internet v\u00e0 hi\u1ec3n th\u1ecb trang web. Trong ph\u1ea7n n\u00e0y, ta s\u1ebd t\u1eadp trung v\u00e0o ph\u1ea7n m\u00e0 ng\u01b0\u1eddi d\u00f9ng request m\u1ed9t website v\u00e0 tr\u00ecnh duy\u1ec7t chu\u1ea9n b\u1ecb render m\u1ed9t trang - n\u00f4m na g\u1ecdi l\u00e0 \u0111i\u1ec1u h\u01b0\u1edbng (navigation).</p>"},{"location":"misc/chrome-blog/inside-browser-2/#no-bat-au-voi-browser-process","title":"N\u00f3 b\u1eaft \u0111\u1ea7u v\u1edbi browser process","text":"<p>Nh\u01b0 ta \u0111\u00e3 bi\u1ebft t\u1eeb ph\u1ea7n 1, m\u1ecdi th\u1ee9 kh\u00f4ng trong tab s\u1ebd \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi browser process. Browser process n\u00e0y c\u00f3 c\u00e1c thread nh\u01b0 UI thread, n\u00f3 s\u1ebd v\u1ebd c\u00e1c n\u00fat b\u1ea5m v\u00e0 \u00f4 nh\u1eadp li\u1ec7u (nh\u01b0 thanh \u0111\u1ecba ch\u1ec9) c\u1ee7a tr\u00ecnh duy\u1ec7t. browser process c\u00f2n c\u00f3 network thread, n\u00f3 s\u1ebd x\u1eed l\u00fd c\u00e1c network stack \u0111\u1ec3 nh\u1eadn data t\u1eeb internet. Storage thread c\u0169ng l\u00e0 m\u1ed9t th\u00e0nh ph\u1ea7n c\u1ee7a browser process, n\u00f3 ki\u1ec3m so\u00e1t quy\u1ec1n truy c\u1eadp file. V\u00e0 c\u00f2n m\u1ed9t s\u1ed1 lo\u1ea1i thread n\u1eefa. Khi b\u1ea1n nh\u1eadp URL v\u00e0o thanh \u0111\u1ecba ch\u1ec9, n\u00f3 s\u1ebd \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi UI thread c\u1ee7a browser process.</p> <p></p> H\u00ecnh 1: UI c\u1ee7a tr\u00ecnh duy\u1ec7t \u1edf tr\u00ean, s\u01a1 \u0111\u1ed3 c\u1ee7a browser process v\u1edbi UI, network v\u00e0 storage thread b\u00ean trong"},{"location":"misc/chrome-blog/inside-browser-2/#ieu-huong-on-gian","title":"\u0110i\u1ec1u h\u01b0\u1edbng \u0111\u01a1n gi\u1ea3n","text":""},{"location":"misc/chrome-blog/inside-browser-2/#buoc-1-xu-ly-input","title":"B\u01b0\u1edbc 1: X\u1eed l\u00fd input","text":"<p>Khi ng\u01b0\u1eddi d\u00f9ng b\u1eaft \u0111\u1ea7u nh\u1eadp v\u00e0o thanh \u0111\u1ecba ch\u1ec9, \u0111\u1ea7u ti\u00ean UI thread s\u1ebd h\u1ecfi l\u00e0 \"\u0110\u00e2y l\u00e0 truy v\u1ea5n t\u00ecm ki\u1ebfm hay URL v\u00e2y?\". Trong Chrome, thanh \u0111\u1ecba ch\u1ec9 c\u0169ng l\u00e0 thanh t\u00ecm ki\u1ebfm, n\u00ean UI thread c\u1ea7n ph\u1ea3i ki\u1ec3m tra v\u00e0 quy\u1ebft \u0111\u1ecbnh xem n\u00ean g\u1eedi ng\u01b0\u1eddi d\u00f9ng \u0111\u1ebfn b\u1ed9 m\u00e1y t\u00ecm ki\u1ebfm hay \u0111i \u0111\u1ebfn c\u00e1i trang m\u00e0 ng\u01b0\u1eddi ta mu\u1ed1n \u0111\u1ebfn.</p> <p></p> H\u00ecnh 2: UI thread h\u1ecfi xem input l\u00e0 truy v\u1ea5n t\u00ecm ki\u1ebfm hay URL"},{"location":"misc/chrome-blog/inside-browser-2/#buoc-2-bat-au-ieu-huong","title":"B\u01b0\u1edbc 2: B\u1eaft \u0111\u1ea7u \u0111i\u1ec1u h\u01b0\u1edbng","text":"<p>Khi ng\u01b0\u1eddi d\u00f9ng b\u1ea5m Enter, UI thread kh\u1edfi t\u1ea1o network call \u0111\u1ec3 l\u1ea5y n\u1ed9i dung trang web. Bi\u1ec3u t\u01b0\u1ee3ng xoay (loading) s\u1ebd xu\u1ea5t hi\u1ec7n \u1edf g\u00f3c c\u1ee7a tab, v\u00e0 network thread \u0111i qua c\u00e1c giao th\u1ee9c th\u00edch h\u1ee3p nh\u01b0 tra c\u1ee9u DNS v\u00e0 thi\u1ebft l\u1eadp k\u1ebft n\u1ed1i TLS cho request.</p> <p></p> H\u00ecnh 3: UI thread giao ti\u1ebfp v\u1edbi network thread \u0111\u1ec3 \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn mysite.com <p>T\u1ea1i th\u1eddi \u0111i\u1ec3m n\u00e0y, network thread c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c nh\u1eadn header chuy\u1ec3n h\u01b0\u1edbng server nh\u01b0 HTTP 301. Trong tr\u01b0\u1eddng h\u1ee3p \u0111\u00f3, network thread giao ti\u1ebfp v\u1edbi UI thread \u0111\u1ec3 n\u00f3i cho UI thread bi\u1ebft l\u00e0 server \u0111ang y\u00eau c\u1ea7u chuy\u1ec3n h\u01b0\u1edbng. Sau \u0111\u00f3, m\u1ed9t URL request kh\u00e1c s\u1ebd \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o.</p>"},{"location":"misc/chrome-blog/inside-browser-2/#buoc-3-oc-response","title":"B\u01b0\u1edbc 3: \u0110\u1ecdc response","text":"<p>Khi m\u00e0 response body b\u1eaft \u0111\u1ea7u \u0111\u1ebfn, network thread \u0111\u1ecdc m\u1ed9t v\u00e0i byte \u0111\u1ea7u c\u1ee7a stream n\u1ebfu c\u1ea7n. Content-Type header c\u1ee7a response cho n\u00f3 bi\u1ebft lo\u1ea1i data l\u00e0 g\u00ec, nh\u01b0ng v\u00ec th\u00f4ng t\u00ecn n\u00e0y c\u00f3 th\u1ec3 b\u1ecb thi\u1ebfu ho\u1eb7c sai, ki\u1ec3m tra MIME Type (MIME Type sniffing) s\u1ebd \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n t\u1ea1i \u0111\u00e2y. \u0110\u00e2y l\u00e0 m\u1ed9t \"c\u00f4ng vi\u1ec7c kh\u00f3 kh\u0103n\" nh\u01b0 \u0111\u01b0\u1ee3c comment trong code. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ecdc comment \u0111\u1ec3 xem c\u00e1c tr\u00ecnh duy\u1ec7t kh\u00e1c nhau x\u1eed l\u00fd c\u1eb7p Content-Type - response body nh\u01b0 th\u1ebf n\u00e0o.</p> <p></p> H\u00ecnh 4: Response header ch\u1ee9a Content-Type v\u00e0 response body ch\u1ee9a data th\u1ef1c s\u1ef1 <p>N\u1ebfu response l\u00e0 m\u1ed9t file HTML, th\u00ec b\u01b0\u1edbc ti\u1ebfp theo s\u1ebd l\u00e0 chuy\u1ec3n data cho renderer process, nh\u01b0ng n\u1ebfu n\u00f3 l\u00e0 file zip ho\u1eb7c c\u00e1c lo\u1ea1i file kh\u00e1c th\u00ec ngh\u0129a l\u00e0 n\u00f3 l\u00e0 m\u1ed9t request t\u1ea1i file, n\u00ean data \u0111\u01b0\u1ee3c chuy\u1ec3n qua cho b\u00ean download manager.</p> <p></p> H\u00ecnh 5: Network thread h\u1ecfi xem response data c\u00f3 ph\u1ea3i HTML t\u1eeb m\u1ed9t trang an to\u00e0n kh\u00f4ng <p>\u0110\u00e2y c\u0169ng l\u00e0 n\u01a1i ki\u1ec3m tra SafeBrowsing x\u1ea3y ra. N\u1ebfu domain v\u00e0 response data kh\u1edbp m\u1ed9t c\u00e1i site l\u1eeba \u0111\u1ea3o n\u00e0o \u0111\u00f3, network thread s\u1ebd nh\u1eafc tr\u00ecnh duy\u1ec7t \u0111\u1ec3 hi\u1ec3n th\u1ecb m\u1ed9t trang c\u1ea3nh b\u00e1o. Th\u00eam v\u00e0o \u0111\u00f3, ki\u1ec3m tra Cross Origin Read Blocking (CORB) c\u0169ng \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o th\u00f4ng tin nh\u1ea1y c\u1ea3m xuy\u00ean website kh\u00f4ng \u0111i v\u00e0o renderer process.</p>"},{"location":"misc/chrome-blog/inside-browser-2/#buoc-4-tim-mot-renderer-process","title":"B\u01b0\u1edbc 4: T\u00ecm m\u1ed9t renderer process","text":"<p>Sau khi c\u00e1c ki\u1ec3m tra \u0111\u1ec1u \u0111\u00e3 xong v\u00e0 network thread ch\u1eafc ch\u1eafn r\u1eb1ng tr\u00ecnh duy\u1ec7t s\u1ebd \u0111\u01b0\u1ee3c \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn trang web \u0111\u01b0\u1ee3c y\u00eau c\u1ea7u, network thread s\u1ebd b\u1ea3o UI thread r\u1eb1ng data \u0111\u00e3 s\u1eafn s\u00e0ng. UI thread sau \u0111\u00f3 t\u00ecm m\u1ed9t renderer process \u0111\u1ec3 th\u1ef1c hi\u1ec7n qu\u00e1 tr\u00ecnh render trang web</p> <p></p> H\u00ecnh 6: Network thread k\u00eau UI thread t\u00ecm Renderer Process <p>V\u00ec network request c\u00f3 th\u1ec3 m\u1ea5t v\u00e0i tr\u0103m mili gi\u00e2y \u0111\u1ec3 nh\u1eadn ph\u1ea3n h\u1ed3i, n\u00ean m\u1ed9t qu\u00e1 tr\u00ecnh t\u1ed1i \u01b0u ho\u00e1 \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng \u0111\u1ec3 t\u0103ng t\u1ed1c qu\u00e1 tr\u00ecnh tr\u00ean. Khi UI thread \u0111ang g\u1eedi URL request cho network thread \u1edf b\u01b0\u1edbc 2, n\u00f3 \u0111\u00e3 bi\u1ebft tr\u00ecnh duy\u1ec7t s\u1ebd \u0111\u01b0\u1ee3c \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn trang n\u00e0o. UI thread c\u1ed1 g\u1eafng ch\u1ee7 \u0111\u1ed9ng t\u00ecm ho\u1eb7c kh\u1edfi ch\u1ea1y m\u1ed9t renderer process song song v\u1edbi network request. B\u1eb1ng c\u00e1ch n\u00e0y, n\u1ebfu m\u1ecdi vi\u1ec7c di\u1ec5n ra b\u00ecnh th\u01b0\u1eddng, m\u1ed9t renderer process \u0111\u00e3 ch\u1edd s\u1eb5n khi network thread nh\u1eadn \u0111ata. Process d\u1ef1 ph\u00f2ng n\u00e0y c\u00f3 th\u1ec3 kh\u00f4ng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng n\u1ebfu vi\u1ec7c \u0111i\u1ec1u h\u01b0\u1edbng chuy\u1ec3n h\u01b0\u1edbng gi\u1eefa c\u00e1c trang, trong tr\u01b0\u1eddng h\u1ee3p \u0111\u00f3 th\u00ec ph\u1ea3i c\u1ea7n m\u1ed9t process kh\u00e1c.</p>"},{"location":"misc/chrome-blog/inside-browser-2/#buoc-5-ieu-huong","title":"B\u01b0\u1edbc 5: \u0110i\u1ec1u h\u01b0\u1edbng","text":"<p>Gi\u1edd data v\u00e0 renderer process \u0111\u00e3 s\u1eb5n s\u00e0ng, m\u1ed9t IPC \u0111\u01b0\u1ee3c g\u1eedi t\u1eeb browser process \u0111\u1ebfn renderer process \u0111\u1ec3 th\u1ef1c hi\u1ec7n \u0111i\u1ec1u h\u01b0\u1edbng. N\u00f3 c\u0169ng truy\u1ec1n lu\u1ed3ng data \u0111\u1ec3 renderer process c\u00f3 th\u1ec3 ti\u1ebfp t\u1ee5c nh\u1eadn HTML data. M\u1ed9t khi browser process \u0111\u01b0\u1ee3c x\u00e1c nh\u1eadn r\u1eb1ng qu\u00e1 tr\u00ecnh \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u00e3 x\u1ea3y ra trong renderer process, \u0111i\u1ec1u h\u01b0\u1edbng ho\u00e0n t\u1ea5t v\u00e0 giai \u0111o\u1ea1n t\u1ea3i t\u00e0i li\u1ec7u b\u1eaft \u0111\u1ea7u.</p> <p>T\u1ea1i th\u1eddi \u0111i\u1ec3m n\u00e0y, thanh \u0111\u1ecba ch\u1ec9 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt v\u00e0 giao di\u1ec7n ng\u01b0\u1eddi d\u00f9ng c\u00e0i \u0111\u1eb7t trang v\u00e0 ch\u1ec9 b\u00e1o b\u1ea3o m\u1eadt ph\u1ea3n \u00e1nh th\u00f4ng tin trang c\u1ee7a trang m\u1edbi. L\u1ecbch s\u1eed phi\u00ean cho tab s\u1ebd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt \u0111\u1ec3 c\u00e1c n\u00fat quay l\u1ea1i / chuy\u1ec3n ti\u1ebfp s\u1ebd chuy\u1ec3n qua trang web v\u1eeba \u0111\u01b0\u1ee3c \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn. \u0110\u1ec3 t\u1ea1o \u0111i\u1ec1u ki\u1ec7n kh\u00f4i ph\u1ee5c tab / phi\u00ean khi b\u1ea1n \u0111\u00f3ng tab ho\u1eb7c c\u1eeda s\u1ed5 tr\u00ecnh duy\u1ec7t, l\u1ecbch s\u1eed phi\u00ean s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u tr\u00ean \u0111\u0129a.</p> <p></p> H\u00ecnh 7: IPC gi\u1eefa tr\u00ecnh duy\u1ec7t v\u00e0 c\u00e1c renderer process, \u0111\u1ec3 y\u00eau c\u1ea7u render trang"},{"location":"misc/chrome-blog/inside-browser-2/#buoc-bo-sung-hoan-thanh-viec-tai-ban-au","title":"B\u01b0\u1edbc b\u1ed5 sung: Ho\u00e0n th\u00e0nh vi\u1ec7c t\u1ea3i ban \u0111\u1ea7u","text":"<p>Khi \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u01b0\u1ee3c cam k\u1ebft, renderer process ti\u1ebfp t\u1ee5c t\u1ea3i t\u00e0i nguy\u00ean v\u00e0 render trang. Ta s\u1ebd xem c\u00e1c chi ti\u1ebft v\u1ec1 nh\u1eefng g\u00ec x\u1ea3y ra \u1edf \u0111\u00e2y trong ph\u1ea7n ti\u1ebfp theo. Sau khi renderer process \"ho\u00e0n t\u1ea5t\" vi\u1ec7c render, n\u00f3 g\u1eedi m\u1ed9t IPC tr\u1edf l\u1ea1i browser process (\u0111\u00e2y l\u00e0 sau khi t\u1ea5t c\u1ea3 c\u00e1c event <code>onload</code> \u0111\u00e3 k\u00edch ho\u1ea1t tr\u00ean t\u1ea5t c\u1ea3 c\u00e1c frame tr\u00ean trang v\u00e0 \u0111\u00e3 th\u1ef1c hi\u1ec7n xong). T\u1ea1i th\u1eddi \u0111i\u1ec3m n\u00e0y, UI thread d\u1eebng bi\u1ec3u t\u01b0\u1ee3ng xoay tr\u00ean tab.</p> <p>Ta n\u00f3i \"ho\u00e0n t\u1ea5t\" v\u00ec JavaScript ph\u00eda client v\u1eabn c\u00f3 th\u1ec3 t\u1ea3i c\u00e1c t\u00e0i nguy\u00ean b\u1ed5 sung v\u00e0 render c\u00e1c view m\u1edbi sau b\u01b0\u1edbc n\u00e0y.</p> <p></p> H\u00ecnh 8: IPC t\u1eeb renderer process sang browser process \u0111\u1ec3 b\u00e1o r\u1eb1ng trang \u0111\u00e3 \u0111\u01b0\u1ee3c t\u1ea3i"},{"location":"misc/chrome-blog/inside-browser-2/#ieu-huong-en-mot-trang-web-khac","title":"\u0110i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn m\u1ed9t trang web kh\u00e1c","text":"<p>\u0110i\u1ec1u h\u01b0\u1edbng \u0111\u01a1n gi\u1ea3n \u0111\u00e3 ho\u00e0n t\u1ea5t! Nh\u01b0ng \u0111i\u1ec1u g\u00ec x\u1ea3y ra n\u1ebfu ng\u01b0\u1eddi d\u00f9ng nh\u1eadp URL kh\u00e1c v\u00e0o thanh \u0111\u1ecba ch\u1ec9? Browser process s\u1ebd tr\u1ea3i qua c\u00e1c b\u01b0\u1edbc t\u01b0\u01a1ng t\u1ef1 \u0111\u1ec3 \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn trang web kh\u00e1c. Nh\u01b0ng tr\u01b0\u1edbc khi c\u00f3 th\u1ec3 l\u00e0m \u0111i\u1ec1u \u0111\u00f3, n\u00f3 c\u1ea7n ki\u1ec3m tra v\u1edbi trang web hi\u1ec7n \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb xem n\u00f3 c\u00f3 quan t\u00e2m \u0111\u1ebfn event []<code>beforeunload</code>](https://developer.mozilla.org/docs/Web/Events/beforeunload) hay kh\u00f4ng.</p> <p><code>beforeunload</code> c\u00f3 th\u1ec3 t\u1ea1o c\u1ea3nh b\u00e1o \"B\u1ea1n mu\u1ed1n r\u1eddi kh\u1ecfi trang web n\u00e0y?\" khi ta c\u1ed1 g\u1eafng \u0111i\u1ec1u h\u01b0\u1edbng \u0111i ho\u1eb7c \u0111\u00f3ng tab. M\u1ecdi th\u1ee9 b\u00ean trong tab bao g\u1ed3m c\u1ea3 code JavaScript c\u1ee7a b\u1ea1n \u0111\u1ec1u \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi renderer process, v\u00ec v\u1eady browser process ph\u1ea3i ki\u1ec3m tra v\u1edbi renderer process hi\u1ec7n t\u1ea1i khi c\u00f3 y\u00eau c\u1ea7u \u0111i\u1ec1u h\u01b0\u1edbng m\u1edbi.</p> Ch\u00fa \u00fd <p>Kh\u00f4ng th\u00eam <code>beforeunload</code> handler v\u00f4 \u0111i\u1ec1u ki\u1ec7n. N\u00f3 t\u1ea1o ra \u0111\u1ed9 tr\u1ec5 l\u1edbn h\u01a1n v\u00ec handler c\u1ea7n \u0111\u01b0\u1ee3c th\u1ef1c thi tr\u01b0\u1edbc khi c\u00f3 th\u1ec3 b\u1eaft \u0111\u1ea7u \u0111i\u1ec1u h\u01b0\u1edbng. Ch\u1ec9 n\u00ean th\u00eam event handler n\u00e0y khi c\u1ea7n thi\u1ebft, ch\u1eb3ng h\u1ea1n nh\u01b0 n\u1ebfu ng\u01b0\u1eddi d\u00f9ng c\u1ea7n \u0111\u01b0\u1ee3c c\u1ea3nh b\u00e1o r\u1eb1ng h\u1ecd c\u00f3 th\u1ec3 m\u1ea5t d\u1eef li\u1ec7u \u0111\u00e3 nh\u1eadp tr\u00ean trang.</p> <p></p> H\u00ecnh 9: IPC t\u1eeb browser process sang m\u1ed9t renderer process \u0111\u1ec3 n\u00f3i cho n\u00f3 bi\u1ebft r\u1eb1ng tr\u00ecnh duy\u1ec7t chu\u1ea9n b\u1ecb \u0111i\u1ec1u h\u01b0\u1edbng t\u1edbi m\u1ed9t trang web kh\u00e1c <p>N\u1ebfu \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o t\u1eeb renderer process (ch\u1eb3ng h\u1ea1n nh\u01b0 khi ng\u01b0\u1eddi d\u00f9ng \u0111\u00e3 nh\u1ea5p v\u00e0o li\u00ean k\u1ebft ho\u1eb7c client-side JavaScript \u0111\u00e3 ch\u1ea1y <code>window.location = \"https://newsite.com\"</code>) th\u00ec renderer process tr\u01b0\u1edbc ti\u00ean s\u1ebd ki\u1ec3m tra <code>beforeunload</code> handler. Sau \u0111\u00f3, n\u00f3 tr\u1ea3i qua quy tr\u00ecnh t\u01b0\u01a1ng t\u1ef1 nh\u01b0 qu\u00e1 tr\u00ecnh \u0111i\u1ec1u h\u01b0\u1edbng do browser process b\u1eaft \u0111\u1ea7u. S\u1ef1 kh\u00e1c bi\u1ec7t duy nh\u1ea5t l\u00e0 y\u00eau c\u1ea7u \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o t\u1eeb renderer process sang browser process.</p> <p>Khi \u0111i\u1ec1u h\u01b0\u1edbng m\u1edbi \u0111\u01b0\u1ee3c t\u1ea1o cho m\u1ed9t trang web kh\u00e1c v\u1edbi trang web \u0111\u01b0\u1ee3c render hi\u1ec7n t\u1ea1i, m\u1ed9t renderer process ri\u00eang bi\u1ec7t s\u1ebd \u0111\u01b0\u1ee3c g\u1ecdi \u0111\u1ec3 x\u1eed l\u00fd \u0111i\u1ec1u h\u01b0\u1edbng m\u1edbi trong khi renderer process hi\u1ec7n t\u1ea1i \u0111\u01b0\u1ee3c gi\u1eef l\u1ea1i \u0111\u1ec3 x\u1eed l\u00fd c\u00e1c event nh\u01b0 <code>unload</code>. \u0110\u1ec3 bi\u1ebft th\u00eam th\u00f4ng tin, vui l\u00f2ng xem t\u1ed5ng quan v\u1ec1 tr\u1ea1ng th\u00e1i v\u00f2ng \u0111\u1eddi c\u1ee7a trang v\u00e0 c\u00e1ch b\u1ea1n c\u00f3 th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi c\u00e1c event b\u1eb1ng Page Lifecycle API.</p> <p></p> H\u00ecnh 10: C\u00e1c IPC t\u1eeb browser process sang m\u1ed9t renderer process m\u1edbi \u0111\u1ec3 render trang m\u1edbi v\u00e0 sang renderer process c\u0169 \u0111\u1ec3 unload trang c\u0169"},{"location":"misc/chrome-blog/inside-browser-2/#truong-hop-cua-service-worker","title":"Tr\u01b0\u1eddng h\u1ee3p c\u1ee7a Service Worker","text":"<p>M\u1ed9t thay \u0111\u1ed5i g\u1ea7n \u0111\u00e2y \u0111\u1ed1i v\u1edbi quy tr\u00ecnh \u0111i\u1ec1u h\u01b0\u1edbng n\u00e0y l\u00e0 vi\u1ec7c gi\u1edbi thi\u1ec7u Service Worker. Service worker l\u00e0 m\u1ed9t c\u00e1ch \u0111\u1ec3 vi\u1ebft proxy m\u1ea1ng trong code; cho ph\u00e9p c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n web c\u00f3 nhi\u1ec1u quy\u1ec1n ki\u1ec3m so\u00e1t h\u01a1n \u0111\u1ed1i v\u1edbi nh\u1eefng g\u00ec c\u1ea7n l\u01b0u v\u00e0o b\u1ed9 nh\u1edb cache c\u1ee5c b\u1ed9 v\u00e0 th\u1eddi \u0111i\u1ec3m nh\u1eadn d\u1eef li\u1ec7u m\u1edbi t\u1eeb m\u1ea1ng. N\u1ebfu Service worker \u0111\u01b0\u1ee3c thi\u1ebft l\u1eadp \u0111\u1ec3 t\u1ea3i trang t\u1eeb cache, th\u00ec kh\u00f4ng c\u1ea7n y\u00eau c\u1ea7u data t\u1eeb m\u1ea1ng.</p> <p>\u0110i\u1ec1u quan tr\u1ecdng c\u1ea7n nh\u1edb l\u00e0 Service worker l\u00e0 code JavaScript ch\u1ea1y trong renderer process. Nh\u01b0ng khi c\u00f3 y\u00eau c\u1ea7u \u0111i\u1ec1u h\u01b0\u1edbng, l\u00e0m th\u1ebf n\u00e0o \u0111\u1ec3 tr\u00ecnh duy\u1ec7t bi\u1ebft trang web c\u00f3 Service worker?</p> <p></p> H\u00ecnh 11: Network thread trong browser process tra c\u1ee9u ph\u1ea1m vi c\u1ee7a Service worker <p>Khi m\u1ed9t Service worker \u0111\u01b0\u1ee3c \u0111\u0103ng k\u00fd, ph\u1ea1m vi c\u1ee7a Service worker \u0111\u01b0\u1ee3c gi\u1eef l\u00e0m tham chi\u1ebfu (b\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ecdc th\u00eam v\u1ec1 ph\u1ea1m vi trong b\u00e0i vi\u1ebft V\u00f2ng \u0111\u1eddi c\u1ee7a Service worker n\u00e0y). Khi m\u1ed9t qu\u00e1 tr\u00ecnh \u0111i\u1ec1u h\u01b0\u1edbng di\u1ec5n ra, network thread s\u1ebd ki\u1ec3m tra mi\u1ec1n d\u1ef1a tr\u00ean ph\u1ea1m vi c\u1ee7a Service worker \u0111\u00e3 \u0111\u0103ng k\u00fd, n\u1ebfu m\u1ed9t Service worker \u0111\u01b0\u1ee3c \u0111\u0103ng k\u00fd cho URL \u0111\u00f3, th\u00ec UI thread s\u1ebd t\u00ecm m\u1ed9t renderer process \u0111\u1ec3 th\u1ef1c thi code c\u1ee7a Service worker. Service worker c\u00f3 th\u1ec3 t\u1ea3i data t\u1eeb cache, lo\u1ea1i b\u1ecf nhu c\u1ea7u y\u00eau c\u1ea7u data t\u1eeb m\u1ea1ng ho\u1eb7c c\u00f3 th\u1ec3 y\u00eau c\u1ea7u t\u00e0i nguy\u00ean m\u1edbi t\u1eeb m\u1ea1ng.</p> <p></p> H\u00ecnh 12: UI thread trong browser process kh\u1edfi t\u1ea1o m\u1ed9t renderer process \u0111\u1ec3 x\u1eed l\u00fd c\u00e1c service worker; m\u1ed9t worker thread trong renderer process sau \u0111\u00f3 y\u00eau c\u1ea7u data t\u1eeb m\u1ea1ng"},{"location":"misc/chrome-blog/inside-browser-2/#tai-truoc-ieu-huong","title":"T\u1ea3i tr\u01b0\u1edbc \u0111i\u1ec1u h\u01b0\u1edbng","text":"<p>B\u1ea1n c\u00f3 th\u1ec3 th\u1ea5y round trip n\u00e0y gi\u1eefa browser process v\u00e0 renderer process c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn delay n\u1ebfu Service worker quy\u1ebft \u0111\u1ecbnh y\u00eau c\u1ea7u data t\u1eeb m\u1ea1ng. T\u1ea3i tr\u01b0\u1edbc \u0111i\u1ec1u h\u01b0\u1edbng l\u00e0 m\u1ed9t c\u01a1 ch\u1ebf \u0111\u1ec3 t\u0103ng t\u1ed1c qu\u00e1 tr\u00ecnh n\u00e0y b\u1eb1ng c\u00e1ch t\u1ea3i t\u00e0i nguy\u00ean song song v\u1edbi kh\u1edfi \u0111\u1ed9ng Service worker. N\u00f3 \u0111\u00e1nh d\u1ea5u c\u00e1c request n\u00e0y b\u1eb1ng m\u1ed9t header, cho ph\u00e9p c\u00e1c m\u00e1y ch\u1ee7 quy\u1ebft \u0111\u1ecbnh g\u1eedi n\u1ed9i dung kh\u00e1c nhau cho c\u00e1c request n\u00e0y; v\u00ed d\u1ee5: ch\u1ec9 c\u1eadp nh\u1eadt data thay v\u00ec full data.</p> <p></p> H\u00ecnh 13: UI thread trong browser process kh\u1edfi t\u1ea1o m\u1ed9t renderer process \u0111\u1ec3 x\u1eed l\u00fd c\u00e1c service worker trong khi b\u1eaft \u0111\u1ea7u network request c\u00f9ng l\u00fac \u0111\u00f3"},{"location":"misc/chrome-blog/inside-browser-2/#ket-phan-2","title":"K\u1ebft ph\u1ea7n 2","text":"<p>Trong ph\u1ea7n n\u00e0y, ta \u0111\u00e3 xem th\u1eed chuy\u1ec7n g\u00ec s\u1ebd x\u1ea3y ra trong khi \u0111i\u1ec1u h\u01b0\u1edbng v\u00e0 l\u00e0m sao code c\u1ee7a \u1ee9ng d\u1ee5ng web nh\u01b0 response header v\u00e0 JavaScript ph\u00eda client giao ti\u1ebfp v\u1edbi tr\u00ecnh duy\u1ec7t. Vi\u1ec7c bi\u1ebft \u0111\u01b0\u1ee3c c\u00e1c b\u01b0\u1edbc tr\u00ecnh duy\u1ec7t ph\u1ea3i th\u1ef1c hi\u1ec7n \u0111\u1ec3 l\u1ea5y data t\u1eeb m\u1ea1ng gi\u00fap ta d\u1ec5 hi\u1ec3u h\u01a1n v\u00ec sao c\u00e1c API nh\u01b0 T\u1ea3i tr\u01b0\u1edbc \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u01b0\u1ee3c ph\u00e1t tri\u1ec3n. Trong b\u00e0i sau, ta s\u1ebd \u0111i v\u00e0o vi\u1ec7c l\u00e0m sao tr\u00ecnh duy\u1ec7t \u0111\u1ecdc code HTML/CSS/JavaScript c\u1ee7a ch\u00fang ta \u0111\u1ec3 hi\u1ec3n th\u1ecb c\u00e1c trang.</p>"},{"location":"misc/chrome-blog/inside-browser-3/","title":"B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 3)","text":""},{"location":"misc/chrome-blog/inside-browser-3/#nguon","title":"Ngu\u1ed3n","text":"<p> Inside look at modern web browser (part 3) - Chrome Developers Blog</p>"},{"location":"misc/chrome-blog/inside-browser-3/#ben-trong-renderer-process","title":"B\u00ean trong Renderer Process","text":"<p>\u0110\u00e2y l\u00e0 ph\u1ea7n 3 trong series 4 ph\u1ea7n v\u1ec1 c\u00e1ch tr\u00ecnh duy\u1ec7t ho\u1ea1t \u0111\u1ed9ng. Tr\u01b0\u1edbc \u0111\u00f3, ta \u0111\u00e3 \u0111i qua ki\u1ebfn tr\u00fac \u0111a ti\u1ebfn tr\u00ecnh v\u00e0 qu\u00e1 tr\u00ecnh \u0111i\u1ec1u h\u01b0\u1edbng. Trong ph\u1ea7n n\u00e0y, ta s\u1ebd xem \u0111i\u1ec1u g\u00ec x\u1ea3y ra trong renderer process.</p> <p>Renderer process li\u00ean quan \u0111\u1ebfn nhi\u1ec1u kh\u00eda c\u1ea1nh c\u1ee7a hi\u1ec7u su\u1ea5t web. V\u00ec c\u00f3 r\u1ea5t nhi\u1ec1u th\u1ee9 x\u1ea3y ra trong renderer process, ph\u1ea7n n\u00e0y s\u1ebd ch\u1ec9 l\u00e0 kh\u00e1i qu\u00e1t chung. N\u1ebfu b\u1ea1n mu\u1ed1n \u0111i s\u00e2u h\u01a1n, ph\u1ea7n Hi\u1ec7u su\u1ea5t c\u1ee7a Web c\u01a1 b\u1ea3n c\u00f3 r\u1ea5t nhi\u1ec1u t\u00e0i nguy\u00ean.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#cac-renderer-process-xu-ly-noi-dung-web","title":"C\u00e1c renderer process x\u1eed l\u00fd n\u1ed9i dung web","text":"<p>Renderer process ch\u1ecbu tr\u00e1ch nhi\u1ec7m cho t\u1ea5t c\u1ea3 m\u1ecdi th\u1ee9 x\u1ea3y ra trong m\u1ed9t tab tr\u00ean tr\u00ecnh duy\u1ec7t. Trong renderer process, main thread s\u1ebd x\u1eed l\u00fd g\u1ea7n nh\u01b0 m\u1ecdi code b\u1ea1n g\u1eedi cho user. \u0110\u00f4i khi c\u00e1c ph\u1ea7n c\u1ee7a code JavaScript \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi c\u00e1c worker thread n\u1ebfu b\u1ea1n d\u00f9ng m\u1ed9t web worker ho\u1eb7c m\u1ed9t service worker. C\u00e1c raster thread v\u00e0 compositor thread c\u0169ng \u0111\u01b0\u1ee3c ch\u1ea1y trong renderer process \u0111\u1ec3 render trang m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 v\u00e0 m\u01b0\u1ee3t m\u00e0.</p> <p>C\u00f4ng vi\u1ec7c ch\u1ee7 y\u1ebfu c\u1ee7a renderer process l\u00e0 chuy\u1ec3n HTML, CSS v\u00e0 JavaScript th\u00e0nh m\u1ed9t trang web m\u00e0 ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 t\u01b0\u01a1ng t\u00e1c.</p> <p></p> H\u00ecnh 1: Renderer process v\u1edbi m\u1ed9t main thread, c\u00e1c worker thread, m\u1ed9t compositor thread v\u00e0 m\u1ed9t raster thread b\u00ean trong"},{"location":"misc/chrome-blog/inside-browser-3/#parsing-phan-tich-cu-phap","title":"Parsing (Ph\u00e2n t\u00edch c\u00fa ph\u00e1p)","text":""},{"location":"misc/chrome-blog/inside-browser-3/#xay-dung-dom","title":"X\u00e2y d\u1ef1ng DOM","text":"<p>Khi renderer process nh\u1eadn m\u1ed9t th\u00f4ng b\u00e1o commit cho \u0111i\u1ec1u h\u01b0\u1edbng v\u00e0 b\u1eaft \u0111\u1ea7u nh\u1eadn d\u1eef li\u1ec7u HTML, main thread b\u1eaft \u0111\u1ea7u parse (ph\u00e2n t\u00edch c\u00fa ph\u00e1p) chu\u1ed7i v\u0103n b\u1ea3n (HTML) v\u00e0 bi\u1ebfn n\u00f3 th\u00e0nh M\u00f4 h\u00ecnh \u0110\u1ed1i t\u01b0\u1ee3ng T\u00e0i li\u1ec7u - Document Object Model (DOM).</p> <p>DOM l\u00e0 bi\u1ec3u di\u1ec5n b\u00ean trong c\u1ee7a tr\u00ecnh duy\u1ec7t v\u1ec1 trang c\u0169ng nh\u01b0 c\u1ea5u tr\u00fac d\u1eef li\u1ec7u v\u00e0 API m\u00e0 nh\u00e0 ph\u00e1t tri\u1ec3n web c\u00f3 th\u1ec3 t\u01b0\u01a1ng t\u00e1c qua JavaScript.</p> <p>Parse m\u1ed9t t\u00e0i li\u1ec7u HTML th\u00e0nh DOM \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a b\u1edfi Ti\u00eau chu\u1ea9n HTML. B\u1ea1n c\u00f3 th\u1ec3 nh\u1eadn th\u1ea5y r\u1eb1ng vi\u1ec7c cung c\u1ea5p HTML cho tr\u00ecnh duy\u1ec7t kh\u00f4ng bao gi\u1edd g\u00e2y ra l\u1ed7i. V\u00ed d\u1ee5, thi\u1ebfu th\u1ebb \u0111\u00f3ng <code>&lt;/p&gt;</code> l\u00e0 m\u1ed9t HTML h\u1ee3p l\u1ec7. Markup sai nh\u01b0 <code>Hi! &lt;b&gt;I'm &lt;i&gt;Chrome&lt;/b&gt;!&lt;/i&gt;</code> (tag b \u0111\u00f3ng tr\u01b0\u1edbc tag i) s\u1ebd \u0111\u01b0\u1ee3c xem nh\u01b0 b\u1ea1n vi\u1ebft <code>Hi! &lt;b&gt;I'm &lt;i&gt;Chrome&lt;/i&gt;&lt;/b&gt;&lt;i&gt;!&lt;/i&gt;</code>. \u0110i\u1ec1u n\u00e0y l\u00e0 do \u0111\u1eb7c t\u1ea3 HTML \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 linh ho\u1ea1t x\u1eed l\u00fd c\u00e1c l\u1ed7i \u0111\u00f3. N\u1ebfu b\u1ea1n mu\u1ed1n bi\u1ebft ch\u00fang \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n nh\u01b0 th\u1ebf n\u00e0o, b\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ecdc ph\u1ea7n \"Gi\u1edbi thi\u1ec7u v\u1ec1 x\u1eed l\u00fd l\u1ed7i v\u00e0 c\u00e1c tr\u01b0\u1eddng h\u1ee3p l\u1ea1 trong parser\" c\u1ee7a \u0111\u1eb7c t\u1ea3 HTML.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#tai-nguon-phu","title":"T\u1ea3i ngu\u1ed3n ph\u1ee5","text":"<p>M\u1ed9t website th\u01b0\u1eddng d\u00f9ng c\u00e1c t\u00e0i nguy\u00ean b\u00ean ngo\u00e0i nh\u01b0 h\u00ecnh \u1ea3nh, CSS v\u00e0 JavaScript. C\u00e1c file n\u00e0y c\u1ea7n \u0111\u01b0\u1ee3c t\u1ea3i t\u1eeb m\u1ea1ng ho\u1eb7c cache. Main thread c\u00f3 th\u1ec3 y\u00eau c\u1ea7u t\u1eebng c\u00e1i m\u1ed9t khi n\u00f3 t\u00ecm ra c\u00e1c t\u00e0i nguy\u00ean \u0111\u00f3 trong l\u00fac parse \u0111\u1ec3 x\u00e2y d\u1ef1ng DOM, nh\u01b0ng \u0111\u1ec3 t\u0103ng t\u1ed1c, \"scanner t\u1ea3i tr\u01b0\u1edbc\" \u0111\u01b0\u1ee3c ch\u1ea1y \u0111\u1ed3ng th\u1eddi. N\u1ebfu c\u00f3 nh\u1eefng th\u1ee9 nh\u01b0 <code>&lt;img&gt;</code> ho\u1eb7c <code>&lt;link&gt;</code> trong t\u00e0i li\u1ec7u HTML, scanner t\u1ea3i tr\u01b0\u1edbc s\u1ebd xem x\u00e9t m\u00e3 th\u00f4ng b\u00e1o do HTML parser t\u1ea1o v\u00e0 g\u1eedi request \u0111\u1ebfn network thread trong browser process.</p> <p></p> H\u00ecnh 2: Main thread parse HTML v\u00e0 x\u00e2y d\u1ef1ng c\u00e2y DOM"},{"location":"misc/chrome-blog/inside-browser-3/#javascript-co-the-chan-parsing","title":"JavaScript c\u00f3 th\u1ec3 ch\u1eb7n parsing","text":"<p>Khi HTML parser t\u00ecm th\u1ea5y th\u1ebb <code>&lt;script&gt;</code>, n\u00f3 s\u1ebd t\u1ea1m d\u1eebng vi\u1ec7c parse t\u00e0i li\u1ec7u HTML v\u00e0 ph\u1ea3i t\u1ea3i, parse v\u00e0 th\u1ef1c thi code JavaScript. V\u00ec sao? B\u1edfi v\u00ec JavaScript c\u00f3 th\u1ec3 thay \u0111\u1ed5i t\u00e0i li\u1ec7u HTML v\u1edbi nh\u1eefng th\u1ee9 nh\u01b0 <code>document.write()</code>, n\u00f3 s\u1ebd thay \u0111\u1ed5i to\u00e0n b\u1ed9 c\u1ea5u tr\u00fac DROM (t\u1ed5ng quan v\u1ec1 m\u00f4 h\u00ecnh parsing trong \u0111\u1eb7c t\u1ea3 HTML c\u00f3 m\u1ed9t s\u01a1 \u0111\u1ed3 r\u1ea5t \u0111\u1eb9p). \u0110\u00e2y l\u00e0 l\u00fd do v\u00ec sao HTML parser ph\u1ea3i \u0111\u1ee3i JavaScript ch\u1ea1y tr\u01b0\u1edbc khi ti\u1ebfp t\u1ee5c parse t\u00e0i li\u1ec7u HTML. N\u1ebfu b\u1ea1n t\u00f2 m\u00f2 v\u1ec1 nh\u1eefng th\u1ee9 x\u1ea3y ra trong qu\u00e1 tr\u00ecnh th\u1ef1c thi JavaScript, team V8 \u0111\u00e3 c\u00f3 nh\u1eefng bu\u1ed5i to\u1ea1 \u0111\u00e0m v\u00e0 b\u00e0i vi\u1ebft v\u1ec1 v\u1ea5n \u0111\u1ec1 \u0111\u00f3.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#goi-y-cho-trinh-duyet-rang-ban-muon-tai-tai-nguyen-nhu-the-nao","title":"G\u1ee3i \u00fd cho tr\u00ecnh duy\u1ec7t r\u1eb1ng b\u1ea1n mu\u1ed1n t\u1ea3i t\u00e0i nguy\u00ean nh\u01b0 th\u1ebf n\u00e0o","text":"<p>C\u00f3 nhi\u1ec1u c\u00e1ch \u0111\u1ec3 c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n \u1ee9ng d\u1ee5ng web c\u00f3 th\u1ec3 g\u1eedi g\u1ee3i \u00fd \u0111\u1ebfn tr\u00ecnh duy\u1ec7t \u0111\u1ec3 t\u1ea3i t\u00e0i nguy\u00ean theo th\u1ee9 t\u1ef1 n\u00e0o \u0111\u00f3. N\u1ebfu code JavaScript c\u1ee7a b\u1ea1n kh\u00f4ng d\u00f9ng <code>document.write()</code>, b\u1ea1n c\u00f3 th\u1ec3 th\u00eam c\u00e1c thu\u1ed9c t\u00ednh <code>async</code> hay <code>defer</code> cho th\u1ebb <code>&lt;script&gt;</code>. Tr\u00ecnh duy\u1ec7t s\u1ebd t\u1ea3i v\u00e0 ch\u1ea1y code JavaScript m\u1ed9t c\u00e1ch b\u1ea5t \u0111\u1ed3ng b\u1ed9 v\u00e0 kh\u00f4ng l\u00e0m gi\u00e1n \u0111o\u1ea1n vi\u1ec7c parse. B\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng JavaScript module n\u1ebfu th\u1ea5y h\u1ee3p l\u00fd. <code>&lt;link rel=\"preload\"&gt;</code> l\u00e0 m\u1ed9t c\u00e1ch \u0111\u1ec3 b\u00e1o cho tr\u00ecnh duy\u1ec7t r\u1eb1ng t\u00e0i nguy\u00ean l\u00e0 r\u1ea5t c\u1ea7n thi\u1ebft cho vi\u1ec7c \u0111i\u1ec1u h\u01b0\u1edbng b\u00e2y gi\u1edd v\u00e0 b\u1ea1n mu\u1ed1n t\u1ea3i c\u00e0ng s\u1edbm c\u00e0ng t\u1ed1t. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ecdc th\u00eam t\u1ea1i \u01afu ti\u00ean t\u00e0i nguy\u00ean - Nh\u1edd tr\u00ecnh duy\u1ec7t gi\u00fap b\u1ea1n.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#tinh-toan-cho-cac-style","title":"T\u00ednh to\u00e1n cho c\u00e1c style","text":"<p>DOM l\u00e0 ch\u01b0a \u0111\u1ee7 \u0111\u1ec3 bi\u1ebft trang web s\u1ebd tr\u00f4ng nh\u01b0 th\u1ebf n\u00e0o v\u00ec ta c\u1ea7n c\u00e1c style trong CSS. Main thread s\u1ebd parse CSS v\u00e0 quy\u1ebft \u0111\u1ecbnh computed style cho t\u1eebng node DOM. \u0110\u00e2y l\u00e0 th\u00f4ng tin v\u1ec1 lo\u1ea1i style \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng cho t\u1eebng element d\u1ef1a tr\u00ean b\u1ed9 ch\u1ecdn CSS. B\u1ea1n c\u00f3 th\u1ec3 xem th\u00f4ng tin n\u00e0y trong ph\u1ea7n <code>computed</code> c\u1ee7a DevTools.</p> <p></p> H\u00ecnh 3: Main thread parse CSS \u0111\u1ec3 th\u00eam c\u00e1c computed style v\u00e0o <p>Ngay c\u1ea3 khi n\u1ebfu b\u1ea1n kh\u00f4ng cung c\u1ea5p CSS, m\u1ed7i DOM node v\u1eabn c\u00f3 m\u1ed9t style \u0111\u01b0\u1ee3c t\u00ednh to\u00e1n. Tag <code>&lt;h1&gt;</code> \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb to h\u01a1n tag <code>&lt;h2&gt;</code> v\u00e0 margin \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a cho m\u1ed7i element. L\u00fd do l\u00e0 v\u00ec browser c\u00f3 CSS m\u1eb7c \u0111\u1ecbnh. N\u1ebfu b\u1ea1n mu\u1ed1n bi\u1ebft CSS m\u1eb7c \u0111\u1ecbnh c\u1ee7a Chrome tr\u00f4ng nh\u01b0 n\u00e0o, b\u1ea1n c\u00f3 th\u1ec3 xem source code \u1edf \u0111\u00e2y.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#layout","title":"Layout","text":"<p>Gi\u1edd renderer process \u0111\u00e3 bi\u1ebft c\u1ea5u tr\u00fac c\u1ee7a t\u00e0i li\u1ec7u v\u00e0 style cho t\u1eebng node, nh\u01b0ng v\u1eabn kh\u00f4ng \u0111\u1ee7 \u0111\u1ec3 render trang. T\u01b0\u1edfng t\u01b0\u1ee3ng b\u1ea1n \u0111ang c\u1ed1 g\u1eafng mi\u00eau t\u1ea3 m\u1ed9t b\u1ee9c v\u1ebd cho b\u1ea1n c\u1ee7a m\u00ecnh qua \u0111i\u1ec7n tho\u1ea1i. \"C\u00f3 m\u1ed9t h\u00ecnh tr\u00f2n l\u1edbn m\u00e0u \u0111\u1ee7 v\u00e0 m\u1ed9t h\u00ecnh vu\u00f4ng nh\u1ecf m\u00e0u xanh\" l\u00e0 kh\u00f4ng \u0111\u1ee7 th\u00f4ng tin \u0111\u1ec3 b\u1ea1n c\u1ee7a b\u1ea1n bi\u1ebft ch\u00ednh x\u00e1c b\u1ee9c v\u1ebd tr\u00f4ng th\u1ebf n\u00e0o.</p> <p></p> H\u00ecnh 4: M\u1ed9t ng\u01b0\u1eddi \u0111\u1ee9ng tr\u01b0\u1edbc m\u1ed9t b\u1ee9c v\u1ebd, v\u1edbi k\u1ebft n\u1ed1i \u0111i\u1ec7n tho\u1ea1i \u0111\u1ebfn m\u1ed9t ng\u01b0\u1eddi kh\u00e1c <p>Layout (b\u1ed1 c\u1ee5c) l\u00e0 m\u1ed9t process \u0111\u1ec3 t\u00ecm h\u00ecnh d\u1ea1ng c\u1ee7a c\u00e1c element. Main thread s\u1ebd \u0111i qua DOM v\u00e0 c\u00e1c computed style v\u00e0 t\u1ea1o c\u00e2y layout, n\u00f3 s\u1ebd c\u00f3 c\u00e1c th\u00f4ng tin nh\u01b0 to\u1ea1 \u0111\u1ed9 x y v\u00e0 k\u00edch th\u01b0\u1edbc h\u1ed9p gi\u1edbi h\u1ea1n. C\u00e2y layout c\u00f3 c\u1ea5u tr\u00fac t\u01b0\u01a1ng t\u1ef1 c\u00e2y DOM, nh\u01b0ng n\u00f3 ch\u1ec9 ch\u1ee9a th\u00f4ng tin li\u00ean quan \u0111\u1ebfn nh\u1eefng g\u00ec hi\u1ec3n th\u1ecb tr\u00ean trang. N\u1ebfu <code>display: none</code> \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng, element \u0111\u00f3 kh\u00f4ng n\u1eb1m trong layout tree (tuy nhi\u00ean, element v\u1edbi <code>visibility: hidden</code> v\u1eabn n\u1eb1m tr\u00ean c\u00e2y layout). T\u01b0\u01a1ng t\u1ef1, n\u1ebfu m\u1ed9t l\u1edbp gi\u1ea3 v\u1edbi n\u1ed9i dung nh\u01b0 <code>p::before{content:\"Hi!\"}</code> \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng, n\u00f3 s\u1ebd n\u1eb1m trong c\u00e2y layout m\u1eb7c d\u00f9 n\u00f3 kh\u00f4ng n\u1eb1m trong DOM.</p> <p></p> H\u00ecnh 5: Main thread ch\u1ea1y d\u1ecdc c\u00e2y DOM v\u1edbi computed style v\u00e0 t\u1ea1o ra c\u00e2y layout <p>X\u00e1c \u0111\u1ecbnh layout c\u1ee7a trang l\u00e0 m\u1ed9t vi\u1ec7c kh\u00f3. Ngay c\u1ea3 layout c\u1ee7a trang \u0111\u01a1n gi\u1ea3n nh\u1ea5t nh\u01b0 m\u1ed9t \u0111\u1ed1ng block t\u1eeb tr\u00ean xu\u1ed1ng d\u01b0\u1edbi c\u0169ng ph\u1ea3i xem x\u00e9t \u0111\u1ed9 l\u1edbn c\u1ee7a font ch\u1eef v\u00e0 v\u1ecb tr\u00ed ng\u1eaft d\u00f2ng v\u00ec ch\u00fang \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn k\u00edch th\u01b0\u1edbc v\u00e0 h\u00ecnh d\u1ea1ng c\u1ee7a \u0111o\u1ea1n v\u0103n; m\u00e0 sau \u0111\u00f3 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn v\u1ecb tr\u00ed c\u1ee7a \u0111o\u1ea1n sau, nh\u01b0 video d\u01b0\u1edbi \u0111\u00e2y.</p> H\u00ecnh 6: Box Layout c\u1ee7a \u0111o\u1ea1n v\u0103n ph\u1ea3i di chuy\u1ec3n v\u00ec c\u00f3 d\u1ea5u xu\u1ed1ng d\u00f2ng m\u1edbi <p>CSS c\u00f3 th\u1ec3 l\u00e0m cho ph\u1ea7n t\u1eed n\u1ed5i sang m\u1ed9t b\u00ean, che ph\u1ea7n m\u1ee5c tr\u00e0n v\u00e0 thay \u0111\u1ed5i h\u01b0\u1edbng vi\u1ebft. B\u1ea1n c\u00f3 th\u1ec3 t\u01b0\u1edfng t\u01b0\u1ee3ng, giai \u0111o\u1ea1n layout n\u00e0y c\u00f3 m\u1ed9t nhi\u1ec7m v\u1ee5 to l\u1edbn. Trong Chrome, to\u00e0n b\u1ed9 team k\u1ef9 s\u01b0 l\u00e0m vi\u1ec7c tr\u00ean layout. N\u1ebfu b\u1ea1n mu\u1ed1n xem chi ti\u1ebft v\u1ec1 c\u00f4ng vi\u1ec7c c\u1ee7a h\u1ecd, b\u1ea1n c\u00f3 th\u1ec3 xem m\u1ed9t v\u00e0i bu\u1ed5i to\u1ea1 \u0111\u00e0m t\u1eeb H\u1ed9i ngh\u1ecb BlinkOn.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#ve","title":"V\u1ebd","text":"<p>C\u00f3 DOM, style, v\u00e0 layout v\u1eabn ch\u01b0a \u0111\u1ee7 \u0111\u1ec3 render trang. Gi\u1ea3 s\u1eed b\u1ea1n mu\u1ed1n v\u1ebd l\u1ea1i b\u1ee9c tranh \u0111\u00f3. B\u1ea1n bi\u1ebft k\u00edch th\u01b0\u1edbc, h\u00ecnh d\u00e1ng v\u00e0 v\u1ecb tr\u00ed c\u00e1c element, nh\u01b0ng theo th\u1ee9 t\u1ef1 n\u00e0o?</p> <p></p> H\u00ecnh 7: M\u1ed9t ng\u01b0\u1eddi \u0111\u1ee9ng tr\u01b0\u1edbc m\u1ed9t b\u1ee9c v\u1ebd v\u1edbi c\u1ecd s\u01a1n, t\u1ef1 h\u1ecfi xem m\u00ecnh n\u00ean v\u1ebd h\u00ecnh tr\u00f2n hay h\u00ecnh vu\u00f4ng tr\u01b0\u1edbc <p>V\u00ed d\u1ee5, <code>z-index</code> c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c set cho m\u1ed9t s\u1ed1 element nh\u1ea5t \u0111\u1ecbnh, trong tr\u01b0\u1eddng h\u1ee3p \u0111\u00f3, v\u1ebd theo th\u1ee9 t\u1ef1 tr\u00ean HTML s\u1ebd cho ra k\u1ebft qu\u1ea3 sai khi render.</p> <p></p> H\u00ecnh 8: Element c\u1ee7a trang xu\u1ea5t hi\u1ec7n theo th\u1ee9 t\u1ef1 HTML markup, cho ra k\u1ebft qu\u1ea3 sai v\u00ec z-index kh\u00f4ng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng <p>\u1ede b\u01b0\u1edbc v\u1ebd n\u00e0y, main thread s\u1ebd \u0111i qua c\u00e2y layout \u0111\u1ec3 t\u1ea1o ra c\u00e1c b\u1ea3n ghi v\u1ebd. B\u1ea3n ghi v\u1ebd (paint record) l\u00e0 m\u1ed9t ghi ch\u00fa c\u1ee7a qu\u00e1 tr\u00ecnh v\u1ebd nh\u01b0 \"n\u1ec1n tr\u01b0\u1edbc, r\u1ed3i ch\u1eef, r\u1ed3i \u0111\u1ebfn h\u00ecnh ch\u1eef nh\u1eadt\". N\u1ebfu b\u1ea1n t\u1eebng v\u1ebd tr\u00ean element <code>&lt;canvas&gt;</code> v\u1edbi JavaScript, b\u1ea1n s\u1ebd quen v\u1edbi qu\u00e1 tr\u00ecnh n\u00e0y.</p> <p></p> H\u00ecnh 9: Main thread \u0111i qua c\u00e2y layout v\u00e0 cho ra c\u00e1c b\u1ea3n ghi v\u1ebd"},{"location":"misc/chrome-blog/inside-browser-3/#cap-nhat-rendering-pipeline-rat-ton-kem","title":"C\u1eadp nh\u1eadt rendering pipeline r\u1ea5t t\u1ed1n k\u00e9m.","text":"<p>\u0110i\u1ec1u quan tr\u1ecdng nh\u1ea5t c\u1ea7n n\u1eafm b\u1eaft trong renderer pipeline l\u00e0 \u1edf m\u1ed7i b\u01b0\u1edbc, k\u1ebft qu\u1ea3 c\u1ee7a thao t\u00e1c tr\u01b0\u1edbc \u0111\u00f3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea1o d\u1eef li\u1ec7u m\u1edbi. V\u00ed d\u1ee5, n\u1ebfu c\u00f3 g\u00ec \u0111\u00f3 thay \u0111\u1ed5i trong c\u00e2y layout, th\u00ec th\u1ee9 t\u1ef1 v\u1ebd c\u1ea7n \u0111\u01b0\u1ee3c t\u1ea1o l\u1ea1i cho c\u00e1c ph\u1ea7n b\u1ecb \u1ea3nh h\u01b0\u1edfng c\u1ee7a t\u00e0i li\u1ec7u. Video b\u00ean d\u01b0\u1edbi cho th\u1ea5y c\u00e1c c\u00e2y DOM + Style, Layout v\u00e0 Paint theo th\u1ee9 t\u1ef1 ch\u00fang \u0111\u01b0\u1ee3c sinh ra.</p> H\u00ecnh 10: C\u00e1c c\u00e2y DOM + Style, Layout v\u00e0 Paint theo th\u1ee9 t\u1ef1 ch\u00fang \u0111\u01b0\u1ee3c sinh ra <p>N\u1ebfu b\u1ea1n \u0111ang t\u1ea1o hi\u1ec7u \u1ee9ng cho c\u00e1c element, tr\u00ecnh duy\u1ec7t ph\u1ea3i ch\u1ea1y c\u00e1c thao t\u00e1c n\u00e0y \u1edf gi\u1eefa m\u1ecdi frame. H\u1ea7u h\u1ebft c\u00e1c display s\u1ebd refresh 60 l\u1ea7n m\u1ed9t gi\u00e2y (60 frame/gi\u00e2y); h\u00ecnh \u1ea3nh \u0111\u1ed9ng s\u1ebd xu\u1ea5t hi\u1ec7n m\u01b0\u1ee3t m\u00e0 \u0111\u1ed1i v\u1edbi m\u1eaft ng\u01b0\u1eddi khi b\u1ea1n di chuy\u1ec3n m\u1ecdi th\u1ee9 tr\u00ean m\u00e0n h\u00ecnh \u1edf m\u1ecdi frame. Tuy nhi\u00ean, n\u1ebfu ho\u1ea1t \u1ea3nh m\u1ea5t \u0111i c\u00e1c frame \u1edf gi\u1eefa, th\u00ec trang s\u1ebd xu\u1ea5t hi\u1ec7n m\u1ed9t c\u00e1ch \"l\u1ed9n x\u1ed9n\".</p> <p></p> H\u00ecnh 11: C\u00e1c frame ho\u1ea1t \u1ea3nh tr\u00ean d\u00f2ng th\u1eddi gian <p>Ngay c\u1ea3 khi c\u00e1c ho\u1ea1t \u0111\u1ed9ng render c\u1ee7a b\u1ea1n theo k\u1ecbp qu\u00e1 tr\u00ecnh refresh m\u00e0n h\u00ecnh, th\u00ec c\u00e1c t\u00ednh to\u00e1n n\u00e0y v\u1eabn \u0111ang ch\u1ea1y tr\u00ean main thread, ngh\u0129a l\u00e0 thread n\u00e0y c\u00f3 th\u1ec3 b\u1ecb ch\u1eb7n khi \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n \u0111ang ch\u1ea1y JavaScript.</p> <p></p> H\u00ecnh 12: C\u00e1c frame ho\u1ea1t \u1ea3nh tr\u00ean d\u00f2ng th\u1eddi gian, nh\u01b0ng m\u1ed9t frame b\u1ecb ch\u1eb7n b\u1edfi JavaScript <p>B\u1ea1n c\u00f3 th\u1ec3 chia thao t\u00e1c JavaScript th\u00e0nh c\u00e1c ph\u1ea7n nh\u1ecf v\u00e0 l\u00ean l\u1ecbch ch\u1ea1y \u1edf m\u1ecdi frame b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng <code>requestAnimationFrame()</code>. \u0110\u1ec3 bi\u1ebft th\u00eam v\u1ec1 ch\u1ee7 \u0111\u1ec1 n\u00e0y, vui l\u00f2ng xem T\u1ed1i \u01b0u h\u00f3a th\u1ef1c thi JavaScript. B\u1ea1n c\u0169ng c\u00f3 th\u1ec3 ch\u1ea1y JavaScript trong Web Worker \u0111\u1ec3 tr\u00e1nh ch\u1eb7n main thread.</p> <p></p> H\u00ecnh 13: C\u00e1c \u0111o\u1ea1n JavaScript nh\u1ecf h\u01a1n ch\u1ea1y tr\u00ean d\u00f2ng th\u1eddi gian c\u00f3 frame ho\u1ea1t \u1ea3nh"},{"location":"misc/chrome-blog/inside-browser-3/#compositor","title":"Compositor","text":""},{"location":"misc/chrome-blog/inside-browser-3/#ban-ve-mot-trang-nhu-the-nao","title":"B\u1ea1n v\u1ebd m\u1ed9t trang nh\u01b0 th\u1ebf n\u00e0o?","text":"<p>B\u00e2y gi\u1edd tr\u00ecnh duy\u1ec7t \u0111\u00e3 bi\u1ebft c\u1ea5u tr\u00fac c\u1ee7a t\u00e0i li\u1ec7u, style c\u1ee7a t\u1eebng element, h\u00ecnh d\u1ea1ng c\u1ee7a trang v\u00e0 th\u1ee9 t\u1ef1 t\u00f4 m\u00e0u, v\u1eady n\u00f3 s\u1ebd v\u1ebd m\u1ed9t trang nh\u01b0 th\u1ebf n\u00e0o? Bi\u1ebfn th\u00f4ng tin n\u00e0y th\u00e0nh pixel tr\u00ean m\u00e0n h\u00ecnh \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 rasterizing.</p> <p>C\u00f3 l\u1ebd m\u1ed9t c\u00e1ch ng\u00e2y th\u01a1 \u0111\u1ec3 x\u1eed l\u00fd vi\u1ec7c n\u00e0y l\u00e0 raster c\u00e1c ph\u1ea7n b\u00ean trong viewport (t\u1ea7m nh\u00ecn c\u1ee7a m\u00e0n h\u00ecnh). N\u1ebfu ng\u01b0\u1eddi d\u00f9ng cu\u1ed9n trang, sau \u0111\u00f3 di chuy\u1ec3n frame \u0111\u00e3 raster v\u00e0 \u0111i\u1ec1n v\u00e0o c\u00e1c ph\u1ea7n c\u00f2n thi\u1ebfu b\u1eb1ng c\u00e1ch raster nhi\u1ec1u h\u01a1n, gi\u1ed1ng video b\u00ean d\u01b0\u1edbi. \u0110\u00e2y l\u00e0 c\u00e1ch Chrome x\u1eed l\u00fd rasterizing khi n\u00f3 \u0111\u01b0\u1ee3c ph\u00e1t h\u00e0nh l\u1ea7n \u0111\u1ea7u ti\u00ean. Tuy nhi\u00ean, tr\u00ecnh duy\u1ec7t hi\u1ec7n \u0111\u1ea1i ch\u1ea1y m\u1ed9t quy tr\u00ecnh ph\u1ee9c t\u1ea1p h\u01a1n \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 compositing (t\u1ed5ng h\u1ee3p).</p> H\u00ecnh 14: Ho\u1ea1t \u1ea3nh c\u1ee7a rasterizing process"},{"location":"misc/chrome-blog/inside-browser-3/#compositing-la-gi","title":"Compositing l\u00e0 g\u00ec?","text":"<p>Compositing l\u00e0 m\u1ed9t k\u1ef9 thu\u1eadt \u0111\u1ec3 t\u00e1ch c\u00e1c ph\u1ea7n c\u1ee7a trang th\u00e0nh c\u00e1c layer, rasterize t\u1eebng layer v\u00e0 t\u1ed5ng h\u1ee3p d\u01b0\u1edbi d\u1ea1ng m\u1ed9t trang trong m\u1ed9t thread ri\u00eang bi\u1ec7t \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 compositor thread. N\u1ebfu cu\u1ed9n trang x\u1ea3y ra, v\u00ec c\u00e1c l\u1edbp \u0111\u00e3 \u0111\u01b0\u1ee3c rasterized, t\u1ea5t c\u1ea3 nh\u1eefng g\u00ec n\u00f3 ph\u1ea3i l\u00e0m l\u00e0 composite m\u1ed9t frame m\u1edbi. Ho\u1ea1t \u1ea3nh c\u00f3 th\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c theo c\u00e1ch t\u01b0\u01a1ng t\u1ef1 b\u1eb1ng c\u00e1ch di chuy\u1ec3n c\u00e1c layer v\u00e0 composite m\u1ed9t frame m\u1edbi, nh\u01b0 video b\u00ean d\u01b0\u1edbi.</p> H\u00ecnh 15: Ho\u1ea1t \u1ea3nh c\u1ee7a compositing process <p>B\u1ea1n c\u00f3 th\u1ec3 xem c\u00e1ch trang web c\u1ee7a m\u00ecnh \u0111\u01b0\u1ee3c chia th\u00e0nh c\u00e1c layer trong DevTools b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng b\u1ea3ng Layers.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#chia-ra-thanh-cac-layer","title":"Chia ra th\u00e0nh c\u00e1c layer","text":"<p>\u0110\u1ec3 t\u00ecm ra m\u1ed7i element n\u1eb1m trong layer n\u00e0o, main thread \u0111i qua c\u00e2y layout \u0111\u1ec3 t\u1ea1o c\u00e2y layer (ph\u1ea7n n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 \"C\u1eadp nh\u1eadt c\u00e2y layer\" trong b\u1ea3ng hi\u1ec7u su\u1ea5t DevTools). N\u1ebfu m\u1ed9t s\u1ed1 ph\u1ea7n c\u1ee7a trang l\u1ebd ra l\u00e0 layer ri\u00eang bi\u1ec7t (nh\u01b0 menu b\u00ean tr\u01b0\u1ee3t v\u00e0o) m\u00e0 kh\u00f4ng c\u00f3 layer ri\u00eang, th\u00ec b\u1ea1n c\u00f3 th\u1ec3 g\u1ee3i \u00fd cho tr\u00ecnh duy\u1ec7t b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng thu\u1ed9c t\u00ednh <code>will-change</code> trong CSS.</p> <p></p> H\u00ecnh 16: Main thread \u0111i qua c\u00e2y layout \u0111\u1ec3 t\u1ea1o ra c\u00e2y layer <p>B\u1ea1n c\u00f3 th\u1ec3 mu\u1ed1n cung c\u1ea5p c\u00e1c layer cho m\u1ecdi element, nh\u01b0ng vi\u1ec7c composite tr\u00ean m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng l\u1edbn c\u00e1c layer c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn ho\u1ea1t \u0111\u1ed9ng ch\u1eadm h\u01a1n so v\u1edbi vi\u1ec7c rasterizing c\u00e1c ph\u1ea7n nh\u1ecf c\u1ee7a trang tr\u00ean m\u1ed7i frame, v\u00ec v\u1eady, \u0111i\u1ec1u quan tr\u1ecdng l\u00e0 b\u1ea1n ph\u1ea3i \u0111o hi\u1ec7u su\u1ea5t render c\u1ee7a \u1ee9ng d\u1ee5ng c\u1ee7a m\u00ecnh. \u0110\u1ec3 bi\u1ebft th\u00eam v\u1ec1 ch\u1ee7 \u0111\u1ec1 n\u00e0y, h\u00e3y xem B\u00e1m s\u00e1t c\u00e1c thu\u1ed9c t\u00ednh ch\u1ec9 d\u00e0nh cho Compositor v\u00e0 Qu\u1ea3n l\u00fd s\u1ed1 l\u01b0\u1ee3ng Layer.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#raster-va-composite-khong-lien-quan-en-main-thread","title":"Raster v\u00e0 composite kh\u00f4ng li\u00ean quan \u0111\u1ebfn main thread","text":"<p>Khi c\u00e2y layer \u0111\u01b0\u1ee3c t\u1ea1o v\u00e0 th\u1ee9 t\u1ef1 v\u1ebd \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh, main thread s\u1ebd commit th\u00f4ng tin \u0111\u00f3 cho compositor thread. Compositor thread sau \u0111\u00f3 rasterize t\u1eebng layer. M\u1ed9t layer c\u00f3 th\u1ec3 l\u1edbn b\u1eb1ng to\u00e0n b\u1ed9 chi\u1ec1u d\u00e0i c\u1ee7a m\u1ed9t trang, do \u0111\u00f3, compositor thread chia ch\u00fang th\u00e0nh c\u00e1c \u00f4 v\u00e0 g\u1eedi t\u1eebng \u00f4 t\u1edbi c\u00e1c raster thread. C\u00e1c raster thread s\u1ebd rasterize t\u1eebng \u00f4 v\u00e0 l\u01b0u ch\u00fang trong b\u1ed9 nh\u1edb GPU.</p> <p></p> H\u00ecnh 17: C\u00e1c raster thread t\u1ea1o bitmap c\u1ee7a c\u00e1c \u00f4 v\u00e0 g\u1eedi ch\u00fang \u0111\u1ebfn GPU <p>Compositor thread c\u00f3 th\u1ec3 \u01b0u ti\u00ean c\u00e1c raster thread kh\u00e1c nhau \u0111\u1ec3 nh\u1eefng th\u1ee9 trong viewport(ho\u1eb7c g\u1ea7n \u0111\u00f3) c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c raster tr\u01b0\u1edbc. M\u1ed9t layer c\u0169ng c\u00f3 nhi\u1ec1u \u00f4 cho c\u00e1c \u0111\u1ed9 ph\u00e2n gi\u1ea3i kh\u00e1c nhau \u0111\u1ec3 x\u1eed l\u00fd nh\u1eefng th\u1ee9 nh\u01b0 ph\u00f3ng to ch\u1eb3ng h\u1ea1n.</p> <p>Sau khi c\u00e1c \u00f4 \u0111\u01b0\u1ee3c raster, compositor thread s\u1ebd thu th\u1eadp th\u00f4ng tin \u00f4 \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 draw quads \u0111\u1ec3 t\u1ea1o compositor frame.</p> Draw quad Ch\u1ee9a th\u00f4ng tin nh\u01b0 v\u1ecb tr\u00ed c\u1ee7a \u00f4 trong b\u1ed9 nh\u1edb v\u00e0 v\u1ecb tr\u00ed trong trang \u0111\u1ec3 v\u1ebd \u00f4, c\u00f3 t\u00ednh \u0111\u1ebfn vi\u1ec7c composite trang. Compositor frame T\u1eadp c\u00e1c draw quad \u0111\u1ea1i di\u1ec7n cho m\u1ed9t frame c\u1ee7a trang. <p>M\u1ed9t compositor frame sau \u0111\u00f3 \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi browser process th\u00f4ng qua IPC. \u1ede \u0111\u00e2y, m\u1ed9t compositor frame kh\u00e1c c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c th\u00eam v\u00e0o t\u1eeb UI thread \u0111\u1ec3 thay \u0111\u1ed5i UI c\u1ee7a tr\u00ecnh duy\u1ec7t ho\u1eb7c t\u1eeb c\u00e1c renderer process kh\u00e1c d\u00e0nh cho ti\u1ec7n \u00edch m\u1edf r\u1ed9ng. C\u00e1c compositor frame n\u00e0y \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn GPU \u0111\u1ec3 hi\u1ec3n th\u1ecb tr\u00ean m\u00e0n h\u00ecnh. N\u1ebfu m\u1ed9t s\u1ef1 ki\u1ec7n cu\u1ed9n x\u1ea3y ra, compositor thread s\u1ebd t\u1ea1o m\u1ed9t compositor frame kh\u00e1c \u0111\u1ec3 g\u1eedi t\u1edbi GPU.</p> <p></p> H\u00ecnh 18: Compositor thread t\u1ea1o compositing frame. Frame \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn browser process r\u1ed3i \u0111\u1ebfn GPU <p>L\u1ee3i \u00edch c\u1ee7a vi\u1ec7c composite l\u00e0 n\u00f3 \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n m\u00e0 kh\u00f4ng li\u00ean quan \u0111\u1ebfn main thread. Compositor thread kh\u00f4ng c\u1ea7n \u0111\u1ee3i t\u00ednh to\u00e1n style ho\u1eb7c th\u1ef1c thi JavaScript. \u0110\u00e2y l\u00e0 l\u00fd do t\u1ea1i sao c\u00e1c ho\u1ea1t-\u1ea3nh-ch\u1ec9-c\u1ea7n-composite \u0111\u01b0\u1ee3c coi l\u00e0 t\u1ed1t nh\u1ea5t \u0111\u1ec3 c\u00f3 hi\u1ec7u su\u1ea5t m\u01b0\u1ee3t m\u00e0. N\u1ebfu layout ho\u1eb7c paint c\u1ea7n \u0111\u01b0\u1ee3c t\u00ednh to\u00e1n l\u1ea1i th\u00ec main thread ph\u1ea3i tham gia.</p>"},{"location":"misc/chrome-blog/inside-browser-3/#ket-phan-3","title":"K\u1ebft ph\u1ea7n 3","text":"<p>Trong ph\u1ea7n n\u00e0y, ta \u0111\u00e3 xem qua rendering pipeline t\u1eeb parsing \u0111\u1ebfn compositing. Hi v\u1ecdng r\u1eb1ng b\u1ea1n \u0111\u00e3 \u0111\u1ee7 kh\u1ea3 n\u0103ng \u0111\u1ec3 \u0111\u1ecdc th\u00eam v\u1ec1 t\u1ed1i \u01b0u ho\u00e1 hi\u1ec7u su\u1ea5t c\u1ee7a m\u1ed9t trang web.</p> <p>Trong ph\u1ea7n ti\u1ebfp theo v\u00e0 c\u0169ng l\u00e0 ph\u1ea7n cu\u1ed1i, ta s\u1ebd nghi\u00ean c\u1ee9u compositor thread chi ti\u1ebft h\u01a1n v\u00e0 xem \u0111i\u1ec1u g\u00ec x\u1ea3y ra khi ng\u01b0\u1eddi d\u00f9ng nh\u1eadp li\u1ec7u c\u0169ng nh\u01b0 di chuy\u1ec3n v\u00e0 nh\u1ea5p chu\u1ed9t.</p>"},{"location":"misc/chrome-blog/inside-browser-4/","title":"B\u00ean trong c\u00e1c tr\u00ecnh duy\u1ec7t ng\u00e0y nay (Ph\u1ea7n 4)","text":""},{"location":"misc/chrome-blog/inside-browser-4/#nguon","title":"Ngu\u1ed3n","text":"<p> Inside look at modern web browser (part 4) - Chrome Developers Blog</p>"},{"location":"misc/chrome-blog/inside-browser-4/#input-i-en-compositor","title":"Input \u0111i \u0111\u1ebfn Compositor","text":"<p>\u0110\u00e2y l\u00e0 ph\u1ea7n cu\u1ed1i trong series 4 ph\u1ea7n v\u1ec1 b\u00ean trong tr\u00ecnh duy\u1ec7t Chrome, n\u01a1i ta s\u1ebd xem l\u00e0m sao n\u00f3 c\u00f3 th\u1ec3 x\u1eed l\u00fd code \u0111\u1ec3 hi\u1ec7n ra m\u1ed9t trang web. Trong b\u00e0i tr\u01b0\u1edbc, ta \u0111\u00e3 t\u00ecm hi\u1ec3u rendering process v\u00e0 compositor. Trong b\u00e0i n\u00e0y, ta s\u1ebd xem compositor t\u1ea1o ra nh\u1eefng t\u01b0\u01a1ng t\u00e1c m\u01b0\u1ee3t m\u00e0 nh\u01b0 th\u1ebf n\u00e0o khi c\u00f3 input t\u1eeb ng\u01b0\u1eddi d\u00f9ng.</p>"},{"location":"misc/chrome-blog/inside-browser-4/#cac-input-event-tu-goc-nhin-trinh-duyet","title":"C\u00e1c input event t\u1eeb g\u00f3c nh\u00ecn tr\u00ecnh duy\u1ec7t","text":"<p>Khi nghe \"input event\", b\u1ea1n c\u00f3 th\u1ec3 ngh\u0129 ngay \u0111\u1ebfn vi\u1ec7c nh\u1eadp v\u00e0o m\u1ed9t textbox hay click chu\u1ed9t, nh\u01b0ng t\u1eeb g\u00f3c nh\u00ecn c\u1ee7a tr\u00ecnh duy\u1ec7t, input c\u00f3 ngh\u0129a l\u00e0 b\u1ea5t k\u1ef3 h\u00e0nh \u0111\u1ed9ng n\u00e0o t\u1eeb ng\u01b0\u1eddi d\u00f9ng. Cu\u1ed9n c\u0169ng l\u00e0 m\u1ed9t input event, ch\u1ea1m ho\u1eb7c di chu\u1ed9t qua c\u0169ng l\u00e0 m\u1ed9t input event.</p> <p>Khi h\u00e0nh \u0111\u1ed9ng c\u1ee7a ng\u01b0\u1eddi d\u00f9ng nh\u01b0 ch\u1ea1m v\u00e0o m\u00e0n h\u00ecnh x\u1ea3y ra, browser process s\u1ebd nh\u1eadn h\u00e0nh \u0111\u1ed9ng \u0111\u00f3 tr\u01b0\u1edbc. Tuy nhi\u00ean, browser process ch\u1ec9 bi\u1ebft n\u01a1i h\u00e0nh \u0111\u1ed9ng \u0111\u00f3 x\u1ea3y ra do n\u1ed9i dung b\u00ean trong tab \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi renderer process. V\u00ec v\u1eady, browser process s\u1ebd g\u1eedi lo\u1ea1i event (nh\u01b0 <code>touchstart</code>) v\u00e0 to\u1ea1 \u0111\u1ed9 c\u1ee7a n\u00f3 \u0111\u1ebfn renderer process. Renderer process x\u1eed l\u00fd event m\u1ed9t c\u00e1ch th\u00edch h\u1ee3p b\u1eb1ng c\u00e1ch t\u00ecm event target v\u00e0 ch\u1ea1y event listener \u0111\u01b0\u1ee3c \u0111\u00ednh k\u00e8m.</p> <p></p> H\u00ecnh 1: Input event \u0111\u01b0\u1ee3c d\u1eabn qua browser process sang renderer process"},{"location":"misc/chrome-blog/inside-browser-4/#compositor-nhan-cac-input-event","title":"Compositor nh\u1eadn c\u00e1c input event","text":"<p>Trong ph\u1ea7n tr\u01b0\u1edbc, ta \u0111\u00e3 xem c\u00e1ch compositor c\u00f3 th\u1ec3 x\u1eed l\u00fd cu\u1ed9n m\u1ed9t c\u00e1ch m\u01b0\u1ee3t m\u00e0 b\u1eb1ng c\u00e1ch t\u1ed5ng h\u1ee3p c\u00e1c rasterized layer. N\u1ebfu kh\u00f4ng c\u00f3 input event listener n\u00e0o \u0111\u01b0\u1ee3c \u0111\u00ednh k\u00e8m v\u00e0o trang, compositor thread c\u00f3 th\u1ec3 t\u1ea1o m\u1ed9t composite frame m\u1edbi ho\u00e0n to\u00e0n \u0111\u1ed9c l\u1eadp v\u1edbi main thread. Nh\u01b0ng n\u1ebfu c\u00f3 listener th\u00ec sao? L\u00e0m sao compositor thread t\u00ecm ra event c\u1ea7n \u0111\u01b0\u1ee3c x\u1eed l\u00fd.</p> H\u00ecnh 2: Khung nh\u00ecn (viewport) tr\u00ean c\u00e1c layer"},{"location":"misc/chrome-blog/inside-browser-4/#hieu-ve-non-fast-scrollable-region","title":"Hi\u1ec3u v\u1ec1 non-fast scrollable region","text":"<p>V\u00ec ch\u1ea1y JavaScript l\u00e0 vi\u1ec7c c\u1ee7a main thread, n\u00ean khi c\u00f3 m\u1ed9t trang \u0111\u01b0\u1ee3c t\u1ed5ng h\u1ee3p (composited), compositor thread s\u1ebd \u0111\u00e1nh d\u1ea5u m\u1ed9t v\u00f9ng c\u1ee7a trang c\u00f3 \u0111\u00ednh k\u00e9m c\u00e1c event handler l\u00e0 \"v\u00f9ng cu\u1ed9n kh\u00f4ng nhanh\" (Non-Fast Scrollable Region). V\u1edbi th\u00f4ng tin n\u00e0y, compositor thread c\u00f3 th\u1ec3 \u0111\u1ea3m b\u1ea3o g\u1eedi input event \u0111\u1ebfn main thread n\u1ebfn event x\u1ea3y ra trong v\u00f9ng \u0111\u00f3. N\u1ebfu input event \u0111\u1ebfn t\u1eeb ngo\u00e0i v\u00f9ng, compositor thread s\u1ebd ti\u1ebfp t\u1ee5c t\u1ed5ng h\u1ee3p frame m\u1edbi m\u00e0 kh\u00f4ng c\u1ea7n \u0111\u1ee3i main thread.</p> <p></p> H\u00ecnh 3: S\u01a1 \u0111\u1ed3 m\u00f4 t\u1ea3 input v\u00e0o non-fast scrollable region"},{"location":"misc/chrome-blog/inside-browser-4/#e-y-khi-viet-event-handler","title":"\u0110\u1ec3 \u00fd khi vi\u1ebft event handler","text":"<p>M\u1ed9t pattern ph\u1ed5 bi\u1ebfn khi x\u1eed l\u00fd event trong ph\u00e1t tri\u1ec3n web l\u00e0 u\u1ef7 quy\u1ec1n event. V\u00ec event chuy\u1ec3n th\u00f4ng tin t\u1eeb node c\u00f3 event \u0111i l\u00ean tr\u00ean c\u00e2y DOM (bubble), ta c\u00f3 th\u1ec3 \u0111\u00ednh k\u00e8m m\u1ed9t event handler \u1edf element tr\u00ean c\u00f9ng v\u00e0 u\u1ef7 quy\u1ec1n c\u00e1c t\u00e1c v\u1ee5 d\u1ef1a tr\u00ean event target. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u00e3 th\u1ea5y ho\u1eb7c vi\u1ebft code nh\u01b0 sau:</p> <pre><code>document.body.addEventListener('touchstart', event =&gt; {\n    if (event.target === area) {\n        event.preventDefault();\n    }\n});\n</code></pre> <p>V\u00ec ta ch\u1ec9 c\u1ea7n vi\u1ebft m\u1ed9t event handler cho t\u1ea5t c\u1ea3 element, pattern u\u1ef7 quy\u1ec1n event n\u00e0y r\u1ea5t h\u1ea5p d\u1eabn. Tuy nhi\u00ean, n\u1ebfu b\u1ea1n \u1edf g\u00f3c nh\u00ecn c\u1ee7a tr\u00ecnh duy\u1ec7t, to\u00e0n b\u1ed9 trang s\u1ebd \u0111\u01b0\u1ee3c xem nh\u01b0 non-fast scrollable region. Ngh\u0129a l\u00e0 ngay c\u1ea3 khi \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n kh\u00f4ng quan t\u00e2m \u0111\u1ebfn input t\u1eeb m\u1ed9t s\u1ed1 ph\u1ea7n nh\u1ea5t \u0111\u1ecbnh c\u1ee7a trang, compositor thread s\u1ebd ph\u1ea3i giao ti\u1ebfp v\u1edbi main thread v\u00e0 \u0111\u1ee3i n\u00f3 m\u1ed7i khi c\u00f3 input event \u0111\u1ebfn. Do \u0111\u00f3, kh\u1ea3 n\u0103ng cu\u1ed9n m\u01b0\u1ee3t m\u00e0 c\u1ee7a compositor s\u1ebd kh\u00f4ng c\u00f2n.</p> <p></p> H\u00ecnh 4: S\u01a1 \u0111\u1ed3 cho th\u1ea5y input v\u00e0o non-fast scrollable region m\u00e0 bao tr\u1ecdn to\u00e0n b\u1ed9 trang <p>\u0110\u1ec3 gi\u1ea3m thi\u1ec3u \u0111i\u1ec1u n\u00e0y, b\u1ea1n c\u00f3 th\u1ec3 truy\u1ec1n <code>passive : true</code> v\u00e0o event listener. N\u00f3 s\u1ebd g\u1ee3i \u00fd cho tr\u00ecnh duy\u1ec7t r\u1eb1ng b\u1ea1n v\u1eabn mu\u1ed1n ti\u1ebfp t\u1ee5c l\u1eafng nghe event \u1edf main thread, nh\u01b0ng compositor v\u1eabn c\u00f3 th\u1ec3 ch\u1ea1y ti\u1ebfp v\u00e0 t\u1ea1o frame m\u1edbi.</p> <pre><code>document.body.addEventListener('touchstart', event =&gt; {\n    if (event.target === area) {\n        event.preventDefault()\n    }\n }, {passive: true});\n</code></pre>"},{"location":"misc/chrome-blog/inside-browser-4/#kiem-tra-xem-co-huy-event-uoc-khong","title":"Ki\u1ec3m tra xem c\u00f3 hu\u1ef7 event \u0111\u01b0\u1ee3c kh\u00f4ng","text":"<p>Gi\u1ea3 s\u1eed b\u1ea1n c\u00f3 m\u1ed9t c\u00e1i khung trong trang, b\u1ea1n mu\u1ed1n c\u00e1i khung n\u00e0y ch\u1ec9 cu\u1ed9n ngang.</p> <p></p> H\u00ecnh 5: Trang web v\u1edbi khung ch\u1ec9 cho cu\u1ed9n ngang <p>D\u00f9ng <code>passive: true</code> trong pointer event ngh\u0129a l\u00e0 trang c\u00f3 th\u1ec3 cu\u1ed9n m\u1ed9t c\u00e1ch m\u01b0\u1ee3t m\u00e0, nh\u01b0ng cu\u1ed9n d\u1ecdc c\u00f3 th\u1ec3 \u0111\u00e3 b\u1eaft \u0111\u1ea7u khi b\u1ea1n mu\u1ed1n <code>preventDefault</code> \u0111\u1ec3 ch\u1eb7n cu\u1ed9n d\u1ecdc. B\u1ea1n c\u00f3 th\u1ec3 ki\u1ec3m tra b\u1eb1ng c\u00e1ch d\u00f9ng <code>event.cancelable</code>.</p> <pre><code>document.body.addEventListener('pointermove', event =&gt; {\n    if (event.cancelable) {\n        event.preventDefault(); // block the native scroll\n        /*\n        *  do what you want the application to do here\n        */\n    }\n}, {passive: true});\n</code></pre> <p>Thay v\u00e0o \u0111\u00f3, b\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng CSS rule nh\u01b0 <code>touch-action</code> \u0111\u1ec3 lo\u1ea1i b\u1ecf ho\u00e0n to\u00e0n event handler.</p> <pre><code>#area {\n  touch-action: pan-x;\n}\n</code></pre>"},{"location":"misc/chrome-blog/inside-browser-4/#tim-event-target","title":"T\u00ecm event target","text":"<p>Khi compositor thread g\u1eedi m\u1ed9t input event \u0111\u1ebfn main thread, n\u00f3 s\u1ebd ch\u1ea1y m\u1ed9t hit test \u0111\u1ec3 t\u00ecm event target. Hit test d\u00f9ng d\u1eef li\u1ec7u paint record, \u0111\u01b0\u1ee3c t\u1ea1o ra trong rendering process \u0111\u1ec3 t\u00ecm hi\u1ec3u nh\u1eefng th\u1ee9 n\u1eb1m d\u01b0\u1edbi to\u1ea1 \u0111\u1ed9 \u0111i\u1ec3m m\u00e0 event x\u1ea3y ra.</p> <p></p> H\u00ecnh 6: Main thread ki\u1ec3m tra paint record \u0111\u1ec3 xem \u0111i\u1ec3m x.y c\u00f3 g\u00ec"},{"location":"misc/chrome-blog/inside-browser-4/#giam-thieu-viec-gui-event-en-main-thread","title":"Gi\u1ea3m thi\u1ec3u vi\u1ec7c g\u1eedi event \u0111\u1ebfn main thread","text":"<p>Trong b\u00e0i tr\u01b0\u1edbc, ta \u0111\u00e3 xem c\u00e1ch m\u00e0n h\u00ecnh refresh 60 l\u1ea7n tr\u00ean gi\u00e2y v\u00e0 c\u00e1ch m\u00e0 ta c\u1ea7n theo k\u1ecbp \u0111i\u1ec1u \u0111\u00f3 \u0111\u1ec3 c\u00f3 ho\u1ea1t \u1ea3nh m\u01b0\u1ee3t m\u00e0. V\u1edbi input, m\u1ed9t thi\u1ebft b\u1ecb m\u00e0n h\u00ecnh c\u1ea3m \u1ee9ng th\u00f4ng th\u01b0\u1eddng cung c\u1ea5p event ch\u1ea1m 60 - 120 l\u1ea7n m\u1ed7i gi\u00e2y. Input event r\u00f5 r\u00e0ng l\u00e0 nhi\u1ec1u h\u01a1n m\u1ee9c refresh c\u1ee7a m\u00e0n h\u00ecnh.</p> <p>N\u1ebfu m\u1ed9t event li\u00ean t\u1ee5c nh\u01b0 <code>touchmove</code> \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn main thread 120 l\u1ea7n m\u1ed7i gi\u00e2y, n\u00f3 s\u1ebd k\u00edch ho\u1ea1t qu\u00e1 nhi\u1ec1u hit test v\u00e0 th\u1ef1c thi JavaScript so v\u1edbi m\u1ee9c m\u00e0 m\u00e0n h\u00ecnh c\u00f3 th\u1ec3 refresh.</p> <p></p> H\u00ecnh 7: Qu\u00e1 nhi\u1ec1u event trong khung th\u1eddi gian l\u00e0m trang b\u1ecb gi\u1eadt <p>\u0110\u1ec3 gi\u1ea3m thi\u1ec3u qu\u00e1 nhi\u1ec1u l\u1ec7nh g\u1ecdi \u0111\u1ebfn main thread, Chrome k\u1ebft h\u1ee3p c\u00e1c event li\u00ean t\u1ee5c (nh\u01b0 <code>wheel</code>, <code>mousewheel</code>, <code>mousemove</code>, <code>pointermove</code>, <code>touchmove</code>) v\u00e0 tr\u00ec ho\u00e3n vi\u1ec7c g\u1eedi \u0111\u1ebfn main thread cho \u0111\u1ebfn ngay tr\u01b0\u1edbc <code>requestAnimationFrame</code> ti\u1ebfp theo.</p> <p></p> H\u00ecnh 8: V\u1eabn c\u00e1i d\u00f2ng th\u1eddi gian \u0111\u00f3, nh\u01b0ng c\u00e1c event \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p v\u00e0 tr\u00ec ho\u00e3n <p>C\u00e1c event r\u1eddi r\u1ea1c nh\u01b0 <code>keydown</code>, <code>keyup</code>, <code>mouseup</code>, <code>mousedown</code>, <code>touchstart</code>, v\u00e0 <code>touchend</code> \u0111\u01b0\u1ee3c g\u1eedi ngay l\u1eadp t\u1ee9c.</p>"},{"location":"misc/chrome-blog/inside-browser-4/#su-dung-getcoalescedevents-e-nhan-cac-event-trong-frame","title":"S\u1eed d\u1ee5ng <code>getCoalescedEvents</code> \u0111\u1ec3 nh\u1eadn c\u00e1c event trong frame","text":"<p>V\u1edbi h\u1ea7u h\u1ebft cac \u1ee9ng d\u1ee5ng web, c\u00e1c event \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p ph\u1ea3i \u0111\u1ee7 \u0111\u1ec3 cung c\u1ea5p tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\u00f9ng t\u1ed1t. Tuy nhi\u00ean, n\u1ebfu b\u1ea1n \u0111ang l\u00e0m nh\u1eefng th\u1ee9 nh\u01b0 \u1ee9ng d\u1ee5ng v\u1ebd v\u00e0 t\u1ea1o m\u1ed9t \u0111\u01b0\u1eddng th\u1eb3ng d\u1ef1a tr\u00ean c\u00e1c to\u1ea1 \u0111\u1ed9 <code>touchmove</code>, b\u1ea1n c\u00f3 th\u1ec3 m\u1ea5t c\u00e1c to\u1ea1 \u0111\u1ed9 \u1edf gi\u1eefa \u0111\u1ec3 v\u1ebd ra m\u1ed9t \u0111\u01b0\u1eddng th\u1eb3ng \u0111\u1eb9p. Trong tr\u01b0\u1eddng h\u1ee3p \u0111\u00f3, b\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng ph\u01b0\u01a1ng th\u1ee9c <code>getCoalescedEvents</code> trong pointer event \u0111\u1ec3 l\u1ea5y th\u00f4ng tin v\u1ec1 c\u00e1c event k\u1ebft h\u1ee3p \u0111\u00f3.</p> <p></p> H\u00ecnh 9: H\u00e0nh \u0111\u1ed9ng touch trong th\u1ef1c t\u1ebf \u1edf b\u00ean tr\u00e1i, v\u00e0 sau khi b\u1ecb k\u1ebft h\u1ee3p \u1edf b\u00ean ph\u1ea3i <pre><code>window.addEventListener('pointermove', event =&gt; {\n    const events = event.getCoalescedEvents();\n    for (let event of events) {\n        const x = event.pageX;\n        const y = event.pageY;\n        // draw a line using x and y coordinates.\n    }\n});\n</code></pre>"},{"location":"misc/chrome-blog/inside-browser-4/#cac-buoc-tiep-theo","title":"C\u00e1c b\u01b0\u1edbc ti\u1ebfp theo","text":"<p>Trong series n\u00e0y, ta \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u0111\u1ebfn c\u00e1c ho\u1ea1t \u0111\u1ed9ng b\u00ean trong m\u1ed9t tr\u00ecnh duy\u1ec7t web. N\u1ebfu b\u1ea1n ch\u01b0a bao gi\u1edd ngh\u0129 v\u00ec sao DevTools khuy\u00ean b\u1ea1n th\u00eam <code>{passive: true}</code> v\u00e0o event handler ho\u1eb7c v\u00ec sao b\u1ea1n c\u00f3 th\u1ec3 vi\u1ebft thu\u1ed9c t\u00ednh <code>async</code> v\u00e0o th\u1ebb script, m\u00ecnh hi v\u1ecdng series c\u00f3 th\u1ec3 l\u00e0m r\u00f5 v\u00ec sao tr\u00ecnh duy\u1ec7t c\u1ea7n c\u00e1c th\u00f4ng tin \u0111\u00f3 \u0111\u1ec3 cung c\u1ea5p tr\u1ea3i nghi\u1ec7m duy\u1ec7t web m\u01b0\u1ee3t m\u00e0 v\u00e0 nhanh h\u01a1n.</p>"},{"location":"misc/chrome-blog/inside-browser-4/#dung-lighthouse","title":"D\u00f9ng Lighthouse","text":"<p>N\u1ebfu b\u1ea1n mu\u1ed1n l\u00e0m cho code c\u1ee7a m\u00ecnh ph\u00f9 h\u1ee3p v\u1edbi tr\u00ecnh duy\u1ec7t nh\u01b0ng kh\u00f4ng bi\u1ebft b\u1eaft \u0111\u1ea7u t\u1eeb \u0111\u00e2u, th\u00ec Lighthouse l\u00e0 m\u1ed9t c\u00f4ng c\u1ee5 ch\u1ea1y ki\u1ec3m tra b\u1ea5t k\u1ef3 trang web n\u00e0o v\u00e0 cung c\u1ea5p cho b\u1ea1n b\u00e1o c\u00e1o v\u1ec1 nh\u1eefng g\u00ec \u0111ang \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n \u0111\u00fang v\u00e0 nh\u1eefng g\u00ec c\u1ea7n ph\u1ea3i c\u1ea3i thi\u1ec7n. \u0110\u1ecdc qua danh s\u00e1ch ki\u1ec3m tra c\u0169ng cho b\u1ea1n \u00fd t\u01b0\u1edfng v\u1ec1 nh\u1eefng th\u1ee9 m\u00e0 tr\u00ecnh duy\u1ec7t c\u1ea7n.</p>"},{"location":"misc/chrome-blog/inside-browser-4/#hoc-cach-o-luong-hieu-suat","title":"H\u1ecdc c\u00e1ch \u0111o l\u01b0\u1eddng hi\u1ec7u su\u1ea5t","text":"<p>C\u00e1c \u0111i\u1ec1u ch\u1ec9nh hi\u1ec7u su\u1ea5t c\u00f3 th\u1ec3 kh\u00e1c nhau \u0111\u1ed1i v\u1edbi c\u00e1c trang web kh\u00e1c nhau, do \u0111\u00f3, \u0111i\u1ec1u quan tr\u1ecdng l\u00e0 b\u1ea1n ph\u1ea3i \u0111o hi\u1ec7u su\u1ea5t trang web c\u1ee7a m\u00ecnh v\u00e0 quy\u1ebft \u0111\u1ecbnh \u0111i\u1ec1u g\u00ec ph\u00f9 h\u1ee3p nh\u1ea5t cho trang web c\u1ee7a m\u00ecnh. Team Chrome DevTools c\u00f3 m\u1ed9t s\u1ed1 h\u01b0\u1edbng d\u1eabn v\u1ec1 c\u00e1ch \u0111o hi\u1ec7u su\u1ea5t trang web c\u1ee7a b\u1ea1n.</p>"},{"location":"misc/chrome-blog/inside-browser-4/#them-feature-policy-vao-trang-cua-ban","title":"Th\u00eam Feature Policy v\u00e0o trang c\u1ee7a b\u1ea1n","text":"<p>N\u1ebfu b\u1ea1n mu\u1ed1n \u0111i xa h\u01a1n, Feature Policy l\u00e0 m\u1ed9t t\u00ednh n\u0103ng web m\u1edbi c\u00f3 th\u1ec3 l\u00e0 r\u00e0o c\u1ea3n cho b\u1ea1n khi b\u1ea1n \u0111ang t\u1ea1o ra website cho m\u00ecnh. Vi\u1ec7c b\u1eadt feature policy s\u1ebd \u0111\u1ea3m b\u1ea3o h\u00e0nh vi nh\u1ea5t \u0111\u1ecbnh c\u1ee7a \u1ee9ng d\u1ee5ng v\u00e0 ng\u0103n b\u1ea1n m\u1eafc l\u1ed7i. V\u00ed d\u1ee5, n\u1ebfu mu\u1ed1n \u0111\u1ea3m b\u1ea3o \u1ee9ng d\u1ee5ng c\u1ee7a m\u00ecnh s\u1ebd kh\u00f4ng bao gi\u1edd ch\u1eb7n parsing, th\u00ec b\u1ea1n c\u00f3 th\u1ec3 ch\u1ea1y \u1ee9ng d\u1ee5ng c\u1ee7a m\u00ecnh theo synchronous scripts policy. Khi c\u00f3 <code>sync-script: 'none'</code>, \u0111o\u1ea1n code JavaScript ch\u1eb7n parser s\u1ebd b\u1ecb ch\u1eb7n th\u1ef1c thi. \u0110i\u1ec1u n\u00e0y ng\u0103n b\u1ea5t k\u1ef3 code n\u00e0o c\u1ee7a b\u1ea1n ch\u1eb7n parser v\u00e0 tr\u00ecnh duy\u1ec7t kh\u00f4ng c\u1ea7n ph\u1ea3i lo v\u1ec1 vi\u1ec7c t\u1ea1m d\u1eebng parse.</p>"},{"location":"misc/chrome-blog/inside-browser-4/#ket-phan-4","title":"K\u1ebft ph\u1ea7n 4","text":"<p>Khi m\u1edbi b\u1eaft \u0111\u1ea7u x\u00e2y d\u1ef1ng website, m\u00ecnh g\u1ea7n nh\u01b0 ch\u1ec9 quan t\u00e2m \u0111\u1ebfn vi\u1ec7c l\u00e0m sao \u0111\u1ec3 vi\u1ebft code v\u00e0 l\u00e0m g\u00ec \u0111\u1ec3 tr\u1edf n\u00ean n\u0103ng su\u1ea5t h\u01a1n. Nh\u1eefng th\u1ee9 \u0111\u00f3 quan tr\u1ecdng th\u1eadt, nh\u01b0ng ta c\u0169ng c\u1ea7n bi\u1ebft l\u00e0m sao tr\u00ecnh duy\u1ec7t \u0111\u1ecdc \u0111\u01b0\u1ee3c code c\u1ee7a ch\u00fang ta. Tr\u00ecnh duy\u1ec7t hi\u1ec7n \u0111\u1ea1i \u0111\u00e3 v\u00e0 \u0111ang ti\u1ebfp t\u1ee5c n\u00e2ng cao tr\u1ea3i nghi\u1ec7m web cho ng\u01b0\u1eddi d\u00f9ng. \u0110\u1ed1i x\u1eed t\u1ed1t v\u1edbi tr\u00ecnh duy\u1ec7t b\u1eb1ng c\u00e1ch t\u1ed5 ch\u1ee9c t\u1ed1t code c\u1ee7a ch\u00fang ta s\u1ebd d\u1eabn \u0111\u1ebfn vi\u1ec7c c\u1ea3i thi\u1ec7n tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\u00f9ng. M\u00ecnh hi v\u1ecdng c\u00e1c b\u1ea1n s\u1ebd tham gia c\u00f9ng m\u00ecnh trong vi\u1ec7c \u0111\u1ed1i x\u1eed t\u1ed1t v\u1edbi tr\u00ecnh duy\u1ec7t!</p>"},{"location":"misc/discord-blog/storing-billions-messages/","title":"Discord l\u01b0u h\u00e0ng t\u1ec9 tin nh\u1eafn nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"misc/discord-blog/storing-billions-messages/#nguon","title":"Ngu\u1ed3n","text":"<p> How Discord stores billions of messages - Stanislav Vishnevskiy</p>"},{"location":"misc/discord-blog/storing-billions-messages/#loi-tua","title":"L\u1eddi t\u1ef1a","text":"<p>Discord ti\u1ebfp t\u1ee5c ph\u00e1t tri\u1ec3n nhanh h\u01a1n nh\u1eefng g\u00ec ch\u00fang t\u00f4i ngh\u0129 v\u00e0 n\u1ed9i dung do ng\u01b0\u1eddi d\u00f9ng t\u1ea1o ra c\u0169ng ph\u00e1t tri\u1ec3n h\u01a1n c\u1ea3 k\u1ef3 v\u1ecdng. V\u1edbi nhi\u1ec1u ng\u01b0\u1eddi d\u00f9ng h\u01a1n th\u00ec s\u1ebd c\u00f3 nhi\u1ec1u tin nh\u1eafn h\u01a1n. V\u00e0o th\u00e1ng 7 (n\u0103m 2016), ch\u00fang t\u00f4i \u0111\u1ea1t m\u1ed1c 40 tri\u1ec7u tin nh\u1eafn m\u1ed9t ng\u00e0y, th\u00e1ng 12 (n\u0103m 2016), ch\u00fang t\u00f4i \u0111\u1ea1t m\u1ed1c 100 tri\u1ec7u tin nh\u1eafn, v\u00e0 \u0111\u1ebfn th\u1eddi \u0111i\u1ec3m n\u00e0y th\u00ec ch\u00fang t\u00f4i \u0111\u00e3 v\u01b0\u1ee3t m\u1ed1c 120 tri\u1ec7u tin nh\u1eafn. Ch\u00fang t\u00f4i s\u1edbm \u0111\u00e3 quy\u1ebft \u0111\u1ecbnh s\u1ebd l\u01b0u t\u1ea5t c\u1ea3 tin nh\u1eafn c\u1ee7a ng\u01b0\u1eddi d\u00f9ng m\u00e3i m\u00e3i \u0111\u1ec3 ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 quay l\u1ea1i xem b\u1ea5t c\u1ee9 l\u00fac n\u00e0o h\u1ecd mu\u1ed1n, v\u00e0 c\u00f3 s\u1eb5n d\u1eef li\u1ec7u tr\u00ean b\u1ea5t k\u1ef3 thi\u1ebft b\u1ecb n\u00e0o. \u0110\u00e2y th\u1ef1c s\u1ef1 l\u00e0 m\u1ed9t l\u01b0\u1ee3ng d\u1eef li\u1ec7u ph\u00e1t tri\u1ec3n c\u1ef1c l\u1edbn v\u1ec1 c\u1ea3 k\u00edch th\u01b0\u1edbc, t\u1ed1c \u0111\u1ed9 t\u0103ng, v\u00e0 ph\u1ea3i lu\u00f4n c\u00f3 s\u1eb5n. Ch\u00fang t\u00f4i \u0111\u1ea1t \u0111\u01b0\u1ee3c \u0111i\u1ec1u \u0111\u00f3 nh\u01b0 th\u1ebf n\u00e0o? Cassandra!</p>"},{"location":"misc/discord-blog/storing-billions-messages/#nhung-thu-chung-toi-a-lam","title":"Nh\u1eefng th\u1ee9 ch\u00fang t\u00f4i \u0111\u00e3 l\u00e0m","text":"<p>Phi\u00ean b\u1ea3n \u0111\u1ea7u ti\u00ean c\u1ee7a Discord \u0111\u01b0\u1ee3c t\u1ea1o ra trong ch\u1ec9 hai th\u00e1ng \u0111\u1ea7u n\u0103m 2015. C\u00f3 th\u1ec3 n\u00f3i r\u1eb1ng, m\u1ed9t trong nh\u1eefng database t\u1ed1t nh\u1ea5t \u0111\u1ec3 duy\u1ec7t nhanh l\u00e0 MongoDB. M\u1ecdi th\u1ee9 tr\u00ean Discord \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong m\u1ed9t replica set MongoDB duy nh\u1ea5t v\u00e0 \u0111i\u1ec1u n\u00e0y l\u00e0 c\u00f3 ch\u1ee7 \u00fd, nh\u01b0ng ch\u00fang t\u00f4i c\u0169ng \u0111\u00e3 l\u00ean k\u1ebf ho\u1ea1ch \u0111\u1ea7y \u0111\u1ee7 \u0111\u1ec3 di chuy\u1ec3n sang m\u1ed9t database kh\u00e1c (ch\u00fang t\u00f4i bi\u1ebft m\u00ecnh s\u1ebd kh\u00f4ng d\u00f9ng MongoDB sharding v\u00ec d\u00f9ng n\u00f3 kh\u00e1 ph\u1ee9c t\u1ea1p v\u00e0 c\u00e1i \u0111\u00f3 c\u0169ng kh\u00f4ng n\u1ed5i ti\u1ebfng v\u1ec1 t\u00ednh \u1ed5n \u0111\u1ecbnh). \u0110\u00e2y th\u1ef1c s\u1ef1 l\u00e0 m\u1ed9t ph\u1ea7n c\u1ee7a v\u0103n ho\u00e1 c\u00f4ng ty ch\u00fang t\u00f4i: x\u00e2y d\u1ef1ng nhanh ch\u00f3ng \u0111\u1ec3 ch\u1ee9ng minh m\u1ed9t t\u00ednh n\u0103ng c\u1ee7a s\u1ea3n ph\u1ea9m, nh\u01b0ng lu\u00f4n h\u01b0\u1edbng \u0111\u1ebfn gi\u1ea3i ph\u00e1p m\u1ea1nh m\u1ebd h\u01a1n.</p> <p>Tin nh\u1eafn \u0111\u01b0\u1ee3c l\u01b0u tr\u00ean m\u1ed9t MongoDB collection v\u1edbi m\u1ed9t index gh\u00e9p duy nh\u1ea5t tr\u00ean <code>channel_id</code> v\u00e0 <code>created_at</code>. V\u00e0o kho\u1ea3ng th\u00e1ng 11 n\u0103m 2015, ch\u00fang t\u00f4i \u0111\u1ea1t 100 tri\u1ec7u tin nh\u1eafn \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef v\u00e0 t\u1ea1i th\u1eddi \u0111i\u1ec3m \u0111\u00f3, ch\u00fang t\u00f4i b\u1eaft \u0111\u1ea7u th\u1ea5y xu\u1ea5t hi\u1ec7n m\u1ed9t s\u1ed1 v\u1ea5n \u0111\u1ec1: d\u1eef li\u1ec7u v\u00e0 index kh\u00f4ng c\u00f2n c\u00f3 th\u1ec3 n\u1eb1m trong RAM v\u00e0 \u0111\u1ed9 tr\u1ec5 b\u1eaft \u0111\u1ea7u tr\u1edf n\u00ean kh\u00f3 \u0111o\u00e1n h\u01a1n. \u0110\u00e3 \u0111\u1ebfn l\u00fac di c\u01b0 sang m\u1ed9t database m\u1edbi ph\u00f9 h\u1ee3p h\u01a1n r\u1ed3i.</p>"},{"location":"misc/discord-blog/storing-billions-messages/#chon-ra-database-phu-hop","title":"Ch\u1ecdn ra Database ph\u00f9 h\u1ee3p","text":"<p>Tr\u01b0\u1edbc khi ch\u1ecdn database m\u1edbi, ch\u00fang t\u00f4i c\u1ea7n hi\u1ec3u pattern \u0111\u1ecdc/ghi c\u1ee7a m\u00ecnh v\u00e0 l\u00fd do t\u1ea1i sao ki\u1ebfn tr\u00fac hi\u1ec7n t\u1ea1i l\u1ea1i c\u00f3 v\u1ea5n \u0111\u1ec1.</p> <ul> <li>R\u00f5 r\u00e0ng l\u00e0 c\u00e1c l\u1ea7n \u0111\u1ecdc d\u1eef li\u1ec7u l\u00e0 c\u1ef1c k\u1ef3 ng\u1eabu nhi\u00ean v\u00e0 t\u1ec9 l\u1ec7 \u0111\u1ecdc/ghi l\u00e0 kho\u1ea3ng 50/50.</li> <li>C\u00e1c Discord server thi\u00ean v\u1ec1 voice chat h\u1ea7u nh\u01b0 kh\u00f4ng c\u00f3 tin nh\u1eafn n\u00e0o. \u0110i\u1ec1u n\u00e0y c\u00f3 ngh\u0129a l\u00e0 nh\u1eefng ng\u01b0\u1eddi trong c\u00e1c server n\u00e0y g\u1eedi 1 \u0111\u1ebfn 2 tin nh\u1eafn m\u1ed7i v\u00e0i ng\u00e0y. Trong m\u1ed9t n\u0103m, lo\u1ea1i server n\u00e0y kh\u00f3 c\u00f3 th\u1ec3 \u0111\u1ea1t 1000 tin nh\u1eafn. V\u1ea5n \u0111\u1ec1 l\u00e0 m\u1eb7c d\u00f9 c\u00e1c server n\u00e0y ch\u1ee9a \u00edt tin nh\u1eafn, \u0111i\u1ec1u n\u00e0y l\u1ea1i g\u00e2y kh\u00f3 kh\u0103n cho vi\u1ec7c l\u1ea5y d\u1eef li\u1ec7u g\u1eedi v\u1ec1 cho ng\u01b0\u1eddi d\u00f9ng. Ch\u1ec9 tr\u1ea3 v\u1ec1 50 tin nh\u1eafn cho 1 ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn nhi\u1ec1u l\u1ea7n random seek tr\u00ean \u0111\u0129a, g\u00e2y n\u00ean vi\u1ec7c tr\u1ee5c xu\u1ea5t d\u1eef li\u1ec7u trong cache (cache eviction).</li> <li>C\u00e1c Discord server thi\u00ean v\u1ec1 chat g\u1eedi kh\u00e1 nhi\u1ec1u tin nh\u1eafn, t\u1ea7m kho\u1ea3ng 100 ngh\u00ecn \u0111\u1ebfn 1 tri\u1ec7u tin nh\u1eafn m\u1ed9t n\u0103m. D\u1eef li\u1ec7u c\u1ea7n th\u01b0\u1eddng l\u00e0 c\u00e1c tin nh\u1eafn r\u1ea5t g\u1ea7n \u0111\u00e2y. V\u1ea5n \u0111\u1ec1 l\u00e0, do c\u00e1c server n\u00e0y th\u01b0\u1eddng ch\u1ec9 c\u00f3 d\u01b0\u1edbi 100 th\u00e0nh vi\u00ean n\u00ean m\u1eadt \u0111\u1ed9 request d\u1eef li\u1ec7u n\u00e0y c\u0169ng th\u1ea5p, v\u00e0 kh\u00f4ng c\u00f3 kh\u1ea3 n\u0103ng n\u1eb1m trong disk cache.</li> <li>C\u00e1c Discord server c\u00f4ng c\u1ed9ng l\u1edbn g\u1eedi r\u1ea5t nhi\u1ec1u tin nh\u1eafn. Ch\u00fang c\u00f3 h\u00e0ng ngh\u00ecn th\u00e0nh vi\u00ean g\u1eedi t\u1ea7m 1000 tin nh\u1eafn m\u1ed9t ng\u00e0y v\u00e0 d\u1ec5 d\u00e0ng \u0111\u1ea1t h\u00e0ng tri\u1ec7u tin nh\u1eafn m\u1ed9t n\u0103m. C\u00e1c server n\u00e0y g\u1ea7n nh\u01b0 lu\u00f4n request tin nh\u1eafn trong v\u00f2ng 1 gi\u1edd tr\u01b0\u1edbc v\u00e0 request kh\u00e1 th\u01b0\u1eddng xuy\u00ean. Do \u0111\u00f3, d\u1eef li\u1ec7u th\u01b0\u1eddng n\u1eb1m trong disk cache.</li> <li>Ch\u00fang t\u00f4i bi\u1ebft r\u1eb1ng trong n\u0103m t\u1edbi, ch\u00fang t\u00f4i s\u1ebd b\u1ed5 sung nhi\u1ec1u c\u00e1ch h\u01a1n n\u1eefa \u0111\u1ec3 gi\u00fap ng\u01b0\u1eddi d\u00f9ng gi\u1ea3i quy\u1ebft v\u1ee5 \u0111\u1ecdc random, nh\u01b0 l\u00e0 kh\u1ea3 n\u0103ng xem c\u00e1c tin nh\u1eafn b\u1ecb tag trong 30 ng\u00e0y, r\u1ed3i nh\u1ea3y \u0111\u1ebfn tin nh\u1eafn \u0111\u00f3, xem c\u00e1c tin nh\u1eafn \u0111\u01b0\u1ee3c ghim, v\u00e0 t\u00ecm ki\u1ebfm tin nh\u1eafn theo m\u1ed9t \u0111o\u1ea1n text n\u00e0o \u0111\u00f3. M\u1ea5y c\u00e1i n\u00e0y c\u00f2n g\u00e2y ra nhi\u1ec1u l\u1ea7n \u0111\u1ecdc random n\u1eefa!!</li> </ul> <p>Sau \u0111\u00f3 ch\u00fang t\u00f4i \u0111\u1ecbnh ra c\u00e1c y\u00eau c\u1ea7u nh\u01b0 sau:</p> <ul> <li>Kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng tuy\u1ebfn t\u00ednh - Ch\u00fang t\u00f4i kh\u00f4ng mu\u1ed1n xem x\u00e9t l\u1ea1i gi\u1ea3i ph\u00e1p sau n\u00e0y ho\u1eb7c shard l\u1ea1i d\u1eef li\u1ec7u m\u1ed9t c\u00e1ch th\u1ee7 c\u00f4ng.</li> <li>T\u1ef1 \u0111\u1ed9ng failover - Ch\u00fang t\u00f4i th\u1ef1c s\u1ef1 mu\u1ed1n \u0111\u01b0\u1ee3c ng\u1ee7 v\u00e0o ban \u0111\u00eam v\u00e0 x\u00e2y d\u1ef1ng Discord \u0111\u1ec3 t\u1ef1 h\u1ed3i ph\u1ee5c c\u00e0ng nhi\u1ec1u c\u00e0ng t\u1ed1t.</li> <li>\u00cdt ph\u1ea3i b\u1ea3o tr\u00ec - N\u00f3 n\u00ean ho\u1ea1t \u0111\u1ed9ng t\u1ed1t sau khi setup. Ch\u00fang t\u00f4i ch\u1ec9 ph\u1ea3i th\u00eam nhi\u1ec1u node h\u01a1n khi d\u1eef li\u1ec7u t\u0103ng l\u00ean.</li> <li>Hi\u1ec7u qu\u1ea3 \u0111\u00e3 \u0111\u01b0\u1ee3c ch\u1ee9ng minh - Ch\u00fang t\u00f4i th\u00edch th\u1eed c\u00e1c c\u00f4ng ngh\u1ec7 m\u1edbi, nh\u01b0ng kh\u00f4ng qu\u00e1 m\u1edbi.</li> <li>Hi\u1ec7u su\u1ea5t c\u00f3 th\u1ec3 d\u1ef1 \u0111o\u00e1n \u0111\u01b0\u1ee3c - Ch\u00fang t\u00f4i c\u00f3 c\u1ea3nh b\u00e1o khi p95 th\u1eddi gian response h\u01a1n 80ms. Ch\u00fang t\u00f4i c\u0169ng kh\u00f4ng mu\u1ed1n cache tin nh\u1eafn tr\u00ean Redis ho\u1eb7c Memcached.</li> <li>Kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t c\u00e1i blob store - Vi\u1ec7c vi\u1ebft h\u00e0ng ngh\u00ecn tin nh\u1eafn m\u1ed9t gi\u00e2y s\u1ebd kh\u00f4ng hi\u1ec7u qu\u1ea3 n\u1ebfu ta li\u00ean t\u1ee5c ph\u1ea3i deserialize m\u1ea5y c\u00e1i blob v\u00e0 th\u00eam tin nh\u1eafn v\u00e0o sau blob.</li> <li>M\u00e3 ngu\u1ed3n m\u1edf - Ch\u00fang t\u00f4i tin v\u00e0o vi\u1ec7c ki\u1ec3m so\u00e1t v\u1eadn m\u1ec7nh c\u1ee7a ch\u00ednh m\u00ecnh m\u00e0 kh\u00f4ng ph\u1ea3i ph\u1ee5 thu\u1ed9c v\u00e0o b\u00ean th\u1ee9 ba n\u00e0o h\u1ebft.</li> </ul> <p>Cassandra l\u00e0 database duy nh\u1ea5t \u0111\u00e1p \u1ee9ng t\u1ea5t c\u1ea3 c\u00e1c y\u00eau c\u1ea7u c\u1ee7a ch\u00fang t\u00f4i. Ch\u00fang t\u00f4i ch\u1ec9 c\u1ea7n th\u00eam node \u0111\u1ec3 m\u1edf r\u1ed9ng quy m\u00f4 v\u00e0 n\u00f3 c\u00f3 th\u1ec3 ch\u1ecbu \u0111\u01b0\u1ee3c vi\u1ec7c m\u1ea5t c\u00e1c node m\u00e0 kh\u00f4ng c\u00f3 t\u00e1c \u0111\u1ed9ng n\u00e0o v\u00e0o \u1ee9ng d\u1ee5ng. C\u00e1c c\u00f4ng ty l\u1edbn nh\u01b0 Netflix v\u00e0 Apple c\u00f3 h\u00e0ng ngh\u00ecn node Cassandra. D\u1eef li\u1ec7u li\u00ean quan \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef li\u00ean t\u1ee5c tr\u00ean \u0111\u0129a \u0111\u1ec3 c\u00f3 \u00edt l\u1ea7n disk seek nh\u1ea5t v\u00e0 ph\u00e2n ph\u1ed1i d\u1ec5 d\u00e0ng quanh cluster. N\u00f3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1edfi DataStax, nh\u01b0ng v\u1eabn l\u00e0 m\u00e3 ngu\u1ed3n m\u1edf v\u00e0 c\u00f3 c\u00f4ng \u0111\u1ed3ng gi\u00fap \u0111\u1ee1.</p> <p>Sau khi ch\u1ecdn, ch\u00fang t\u00f4i c\u1ea7n ph\u1ea3i ch\u1ee9ng minh r\u1eb1ng n\u00f3 th\u1ef1c s\u1ef1 hi\u1ec7u qu\u1ea3.</p>"},{"location":"misc/discord-blog/storing-billions-messages/#mo-hinh-du-lieu","title":"M\u00f4 h\u00ecnh d\u1eef li\u1ec7u","text":"<p>C\u00e1ch t\u1ed1t nh\u1ea5t \u0111\u1ec3 m\u00f4 t\u1ea3 Cassandra cho m\u1ed9t ng\u01b0\u1eddi kh\u00f4ng bi\u1ebft g\u00ec v\u1ec1 n\u00f3 ch\u00ednh l\u00e0, Cassandra l\u00e0 m\u1ed9t KKV store. Hai ch\u1eef K \u0111\u1ea7u ti\u00ean bi\u1ec3u th\u1ecb kho\u00e1 ch\u00ednh. Ch\u1eef K \u0111\u1ea7u ti\u00ean l\u00e0 kho\u00e1 ph\u00e2n v\u00f9ng (partition key) v\u00e0 \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh node n\u00e0o ch\u1ee9a d\u1eef li\u1ec7u v\u00e0 n\u01a1i t\u00ecm th\u1ea5y d\u1eef li\u1ec7u tr\u00ean \u0111\u0129a. Ph\u00e2n v\u00f9ng ch\u1ee9a nhi\u1ec1u row trong n\u00f3 v\u00e0 m\u1ed9t row trong m\u1ed9t ph\u1ea7n v\u00f9ng \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh b\u1eb1ng ch\u1eef K th\u1ee9 hai, l\u00e0 kho\u00e1 cluster (clustering key). Kho\u00e1 cluster \u0111\u00f3ng vai tr\u00f2 v\u1eeba l\u00e0 kho\u00e1 ch\u00ednh trong ph\u00e2n v\u00f9ng, v\u1eeba l\u00e0 c\u00e1c c\u00e1c row \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp. B\u1ea1n c\u00f3 th\u1ec3 t\u01b0\u1edfng t\u01b0\u1ee3ng m\u1ed9t ph\u00e2n v\u00f9ng nh\u01b0 l\u00e0 m\u1ed9t t\u1eeb \u0111i\u1ec3n c\u00f3 th\u1ee9 t\u1ef1. C\u00e1c thu\u1ed9c t\u00ednh n\u00e0y \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p cho ph\u00e9p t\u1ea1o ra m\u00f4 h\u00ecnh d\u1eef li\u1ec7u r\u1ea5t m\u1ea1nh m\u1ebd.</p> <p>L\u01b0u \u00fd r\u1eb1ng c\u00e1c tin nh\u1eafn d\u01b0\u1ee3c index trong MongoDB v\u1edbi <code>channel_id</code> v\u00e0 <code>created_at</code>. <code>channel_id</code> \u0111\u00e3 tr\u1edf th\u00e0nh kho\u00e1 ph\u00e2n v\u00f9ng v\u00ec t\u1ea5t c\u1ea3 c\u00e1c truy v\u1ea5n \u0111\u1ec1u ho\u1ea1t \u0111\u1ed9ng tr\u00ean m\u1ed9t channel, nh\u01b0ng <code>created_at</code> kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t kho\u00e1 cluster t\u1ed1t v\u00ec hai tin nh\u1eafn c\u00f3 th\u1ec3 c\u00f3 c\u00f9ng th\u1eddi gian \u0111\u01b0\u1ee3c t\u1ea1o ra. May thay, m\u1ecdi ID tr\u00ean Discord l\u00e0 Snowflake (c\u00f3 th\u1ec3 s\u1eafp x\u1ebfp theo th\u1ee9 t\u1ef1 th\u1eddi gian), v\u00ec v\u1eady ch\u00fang t\u00f4i c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng ch\u00fang \u0111\u1ec3 thay th\u1ebf. Kho\u00e1 ch\u00ednh tr\u1edf th\u00e0nh <code>(channel_id, message_id)</code>, trong \u0111\u00f3 <code>message_id</code> l\u00e0 Snowflake. \u0110i\u1ec1u n\u00e0y c\u00f3 ngh\u0129a l\u00e0 khi load m\u1ed9t channel, ta c\u00f3 th\u1ec3 cho Cassandra bi\u1ebft ch\u00ednh x\u00e1c ph\u1ea1m vi c\u1ea7n \u0111\u1ec3 qu\u00e9t c\u00e1c tin nh\u1eafn.</p> <p>\u0110\u00e2y l\u00e0 m\u1ed9t schema \u0111\u00e3 \u0111\u01b0\u1ee3c \u0111\u01a1n gi\u1ea3n ho\u00e1 cho b\u1ea3ng <code>messages</code> c\u1ee7a ch\u00fang t\u00f4i (b\u1ecf qua kho\u1ea3ng 10 c\u1ed9t):</p> <pre><code>CREATE TABLE messages (\n  channel_id bigint,\n  message_id bigint,\n  author_id bigint,\n  content text,\n  PRIMARY KEY (channel_id, message_id)\n) WITH CLUSTERING ORDER BY (message_id DESC);\n</code></pre> <p>M\u1eb7c d\u00f9 Cassandra c\u00f3 c\u00e1c schema tr\u00f4ng kh\u00f4ng kh\u00e1c m\u1ea5y so v\u1edbi c\u00e1c c\u01a1 s\u1eed d\u1eef li\u1ec7u quan h\u1ec7, ch\u00fang l\u1ea1i t\u1ed1n \u00edt chi ph\u00ed h\u01a1n \u0111\u1ec3 thay \u0111\u1ed5i v\u00e0 kh\u00f4ng c\u00f3 b\u1ea5t k\u1ef3 t\u00e1c \u0111\u1ed9ng hi\u1ec7u su\u1ea5t t\u1ea1m th\u1eddi n\u00e0o. Ch\u00fang t\u00f4i t\u1eadn d\u1ee5ng h\u1ebft blob store v\u00e0 relational store.</p> <p>Khi b\u1eaft \u0111\u1ea7u chuy\u1ec3n tin nh\u1eafn v\u00e0o Cassandra, ch\u00fang t\u00f4i ngay l\u1eadp t\u1ee9c th\u1ea5y c\u00e1c c\u1ea3nh b\u00e0o trong log r\u1eb1ng c\u00e1c ph\u00e2n v\u00f9ng b\u1eaft \u0111\u1ea7u v\u01b0\u1ee3t qu\u00e1 100MB. \u1ee6a alo? Cassandra qu\u1ea3ng c\u00e1o r\u1eb1ng n\u00f3 h\u1ed7 tr\u1ee3 ph\u00e2n v\u00f9ng \u0111\u1ebfn 2GB c\u01a1 m\u00e0? R\u00f5 r\u00e0ng, l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u \u0111\u00f3 kh\u00f4ng c\u00f3 ngh\u0129a l\u00e0 n\u00ean l\u00e0m. C\u00e1c ph\u00e2n v\u00f9ng l\u1edbn g\u00e2y r\u1ea5t nhi\u1ec1u \u00e1p l\u1ef1c garbage collection cho Cassandra trong qu\u00e1 tr\u00ecnh n\u00e9n, m\u1edf r\u1ed9ng cluster... C\u00f3 m\u1ed9t ph\u00e2n v\u00f9ng l\u1edbn c\u0169ng c\u00f3 ngh\u0129a l\u00e0 d\u1eef li\u1ec7u trong \u0111\u00f3 kh\u00f4ng th\u1ec3 \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i quanh cluster. R\u00f5 r\u00e0ng l\u00e0 ch\u00fang t\u00f4i ph\u1ea3i gi\u1edbi h\u1ea1n k\u00edch th\u01b0\u1edbc c\u1ee7a c\u00e1c ph\u00e2n v\u00f9ng b\u1eb1ng m\u1ed9t c\u00e1ch n\u00e0o \u0111\u00f3 v\u00ec m\u1ed9t channel Discord duy nh\u1ea5t c\u00f3 th\u1ec3 t\u1ed3n t\u1ea1i nhi\u1ec1u n\u0103m v\u00e0 kh\u00f4ng ng\u1eebng t\u0103ng k\u00edch th\u01b0\u1edbc.</p> <p>Ch\u00fang t\u00f4i quy\u1ebft \u0111\u1ecbnh s\u1eafp x\u1ebfp c\u00e1c tin nh\u1eafn c\u1ee7a m\u00ecnh theo th\u1eddi gian. Ch\u00fang t\u00f4i \u0111\u00e3 xem x\u00e9t c\u00e1c channel to nh\u1ea5t tr\u00ean Discord v\u00e0 x\u00e1c \u0111\u1ecbnh xem li\u1ec7u c\u00f3 l\u01b0u tr\u1eef tin nh\u1eafn trong kho\u1ea3ng 10 ng\u00e0y trong m\u1ed9t bucket m\u00e0 c\u00f3 th\u1ec3 tho\u1ea3i m\u00e1i duy tr\u00ec d\u01b0\u1edbi 100MB hay kh\u00f4ng. C\u00e1c bucket ph\u1ea3i l\u1ea5y \u0111\u01b0\u1ee3c t\u1eeb <code>message_id</code> ho\u1eb7c m\u1ed9t timestamp.</p> <pre><code>DISCORD_EPOCH = 1420070400000\nBUCKET_SIZE = 1000 * 60 * 60 * 24 * 10\n\n\ndef make_bucket(snowflake):\n    if snowflake is None:\n        timestamp = int(time.time() * 1000) - DISCORD_EPOCH\n    else:\n        # When a Snowflake is created it contains the number of\n        # seconds since the DISCORD_EPOCH.\n        timestamp = snowflake_id &gt;&gt; 22\n    return int(timestamp / BUCKET_SIZE)\n\n\ndef make_buckets(start_id, end_id=None):\n    return range(make_bucket(start_id), make_bucket(end_id) + 1)\n</code></pre> <p>C\u00e1c kho\u00e1 ph\u00e2n v\u00f9ng Cassandra c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c g\u1ed9p l\u1ea1i, v\u00ec v\u1eady kh\u00f3a ch\u00ednh m\u1edbi \u0111\u00e3 th\u00e0nh ra <code>((channel_id, bucket), message_id)</code>.</p> <pre><code>CREATE TABLE messages (\n   channel_id bigint,\n   bucket int,\n   message_id bigint,\n   author_id bigint,\n   content text,\n   PRIMARY KEY ((channel_id, bucket), message_id)\n) WITH CLUSTERING ORDER BY (message_id DESC);\n</code></pre> <p>\u0110\u1ec3 truy v\u1ea5n c\u00e1c tin nh\u1eafn g\u1ea7n \u0111\u00e2y, ch\u00fang t\u00f4i sinh m\u1ed9t ph\u1ea1m vi bucket t\u1eeb th\u1eddi gian hi\u1ec7n t\u1ea1i \u0111\u1ebfn <code>channel_id</code> (n\u00f3 c\u0169ng l\u00e0 Snowflake v\u00e0 ph\u1ea3i c\u0169 h\u01a1n tin nh\u1eafn \u0111\u1ea7u ti\u00ean). Sau \u0111\u00f3 ch\u00fang t\u00f4i truy v\u1ea5n tu\u1ea7n t\u1ef1 c\u00e1c ph\u00e2n v\u00f9ng \u0111\u1ebfn khi \u0111\u00e3 l\u1ea5y \u0111\u1ee7 c\u00e1c tin nh\u1eafn. Nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a ph\u01b0\u01a1ng ph\u00e1p n\u00e0y l\u00e0 c\u00e1c server Discord \u00edt ho\u1ea1t \u0111\u1ed9ng s\u1ebd ph\u1ea3i truy v\u1ea5n nhi\u1ec1u bucket \u0111\u1ec3 l\u1ea5y \u0111\u1ee7 tin nh\u1eafn theo th\u1eddi gian. Trong th\u1ef1c t\u1ebf, \u0111i\u1ec1u n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c ch\u1ee9ng minh l\u00e0 \u1ed5n v\u00ec v\u1edbi c\u00e1c server Discord ho\u1ea1t \u0111\u1ed9ng s\u00f4i n\u1ed5i th\u00ec c\u00e1c tin nh\u1eafn th\u01b0\u1eddng s\u1ebd n\u1eb1m trong ph\u00e2n v\u00f9ng \u0111\u1ea7u ti\u00ean v\u00e0 ch\u00fang chi\u1ebfm \u0111a s\u1ed1.</p> <p>Qu\u00e1 tr\u00ecnh import tin nh\u1eafn v\u00e0o Cassandra kh\u00f4ng g\u1eb7p tr\u1edf ng\u1ea1i n\u00e0o v\u00e0 ch\u00fang t\u00f4i \u0111\u00e3 s\u1eb5n s\u00e0ng th\u1eed trong m\u00f4i tr\u01b0\u1eddng live.</p>"},{"location":"misc/discord-blog/storing-billions-messages/#dark-launch","title":"Dark Launch","text":"<p>Vi\u1ec7c \u0111\u01b0a m\u1ed9t h\u1ec7 th\u1ed1ng m\u1edbi v\u00e0o m\u00f4i tr\u01b0\u1eddng live lu\u00f4n l\u00e0 \u0111i\u1ec1u \u0111\u00e1ng s\u1ee3, do v\u1eady b\u1ea1n n\u00ean test n\u00f3 m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn ng\u01b0\u1eddi d\u00f9ng. Ch\u00fang t\u00f4i ch\u1ec9nh code \u0111\u1ec3 \u0111\u1ecdc/ghi v\u00e0o c\u1ea3 MongoDB v\u00e0 Cassandra.</p> <p>Ngay sau khi kh\u1edfi ch\u1ea1y, ch\u00fang t\u00f4i b\u1eaft \u0111\u1ea7u g\u1eb7p l\u1ed7i <code>author_id</code> b\u1ecb <code>null</code>. <code>null</code> l\u00e0 <code>null</code> ki\u1ec3u g\u00ec? N\u00f3 l\u00e0 tr\u01b0\u1eddng b\u1eaft bu\u1ed9c m\u00e0 sao <code>null</code>?</p>"},{"location":"misc/discord-blog/storing-billions-messages/#eventual-consistency","title":"Eventual Consistency","text":"<p>Cassandra l\u00e0 m\u1ed9t AP database (theo \u0111\u1ecbnh l\u00fd CAP), ngh\u0129a l\u00e0 n\u00f3 \u0111\u00e1nh \u0111\u1ed5i strong consistency \u0111\u1ec3 c\u00f3 \u0111\u01b0\u1ee3c t\u00ednh kh\u1ea3 d\u1ee5ng, \u0111\u00e2y l\u00e0 \u0111i\u1ec1u ch\u00fang t\u00f4i mu\u1ed1n. N\u00f3 l\u00e0 m\u1ed9t ki\u1ec3u ch\u1ed1ng \u0111\u1ecdc tr\u01b0\u1edbc khi ghi (vi\u1ec7c \u0111\u1ecdc t\u1ed1n chi ph\u00ed h\u01a1n) trong Cassandra v\u00e0 v\u00ec v\u1eady m\u1ecdi th\u1ee9 m\u00e0 Cassandra l\u00e0m v\u1ec1 c\u01a1 b\u1ea3n l\u00e0 upsert (update khi c\u00f3 d\u1eef li\u1ec7u v\u00e0 insert khi kh\u00f4ng c\u00f3) ngay c\u1ea3 khi b\u1ea1n ch\u1ec9 cung c\u1ea5p m\u1ed9t s\u1ed1 c\u1ed9t nh\u1ea5t \u0111\u1ecbnh. B\u1ea1n c\u0169ng c\u00f3 th\u1ec3 ghi v\u00e0o b\u1ea5t k\u1ef3 node n\u00e0o v\u00e0 n\u00f3 s\u1ebd t\u1ef1 \u0111\u1ed9ng gi\u1ea3i quy\u1ebft conflict b\u1eb1ng c\u00e1ch cho l\u1ea7n ghi cu\u1ed1i c\u00f9ng v\u00e0o database tr\u00ean c\u01a1 s\u1edf m\u1ed7i c\u1ed9t. C\u00e1i n\u00e0y th\u00ec g\u00e2y n\u00ean v\u1ea5n \u0111\u1ec1 qu\u00e1i g\u00ec nh\u1ec9?</p> <p></p> <p>Trong tr\u01b0\u1eddng h\u1ee3p m\u1ed9t ng\u01b0\u1eddi d\u00f9ng ch\u1ec9nh s\u1eeda m\u1ed9t tin nh\u1eafn c\u00f9ng l\u00fac v\u1edbi m\u1ed9t ng\u01b0\u1eddi d\u00f9ng kh\u00e1c x\u00f3a c\u00e1i tin nh\u1eafn \u0111\u00f3, s\u1ebd x\u1ea3y ra v\u1ea5n \u0111\u1ec1 l\u00e0 c\u00e1i row \u0111\u00f3 b\u1ecb m\u1ea5t h\u1ebft th\u00f4ng tin tr\u1eeb kho\u00e1 ch\u1ec9nh v\u00e0 v\u0103n b\u1ea3n v\u00ec t\u1ea5t c\u1ea3 c\u00e1c l\u1ea7n ghi c\u1ee7a Cassandra \u0111\u1ec1u l\u00e0 upsert. C\u00f3 hai gi\u1ea3i ph\u00e1p kh\u1ea3 thi \u0111\u1ec3 x\u1eed l\u00fd v\u1ea5n \u0111\u1ec1 n\u00e0y:</p> <ol> <li>Vi\u1ebft l\u1ea1i to\u00e0n b\u1ed9 tin nh\u1eafn khi ch\u1ec9nh s\u1eeda. \u0110i\u1ec1u n\u00e0y c\u00f3 kh\u1ea3 n\u0103ng ph\u1ee5c h\u1ed3i c\u00e1c tin nh\u1eafn b\u1ecb xo\u00e1 nh\u01b0ng l\u1ea1i th\u00eam nhi\u1ec1u kh\u1ea3 n\u0103ng conflict v\u1edbi c\u00e1c l\u1ea7n ghi \u0111\u1ed3ng th\u1eddi v\u00e0o c\u00e1c c\u1ed9t kh\u00e1c.</li> <li>Ph\u00e1t hi\u1ec7n r\u1eb1ng message b\u1ecb h\u1ecfng v\u00e0 xo\u00e1 n\u00f3 ra kh\u1ecfi database.</li> </ol> <p>Ch\u00fang t\u00f4i ch\u1ecdn c\u00e1ch 2 b\u1eb1ng c\u00e1ch ch\u1ecdn m\u1ed9t c\u1ed9t b\u1eaft bu\u1ed9c (trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y l\u00e0 <code>author_id</code>) v\u00e0 xo\u00e1 tin nh\u1eafn n\u1ebfu n\u00f3 <code>null</code>.</p> <p>Trong khi gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y, ch\u00fang t\u00f4i nh\u1eadn th\u1ea5y r\u1eb1ng ch\u00fang t\u00f4i ghi d\u1eef li\u1ec7u r\u1ea5t k\u00e9m hi\u1ec7u qu\u1ea3. Cassandra l\u00e0 ki\u1ec3u eventual consistency n\u00ean n\u00f3 kh\u00f4ng th\u1ec3 x\u00f3a d\u1eef li\u1ec7u ngay l\u1eadp t\u1ee9c. N\u00f3 ph\u1ea3i sao ch\u00e9p c\u00e1c thao t\u00e1c x\u00f3a sang c\u00e1c node kh\u00e1c v\u00e0 th\u1ef1c hi\u1ec7n ngay c\u1ea3 khi c\u00e1c node kh\u00e1c t\u1ea1m th\u1eddi kh\u00f4ng kh\u1ea3 d\u1ee5ng. Cassandra th\u1ef1c hi\u1ec7n \u0111i\u1ec1u n\u00e0y b\u1eb1ng c\u00e1ch coi c\u00e1c l\u1ea7n x\u00f3a l\u00e0 m\u1ed9t d\u1ea1ng ghi d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 \"tombstone\". Khi \u0111\u1ecdc d\u1eef li\u1ec7u, n\u00f3 b\u1ecf qua c\u00e1c tombstone m\u00e0 n\u00f3 th\u1ea5y. Tombstore t\u1ed3n t\u1ea1i trong m\u1ed9t kho\u1ea3ng th\u1eddi gian c\u00f3 th\u1ec3 ch\u1ec9nh \u0111\u01b0\u1ee3c (m\u1eb7c \u0111\u1ecbnh l\u00e0 10 ng\u00e0y) v\u00e0 b\u1ecb x\u00f3a v\u0129nh vi\u1ec5n trong qu\u00e1 tr\u00ecnh n\u00e9n khi h\u1ebft th\u1eddi gian \u0111\u00f3.</p> <p>X\u00f3a m\u1ed9t c\u1ed9t v\u00e0 vi\u1ebft <code>null</code> v\u00e0o m\u1ed9t c\u1ed9t v\u1ec1 c\u01a1 b\u1ea3n l\u00e0 gi\u1ed1ng nhau. C\u1ea3 hai \u0111\u1ec1u t\u1ea1o ra m\u1ed9t tombstone. V\u00ec t\u1ea5t c\u1ea3 c\u00e1c l\u1ea7n ghi d\u1eef li\u1ec7u trong Cassandra \u0111\u1ec1u l\u00e0 upsert, n\u00ean b\u1ea1n s\u1ebd t\u1ea1o m\u1ed9t tombstone ngay c\u1ea3 khi ghi <code>null</code> l\u1ea7n \u0111\u1ea7u. Trong th\u1ef1c t\u1ebf, schema tin nh\u1eafn c\u1ee7a ch\u00fang t\u00f4i ch\u1ee9a 16 c\u1ed9t, nh\u01b0ng tin nh\u1eafn trung b\u00ecnh ch\u1ec9 c\u00f3 4 gi\u00e1 tr\u1ecb \u0111\u01b0\u1ee3c \u0111\u1eb7t. Ch\u00fang t\u00f4i \u0111\u00e3 ghi 12 tombstone cho Cassandra h\u1ea7u h\u1ebft th\u1eddi gian m\u00e0 kh\u00f4ng c\u00f3 l\u00fd do. Gi\u1ea3i ph\u00e1p cho v\u1ea5n \u0111\u1ec1 n\u00e0y r\u1ea5t \u0111\u01a1n gi\u1ea3n: ch\u1ec9 ghi c\u00e1c gi\u00e1 tr\u1ecb kh\u00e1c <code>null</code> cho Cassandra.</p>"},{"location":"misc/discord-blog/storing-billions-messages/#hieu-suat","title":"Hi\u1ec7u su\u1ea5t","text":"<p>Cassandra n\u1ed5i ti\u1ebfng l\u00e0 c\u00f3 t\u1ed1c \u0111\u1ed9 ghi nhanh h\u01a1n \u0111\u1ecdc v\u00e0 ch\u00fang t\u00f4i th\u1ea5y \u0111i\u1ec1u \u0111\u00f3 ch\u00ednh x\u00e1c trong th\u1ef1c t\u1ebf. Th\u1eddi gian ghi l\u00e0 d\u01b0\u1edbi 1ms v\u00e0 th\u1eddi gian \u0111\u1ecdc d\u01b0\u1edbi 5ms. \u0110i\u1ec1u n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c ki\u1ec3m nghi\u1ec7m b\u1ea5t k\u1ec3 d\u1eef li\u1ec7u n\u00e0o \u0111ang \u0111\u01b0\u1ee3c truy c\u1eadp v\u00e0 hi\u1ec7u su\u1ea5t v\u1eabn nh\u1ea5t qu\u00e1n trong su\u1ed1t m\u1ed9t tu\u1ea7n th\u1eed nghi\u1ec7m. Kh\u00f4ng c\u00f3 g\u00ec b\u1ea5t ng\u1edd c\u1ea3, ch\u00fang t\u00f4i nh\u1eadn \u0111\u01b0\u1ee3c th\u1ee9 m\u00e0 m\u00ecnh mong \u0111\u1ee3i.</p> <p></p> <p>\u0110\u1ec3 ph\u00f9 h\u1ee3p v\u1edbi hi\u1ec7u su\u1ea5t \u0111\u1ecdc nhanh, nh\u1ea5t qu\u00e1n, \u0111\u00e2y l\u00e0 v\u00ed d\u1ee5 v\u1ec1 vi\u1ec7c chuy\u1ec3n \u0111\u1ebfn m\u1ed9t tin nh\u1eafn t\u1eeb h\u01a1n m\u1ed9t n\u0103m tr\u01b0\u1edbc trong m\u1ed9t channel c\u00f3 h\u00e0ng tri\u1ec7u tin nh\u1eafn:</p> <p></p>"},{"location":"misc/discord-blog/storing-billions-messages/#su-bat-ngo-lon","title":"S\u1ef1 b\u1ea5t ng\u1edd l\u1edbn","text":"<p>M\u1ecdi th\u1ee9 di\u1ec5n ra su\u00f4n s\u1ebb, n\u00ean ch\u00fang t\u00f4i tri\u1ec3n khai n\u00f3 l\u00e0m database ch\u00ednh c\u1ee7a m\u00ecnh v\u00e0 lo\u1ea1i b\u1ecf d\u1ea7n MongoDB trong v\u00f2ng m\u1ed9t tu\u1ea7n. N\u00f3 ti\u1ebfp t\u1ee5c ho\u1ea1t \u0111\u1ed9ng t\u1ed1t trong kho\u1ea3ng 6 th\u00e1ng cho \u0111\u1ebfn m\u1ed9t ng\u00e0y m\u00e0 Cassandra kh\u00f4ng ph\u1ea3n h\u1ed3i.</p> <p>Ch\u00fang t\u00f4i nh\u1eadn ra Cassandra li\u00ean t\u1ee5c ch\u1ea1y GC \"stop-the-world\" trong 10 gi\u00e2y nh\u01b0ng kh\u00f4ng bi\u1ebft t\u1ea1i sao. Ch\u00fang t\u00f4i b\u1eaft \u0111\u1ea7u t\u00ecm hi\u1ec3u v\u00e0 t\u00ecm th\u1ea5y m\u1ed9t channel Discord t\u1ed1n 20 gi\u00e2y \u0111\u1ec3 t\u1ea3i. M\u00e1y ch\u1ee7 Discord c\u00f4ng khai c\u1ee7a Subreddit Puzzles &amp; Dragons l\u00e0 th\u1ee7 ph\u1ea1m. V\u00ec n\u00f3 c\u00f4ng khai n\u00ean ch\u00fang t\u00f4i \u0111\u00e3 tham gia \u0111\u1ec3 ki\u1ec3m tra. C\u00e1i channel n\u00e0y ch\u1ec9 c\u00f3 1 tin nh\u1eafn, qu\u00e1 s\u1ee9c t\u01b0\u1edfng t\u01b0\u1ee3ng. V\u00e0o th\u1eddi \u0111i\u1ec3m \u0111\u00f3, r\u00f5 r\u00e0ng l\u00e0 h\u1ecd \u0111\u00e3 x\u00f3a h\u00e0ng tri\u1ec7u tin nh\u1eafn b\u1eb1ng API c\u1ee7a ch\u00fang t\u00f4i, ch\u1ec9 \u0111\u1ec3 l\u1ea1i 1 tin nh\u1eafn trong channel.</p> <p>N\u1ebfu b\u1ea1n \u0111\u1ec3 \u00fd, Cassandra x\u1eed l\u00fd vi\u1ec7c x\u00f3a b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng tombstone (trong m\u1ee5c Eventual Consistency). Khi ng\u01b0\u1eddi d\u00f9ng t\u1ea3i channel n\u00e0y, d\u00f9 ch\u1ec9 c\u00f3 1 tin nh\u1eafn, Cassandra ph\u1ea3i qu\u00e9t hi\u1ec7u qu\u1ea3 h\u00e0ng tri\u1ec7u tombstone tin nh\u1eafn (t\u1ea1o r\u00e1c nhanh h\u01a1n s\u1ee9c d\u1ecdn c\u1ee7a JVM).</p> <p>Ch\u00fang t\u00f4i \u0111\u00e3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y nh\u01b0 sau:</p> <ul> <li>Ch\u00fang t\u00f4i \u0111\u00e3 gi\u1ea3m th\u1eddi gian t\u1ed3n t\u1ea1i c\u1ee7a c\u00e1c tombstone t\u1eeb 10 ng\u00e0y xu\u1ed1ng c\u00f2n 2 ng\u00e0y v\u00ec ch\u00fang t\u00f4i ch\u1ea1y tr\u00ecnh s\u1eeda ch\u1eefa Cassandra (m\u1ed9t quy tr\u00ecnh anti-entropy) m\u1ed7i \u0111\u00eam tr\u00ean cluster tin nh\u1eafn.</li> <li>Ch\u00fang t\u00f4i \u0111\u00e3 thay \u0111\u1ed5i code truy v\u1ea5n \u0111\u1ec3 theo d\u00f5i c\u00e1c bucket tr\u1ed1ng v\u00e0 tr\u00e1nh ch\u00fang trong t\u01b0\u01a1ng lai cho m\u1ed9t channel. \u0110i\u1ec1u n\u00e0y c\u00f3 ngh\u0129a l\u00e0 n\u1ebfu ng\u01b0\u1eddi d\u00f9ng th\u1ef1c hi\u1ec7n l\u1ea1i truy v\u1ea5n n\u00e0y th\u00ec t\u1ec7 nh\u1ea5t l\u00e0 Cassandra s\u1ebd ch\u1ec9 qu\u00e9t trong bucket g\u1ea7n \u0111\u00e2y nh\u1ea5t.</li> </ul>"},{"location":"misc/discord-blog/storing-billions-messages/#tuong-lai","title":"T\u01b0\u01a1ng lai","text":"<p>Ch\u00fang t\u00f4i hi\u1ec7n \u0111ang ch\u1ea1y m\u1ed9t cluster g\u1ed3m 12 node v\u1edbi h\u1ec7 s\u1ed1 replica l\u00e0 3 v\u00e0 s\u1ebd ti\u1ebfp t\u1ee5c th\u00eam c\u00e1c node Cassandra m\u1edbi n\u1ebfu c\u1ea7n. Ch\u00fang t\u00f4i tin r\u1eb1ng gi\u1ea3i ph\u00e1p n\u00e0y s\u1ebd ti\u1ebfp t\u1ee5c ho\u1ea1t \u0111\u1ed9ng trong m\u1ed9t th\u1eddi gian d\u00e0i. Tuy nhi\u00ean, Discord ph\u1ea3i ti\u1ebfp t\u1ee5c ph\u00e1t tri\u1ec3n, s\u1ebd c\u00f3 m\u1ed9t t\u01b0\u01a1ng lai xa n\u01a1i ch\u00fang t\u00f4i s\u1ebd l\u01b0u tr\u1eef h\u00e0ng t\u1ef7 tin nh\u1eafn m\u1ed7i ng\u00e0y. Netflix v\u00e0 Apple ch\u1ea1y c\u00e1c cluster g\u1ed3m h\u00e0ng tr\u0103m node n\u00ean ch\u00fang t\u00f4i hi\u1ec3u r\u1eb1ng m\u00ecnh c\u00f3 th\u1ec3 t\u1ea1m d\u1eebng suy ngh\u0129 qu\u00e1 nhi\u1ec1u v\u1ec1 v\u1ee5 l\u01b0u tin nh\u1eafn n\u00e0y m\u1ed9t th\u1eddi gian. C\u00f3 \u0111i\u1ec1u, t\u01b0\u01a1ng lai nh\u01b0 v\u1eady r\u1ed3i s\u1ebd \u0111\u1ebfn v\u00e0 ch\u00fang t\u00f4i c\u1ea7n chu\u1ea9n b\u1ecb m\u1ed9t s\u1ed1 th\u1ee9.</p>"},{"location":"misc/discord-blog/storing-billions-messages/#ngan-han","title":"Ng\u1eafn h\u1ea1n","text":"<ul> <li>N\u00e2ng c\u1ea5p cluster tin nh\u1eafn t\u1eeb Cassandra 2 l\u00ean Cassandra 3. Cassandra 3 c\u00f3 \u0111\u1ecbnh d\u1ea1ng l\u01b0u tr\u1eef m\u1edbi c\u00f3 th\u1ec3 gi\u1ea3m h\u01a1n 50% k\u00edch th\u01b0\u1edbc l\u01b0u tr\u1eef.</li> <li>C\u00e1c phi\u00ean b\u1ea3n m\u1edbi h\u01a1n c\u1ee7a Cassandra ho\u1ea1t \u0111\u1ed9ng t\u1ed1t h\u01a1n trong vi\u1ec7c x\u1eed l\u00fd nhi\u1ec1u d\u1eef li\u1ec7u h\u01a1n tr\u00ean m\u1ed9t node. Ch\u00fang t\u00f4i hi\u1ec7n l\u01b0u tr\u1eef g\u1ea7n 1TB d\u1eef li\u1ec7u n\u00e9n tr\u00ean m\u1ed7i node. Ch\u00fang t\u00f4i tin r\u1eb1ng ch\u00fang t\u00f4i c\u00f3 th\u1ec3 gi\u1ea3m s\u1ed1 l\u01b0\u1ee3ng node trong cluster m\u1ed9t c\u00e1ch an to\u00e0n b\u1eb1ng c\u00e1ch t\u0103ng m\u1ee9c n\u00e0y l\u00ean 2TB.</li> </ul>"},{"location":"misc/discord-blog/storing-billions-messages/#dai-han","title":"D\u00e0i h\u1ea1n","text":"<ul> <li>Kh\u00e1m ph\u00e1 ScyllaDB, database t\u01b0\u01a1ng th\u00edch v\u1edbi Cassandra \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng C++. B\u00ecnh th\u01b0\u1eddng th\u00ec c\u00e1c node Cassandra c\u1ee7a ch\u00fang t\u00f4i th\u1ef1c s\u1ef1 kh\u00f4ng s\u1eed d\u1ee5ng qu\u00e1 nhi\u1ec1u CPU, tuy nhi\u00ean, v\u00e0o nh\u1eefng gi\u1edd kh\u00f4ng cao \u0111i\u1ec3m khi ch\u00fang t\u00f4i ch\u1ea1y tr\u00ecnh s\u1eeda ch\u1eefa (m\u1ed9t quy tr\u00ecnh anti-entropy), ch\u00fang tr\u1edf n\u00ean kh\u00e1 r\u00e0ng bu\u1ed9c v\u1edbi CPU v\u00e0 th\u1eddi l\u01b0\u1ee3ng t\u0103ng l\u00ean c\u00f9ng v\u1edbi l\u01b0\u1ee3ng d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c ghi k\u1ec3 t\u1eeb l\u1ea7n s\u1eeda ch\u1eefa cu\u1ed1i c\u00f9ng. ScyllaDB qu\u1ea3ng c\u00e1o r\u1eb1ng th\u1eddi gian s\u1eeda ch\u1eefa s\u1ebd th\u1ea5p h\u01a1n \u0111\u00e1ng k\u1ec3.</li> <li>X\u00e2y d\u1ef1ng h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef c\u00e1c channel kh\u00f4ng s\u1eed d\u1ee5ng th\u00e0nh file ph\u1eb3ng tr\u00ean Google Cloud Storage v\u00e0 t\u1ea3i l\u1ea1i ch\u00fang theo y\u00eau c\u1ea7u. Ch\u00fang t\u00f4i mu\u1ed1n tr\u00e1nh l\u00e0m \u0111i\u1ec1u n\u00e0y v\u00e0 c\u0169ng kh\u00f4ng ngh\u0129 r\u1eb1ng s\u1ebd ph\u1ea3i l\u00e0m.</li> </ul>"},{"location":"misc/discord-blog/storing-billions-messages/#ket-luan","title":"K\u1ebft lu\u1eadn","text":"<p>\u0110\u00e3 h\u01a1n m\u1ed9t n\u0103m k\u1ec3 t\u1eeb khi ch\u00fang t\u00f4i th\u1ef1c hi\u1ec7n di chuy\u1ec3n d\u1eef li\u1ec7u v\u00e0 m\u1eb7c d\u00f9 l\u00e0 g\u1eb7p \"b\u1ea5t ng\u1edd l\u1edbn\", qu\u00e1 tr\u00ecnh n\u00e0y v\u1eabn di\u1ec5n ra su\u00f4n s\u1ebb. Ch\u00fang t\u00f4i \u0111\u00e3 t\u0103ng \u0111\u01b0\u1ee3c s\u1ed1 tin nh\u1eafn t\u1eeb t\u1ed5ng s\u1ed1 h\u01a1n 100 tri\u1ec7u tin nh\u1eafn l\u00ean h\u01a1n 120 tri\u1ec7u tin nh\u1eafn m\u1ed7i ng\u00e0y, v\u1edbi hi\u1ec7u su\u1ea5t v\u00e0 \u0111\u1ed9 \u1ed5n \u0111\u1ecbnh lu\u00f4n nh\u1ea5t qu\u00e1n.</p> <p>Nh\u1edd s\u1ef1 th\u00e0nh c\u00f4ng c\u1ee7a d\u1ef1 \u00e1n n\u00e0y, ch\u00fang t\u00f4i \u0111\u00e3 chuy\u1ec3n ph\u1ea7n c\u00f2n l\u1ea1i c\u1ee7a d\u1eef li\u1ec7u tr\u00ean live tr\u1ef1c ti\u1ebfp sang Cassandra v\u00e0 c\u0169ng th\u00e0nh c\u00f4ng.</p>"},{"location":"misc/discord-blog/storing-trillions-messages/","title":"Discord l\u01b0u h\u00e0ng ngh\u00ecn t\u1ec9 tin nh\u1eafn nh\u01b0 th\u1ebf n\u00e0o?","text":""},{"location":"misc/discord-blog/storing-trillions-messages/#nguon","title":"Ngu\u1ed3n","text":"<p> How Discord stores trillions of messages - Bo Ingram</p>"},{"location":"misc/discord-blog/storing-trillions-messages/#loi-tua","title":"L\u1eddi t\u1ef1a","text":"<p>V\u00e0o n\u0103m 2017, ch\u00fang t\u00f4i \u0111\u00e3 vi\u1ebft m\u1ed9t b\u00e0i v\u1ec1 c\u00e1ch l\u01b0u tr\u1eef h\u00e0ng t\u1ec9 tin nh\u1eafn tr\u00ean Discord. Ch\u00fang t\u00f4i \u0111\u00e3 chia s\u1ebb h\u00e0nh tr\u00ecnh c\u1ee7a m\u00ecnh v\u1ec1 c\u00e1ch b\u1eaft \u0111\u1ea7u s\u1eed d\u1ee5ng MongoDB r\u1ed3i di chuy\u1ec3n d\u1eef li\u1ec7u c\u1ee7a m\u00ecnh sang Cassandra v\u00ec l\u00fac \u0111\u00f3 ch\u00fang t\u00f4i t\u00ecm ki\u1ebfm m\u1ed9t database c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng, ch\u1ecbu l\u1ed7i v\u00e0 chi ph\u00ed b\u1ea3o tr\u00ec t\u01b0\u01a1ng \u0111\u1ed1i th\u1ea5p. Ch\u00fang t\u00f4i bi\u1ebft m\u00ecnh s\u1ebd ph\u00e1t tri\u1ec3n v\u00e0 ch\u00fang t\u00f4i \u0111\u00e3 l\u00e0m \u0111\u01b0\u1ee3c!</p> <p>Ch\u00fang t\u00f4i mu\u1ed1n c\u00f3 m\u1ed9t lo\u1ea1i database ph\u00e1t tri\u1ec3n c\u00f9ng, nh\u01b0ng c\u0169ng hy v\u1ecdng r\u1eb1ng nhu c\u1ea7u b\u1ea3o tr\u00ec c\u1ee7a n\u00f3 s\u1ebd kh\u00f4ng ph\u00e1t tri\u1ec3n c\u00f9ng v\u1edbi nhu c\u1ea7u l\u01b0u tr\u1eef c\u1ee7a ch\u00fang t\u00f4i. Th\u1eadt kh\u00f4ng may, \u0111\u1eddi kh\u00f4ng nh\u01b0 l\u00e0 m\u01a1 \u2014 cluster Cassandra c\u1ee7a ch\u00fang t\u00f4i c\u00f3 c\u00e1c v\u1ea5n \u0111\u1ec1 nghi\u00eam tr\u1ecdng v\u1ec1 hi\u1ec7u su\u1ea5t \u0111\u00f2i h\u1ecfi ph\u1ea3i t\u0103ng c\u01b0\u1eddng n\u1ed7 l\u1ef1c \u0111\u1ec3 b\u1ea3o tr\u00ec ch\u1ee9 kh\u00f4ng ph\u1ea3i c\u1ea3i thi\u1ec7n.</p> <p>G\u1ea7n s\u00e1u n\u0103m sau, ch\u00fang t\u00f4i \u0111\u00e3 thay \u0111\u1ed5i r\u1ea5t nhi\u1ec1u v\u00e0 c\u00e1ch l\u01b0u tr\u1eef tin nh\u1eafn c\u0169ng v\u1eady.</p>"},{"location":"misc/discord-blog/storing-trillions-messages/#van-e-voi-cassandra","title":"V\u1ea5n \u0111\u1ec1 v\u1edbi Cassandra","text":"<p>Ch\u00fang t\u00f4i l\u01b0u tin nh\u1eafn trong database c\u00f3 t\u00ean l\u00e0 <code>cassandra-messages</code>. \u0110\u00fang nh\u01b0 t\u00ean g\u1ecdi c\u1ee7a n\u00f3, n\u00f3 ch\u1ea1y b\u1eb1ng Cassandra v\u00e0 l\u01b0u tr\u1eef c\u00e1c tin nh\u1eafn. V\u00e0o n\u0103m 2017, ch\u00fang t\u00f4i \u0111\u00e3 ch\u1ea1y 12 node Cassandra, l\u01b0u tr\u1eef h\u00e0ng t\u1ef7 tin nh\u1eafn.</p> <p>V\u00e0o \u0111\u1ea7u n\u0103m 2022, n\u00f3 ph\u00ecnh ra th\u00e0nh 177 node v\u1edbi h\u00e0ng ngh\u00ecn t\u1ef7 tin nh\u1eafn. \u0110\u00f3 l\u00e0 m\u1ed9t h\u1ec7 th\u1ed1ng c\u1ef1c k\u1ef3 ph\u1ee9c t\u1ea1p \u2014 team on-call c\u1ee7a ch\u00fang t\u00f4i th\u01b0\u1eddng xuy\u00ean \u0111\u01b0\u1ee3c ph\u00e2n ra \u0111\u1ec3 gi\u1ea3i quy\u1ebft c\u00e1c s\u1ef1 c\u1ed1 v\u1edbi database, \u0111\u1ed9 tr\u1ec5 kh\u00f4ng ki\u1ec3m so\u00e1t v\u00e0 ch\u00fang t\u00f4i ph\u1ea3i c\u1eaft gi\u1ea3m c\u00e1c ho\u1ea1t \u0111\u1ed9ng b\u1ea3o tr\u00ec v\u1ed1n tr\u1edf n\u00ean qu\u00e1 t\u1ed1n k\u00e9m \u0111\u1ec3 v\u1eadn h\u00e0nh.</p> <p>\u0110i\u1ec1u g\u00ec \u0111\u00e3 g\u00e2y ra nh\u1eefng v\u1ea5n \u0111\u1ec1 n\u00e0y? \u0110\u1ea7u ti\u00ean, c\u00f9ng xem c\u1ea5u tr\u00fac c\u1ee7a b\u1ea3ng nh\u00e9.</p> <pre><code>CREATE TABLE messages (\n   channel_id bigint,\n   bucket int,\n   message_id bigint,\n   author_id bigint,\n   content text,\n   PRIMARY KEY ((channel_id, bucket), message_id)\n) WITH CLUSTERING ORDER BY (message_id DESC);\n</code></pre> <p>\u1ede tr\u00ean l\u00e0 b\u1ea3n thu g\u1ecdn c\u1ee7a b\u1ea3ng trong th\u1ef1c t\u1ebf. M\u1ed7i ID \u1edf \u0111\u00e2y l\u00e0 m\u1ed9t Snowflake, n\u00ean n\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp theo tr\u00ecnh t\u1ef1 th\u1eddi gian. Ch\u00fang t\u00f4i ph\u00e2n v\u00f9ng c\u00e1c tin nh\u1eafn c\u1ee7a m\u00ecnh theo channel m\u00e0 ch\u00fang \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn, c\u00f9ng v\u1edbi m\u1ed9t bucket, l\u00e0 ph\u1ea1m vi th\u1eddi gian t\u0129nh. Vi\u1ec7c ph\u00e2n v\u00f9ng n\u00e0y c\u00f3 ngh\u0129a l\u00e0, trong Cassandra, t\u1ea5t c\u1ea3 c\u00e1c th\u00f4ng b\u00e1o cho m\u1ed9t channel v\u00e0 bucket nh\u1ea5t \u0111\u1ecbnh s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u c\u00f9ng nhau v\u00e0 sao ch\u00e9p tr\u00ean 3 node (ho\u1eb7c nhi\u1ec1u h\u01a1n tu\u1ef3 theo h\u1ec7 s\u1ed1 replica).</p> <p>Trong ph\u00e2n v\u00f9ng n\u00e0y c\u00f3 m\u1ed9t l\u1ed7 h\u1ed5ng hi\u1ec7u su\u1ea5t: m\u1ed9t server Discord nh\u1ecf c\u00f3 xu h\u01b0\u1edbng g\u1eedi \u00edt tin nh\u1eafn (v\u00e0 m\u1eadt \u0111\u1ed9 c\u0169ng \u00edt) h\u01a1n so v\u1edbi m\u1ed9t server c\u00f3 h\u00e0ng tr\u0103m ngh\u00ecn ng\u01b0\u1eddi.</p> <p>Trong Cassandra, vi\u1ec7c \u0111\u1ecdc t\u1ed1n chi ph\u00ed h\u01a1n vi\u1ec7c ghi. C\u00e1c l\u1ea7n ghi \u0111\u01b0\u1ee3c th\u00eam v\u00e0o commit log v\u00e0 \u0111\u01b0\u1ee3c ghi v\u00e0o c\u1ea5u tr\u00fac trong b\u1ed9 nh\u1edb \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 memtable sau \u0111\u00f3 \u0111\u01b0\u1ee3c chuy\u1ec3n v\u00e0o \u0111\u0129a. Tuy nhi\u00ean, c\u00e1c l\u1ea7n \u0111\u1ecdc c\u1ea7n truy v\u1ea5n memtable v\u00e0 c\u00f3 kh\u1ea3 n\u0103ng l\u00e0 nhi\u1ec1u SSTable (file tr\u00ean \u0111\u0129a), \u0111\u00e2y l\u00e0 m\u1ed9t thao t\u00e1c t\u1ed1n k\u00e9m h\u01a1n. R\u1ea5t nhi\u1ec1u l\u1ea7n \u0111\u1ecdc c\u00f9ng l\u00fac khi ng\u01b0\u1eddi d\u00f9ng t\u01b0\u01a1ng t\u00e1c v\u1edbi m\u00e1y ch\u1ee7 c\u00f3 th\u1ec3 t\u1ea1o \u0111i\u1ec3m n\u00f3ng cho m\u1ed9t ph\u00e2n v\u00f9ng m\u00e0 ch\u00fang t\u00f4i nhanh l\u00e0 \"ph\u00e2n v\u00f9ng n\u00f3ng\" (hot partition). K\u00edch th\u01b0\u1edbc dataset c\u1ee7a ch\u00fang t\u00f4i khi \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p v\u1edbi c\u00e1c pattern truy c\u1eadp n\u00e0y \u0111\u00e3 d\u1eabn \u0111\u1ebfn kh\u00f3 kh\u0103n cho cluster.</p> <p>Khi ch\u00fang t\u00f4i g\u1eb7p m\u1ed9t ph\u00e2n v\u00f9ng n\u00f3ng, n\u00f3 th\u01b0\u1eddng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn \u0111\u1ed9 tr\u1ec5 tr\u00ean to\u00e0n b\u1ed9 cluster database. M\u1ed9t c\u1eb7p channel v\u00e0 bucket \u0111\u00e3 nh\u1eadn \u0111\u01b0\u1ee3c m\u1ed9t l\u01b0\u1ee3ng l\u1edbn l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp v\u00e0 \u0111\u1ed9 tr\u1ec5 trong node s\u1ebd t\u0103ng l\u00ean khi node \u0111\u00f3 c\u1ed1 g\u1eafng ph\u1ee5c v\u1ee5 l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp v\u00e0 ng\u00e0y c\u00e0ng t\u1ee5t l\u1ea1i ph\u00eda sau.</p> <p>C\u00e1c truy v\u1ea5n kh\u00e1c \u0111\u1ebfn node n\u00e0y \u0111\u00e3 b\u1ecb \u1ea3nh h\u01b0\u1edfng do node kh\u00f4ng th\u1ec3 theo k\u1ecbp. V\u00ec ch\u00fang t\u00f4i th\u1ef1c hi\u1ec7n \u0111\u1ecdc v\u00e0 ghi v\u1edbi m\u1ee9c quorum consistency c\u1ea7n thi\u1ebft, n\u00ean t\u1ea5t c\u1ea3 c\u00e1c truy v\u1ea5n t\u1edbi c\u00e1c node ph\u1ee5c v\u1ee5 ph\u00e2n v\u00f9ng n\u00f3ng \u0111\u1ec1u b\u1ecb t\u0103ng \u0111\u1ed9 tr\u1ec5, d\u1eabn \u0111\u1ebfn t\u00e1c \u0111\u1ed9ng l\u1edbn h\u01a1n \u0111\u1ebfn ng\u01b0\u1eddi d\u00f9ng.</p> <p>Vi\u1ec7c b\u1ea3o tr\u00ec cluster c\u0169ng th\u01b0\u1eddng xuy\u00ean g\u00e2y ra s\u1ef1 c\u1ed1. Ch\u00fang t\u00f4i d\u1ec5 b\u1ecb t\u1ee5t l\u1ea1i ph\u00eda sau khi n\u00e9n, trong \u0111\u00f3 Cassandra s\u1ebd n\u00e9n SSTable tr\u00ean \u0111\u0129a \u0111\u1ec3 \u0111\u1ecdc hi\u1ec7u qu\u1ea3 h\u01a1n. Khi \u0111\u00f3, c\u00e1c l\u1ea7n \u0111\u1ecdc c\u1ee7a ch\u00fang t\u00f4i kh\u00f4ng ch\u1ec9 t\u1ed1n k\u00e9m h\u01a1n m\u00e0 ch\u00fang t\u00f4i c\u00f2n th\u1ea5y \u0111\u1ed9 tr\u1ec5 cascading t\u0103ng khi m\u1ed9t node c\u1ed1 g\u1eafng \u0111\u1ec3 n\u00e9n.</p> <p>Ch\u00fang t\u00f4i th\u01b0\u1eddng xuy\u00ean th\u1ef1c hi\u1ec7n m\u1ed9t thao t\u00e1c m\u00e0 ch\u00fang t\u00f4i g\u1ecdi l\u00e0 \"gossip dance\", trong \u0111\u00f3 ch\u00fang t\u00f4i s\u1ebd l\u1ea5y m\u1ed9t node ra kh\u1ecfi v\u00f2ng quay \u0111\u1ec3 n\u00e9n n\u00f3 m\u00e0 kh\u00f4ng chi\u1ebfm l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp, sau \u0111\u00f3 \u0111\u01b0a n\u00f3 tr\u1edf l\u1ea1i \u0111\u1ec3 nh\u1eadn c\u00e1c g\u1ee3i \u00fd t\u1eeb b\u00e0n giao g\u1ee3i \u00fd c\u1ee7a Cassandra, sau \u0111\u00f3 l\u1eb7p l\u1ea1i cho \u0111\u1ebfn khi h\u1ebft t\u1ed3n \u0111\u1ecdng n\u00e9n. Ch\u00fang t\u00f4i c\u0169ng \u0111\u00e3 d\u00e0nh m\u1ed9t l\u01b0\u1ee3ng l\u1edbn th\u1eddi gian \u0111\u1ec3 \u0111i\u1ec1u ch\u1ec9nh garbage collector c\u1ee7a JVM v\u00e0 c\u00e1c c\u00e0i \u0111\u1eb7t heap, b\u1edfi v\u00ec vi\u1ec7c t\u1ea1m d\u1eebng GC s\u1ebd t\u0103ng \u0111\u1ed9 tr\u1ec5 l\u00ean \u0111\u00e1ng k\u1ec3.</p>"},{"location":"misc/discord-blog/storing-trillions-messages/#su-thay-oi-ve-kien-truc","title":"S\u1ef1 thay \u0111\u1ed5i v\u1ec1 ki\u1ebfn tr\u00fac","text":"<p>Cluster tin nh\u1eafn c\u1ee7a ch\u00fang t\u00f4i kh\u00f4ng ph\u1ea3i l\u00e0 database Cassandra duy nh\u1ea5t. Ch\u00fang t\u00f4i c\u00f3 m\u1ed9t s\u1ed1 cluster kh\u00e1c v\u00e0 m\u1ed7i cluster \u0111\u1ec1u c\u00f3 l\u1ed7i nh\u01b0 v\u1eady (m\u1eb7c d\u00f9 c\u00f3 l\u1ebd kh\u00f4ng nghi\u00eam tr\u1ecdng b\u1eb1ng).</p> <p>Trong b\u00e0i L\u00e0m sao \u0111\u1ec3 l\u01b0u h\u00e0ng t\u1ec9 tin nh\u1eafn, ch\u00fang t\u00f4i \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u0111\u1ebfn vi\u1ec7c quan t\u00e2m b\u1edfi ScyllaDB, m\u1ed9t database t\u01b0\u01a1ng th\u00edch v\u1edbi Cassandra \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng C++. Hi\u1ec7u su\u1ea5t t\u1ed1t h\u01a1n, s\u1eeda ch\u1eefa nhanh h\u01a1n, c\u00e1ch ly kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c m\u1ea1nh m\u1ebd h\u01a1n th\u00f4ng qua ki\u1ebfn tr\u00fac ph\u00e2n \u0111o\u1ea1n tr\u00ean m\u1ed7i core v\u00e0 kh\u00f4ng c\u00f3 garbage collection nghe c\u00f3 v\u1ebb kh\u00e1 h\u1ea5p d\u1eabn.</p> <p>M\u1eb7c d\u00f9 ScyllaDB kh\u00f4ng ph\u1ea3i l\u00e0 kh\u00f4ng c\u00f3 v\u1ea5n \u0111\u1ec1 g\u00ec, nh\u01b0ng quan tr\u1ecdng l\u00e0 n\u00f3 kh\u00f4ng c\u00f3 garbage collector, v\u00ec n\u00f3 \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng C++ ch\u1ee9 kh\u00f4ng ph\u1ea3i Java. Tr\u01b0\u1edbc \u0111\u00e2y, team \u0111\u00e3 g\u1eb7p nhi\u1ec1u s\u1ef1 c\u1ed1 v\u1edbi garbage collector tr\u00ean Cassandra, t\u1eeb vi\u1ec7c t\u1ea1m d\u1eebng GC \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn \u0111\u1ed9 tr\u1ec5, cho \u0111\u1ebfn c\u00e1c l\u1ea7n t\u1ea1m d\u1eebng GC si\u00eau d\u00e0i li\u00ean ti\u1ebfp nhau khi\u1ebfn ng\u01b0\u1eddi v\u1eadn h\u00e0nh ph\u1ea3i kh\u1edfi \u0111\u1ed9ng l\u1ea1i theo c\u00e1ch th\u1ee7 c\u00f4ng v\u00e0 \u0111\u1ec3 \u00fd node \u0111\u00f3 xem n\u00f3 c\u00f3 \u1ed5n tr\u1edf l\u1ea1i kh\u00f4ng. Nh\u1eefng v\u1ea5n \u0111\u1ec1 n\u00e0y l\u00e0 nguy\u00ean nh\u00e2n g\u00e2y ra r\u1ea5t nhi\u1ec1u kh\u00f3 kh\u0103n khi on-call v\u00e0 l\u00e0 g\u1ed1c r\u1ec5 c\u1ee7a nhi\u1ec1u v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u1ed9 \u1ed5n \u0111\u1ecbnh trong cluster tin nh\u1eafn.</p> <p>Sau khi th\u1eed nghi\u1ec7m v\u1edbi ScyllaDB v\u00e0 quan s\u00e1t c\u00e1c c\u1ea3i ti\u1ebfn trong qu\u00e1 tr\u00ecnh th\u1eed nghi\u1ec7m, ch\u00fang t\u00f4i \u0111\u00e3 \u0111\u01b0a ra quy\u1ebft \u0111\u1ecbnh di chuy\u1ec3n t\u1ea5t c\u1ea3 c\u00e1c database c\u1ee7a m\u00ecnh. M\u1eb7c d\u00f9 ch\u00ednh quy\u1ebft \u0111\u1ecbnh n\u00e0y c\u0169ng c\u00f3 th\u1ec3 c\u00f3 m\u1ed9t b\u00e0i vi\u1ebft ri\u00eang, nh\u01b0ng t\u00f3m t\u1eaft l\u00e0 v\u00e0o n\u0103m 2020, ch\u00fang t\u00f4i \u0111\u00e3 di chuy\u1ec3n m\u1ecdi database tr\u1eeb m\u1ed9t c\u00e1i sang ScyllaDB, ch\u00ednh l\u00e0 con qu\u00e1i v\u1eadt <code>cassandra-messages</code>.</p> <p>Sao v\u1eabn ch\u01b0a chuy\u1ec3n n\u00f3? \u0110\u1ea7u ti\u00ean, n\u00f3 l\u00e0 m\u1ed9t c\u00e1i cluster si\u00eau to kh\u1ed5ng l\u1ed3. V\u1edbi h\u00e0ng ngh\u00ecn t\u1ef7 tin nh\u1eafn v\u00e0 g\u1ea7n 200 node, chuy\u1ec3n th\u1ee9 n\u00e0y sang ScyllaDB t\u1ed1n r\u1ea5t nhi\u1ec1u c\u00f4ng s\u1ee9c. Ngo\u00e0i ra, ch\u00fang t\u00f4i mu\u1ed1n \u0111\u1ea3m b\u1ea3o r\u1eb1ng database m\u1edbi c\u00f3 th\u1ec3 ho\u1ea1t \u0111\u1ed9ng t\u1ed1t nh\u1ea5t c\u00f3 th\u1ec3 khi ch\u00fang t\u00f4i \u0111i\u1ec1u ch\u1ec9nh hi\u1ec7u su\u1ea5t c\u1ee7a n\u00f3 cho ph\u00f9 h\u1ee3p. Ch\u00fang t\u00f4i c\u0169ng mu\u1ed1n c\u00f3 th\u00eam kinh nghi\u1ec7m v\u1edbi ScyllaDB tr\u00ean m\u00f4i tr\u01b0\u1eddng live v\u00e0 t\u00ecm hi\u1ec3u nh\u1eefng v\u1ea5n \u0111\u1ec1 c\u1ee7a n\u00f3.</p> <p>Ch\u00fang t\u00f4i c\u0169ng \u0111\u00e3 l\u00e0m vi\u1ec7c \u0111\u1ec3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t ScyllaDB cho c\u00e1c use case c\u1ee7a m\u00ecnh. Trong qu\u00e1 tr\u00ecnh th\u1eed nghi\u1ec7m, ch\u00fang t\u00f4i ph\u00e1t hi\u1ec7n ra r\u1eb1ng hi\u1ec7u su\u1ea5t c\u1ee7a c\u00e1c truy v\u1ea5n \u0111\u1ea3o ng\u01b0\u1ee3c (reverse query) kh\u00f4ng \u0111\u1ee7 cho nhu c\u1ea7u. Ch\u00fang t\u00f4i th\u1ef1c hi\u1ec7n m\u1ed9t truy v\u1ea5n \u0111\u1ea3o ng\u01b0\u1ee3c khi ch\u00fang t\u00f4i th\u1eed qu\u00e9t database theo th\u1ee9 t\u1ef1 ng\u01b0\u1ee3c l\u1ea1i v\u1edbi th\u1ee9 t\u1ef1 s\u1eafp x\u1ebfp c\u1ee7a b\u1ea3ng, ch\u1eb3ng h\u1ea1n nh\u01b0 khi ch\u00fang t\u00f4i qu\u00e9t tin nh\u1eafn theo th\u1ee9 t\u1ef1 t\u0103ng d\u1ea7n. Team ScyllaDB \u0111\u00e3 \u01b0u ti\u00ean c\u00e1c c\u1ea3i ti\u1ebfn v\u00e0 tri\u1ec3n khai c\u00e1c truy v\u1ea5n ng\u01b0\u1ee3c hi\u1ec7u qu\u1ea3, qua \u0111\u00f3 gi\u00fap lo\u1ea1i b\u1ecf v\u1ea5n \u0111\u1ec1 cu\u1ed1i c\u00f9ng trong k\u1ebf ho\u1ea1ch di chuy\u1ec3n database.</p> <p>Ch\u00fang t\u00f4i \u0111\u00e3 nghi ng\u1edd r\u1eb1ng vi\u1ec7c \u0111\u01b0a m\u1ed9t database m\u1edbi v\u00e0o h\u1ec7 th\u1ed1ng s\u1ebd kh\u00f4ng gi\u00fap m\u1ecdi th\u1ee9 t\u1ed1t h\u01a1n m\u1ed9t c\u00e1ch k\u1ef3 di\u1ec7u \u0111\u01b0\u1ee3c. C\u00e1c ph\u00e2n v\u00f9ng n\u00f3ng (hot partition) v\u1eabn c\u00f3 th\u1ec3 l\u00e0 m\u1ed9t v\u1ea5n \u0111\u1ec1 trong ScyllaDB v\u00e0 v\u00ec v\u1eady ch\u00fang t\u00f4i c\u0169ng mu\u1ed1n \u0111\u1ea7u t\u01b0 v\u00e0o vi\u1ec7c c\u1ea3i thi\u1ec7n h\u1ec7 th\u1ed1ng ph\u00eda tr\u00ean database \u0111\u1ec3 gi\u00fap b\u1ea3o v\u1ec7 v\u00e0 t\u1ea1o \u0111i\u1ec1u ki\u1ec7n cho hi\u1ec7u su\u1ea5t database t\u1ed1t h\u01a1n.</p>"},{"location":"misc/discord-blog/storing-trillions-messages/#cac-data-service","title":"C\u00e1c Data Service","text":"<p>V\u1edbi Cassandra, ch\u00fang t\u00f4i ph\u1ea3i v\u1eadt l\u1ed9n v\u1edbi c\u00e1c ph\u00e2n v\u00f9ng n\u00f3ng. L\u01b0u l\u01b0\u1ee3ng truy c\u1eadp cao v\u00e0o m\u1ed9t ph\u00e2n v\u00f9ng nh\u1ea5t \u0111\u1ecbnh d\u1eabn \u0111\u1ebfn \u0111\u1ed9 tr\u1ec5 x\u1ebfp t\u1ea7ng, trong \u0111\u00f3 c\u00e1c truy v\u1ea5n ti\u1ebfp theo s\u1ebd ti\u1ebfp t\u1ee5c t\u0103ng \u0111\u1ed9 tr\u1ec5. N\u1ebfu ch\u00fang ta c\u00f3 th\u1ec3 ki\u1ec3m so\u00e1t l\u01b0\u1ee3ng truy c\u1eadp \u0111\u1ed3ng th\u1eddi \u0111\u1ebfn c\u00e1c ph\u00e2n v\u00f9ng n\u00f3ng, ch\u00fang ta c\u00f3 th\u1ec3 b\u1ea3o v\u1ec7 database kh\u00f4ng b\u1ecb qu\u00e1 t\u1ea3i.</p> <p>\u0110\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y, ch\u00fang t\u00f4i t\u1ea1o ra th\u1ee9 g\u1ecdi l\u00e0 c\u00e1c data service \u2014 d\u1ecbch v\u1ee5 trung gian n\u1eb1m gi\u1eefa kh\u1ed1i API v\u00e0 database cluster. Khi vi\u1ebft c\u00e1c data service c\u1ee7a m\u00ecnh, ch\u00fang t\u00f4i \u0111\u00e3 ch\u1ecdn m\u1ed9t ng\u00f4n ng\u1eef ng\u00e0y c\u00e0ng \u0111\u01b0\u1ee3c d\u00f9ng nhi\u1ec1u t\u1ea1i Discord: Rust! Ch\u00fang t\u00f4i \u0111\u00e3 s\u1eed d\u1ee5ng n\u00f3 cho m\u1ed9t v\u00e0i project tr\u01b0\u1edbc \u0111\u00e2y v\u00e0 n\u00f3 \u0111\u00e3 \u0111\u00e1p \u1ee9ng \u0111\u01b0\u1ee3c k\u1ef3 v\u1ecdng. N\u00f3 mang l\u1ea1i cho ch\u00fang t\u00f4i t\u1ed1c \u0111\u1ed9 C/C++ nhanh m\u00e0 kh\u00f4ng ph\u1ea3i hy sinh t\u00ednh an to\u00e0n.</p> <p>Rust kh\u00f4ng s\u1ee3 concurrency, m\u1ed9t l\u1ee3i th\u1ebf l\u1edbn c\u1ee7a n\u00f3, ng\u00f4n ng\u1eef n\u00e0y s\u1ebd gi\u00fap b\u1ea1n d\u1ec5 d\u00e0ng vi\u1ebft concurrency code m\u1ed9t c\u00e1ch an to\u00e0n. C\u00e1c th\u01b0 vi\u1ec7n c\u1ee7a n\u00f3 c\u0169ng r\u1ea5t ph\u00f9 h\u1ee3p v\u1edbi nh\u1eefng g\u00ec ch\u00fang t\u00f4i mu\u1ed1n l\u00e0m. H\u1ec7 sinh th\u00e1i Tokio l\u00e0 m\u1ed9t n\u1ec1n t\u1ea3ng to l\u1edbn \u0111\u1ec3 x\u00e2y d\u1ef1ng m\u1ed9t h\u1ec7 th\u1ed1ng b\u1ea5t \u0111\u1ed3ng b\u1ed9 I/O v\u00e0 ng\u00f4n ng\u1eef n\u00e0y c\u00f3 h\u1ed7 tr\u1ee3 driver cho c\u1ea3 Cassandra v\u00e0 ScyllaDB.</p> <p>Ngo\u00e0i ra, ch\u00fang t\u00f4i th\u1ea5y r\u1ea5t vui khi vi\u1ebft code v\u1edbi s\u1ef1 tr\u1ee3 gi\u00fap c\u1ee7a compiler, s\u1ef1 r\u00f5 r\u00e0ng c\u1ee7a c\u00e1c th\u00f4ng b\u00e1o l\u1ed7i, c\u1ea5u tr\u00fac ng\u00f4n ng\u1eef v\u00e0 s\u1ef1 nh\u1ea5n m\u1ea1nh v\u1ec1 t\u00ednh an to\u00e0n. Ch\u00fang t\u00f4i tr\u1edf n\u00ean kh\u00e1 th\u00edch c\u00e1ch m\u00e0 m\u1ed9t khi code \u0111\u01b0\u1ee3c bi\u00ean d\u1ecbch, n\u00f3 th\u01b0\u1eddng ho\u1ea1t \u0111\u1ed9ng t\u1ed1t. Tuy nhi\u00ean, \u0111i\u1ec1u quan tr\u1ecdng nh\u1ea5t l\u00e0 n\u00f3 cho ph\u00e9p ch\u00fang t\u00f4i n\u00f3i r\u1eb1ng ch\u00fang t\u00f4i \u0111\u00e3 vi\u1ebft l\u1ea1i n\u00f3 b\u1eb1ng Rust.</p> <p>C\u00e1c data service n\u1eb1m gi\u1eefa API v\u00e0 c\u00e1c ScyllaDB cluster. Ch\u00fang ch\u1ee9a m\u1ed9t gRPC endpoint cho m\u1ed7i truy v\u1ea5n database v\u00e0 c\u1ed1 \u00fd kh\u00f4ng ch\u1ee9a business logic. T\u00ednh n\u0103ng quan tr\u1ecdng m\u00e0 c\u00e1c data service c\u1ee7a ch\u00fang t\u00f4i cung c\u1ea5p l\u00e0 k\u1ebft h\u1ee3p request (request coalescing). N\u1ebfu nhi\u1ec1u ng\u01b0\u1eddi d\u00f9ng \u0111ang request c\u00f9ng m\u1ed9t row c\u00f9ng l\u00fac, n\u00f3 s\u1ebd ch\u1ec9 truy v\u1ea5n database m\u1ed9t l\u1ea7n. Ng\u01b0\u1eddi d\u00f9ng \u0111\u1ea7u ti\u00ean \u0111\u01b0a ra request s\u1ebd khi\u1ebfn worker task xu\u1ea5t hi\u1ec7n trong server. C\u00e1c request ti\u1ebfp theo s\u1ebd ki\u1ec3m tra s\u1ef1 t\u1ed3n t\u1ea1i c\u1ee7a worker task \u0111\u00f3 v\u00e0 theo d\u00f5i n\u00f3. Worker task \u0111\u00f3 s\u1ebd truy v\u1ea5n database v\u00e0 tr\u1ea3 l\u1ea1i row cho t\u1ea5t c\u1ea3 c\u00e1c b\u00ean theo d\u00f5i.</p> <p>\u0110\u00e2y ch\u00ednh l\u00e0 s\u1ee9c m\u1ea1nh c\u1ee7a Rust: n\u00f3 gi\u00fap d\u1ec5 d\u00e0ng vi\u1ebft concurrent code m\u1ed9t c\u00e1ch an to\u00e0n.</p> <p></p> <p>T\u01b0\u1edfng t\u01b0\u1ee3ng r\u1eb1ng c\u00f3 m\u1ed9t th\u00f4ng b\u00e1o l\u1edbn tr\u00ean m\u1ed9t server Discord c\u00f3 tag <code>@everyone</code>: ng\u01b0\u1eddi d\u00f9ng s\u1ebd m\u1edf \u1ee9ng d\u1ee5ng v\u00e0 \u0111\u1ecdc tin nh\u1eafn, g\u1eedi h\u00e0ng t\u1ea5n l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp \u0111\u1ebfn database. Tr\u01b0\u1edbc \u0111\u00e2y, \u0111i\u1ec1u n\u00e0y c\u00f3 th\u1ec3 t\u1ea1o ra m\u1ed9t ph\u00e2n v\u00f9ng n\u00f3ng v\u00e0 on-call s\u1ebd ph\u1ea3i theo ca \u0111\u1ec3 gi\u00fap h\u1ec7 th\u1ed1ng ph\u1ee5c h\u1ed3i. V\u1edbi c\u00e1c data service n\u00e0y, ch\u00fang t\u00f4i c\u00f3 th\u1ec3 gi\u1ea3m \u0111\u00e1ng k\u1ec3 l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp t\u0103ng \u0111\u1ed9t bi\u1ebfn \u0111\u1ed1i v\u1edbi database.</p> <p>Ph\u1ea7n th\u1ee9 hai c\u1ee7a ph\u00e9p thu\u1eadt \u1edf \u0111\u00e2y l\u00e0 ph\u1ea7n tr\u00ean c\u1ee7a c\u00e1c data service. Ch\u00fang t\u00f4i \u0111\u00e3 tri\u1ec3n khai \u0111\u1ecbnh tuy\u1ebfn d\u1ef1a tr\u00ean h\u00e0m b\u0103m nh\u1ea5t qu\u00e1n cho c\u00e1c data service \u0111\u1ec3 cho ph\u00e9p k\u1ebft h\u1ee3p request hi\u1ec7u qu\u1ea3 h\u01a1n. \u0110\u1ed1i v\u1edbi m\u1ed7i request \u0111\u1ebfn data service, ch\u00fang t\u00f4i cung c\u1ea5p m\u1ed9t kh\u00f3a \u0111\u1ecbnh tuy\u1ebfn (routing key). \u0110\u1ed1i v\u1edbi tin nh\u1eafn, \u0111\u00e2y l\u00e0 <code>channel_id</code>, v\u00ec v\u1eady t\u1ea5t c\u1ea3 c\u00e1c request cho c\u00f9ng m\u1ed9t channel s\u1ebd chuy\u1ec3n \u0111\u1ebfn c\u00f9ng m\u1ed9t instance c\u1ee7a service. \u0110\u1ecbnh tuy\u1ebfn n\u00e0y ti\u1ebfp t\u1ee5c gi\u00fap gi\u1ea3m t\u1ea3i cho database.</p> <p></p> <p>Nh\u1eefng c\u1ea3i ti\u1ebfn n\u00e0y gi\u00fap \u00edch r\u1ea5t nhi\u1ec1u, nh\u01b0ng ch\u00fang kh\u00f4ng gi\u1ea3i quy\u1ebft \u0111\u01b0\u1ee3c t\u1ea5t c\u1ea3 c\u00e1c v\u1ea5n \u0111\u1ec1 c\u1ee7a ch\u00fang t\u00f4i. Ch\u00fang t\u00f4i v\u1eabn th\u1ea5y c\u00e1c ph\u00e2n v\u00f9ng n\u00f3ng v\u00e0 \u0111\u1ed9 tr\u1ec5 t\u0103ng l\u00ean tr\u00ean cluster Cassandra, ch\u1ec9 l\u00e0 kh\u00f4ng qu\u00e1 th\u01b0\u1eddng xuy\u00ean nh\u01b0 tr\u01b0\u1edbc. N\u00f3 gi\u00fap c\u00e2u gi\u1edd \u0111\u1ec3 ch\u00fang t\u00f4i c\u00f3 th\u1ec3 chu\u1ea9n b\u1ecb cluster ScyllaDB t\u1ed1i \u01b0u m\u1edbi c\u1ee7a m\u00ecnh v\u00e0 th\u1ef1c hi\u1ec7n qu\u00e1 tr\u00ecnh di chuy\u1ec3n.</p>"},{"location":"misc/discord-blog/storing-trillions-messages/#chuyen-di-cu-sieu-to-khong-lo","title":"Chuy\u1ebfn di c\u01b0 si\u00eau to kh\u1ed5ng l\u1ed3","text":"<p>C\u00e1c y\u00eau c\u1ea7u \u0111\u1ed1i v\u1edbi vi\u1ec7c di c\u01b0 kh\u00e1 \u0111\u01a1n gi\u1ea3n: ch\u00fang t\u00f4i c\u1ea7n di chuy\u1ec3n h\u00e0ng ngh\u00ecn t\u1ef7 tin nh\u1eafn m\u00e0 kh\u00f4ng c\u00f3 downtime v\u00e0 c\u1ea7n th\u1ef1c hi\u1ec7n \u0111i\u1ec1u \u0111\u00f3 m\u1ed9t c\u00e1ch nhanh ch\u00f3ng b\u1edfi v\u00ec m\u1eb7c d\u00f9 t\u00ecnh h\u00ecnh c\u1ee7a Cassandra \u0111\u00e3 ph\u1ea7n n\u00e0o \u0111\u01b0\u1ee3c c\u1ea3i thi\u1ec7n, nh\u01b0ng ch\u00fang t\u00f4i v\u1eabn th\u01b0\u1eddng xuy\u00ean ph\u1ea3i t\u1ef1 s\u1eeda.</p> <p>B\u01b0\u1edbc m\u1ed9t th\u00ec kh\u00e1 d\u1ec5: ch\u00fang t\u00f4i cung c\u1ea5p m\u1ed9t cluster ScyllaDB m\u1edbi b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng c\u1ea5u tr\u00fac li\u00ean k\u1ebft l\u01b0u tr\u1eef super-disk. B\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng c\u00e1c SSD c\u1ee5c b\u1ed9 \u0111\u1ec3 t\u0103ng t\u1ed1c \u0111\u1ed9 v\u00e0 t\u1eadn d\u1ee5ng RAID \u0111\u1ec3 mirror d\u1eef li\u1ec7u c\u1ee7a sang persistent disk, ch\u00fang t\u00f4i c\u00f3 \u0111\u01b0\u1ee3c t\u1ed1c \u0111\u1ed9 c\u1ee7a SSD c\u1ee5c b\u1ed9 c\u00f9ng v\u1edbi \u0111\u1ed9 b\u1ec1n c\u1ee7a persistent disk. \u0110\u1ebfn \u0111\u00e2y th\u00ec ch\u00fang t\u00f4i c\u00f3 th\u1ec3 b\u1eaft \u0111\u1ea7u di chuy\u1ec3n d\u1eef li\u1ec7u v\u00e0o cluster \u0111\u01b0\u1ee3c r\u1ed3i.</p> <p>Ch\u00fang t\u00f4i s\u1ebd b\u1eaft \u0111\u1ea7u s\u1eed d\u1ee5ng cluster ScyllaDB m\u1edbi cho d\u1eef li\u1ec7u m\u1edbi h\u01a1n b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng th\u1eddi gian cutover, sau \u0111\u00f3 di chuy\u1ec3n d\u1eef li\u1ec7u l\u1ecbch s\u1eed \u0111\u1eb1ng sau cluster \u0111\u00f3. \u0110i\u1ec1u n\u00e0y l\u00e0m t\u0103ng th\u00eam \u0111\u1ed9 ph\u1ee9c t\u1ea1p, nh\u01b0ng \u0111\u01b0\u1ee3c c\u00e1i l\u00e0 an to\u00e0n.</p> <p>Ch\u00fang t\u00f4i b\u1eaft \u0111\u1ea7u ghi d\u1eef li\u1ec7u m\u1edbi v\u00e0o c\u1ea3 Cassandra v\u00e0 ScyllaDB, \u0111\u1ed3ng th\u1eddi b\u1eaft \u0111\u1ea7u cung c\u1ea5p tr\u00ecnh di chuy\u1ec3n Spark c\u1ee7a ScyllaDB. N\u00f3 c\u1ea7n \u0111\u01b0\u1ee3c ch\u1ec9nh kh\u00e1 nhi\u1ec1u v\u00e0 sau khi thi\u1ebft l\u1eadp xong, th\u1eddi gian \u01b0\u1edbc t\u00ednh \u0111\u1ec3 ho\u00e0n th\u00e0nh l\u00e0 ba th\u00e1ng.</p> <p>Ba th\u00e1ng d\u00e0i qu\u00e1, ch\u00fang t\u00f4i mu\u1ed1n nhanh h\u01a1n. Ch\u00fang t\u00f4i ng\u1ed3i l\u1ea1i suy ngh\u0129 v\u1ec1 c\u00e1ch \u0111\u1ec3 c\u00f3 th\u1ec3 t\u0103ng t\u1ed1c, cho \u0111\u1ebfn khi nh\u1edb r\u1eb1ng m\u00ecnh \u0111\u00e3 vi\u1ebft m\u1ed9t th\u01b0 vi\u1ec7n database nhanh v\u00e0 hi\u1ec7u qu\u1ea3 m\u00e0 ch\u00fang t\u00f4i c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng \u0111\u01b0\u1ee3c. Ch\u00fang t\u00f4i ch\u1ecdn m\u1ed9t s\u1ed1 k\u1ef9 thu\u1eadt d\u1ef1a tr\u00ean meme v\u00e0 vi\u1ebft l\u1ea1i tr\u00ecnh di chuy\u1ec3n d\u1eef li\u1ec7u b\u1eb1ng Rust.</p> <p>Trong m\u1ed9t bu\u1ed5i chi\u1ec1u, ch\u00fang t\u00f4i \u0111\u00e3 m\u1edf r\u1ed9ng th\u01b0 vi\u1ec7n data service c\u1ee7a m\u00ecnh \u0111\u1ec3 th\u1ef1c hi\u1ec7n di chuy\u1ec3n d\u1eef li\u1ec7u quy m\u00f4 l\u1edbn. N\u00f3 \u0111\u1ecdc ph\u1ea1m vi token t\u1eeb database, ki\u1ec3m tra ch\u00fang c\u1ee5c b\u1ed9 th\u00f4ng qua SQLite, sau \u0111\u00f3 \u0111\u01b0a v\u00e0o ScyllaDB. Ch\u00fang t\u00f4i k\u1ebft n\u1ed1i tr\u00ecnh di chuy\u1ec3n m\u1edbi v\u00e0o v\u00e0 nh\u1eadn \u0111\u01b0\u1ee3c th\u1eddi gian \u01b0\u1edbc t\u00ednh m\u1edbi: 9 ng\u00e0y!</p> <p>Ch\u00fang t\u00f4i b\u1eadt n\u00f3 l\u00ean v\u00e0 \u0111\u1ec3 cho n\u00f3 ch\u1ea1y, di chuy\u1ec3n tin nh\u1eafn v\u1edbi t\u1ed1c \u0111\u1ed9 l\u00ean t\u1edbi 3,2 tri\u1ec7u m\u1ed7i gi\u00e2y. V\u00e0i ng\u00e0y sau, ch\u00fang t\u00f4i xem n\u00f3 \u0111\u1ea1t 100% v\u00e0 nh\u1eadn ra r\u1eb1ng n\u00f3 b\u1ecb k\u1eb9t \u1edf m\u1ee9c ho\u00e0n th\u00e0nh 99,9999% (kh\u00f4ng, thi\u1ec7t \u0111\u00f3). Tr\u00ecnh di chuy\u1ec3n c\u1ee7a ch\u00fang t\u00f4i s\u1eafp h\u1ebft th\u1eddi gian \u0111\u1ecdc m\u1ed9t s\u1ed1 ph\u1ea1m vi token cu\u1ed1i c\u00f9ng v\u00ec ch\u00fang ch\u1ee9a c\u00e1c ph\u1ea1m vi tombstone kh\u1ed5ng l\u1ed3 ch\u01b0a bao gi\u1edd \u0111\u01b0\u1ee3c n\u00e9n trong Cassandra. Ch\u00fang t\u00f4i n\u00e9n ph\u1ea1m vi token \u0111\u00f3 v\u00e0 v\u00e0i gi\u00e2y sau, qu\u00e1 tr\u00ecnh di chuy\u1ec3n ho\u00e0n t\u1ea5t!</p> <p>Ch\u00fang t\u00f4i \u0111\u00e3 th\u1ef1c hi\u1ec7n x\u00e1c th\u1ef1c d\u1eef li\u1ec7u t\u1ef1 \u0111\u1ed9ng b\u1eb1ng c\u00e1ch g\u1eedi m\u1ed9t t\u1ef7 l\u1ec7 ph\u1ea7n tr\u0103m nh\u1ecf s\u1ed1 l\u1ea7n \u0111\u1ecdc t\u1edbi c\u1ea3 2 database v\u00e0 so s\u00e1nh k\u1ebft qu\u1ea3, v\u00e0 m\u1ecdi th\u1ee9 tr\u00f4ng r\u1ea5t tuy\u1ec7t. Cluster m\u1edbi ho\u1ea1t \u0111\u1ed9ng t\u1ed1t v\u1edbi l\u01b0u l\u01b0\u1ee3ng nh\u01b0 b\u00ean Cassandra, trong khi ch\u00ednh Cassandra \u0111ang g\u1eb7p ph\u1ea3i c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u1ed9 tr\u1ec5 ng\u00e0y c\u00e0ng th\u01b0\u1eddng xuy\u00ean h\u01a1n. Ch\u00fang t\u00f4i \u0111\u00e3 t\u1eadp h\u1ee3p l\u1ea1i t\u1ea1i ch\u1ed7 ng\u1ed3i c\u1ee7a team, b\u1eadt c\u00f4ng t\u1eafc \u0111\u1ec3 bi\u1ebfn ScyllaDB th\u00e0nh database ch\u00ednh v\u00e0 \u0103n m\u1eebng!</p>"},{"location":"misc/discord-blog/storing-trillions-messages/#vai-thang-sau-o","title":"V\u00e0i th\u00e1ng sau \u0111\u00f3","text":"<p>Ch\u00fang t\u00f4i \u0111\u00e3 chuy\u1ec3n \u0111\u1ed5i database tin nh\u1eafn c\u1ee7a m\u00ecnh v\u00e0o th\u00e1ng 5 n\u0103m 2022, nh\u01b0ng k\u1ec3 t\u1eeb \u0111\u00f3 \u0111\u1ebfn nay database n\u00e0y c\u00f3 \u1ed5n kh\u00f4ng?</p> <p>\u0110\u00f3 l\u00e0 m\u1ed9t database ho\u1ea1t \u0111\u1ed9ng r\u1ea5t t\u1ed1t. Kh\u00f4ng c\u00f2n nh\u1eefng cu\u1ed9c s\u1eeda l\u1ed7i k\u00e9o d\u00e0i c\u1ea3 tu\u1ea7n, c\u0169ng kh\u00f4ng tung h\u1ee9ng c\u00e1c node trong cluster \u0111\u1ec3 c\u1ed1 g\u1eafng duy tr\u00ec th\u1eddi gian ho\u1ea1t \u0111\u1ed9ng. \u0110\u00f3 l\u00e0 m\u1ed9t database hi\u1ec7u qu\u1ea3 h\u01a1n nhi\u1ec1u \u2014 ch\u00fang t\u00f4i \u0111ang chuy\u1ec3n t\u1eeb ch\u1ea1y 177 node Cassandra sang ch\u1ec9 72 node ScyllaDB. M\u1ed7i node ScyllaDB c\u00f3 9 TB dung l\u01b0\u1ee3ng \u1ed5 \u0111\u0129a, t\u0103ng t\u1eeb m\u1ee9c trung b\u00ecnh 4 TB cho m\u1ed7i node Cassandra.</p> <p>\u0110\u1ed9 tr\u1ec5 \u0111u\u00f4i c\u0169ng \u0111\u01b0\u1ee3c c\u1ea3i thi\u1ec7n \u0111\u00e1ng k\u1ec3. V\u00ed d\u1ee5: t\u00ecm tin nh\u1eafn trong qu\u00e1 kh\u1ee9 c\u00f3 p99 trong kho\u1ea3ng 40-125 ms tr\u00ean Cassandra, v\u1edbi ScyllaDB c\u00f3 \u0111\u1ed9 tr\u1ec5 15 ms p99 ngon l\u00e0nh, \u0111\u1ed3ng th\u1eddi hi\u1ec7u su\u1ea5t ch\u00e8n tin nh\u1eafn gi\u1ea3m t\u1eeb 5-70 ms p99 tr\u00ean Cassandra, xu\u1ed1ng 5ms p99 \u1ed5n \u0111\u1ecbnh tr\u00ean ScyllaDB. Nh\u1edd nh\u1eefng c\u1ea3i ti\u1ebfn v\u1ec1 hi\u1ec7u su\u1ea5t n\u00f3i tr\u00ean, ch\u00fang t\u00f4i \u0111\u00e3 m\u1edf kh\u00f3a nhi\u1ec1u use case m\u1edbi.</p> <p>V\u00e0o cu\u1ed1i n\u0103m 2022, m\u1ecdi ng\u01b0\u1eddi tr\u00ean kh\u1eafp th\u1ebf gi\u1edbi \u0111ang xem World Cup. M\u1ed9t \u0111i\u1ec1u m\u00e0 ch\u00fang t\u00f4i ph\u00e1t hi\u1ec7n ra r\u1ea5t nhanh l\u00e0 c\u00e1c b\u00e0n th\u1eafng \u0111\u01b0\u1ee3c ghi xu\u1ea5t hi\u1ec7n trong bi\u1ec3u \u0111\u1ed3 theo d\u00f5i. \u0110i\u1ec1u n\u00e0y r\u1ea5t th\u00fa v\u1ecb v\u00ec kh\u00f4ng ch\u1ec9 d\u1ec5 d\u00e0ng xem c\u00e1c s\u1ef1 ki\u1ec7n trong th\u1ebf gi\u1edbi th\u1ef1c hi\u1ec3n th\u1ecb trong h\u1ec7 th\u1ed1ng c\u1ee7a b\u1ea1n, \u0111i\u1ec1u n\u00e0y c\u00f2n gi\u00fap team c\u00f3 l\u00fd do \u0111\u1ec3 xem b\u00f3ng \u0111\u00e1 trong c\u00e1c cu\u1ed9c h\u1ecdp. Ch\u00fang t\u00f4i kh\u00f4ng th\u1ef1c s\u1ef1 \"xem b\u00f3ng \u0111\u00e1 trong c\u00e1c cu\u1ed9c h\u1ecdp\", ch\u00fang t\u00f4i ch\u1ec9 \"ch\u1ee7 \u0111\u1ed9ng theo d\u00f5i hi\u1ec7u su\u1ea5t c\u1ee7a h\u1ec7 th\u1ed1ng\" th\u00f4i.</p> <p></p> <p>Ch\u00fang t\u00f4i th\u1ef1c s\u1ef1 c\u00f3 th\u1ec3 k\u1ec3 l\u1ea1i tr\u1eadn Chung k\u1ebft World Cup th\u00f4ng qua bi\u1ec3u \u0111\u1ed3 g\u1eedi tin nh\u1eafn. Tr\u1eadn \u0111\u1ea5u th\u1eadt tuy\u1ec7t v\u1eddi. Lionel Messi \u0111ang c\u1ed1 g\u1eafng ho\u00e0n th\u00e0nh th\u00e0nh t\u00edch cu\u1ed1i c\u00f9ng trong s\u1ef1 nghi\u1ec7p v\u00e0 c\u1ee7ng c\u1ed1 tuy\u00ean b\u1ed1 tr\u1edf th\u00e0nh c\u1ea7u th\u1ee7 v\u0129 \u0111\u1ea1i nh\u1ea5t m\u1ecdi th\u1eddi \u0111\u1ea1i v\u00e0 d\u1eabn d\u1eaft Argentina \u0111\u1ebfn ch\u1ee9c v\u00f4 \u0111\u1ecbch, nh\u01b0ng tr\u01b0\u1edbc m\u1eb7t Messi l\u00e0 Kylian Mbappe v\u00e0 tuy\u1ec3n Ph\u00e1p v\u00f4 c\u00f9ng t\u00e0i n\u0103ng.</p> <p>M\u1ed7i trong s\u1ed1 10 l\u1ea7n l\u01b0u l\u01b0\u1ee3ng t\u0103ng trong bi\u1ec3u \u0111\u1ed3 n\u00e0y bi\u1ec3u th\u1ecb m\u1ed9t s\u1ef1 ki\u1ec7n trong tr\u1eadn \u0111\u1ea5u.</p> <ol> <li>Messi th\u1ef1c hi\u1ec7n th\u00e0nh c\u00f4ng qu\u1ea3 ph\u1ea1t \u0111\u1ec1n, v\u00e0 Argentina v\u01b0\u1ee3t l\u00ean d\u1eabn tr\u01b0\u1edbc 1-0.</li> <li>Argentina l\u1ea1i ghi b\u00e0n v\u00e0 v\u01b0\u1ee3t l\u00ean d\u1eabn tr\u01b0\u1edbc 2-0.</li> <li>Ngh\u1ec9 gi\u1eefa hai hi\u1ec7p. L\u01b0\u1ee3ng tin nh\u1eafn c\u00f3 h\u01a1i nh\u00edch nh\u1eb9 l\u00ean khi ng\u01b0\u1eddi d\u00f9ng chat v\u1ec1 tr\u1eadn \u0111\u1ea5u gi\u1eefa gi\u1edd.</li> <li>Mbappe ghi b\u00e0n cho Ph\u00e1p v\u00e0 ghi b\u00e0n l\u1ea1i 90 gi\u00e2y sau \u0111\u00f3 \u0111\u1ec3 g\u1ee1 h\u00f2a!</li> <li>H\u1ebft 90 ph\u00fat v\u00e0 tr\u1eadn \u0111\u1ea5u l\u1edbn n\u00e0y s\u1ebd b\u01b0\u1edbc sang hi\u1ec7p ph\u1ee5.</li> <li>Kh\u00f4ng c\u00f3 nhi\u1ec1u \u0111i\u1ec1u x\u1ea3y ra trong hi\u1ec7p ph\u1ee5 th\u1ee9 nh\u1ea5t, m\u1ecdi ng\u01b0\u1eddi \u0111ang chat gi\u1eefa gi\u1edd.</li> <li>Messi l\u1ea1i ghi b\u00e0n, Argentina v\u01b0\u01a1n l\u00ean d\u1eabn tr\u01b0\u1edbc!</li> <li>Mbappe ghi b\u00e0n tuy\u1ec7t \u0111\u1eb9p \u0111\u1ec3 g\u1ee1 h\u00f2a!</li> <li>H\u1ebft hi\u1ec7p ph\u1ee5 r\u1ed3i, ch\u00fang ta s\u1ebd b\u01b0\u1edbc v\u00e0o lo\u1ea1t s\u00fat lu\u00e2n l\u01b0u!</li> <li>S\u1ef1 ph\u1ea5n kh\u00edch v\u00e0 c\u0103ng th\u1eb3ng t\u0103ng d\u1ea7n trong su\u1ed1t lo\u1ea1t \u0111\u00e1 lu\u00e2n l\u01b0u cho \u0111\u1ebfn khi Ph\u00e1p s\u00fat h\u1ecfng c\u00f2n Argentina th\u00ec kh\u00f4ng! Argentina v\u00f4 \u0111\u1ecbch World Cup 2022!</li> </ol> <p></p> <p>M\u1ecdi ng\u01b0\u1eddi tr\u00ean kh\u1eafp th\u1ebf gi\u1edbi \u0111ang c\u0103ng th\u1eb3ng khi xem tr\u1eadn \u0111\u1ea5u \u0111\u00e1ng kinh ng\u1ea1c n\u00e0y, nh\u01b0ng trong khi \u0111\u00f3, Discord v\u00e0 database tin nh\u1eafn kh\u00f4ng g\u1eb7p v\u1ea5n \u0111\u1ec1 g\u00ec. H\u00ecnh tr\u00ean l\u00e0 s\u1ed1 l\u01b0\u1ee3ng request k\u1ebft h\u1ee3p trong su\u1ed1t th\u1eddi gian di\u1ec5n ra tr\u1eadn \u0111\u1ea5u. Kh\u00f4ng c\u00f3 b\u1ea5t c\u1ee9 s\u1ef1 tr\u1ee5c tr\u1eb7c n\u00e0o, h\u1ec7 th\u1ed1ng m\u1edbi ch\u1ea1y m\u1ed9t c\u00e1ch ho\u00e0n h\u1ea3o. V\u1edbi c\u00e1c data service d\u1ef1a tr\u00ean Rust v\u00e0 ScyllaDB, ch\u00fang t\u00f4i c\u00f3 th\u1ec3 g\u00e1nh v\u00e1c l\u01b0u l\u01b0\u1ee3ng n\u00e0y v\u00e0 cung c\u1ea5p m\u1ed9t n\u1ec1n t\u1ea3ng \u0111\u1ec3 ng\u01b0\u1eddi d\u00f9ng giao ti\u1ebfp.</p>"},{"location":"misc/papers/amazon-dynamo/","title":"Amazon Dynamo","text":""},{"location":"misc/papers/amazon-dynamo/#nguon","title":"Ngu\u1ed3n","text":"<p>Dynamo: Amazon\u2019s Highly Available Key-value Store</p> <p>C\u00e1c t\u00e1c gi\u1ea3:</p> <ul> <li>Giuseppe DeCandia</li> <li>Deniz Hastorun</li> <li>Madan Jampani</li> <li>Gunavardhan Kakulapati</li> <li>Avinash Lakshman</li> <li>Alex Pilchin</li> <li>Swaminathan Sivasubramanian</li> <li>Peter Vosshall</li> <li>Werner Vogels</li> </ul>"},{"location":"misc/papers/amazon-dynamo/#tom-tat","title":"T\u00f3m t\u1eaft","text":"<p>\u0110\u1ed9 tin c\u1eady (Reliability) \u1edf quy m\u00f4 l\u1edbn l\u00e0 m\u1ed9t trong nh\u1eefng th\u00e1ch th\u1ee9c m\u00e0 ch\u00fang t\u00f4i g\u1eb7p ph\u1ea3i t\u1ea1i Amazon.com, m\u1ed9t trong nh\u1eefng t\u1eadp \u0111o\u00e0n th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed l\u1edbn nh\u1ea5t th\u1ebf gi\u1edbi; ch\u1ec9 c\u1ea7n v\u00e0i gi\u00e2y gi\u00e1n \u0111o\u1ea1n c\u0169ng g\u00e2y ra h\u1eadu qu\u1ea3 t\u00e0i ch\u00ednh to l\u1edbn v\u00e0 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn l\u00f2ng tin c\u1ee7a ng\u01b0\u1eddi d\u00f9ng. N\u1ec1n t\u1ea3ng Amazon.com, n\u01a1i cung c\u1ea5p d\u1ecbch v\u1ee5 (service) cho r\u1ea5t nhi\u1ec1u website to\u00e0n c\u1ea7u, \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng tr\u00ean m\u1ed9t h\u1ea1 t\u1ea7ng bao g\u1ed3m h\u00e0ng ch\u1ee5c ngh\u00ecn m\u00e1y ch\u1ee7 (server) v\u00e0 th\u00e0nh ph\u1ea7n m\u1ea1ng \u0111\u01b0\u1ee3c \u0111\u1eb7t \u1edf r\u1ea5t nhi\u1ec1u trung t\u00e2m d\u1eef li\u1ec7u (data center) tr\u00ean th\u1ebf gi\u1edbi. \u1ede quy m\u00f4 n\u00e0y, c\u00e1c th\u00e0nh ph\u1ea7n nh\u1ecf v\u00e0 l\u1edbn c\u00f3 th\u1ec3 li\u00ean t\u1ee5c g\u1eb7p s\u1ef1 c\u1ed1 v\u00e0 c\u00e1ch \u0111\u1ec3 qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i li\u00ean t\u1ee5c khi \u0111\u1ed1i m\u1eb7t v\u1edbi nh\u1eefng l\u1ed7i n\u00e0y gi\u00fap th\u00fac \u0111\u1ea9y \u0111\u1ed9 tin c\u1eady v\u00e0 t\u00ednh m\u1edf r\u1ed9ng (scalability) c\u1ee7a h\u1ec7 th\u1ed1ng ph\u1ea7n m\u1ec1m.</p> <p>B\u00e0i b\u00e1o n\u00e0y gi\u1edbi thi\u1ec7u thi\u1ebft k\u1ebf v\u00e0 c\u00e0i \u0111\u1eb7t c\u1ee7a Dynamo, m\u1ed9t h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef kh\u00f3a-gi\u00e1 tr\u1ecb (key-value) c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao (highly available) \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1edfi m\u1ed9t s\u1ed1 h\u1ec7 th\u1ed1ng quan tr\u1ecdng c\u1ee7a Amazon \u0111\u1ec3 cung c\u1ea5p m\u1ed9t tr\u1ea3i nghi\u1ec7m kh\u00f4ng gi\u00e1n \u0111o\u1ea1n cho ng\u01b0\u1eddi d\u00f9ng. \u0110\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c m\u1ee5c ti\u00eau n\u00e0y, Dynamo hi sinh t\u00ednh nh\u1ea5t qu\u00e1n (consistency) trong m\u1ed9t s\u1ed1 tr\u01b0\u1eddng h\u1ee3p c\u1ee5 th\u1ec3. Dynamo c\u00f2n s\u1eed d\u1ee5ng nhi\u1ec1u k\u1ef9 thu\u1eadt nh\u01b0 phi\u00ean b\u1ea3n h\u00f3a (versioning) v\u00e0 gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t (conflict resolution) v\u1edbi s\u1ef1 gi\u00fap s\u1ee9c c\u1ee7a t\u1ea7ng \u1ee9ng d\u1ee5ng theo c\u00e1ch cung c\u1ea5p m\u1ed9t giao di\u1ec7n m\u1edbi m\u1ebb cho nh\u00e0 ph\u00e1t tri\u1ec3n.</p>"},{"location":"misc/papers/amazon-dynamo/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>Amazon v\u1eadn h\u00e0nh m\u1ed9t n\u1ec1n t\u1ea3ng th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed to\u00e0n c\u1ea7u ph\u1ee5c v\u1ee5 h\u00e0ng ch\u1ee5c tri\u1ec7u kh\u00e1ch h\u00e0ng trong gi\u1edd cao \u0111i\u1ec3m v\u1edbi h\u00e0ng ch\u1ee5c ngh\u00ecn server \u1edf nhi\u1ec1u data center tr\u00ean th\u1ebf gi\u1edbi. C\u00f3 nhi\u1ec1u y\u00eau c\u1ea7u ho\u1ea1t \u0111\u1ed9ng nghi\u00eam ng\u1eb7t tr\u00ean n\u1ec1n t\u1ea3ng Amazon v\u1ec1 hi\u1ec7u su\u1ea5t, \u0111\u1ed9 tin c\u1eady v\u00e0 \u0111\u1ed9 hi\u1ec7u qu\u1ea3. \u0110\u1ed9 tin c\u1eady l\u00e0 m\u1ed9t trong c\u00e1c y\u00eau c\u1ea7u quan tr\u1ecdng nh\u1ea5t v\u00ec m\u1ed9t v\u00e0i gi\u00e2y gi\u00e1n \u0111o\u1ea1n c\u00f3 th\u1ec3 g\u00e2y ra h\u1eadu qu\u1ea3 t\u00e0i ch\u00ednh to l\u1edbn v\u00e0 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn l\u00f2ng tin c\u1ee7a ng\u01b0\u1eddi d\u00f9ng. Th\u00eam n\u1eefa, \u0111\u1ec3 \u0111\u00e1p \u1ee9ng nhu c\u1ea7u t\u0103ng tr\u01b0\u1edfng li\u00ean t\u1ee5c, n\u1ec1n t\u1ea3ng c\u1ea7n c\u00f3 t\u00ednh m\u1edf r\u1ed9ng cao \u0111\u1ec3 c\u00f3 th\u1ec3 d\u1ec5 d\u00e0ng m\u1edf r\u1ed9ng h\u1ec7 th\u1ed1ng khi c\u1ea7n thi\u1ebft.</p> <p>M\u1ed9t trong nh\u1eefng b\u00e0i h\u1ecdc m\u00e0 t\u1ed5 ch\u1ee9c c\u1ee7a ch\u00fang t\u00f4i \u0111\u00e3 h\u1ecdc \u0111\u01b0\u1ee3c khi v\u1eadn h\u00e0nh n\u1ec1n t\u1ea3ng c\u1ee7a Amazon l\u00e0 \u0111\u1ed9 tin c\u1eady v\u00e0 t\u00ednh m\u1edf r\u1ed9ng c\u1ee7a m\u1ed9t h\u1ec7 th\u1ed1ng ph\u1ee5 thu\u1ed9c v\u00e0o c\u00e1ch tr\u1ea1ng th\u00e1i \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd. Amazon s\u1eed d\u1ee5ng m\u1ed9t ki\u1ebfn tr\u00fac h\u01b0\u1edbng service c\u00f3 t\u00ednh phi t\u1eadp trung cao (highly decentralized), li\u00ean k\u1ebft l\u1ecfng l\u1ebbo (loosely coupled), bao g\u1ed3m h\u00e0ng tr\u0103m service. Trong m\u00f4i tr\u01b0\u1eddng n\u00e0y, s\u1ebd c\u00f3 nhu c\u1ea7u \u0111\u1eb7c bi\u1ec7t v\u1ec1 c\u00e1c c\u00f4ng ngh\u1ec7 l\u01b0u tr\u1eef c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao. V\u00ed d\u1ee5, kh\u00e1ch h\u00e0ng c\u00f3 th\u1ec3 xem v\u00e0 th\u00eam c\u00e1c m\u1eb7t h\u00e0ng v\u00e0o gi\u1ecf h\u00e0ng c\u1ee7a m\u00ecnh ngay c\u1ea3 khi \u1ed5 \u0111\u0129a b\u1ecb l\u1ed7i, c\u00e1c tuy\u1ebfn m\u1ea1ng b\u1ecb l\u1ed7i ho\u1eb7c c\u00e1c data center b\u1ecb t\u00e0n ph\u00e1 b\u1edfi thi\u00ean tai. Do \u0111\u00f3, service ch\u1ecbu tr\u00e1ch nhi\u1ec7m qu\u1ea3n l\u00fd gi\u1ecf h\u00e0ng y\u00eau c\u1ea7u r\u1eb1ng n\u00f3 lu\u00f4n c\u00f3 th\u1ec3 ghi v\u00e0 \u0111\u1ecdc t\u1eeb data store c\u1ee7a m\u00ecnh v\u00e0 data c\u1ee7a n\u00f3 c\u1ea7n ph\u1ea3i kh\u1ea3 d\u1ee5ng (available) tr\u00ean nhi\u1ec1u data center.</p> <p>X\u1eed l\u00fd v\u1ea5n \u0111\u1ec1 trong m\u1ed9t h\u1ea1 t\u1ea7ng g\u1ed3m h\u00e0ng tri\u1ec7u th\u00e0nh ph\u1ea7n l\u00e0 vi\u1ec7c th\u01b0\u1eddng xuy\u00ean c\u1ee7a ch\u00fang t\u00f4i; lu\u00f4n c\u00f3 m\u1ed9t l\u01b0\u1ee3ng nh\u1ecf nh\u01b0ng \u0111\u00e1ng k\u1ec3 c\u00e1c server v\u00e0 th\u00e0nh ph\u1ea7n m\u1ea1ng c\u00f3 th\u1ec3 b\u1ecb l\u1ed7i \u1edf b\u1ea5t k\u1ef3 l\u00fac n\u00e0o. Nh\u01b0 v\u1eady c\u00e1c h\u1ec7 th\u1ed1ng ph\u1ea7n m\u1ec1m c\u1ee7a Amazon c\u1ea7n ph\u1ea3i \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng theo c\u00e1ch m\u00e0 ch\u00fang xem vi\u1ec7c x\u1eed l\u00fd l\u1ed7i nh\u01b0 chuy\u1ec7n th\u01b0\u1eddng ng\u00e0y \u1edf huy\u1ec7n m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn t\u00ednh kh\u1ea3 d\u1ee5ng ho\u1eb7c hi\u1ec7u su\u1ea5t.</p> <p>\u0110\u1ec3 \u0111\u00e1p \u1ee9ng c\u00e1c nh\u01b0 c\u1ea7u v\u1ec1 \u0111\u1ed9 tin c\u1eady v\u00e0 t\u00ednh m\u1edf r\u1ed9ng, Amazon \u0111\u00e3 ph\u00e1t tri\u1ec3n nhi\u1ec1u c\u00f4ng ngh\u1ec7 l\u01b0u tr\u1eef, trong \u0111\u00f3 Amazon Simple Storage Service (c\u0169ng \u0111\u00e3 ra m\u1eaft c\u00f4ng ch\u00fang v\u00e0 \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn v\u1edbi c\u00e1i t\u00ean Amazon S3) l\u00e0 n\u1ed5i ti\u1ebfng nh\u1ea5t. B\u00e0i b\u00e1o n\u00e0y n\u00e0y tr\u00ecnh b\u00e0y thi\u1ebft k\u1ebf v\u00e0 c\u00e0i \u0111\u1eb7t Dynamo, m\u1ed9t data store ph\u00e2n t\u00e1n c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 t\u00ednh m\u1edf r\u1ed9ng cao kh\u00e1c, \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng cho n\u1ec1n t\u1ea3ng c\u1ee7a Amazon. Dynamo \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i c\u1ee7a c\u00e1c service c\u00f3 nhi\u1ec1u y\u00eau c\u1ea7u v\u1ec1 \u0111\u1ed9 tin c\u1eady v\u00e0o c\u00f9ng v\u1edbi vi\u1ec7c ki\u1ec3m so\u00e1t ch\u1eb7t ch\u1ebd nh\u1eefng s\u1ef1 c\u00e2n b\u1eb1ng v\u1ec1 t\u00ednh kh\u1ea3 d\u1ee5ng, t\u00ednh nh\u1ea5t qu\u00e1n, hi\u1ec7u qu\u1ea3 chi ph\u00ed v\u00e0 hi\u1ec7u su\u1ea5t. N\u1ec1n t\u1ea3ng c\u1ee7a Amazon c\u00f3 m\u1ed9t t\u1eadp r\u1ea5t \u0111a d\u1ea1ng c\u00e1c \u1ee9ng d\u1ee5ng v\u1edbi nhi\u1ec1u y\u00eau c\u1ea7u l\u01b0u tr\u1eef kh\u00e1c nhau. M\u1ed9t t\u1eadp c\u00e1c \u1ee9ng d\u1ee5ng nh\u01b0 th\u1ebf y\u00eau c\u1ea7u m\u1ed9t c\u00f4ng ngh\u1ec7 l\u01b0u tr\u1eef \u0111\u1ee7 linh ho\u1ea1t \u0111\u1ec3 cho ph\u00e9p c\u00e1c nh\u00e0 thi\u1ebft k\u1ebf \u1ee9ng d\u1ee5ng c\u1ea5u h\u00ecnh data store m\u1ed9t c\u00e1ch th\u00edch h\u1ee3p, d\u1ef1a tr\u00ean nh\u1eefng s\u1ef1 c\u00e2n b\u1eb1ng \u1edf tr\u00ean \u0111\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c t\u00ednh kh\u1ea3 d\u1ee5ng cao v\u00e0 \u0111\u1ea3m b\u1ea3o hi\u1ec7u qu\u1ea3 v\u1edbi chi ph\u00ed h\u1ee3p l\u00fd nh\u1ea5t.</p> <p>C\u00f3 r\u1ea5t nhi\u1ec1u service tr\u00ean n\u1ec1n t\u1ea3ng c\u1ee7a Amazon m\u00e0 ch\u1ec9 c\u1ea7n truy c\u1eadp b\u1eb1ng kh\u00f3a ch\u00ednh \u0111\u1ec3 l\u1ea5y d\u1eef li\u1ec7u. V\u1edbi nhi\u1ec1u service, nh\u01b0 danh s\u00e1ch c\u00e1c nh\u00e0 b\u00e1n h\u00e0ng t\u1ed1t nh\u1ea5t, gi\u1ecf h\u00e0ng, s\u1edf th\u00edch kh\u00e1ch h\u00e0ng, qu\u1ea3n l\u00fd session, th\u1ee9 h\u1ea1ng b\u00e1n h\u00e0ng v\u00e0 danh m\u1ee5c s\u1ea3n ph\u1ea9m, m\u00f4 h\u00ecnh chung c\u1ee7a vi\u1ec7c s\u1eed d\u1ee5ng c\u01a1 s\u1edf d\u1eef li\u1ec7u quan h\u1ec7 (relational database) s\u1ebd d\u1eabn \u0111\u1ebfn s\u1ef1 k\u00e9m hi\u1ec7u qu\u1ea3 v\u00e0 h\u1ea1n ch\u1ebf quy m\u00f4 v\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng. Dynamo cung c\u1ea5p m\u1ed9t giao di\u1ec7n ch\u1ec9 c\u00f3 kh\u00f3a ch\u00ednh \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 \u0111\u00e1p \u1ee9ng y\u00eau c\u1ea7u c\u1ee7a c\u00e1c \u1ee9ng d\u1ee5ng n\u00e0y.</p> <p>Dynamo s\u1eed d\u1ee5ng k\u1ebft h\u1ee3p c\u00e1c k\u00fd thu\u1eadt ph\u1ed5 bi\u1ebfn \u0111\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 t\u00ednh m\u1edf r\u1ed9ng. Data \u0111\u01b0\u1ee3c ph\u00e2n v\u00f9ng (partition) v\u00e0 sao ch\u00e9p (replicate) b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng h\u00e0m b\u0103m nh\u1ea5t qu\u00e1n (consistent hashing) [10], v\u00e0 t\u00ednh nh\u1ea5t qu\u00e1n \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 b\u1eb1ng c\u00e1ch phi\u00ean b\u1ea3n h\u00f3a \u0111\u1ed1i t\u01b0\u1ee3ng (object versioning) [12]. T\u00ednh nh\u1ea5t qu\u00e1n gi\u1eefa c\u00e1c b\u1ea3n sao d\u1eef li\u1ec7u (replica) trong qu\u00e1 tr\u00ecnh c\u1eadp nh\u1eadt \u0111\u01b0\u1ee3c duy tr\u00ec b\u1eb1ng m\u1ed9t k\u1ef9 thu\u1eadt ki\u1ec3u quorum v\u00e0 m\u1ed9t giao th\u1ee9c \u0111\u1ed3ng b\u1ed9 h\u00f3a b\u1ea3n sao phi t\u1eadp trung (decentralized replica synchronization protocol). Dynamo s\u1eed d\u1ee5ng m\u1ed9t giao th\u1ee9c th\u00e0nh vi\u00ean v\u00e0 ph\u00e1t hi\u1ec7n l\u1ed7i ph\u00e2n t\u00e1n d\u1ef1a tr\u00ean gossip. Dynamo l\u00e0 m\u1ed9t h\u1ec7 th\u1ed1ng ho\u00e0n to\u00e0n phi t\u1eadp trung v\u1edbi vi\u1ec7c qu\u1ea3n tr\u1ecb th\u1ee7 c\u00f4ng gi\u1ea3m \u0111\u1ebfn m\u1ee9c t\u1ed1i thi\u1ec3u. C\u00e1c node l\u01b0u tr\u1eef c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c th\u00eam v\u00e0o v\u00e0 b\u1edbt kh\u1ecfi Dynamo m\u00e0 kh\u00f4ng y\u00eau c\u1ea7u b\u1ea5t k\u1ef3 vi\u1ec7c ph\u00e2n v\u00f9ng v\u00e0 t\u00e1i ph\u00e2n ph\u1ed1i th\u1ee7 c\u00f4ng n\u00e0o.</p> <p>Trong n\u0103m qua, Dynamo l\u00e0 c\u00f4ng ngh\u1ec7 l\u01b0u tr\u1eef \u0111\u1eb1ng sau m\u1ed9t c\u01a1 s\u1ed1 c\u00e1c service c\u1ed1t l\u00f5i trong n\u1ec1n t\u1ea3ng th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed c\u1ee7a Amazon. N\u00f3 c\u00f3 th\u1ec3 t\u0103ng quy m\u00f4 l\u00ean m\u1ee9c c\u1ef1c \u0111\u1ea1i m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3 m\u00e0 kh\u00f4ng c\u00f3 th\u1eddi gian ch\u1ebft trong m\u00f9a mua s\u1eafm. V\u00ed d\u1ee5, service qu\u1ea3n l\u00fd gi\u1ecf h\u00e0ng ph\u1ee5c v\u1ee5 h\u00e0ng ch\u1ee5c tri\u1ec7u y\u00eau c\u1ea7u \u0111\u00e3 mang l\u1ea1i h\u01a1n 3 tri\u1ec7u l\u01b0\u1ee3t thanh to\u00e1n trong m\u1ed9t ng\u00e0y v\u00e0 service qu\u1ea3n l\u00fd session \u0111\u00e3 x\u1eed l\u00fd h\u00e0ng tr\u0103m ngh\u00ecn session ho\u1ea1t \u0111\u1ed9ng \u0111\u1ed3ng th\u1eddi.</p> <p>\u0110\u00f3ng g\u00f3p ch\u00ednh c\u1ee7a c\u00f4ng vi\u1ec7c n\u00e0y cho c\u1ed9ng \u0111\u1ed3ng nghi\u00ean c\u1ee9u l\u00e0 vi\u1ec7c \u0111\u00e1nh gi\u00e1 l\u00e0m th\u1ebf n\u00e0o c\u00e1c k\u1ef9 thu\u1eadt kh\u00e1c nhau c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p \u0111\u1ec3 t\u1ea1o ra m\u1ed9t h\u1ec7 th\u1ed1ng c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao. N\u00f3 ch\u1ee9ng t\u1ecf r\u1eb1ng m\u1ed9t h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef eventually-consistent c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u00f9ng trong c\u00e1c \u1ee9ng d\u1ee5ng c\u00f3 nhu c\u1ea7u. N\u00f3 c\u0169ng cung c\u1ea5p c\u00e1i nh\u00ecn s\u00e2u s\u1eafc v\u1ec1 vi\u1ec7c \u0111i\u1ec1u ch\u1ec9nh c\u00e1c k\u1ef9 thu\u1eadt n\u00e0y \u0111\u1ec3 \u0111\u00e1p \u1ee9ng c\u00e1c nhu c\u1ea7u c\u1ee7a h\u1ec7 th\u1ed1ng th\u1ef1c v\u1edbi r\u1ea5t nhi\u1ec1u y\u00eau c\u1ea7u v\u1ec1 hi\u1ec7u su\u1ea5t kh\u1eaft khe.</p> <p>B\u00e0i b\u00e1o n\u00e0y \u0111\u01b0\u1ee3c tr\u00ecnh b\u00e0y nh\u01b0 sau. Ph\u1ea7n 2 gi\u1edbi thi\u1ec7u b\u1ed1i c\u1ea3nh v\u00e0 Ph\u1ea7n 3 tr\u00ecnh b\u00e0y c\u00e1c c\u00f4ng vi\u1ec7c li\u00ean quan. Ph\u1ea7n 4 tr\u00ecnh b\u00e0y thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng v\u00e0 Ph\u1ea7n 5 m\u00f4 t\u1ea3 c\u00e0i \u0111\u1eb7t. Ph\u1ea7n 6 tr\u00ecnh b\u00e0y chi ti\u1ebft nh\u1eefng kinh nghi\u1ec7m v\u00e0 hi\u1ec3u bi\u1ebft c\u1ee7a ch\u00fang t\u00f4i khi v\u1eadn h\u00e0nh Dynamo trong th\u1ef1c t\u1ebf v\u00e0 Ph\u1ea7n 7 k\u1ebft lu\u1eadn b\u00e0i b\u00e1o. C\u00f3 m\u1ed9t s\u1ed1  ch\u1ed7 trong b\u00e0i vi\u1ebft n\u00e0y c\u1ea7n th\u00eam m\u1ed9t s\u1ed1 th\u00f4ng tin hay ho n\u1eefa nh\u01b0ng vi\u1ec7c b\u1ea3o v\u1ec7 l\u1ee3i \u00edch kinh doanh c\u1ee7a Amazon y\u00eau c\u1ea7u ch\u00fang t\u00f4i ph\u1ea3i gi\u1ea3m c\u00e1c chi ti\u1ebft n\u00e0y \u0111i. V\u00ec l\u00fd do n\u00e0y, ph\u1ea7n v\u1ec1 \u0111\u1ed9 tr\u1ec5 trong v\u00e0 gi\u1eefa c\u00e1c data center trong ph\u1ea7n 6, t\u1ec9 l\u1ec7 request tuy\u1ec7t \u0111\u1ed1i trong ph\u1ea7n 6.2, th\u1eddi gian ng\u1eebng ho\u1ea1t \u0111\u1ed9ng v\u00e0 kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c trong ph\u1ea7n 6.3 \u0111\u01b0\u1ee3c cung c\u1ea5p th\u00f4ng qua c\u00e1c ch\u1ec9 s\u1ed1 t\u1ed5ng h\u1ee3p thay v\u00ec c\u00e1c chi ti\u1ebft c\u1ee5 th\u1ec3.</p>"},{"location":"misc/papers/amazon-dynamo/#2-boi-canh","title":"2. B\u1ed1i c\u1ea3nh","text":"<p>N\u1ec1n t\u1ea3ng th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed c\u1ee7a Amazon \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p b\u1edfi h\u00e0ng tr\u0103m service ho\u1ea1t \u0111\u1ed9ng ph\u1ed1i h\u1ee3p v\u1edbi nhau \u0111\u1ec3 cung c\u1ea5p c\u00e1c ch\u1ee9c n\u0103ng kh\u00e1c nhau t\u1eeb \u0111\u1ec1 xu\u1ea5t, th\u1ef1c hi\u1ec7n \u0111\u01a1n h\u00e0ng \u0111\u1ebfn ph\u00e1t hi\u1ec7n gian l\u1eadn. M\u1ed7i service \u0111\u01b0\u1ee3c th\u1ec3 hi\u1ec7n th\u00f4ng qua m\u1ed9t giao di\u1ec7n \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh r\u00f5 r\u00e0ng v\u00e0 c\u00f3 th\u1ec3 truy c\u1eadp qua m\u1ea1ng. C\u00e1c service n\u00e0y \u0111\u01b0\u1ee3c host tr\u00ean m\u1ed9t h\u1ea1 t\u1ea7ng bao g\u1ed3m h\u00e0ng ch\u1ee5c ngh\u00ecn server \u0111\u01b0\u1ee3c \u0111\u1eb7t \u1edf nhi\u1ec1u trung t\u00e2m d\u1eef li\u1ec7u tr\u00ean th\u1ebf gi\u1edbi. M\u1ed9t s\u1ed1 service trong n\u00e0y th\u00ec stateless (v\u00ed d\u1ee5 nh\u01b0 c\u00e1c service t\u1ed5ng h\u1ee3p ph\u1ea3n h\u1ed3i t\u1eeb c\u00e1c service kh\u00e1c), v\u00e0 m\u1ed9t s\u1ed1 th\u00ec stateful (v\u00ed d\u1ee5 nh\u01b0 service t\u1ea1o ra ph\u1ea3n h\u1ed3i b\u1eb1ng c\u00e1ch th\u1ef1c thi c\u00e1c logic nghi\u1ec7p v\u1ee5 d\u1ef1a tr\u00ean tr\u1ea1ng th\u00e1i \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong persistent store).</p> <p>C\u00e1c h\u1ec7 th\u1ed1ng truy\u1ec1n th\u1ed1ng l\u01b0u tr\u1ea1ng th\u00e1i c\u1ee7a ch\u00fang trong c\u00e1c database quan h\u1ec7. Tuy nhi\u00ean, \u0111\u1ed1i v\u1edbi nhi\u1ec1u m\u00f4 h\u00ecnh s\u1eed \u0111\u1ee5ng tr\u1ea1ng th\u00e1i b\u1ec1n v\u1eefng, database quan h\u1ec7 kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t l\u1ef1a ch\u1ecdn t\u1ed1t. H\u1ea7u h\u1ebft c\u00e1c service n\u00e0y ch\u1ec9 l\u01b0u tr\u1eef v\u00e0 truy xu\u1ea5t d\u1eef li\u1ec7u b\u1eb1ng kh\u00f3a ch\u00ednh v\u00e0 kh\u00f4ng y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng qu\u1ea3n l\u00fd v\u00e0 truy v\u1ea5n ph\u1ee9c t\u1eadp do database quan h\u1ec7 cung c\u1ea5p. C\u00e1c ch\u1ee9c n\u0103ng d\u01b0 th\u1eeba \u0111\u00f2i h\u1ecfi ph\u1ea7n c\u1ee9ng \u0111\u1eaft ti\u1ec1n v\u00e0 nh\u00e2n vi\u00ean c\u00f3 tay ngh\u1ec1 cao \u0111\u1ec3 v\u1eadn h\u00e0nh, khi\u1ebfn n\u00f3 tr\u1edf th\u00e0nh m\u1ed9t gi\u1ea3i ph\u00e1p r\u1ea5t k\u00e9m hi\u1ec7u qu\u1ea3. Ngo\u00e0i ra, c\u00e1c c\u00f4ng ngh\u1ec7 replicate d\u1eef li\u1ec7u hi\u1ec7n th\u1eddi c\u00f2n h\u1ea1n ch\u1ebf v\u00e0 th\u01b0\u1eddng ch\u1ecdn t\u00ednh nh\u1ea5t qu\u00e1n h\u01a1n l\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng. M\u1eb7c d\u00f9 \u0111\u00e3 c\u00f3 nhi\u1ec1u ti\u1ebfn b\u1ed9 \u0111\u1ea1t \u0111\u01b0\u1ee3c trong nh\u1eefng n\u0103m qua, ta v\u1eabn kh\u00f4ng d\u1ec5 \u0111\u1ec3 m\u1edf r\u1ed9ng c\u00e1c database ho\u1eb7c d\u00f9ng ph\u00e2n v\u00f9ng th\u00f4ng minh \u0111\u1ec3 c\u00e2n b\u1eb1ng t\u1ea3i.</p> <p>B\u00e0i b\u00e1o n\u00e0y m\u00f4 t\u1ea3 Dynamo, m\u1ed9t c\u00f4ng ngh\u1ec7 l\u01b0u tr\u1eef d\u1eef li\u1ec7u c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao, gi\u00fap gi\u1ea3i quy\u1ebft nhu c\u1ea7u v\u1ec1 l\u1edbp service n\u00e0y. Dynamo c\u00f3 giao di\u1ec7n key-value \u0111\u01a1n gi\u1ea3n, v\u00e0 c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao v\u1edbi v\u00f9ng nh\u1ea5t qu\u00e1n r\u00f5 r\u00e0ng, hi\u1ec7u qu\u1ea3 trong vi\u1ec7c s\u1eed d\u1ee5ng t\u00e0i nguy\u00ean v\u00e0 c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng m\u1ed9t c\u00e1ch \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 gi\u1ea3i quy\u1ebft s\u1ef1 t\u0103ng tr\u01b0\u1edfng v\u1ec1 k\u00edch th\u01b0\u1edbc t\u1eadp d\u1eef li\u1ec7u ho\u1eb7c t\u1ed1c \u0111\u1ed9 y\u00eau c\u1ea7u. M\u1ed7i service s\u1eed d\u1ee5ng Dynamo \u0111\u1ec1u ch\u1ea1y c\u00e1c phi\u00ean b\u1ea3n Dynamo c\u1ee7a ri\u00eang n\u00f3.</p>"},{"location":"misc/papers/amazon-dynamo/#21-cac-yeu-cau-va-gia-inh-cho-he-thong","title":"2.1. C\u00e1c y\u00eau c\u1ea7u v\u00e0 gi\u1ea3 \u0111\u1ecbnh cho h\u1ec7 th\u1ed1ng","text":"<p>H\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef cho c\u00e1c ki\u1ec3u service n\u00e0y c\u00f3 c\u00e1c y\u00eau c\u1ea7u sau:</p> <p>M\u00f4 h\u00ecnh truy v\u1ea5n: C\u00e1c thao t\u00e1c \u0111\u1ecdc v\u00e0 ghi \u0111\u01a1n gi\u1ea3n v\u00e0o m\u1ed9t data item \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh duy nh\u1ea5t b\u1edfi m\u1ed9t kh\u00f3a. Tr\u1ea1ng th\u00e1i \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef d\u01b0\u1edbi d\u1ea1ng binary object (nh\u01b0 blob) \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh b\u1edfi c\u00e1c kh\u00f3a duy nh\u1ea5t. Kh\u00f4ng c\u00f3 thao t\u00e1c n\u00e0o li\u00ean quan \u0111\u1ebfn nhi\u1ec1u b\u1ea3n ghi v\u00e0 kh\u00f4ng c\u1ea7n c\u00f3 s\u01a1 \u0111\u1ed3 quan h\u1ec7. Y\u00eau c\u1ea7u n\u00e0y d\u1ef1a tr\u00ean m\u1ed9t nh\u1eadn x\u00e9t r\u1eb1ng ph\u1ea7n l\u1edbn c\u00e1c service c\u1ee7a Amazon c\u00f3 th\u1ec3 ho\u1ea1t \u0111\u1ed9ng ch\u1ec9 v\u1edbi m\u00f4 h\u00ecnh truy v\u1ea5n n\u00e0y v\u00e0 kh\u00f4ng c\u1ea7n b\u1ea5t k\u1ef3 s\u01a1 \u0111\u1ed3 quan h\u1ec7 n\u00e0o. Dynamo nh\u1eafm v\u00e0o c\u00e1c \u1ee9ng d\u1ee5ng c\u1ea7n l\u01b0u c\u00e1c \u0111\u1ed1i t\u01b0\u1ee3ng c\u00f3 k\u00edch th\u01b0\u1edbc nh\u1ecf (th\u01b0\u1eddng nh\u1ecf h\u01a1n 1 MB).</p> <p>T\u00ednh ch\u1ea5t ACID: ACID (Atomicity - T\u00ednh nguy\u00ean t\u1eed, Consistency - T\u00ednh nh\u1ea5t qu\u00e1n, Isolation - T\u00ednh \u0111\u1ed9c l\u1eadp, Durability - T\u00ednh b\u1ec1n v\u1eefng) l\u00e0 m\u1ed9t t\u1eadp c\u00e1c t\u00ednh ch\u1ea5t \u0111\u01b0\u1ee3c \u0111\u01b0a ra \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o c\u00e1c transaction trong database \u0111\u01b0\u1ee3c th\u1ef1c thi m\u1ed9t c\u00e1ch \u0111\u00e1ng tin c\u1eady. Trong ho\u00e0n c\u1ea3nh c\u1ee7a c\u00e1c database, m\u1ed9t thao t\u00e1c logic \u0111\u01a1n tr\u00ean d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 m\u1ed9t transaction. Kinh nghi\u1ec7m \u1edf Amazon cho th\u1ea5y r\u1eb1ng c\u00e1c data store v\u1edbi t\u00ednh ch\u1ea5t ACID th\u01b0\u1eddng c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng kh\u00e1 t\u1ec7. \u0110i\u1ec1u n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c ki\u1ec3m nghi\u1ec7m b\u1edfi c\u1ea3 nh\u1eefng c\u00f4ng tr\u00ecnh nghi\u00ean c\u1ee9u v\u00e0 th\u1ef1c t\u1ebf [5]. Dynamo t\u1eadp trung v\u00e0o c\u00e1c \u1ee9ng d\u1ee5ng v\u1eadn h\u00e0nh v\u1edbi t\u00ednh nh\u1ea5t qu\u00e1n \u00edt h\u01a1n (ch\u1eef \"C\" trong ACID \u1ea5y) n\u1ebfu \u0111i\u1ec1u n\u00e0y h\u1ed7 tr\u1ee3 t\u00ednh kh\u1ea3 d\u1ee5ng cao h\u01a1n. Dynamo kh\u00f4ng cung c\u1ea5p s\u1ef1 \u0111\u1ea3m b\u1ea3o t\u00ednh \u0111\u1ed9c l\u1eadp (isolation guarantee) v\u00e0 ch\u1ec9 cho ph\u00e9p c\u1eadp nh\u1eadt m\u1ed9t kh\u00f3a duy nh\u1ea5t.</p> <p>\u0110\u1ed9 hi\u1ec7u qu\u1ea3: H\u1ec7 th\u1ed1ng c\u1ea7n \u0111\u01b0\u1ee3c ho\u1ea1t \u0111\u1ed9ng tr\u00ean m\u1ed9t h\u1ea1 t\u1ea7ng ph\u1ea7n c\u1ee9ng th\u01b0\u01a1ng m\u1ea1i. Tr\u00ean n\u1ec1n t\u1ea3ng c\u1ee7a Amazon, c\u00e1c service c\u00f3 nh\u1eefng y\u00eau c\u1ea7u nghi\u00eam ng\u1eb7t v\u1ec1 \u0111\u1ed9 tr\u1ec5, th\u01b0\u1eddng \u0111\u01b0\u1ee3c \u0111o \u1edf ph\u00e2n v\u1ecb 99.9 (99.9th percentile) trong h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n. Do quy\u1ec1n truy c\u1eadp tr\u1ea1ng th\u00e1i \u0111\u00f3ng m\u1ed9t vai tr\u00f2 quan tr\u1ecdng trong ho\u1ea1t \u0111\u1ed9ng service n\u00ean h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef ph\u1ea3i c\u00f3 kh\u1ea3 n\u0103ng \u0111\u00e1p \u1ee9ng c\u00e1c SLA nghi\u00eam ng\u1eb7t nh\u01b0 v\u1eady (xem ph\u1ea7n 2.2 \u1edf d\u01b0\u1edbi). C\u00e1c service ph\u1ea3i c\u00f3 kh\u1ea3 n\u0103ng \u0111\u1ecbnh c\u1ea5u h\u00ecnh Dynamo sao cho ch\u00fang lu\u00f4n \u0111\u1ea1t \u0111\u01b0\u1ee3c c\u00e1c y\u00eau c\u1ea7u v\u1ec1 \u0111\u1ed9 tr\u1ec5 (latency) v\u00e0 th\u00f4ng l\u01b0\u1ee3ng (throughput). \u0110\u00e1nh \u0111\u1ed5i n\u1eb1m \u1edf hi\u1ec7u su\u1ea5t, hi\u1ec7u qu\u1ea3 chi ph\u00ed, t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 \u0111\u1ea3m b\u1ea3o t\u00ednh b\u1ec1n v\u1eefng.</p> <p>C\u00e1c gi\u1ea3 \u0111\u1ecbnh kh\u00e1c: Dynamo ch\u1ec9 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1edfi c\u00e1c service n\u1ed9i b\u1ed9 c\u1ee7a Amazon. M\u00f4i tr\u01b0\u1eddng ho\u1ea1t \u0111\u1ed9ng c\u1ee7a n\u00f3 \u0111\u01b0\u1ee3c coi l\u00e0 kh\u00f4ng th\u00f9 \u0111\u1ecbch v\u00e0 kh\u00f4ng c\u00f3 c\u00e1c y\u00eau c\u1ea7u li\u00ean quan \u0111\u1ebfn b\u1ea3o m\u1eadt nh\u01b0 x\u00e1c th\u1ef1c v\u00e0 \u1ee7y quy\u1ec1n. H\u01a1n n\u1eefa, v\u00ec m\u1ed7i service s\u1eed d\u1ee5ng phi\u00ean b\u1ea3n Dynamo ri\u00eang bi\u1ec7t n\u00ean thi\u1ebft k\u1ebf ban \u0111\u1ea7u c\u1ee7a n\u00f3 h\u01b0\u1edbng t\u1edbi quy m\u00f4 l\u00ean \u0111\u1ebfn h\u00e0ng tr\u0103m m\u00e1y ch\u1ee7 l\u01b0u tr\u1eef. Ch\u00fang ta s\u1ebd th\u1ea3o lu\u1eadn v\u1ec1 c\u00e1c h\u1ea1n ch\u1ebf v\u1ec1 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng c\u1ee7a Dynamo v\u00e0 c\u00e1c ti\u1ec7n \u00edch m\u1edf r\u1ed9ng c\u00f3 th\u1ec3 c\u00f3 li\u00ean quan \u0111\u1ebfn kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng trong c\u00e1c ph\u1ea7n sau.</p>"},{"location":"misc/papers/amazon-dynamo/#22-thoa-thuan-muc-dich-vu-service-level-agreements-sla","title":"2.2. Th\u1ecfa thu\u1eadn m\u1ee9c d\u1ecbch v\u1ee5 (Service Level Agreements - SLA)","text":"<p>\u0110\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng \u1ee9ng d\u1ee5ng c\u00f3 th\u1ec3 cung c\u1ea5p c\u00e1c t\u00ednh n\u0103ng trong th\u1eddi gian cho ph\u00e9p, m\u1ed7i v\u00e0 m\u1ecdi th\u00e0nh ph\u1ea7n c\u1ee7a n\u1ec1n t\u1ea3ng c\u1ea7n ph\u1ea3i cung c\u1ea5p c\u00e1c t\u00ednh n\u0103ng c\u1ee7a ch\u00fang trong th\u1eddi gian th\u1eadm ch\u00ed c\u00f2n ng\u1eafn h\u01a1n. Kh\u00e1ch h\u00e0ng v\u00e0 service s\u1ebd c\u00f3 m\u1ed9t th\u1ecfa thu\u1eadn m\u1ee9c d\u1ecbch v\u1ee5 (Service Level Agreement - SLA). \u0110\u00f3 l\u00e0 m\u1ed9t h\u1ee3p \u0111\u1ed3ng th\u01b0\u01a1ng l\u01b0\u1ee3ng ch\u00ednh th\u1ee9c gi\u1eefa kh\u00e1ch h\u00e0ng v\u00e0 service v\u1ec1 m\u1ed9t s\u1ed1 \u0111\u0103c \u0111i\u1ec3m li\u00ean quan \u0111\u1ebfn h\u1ec7 th\u1ed1ng, trong \u0111\u00f3 n\u1ed5i b\u1eadt nh\u1ea5t l\u00e0 ph\u00e2n b\u1ed5 t\u1ec9 l\u1ec7 request d\u1ef1 ki\u1ebfn c\u1ee7a kh\u00e1ch h\u00e0ng cho m\u1ed9t API c\u1ee5 th\u1ec3 v\u00e0 \u0111\u1ed9 tr\u1ec5 service d\u1ef1 ki\u1ebfn d\u01b0\u1edbi nh\u1eefng \u0111i\u1ec1u ki\u1ec7n \u0111\u00f3. M\u1ed9t v\u00ed d\u1ee5 v\u1ec1 SLA \u0111\u01a1n gi\u1ea3n l\u00e0 m\u1ed9t service \u0111\u1ea3m b\u1ea3o r\u1eb1ng n\u00f3 s\u1ebd tr\u1ea3 v\u1ec1 response trong v\u00f2ng 300ms v\u1edbi 99.9% request khi t\u1ea3i l\u1edbn nh\u1ea5t l\u00e0 500 request tr\u00ean gi\u00e2y.</p> <p></p> H\u00ecnh 1: Ki\u1ebfn tr\u00fac h\u01b0\u1edbng d\u1ecbch v\u1ee5 c\u1ee7a n\u1ec1n t\u1ea3ng Amazon <p>Tr\u00ean h\u1ea1 t\u1ea7ng h\u01b0\u1edbng d\u1ecbch v\u1ee5 phi t\u1eadp trung c\u1ee7a Amazon, c\u00e1c SLA \u0111\u00f3ng vai tr\u00f2 r\u1ea5t quan trong. V\u00ed d\u1ee5, m\u1ed9t request \u0111\u1ebfn m\u1ed9t trong c\u00e1c site th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed th\u01b0\u1eddng c\u1ea7n c\u00f4ng c\u1ee5 k\u1ebft xu\u1ea5t (rendering engine) trang ph\u1ea3i t\u1ea1o ra response b\u1eb1ng c\u00e1ch g\u1eedi c\u00e1c request nh\u1ecf \u0111\u1ebfn h\u01a1n 150 service kh\u00e1c. C\u00e1c service n\u00e0y th\u01b0\u1eddng ph\u1ee5 thu\u1ed9c v\u00e0o m\u1ed9t s\u1ed1 th\u00e0nh ph\u1ea7n kh\u00e1c, th\u01b0\u1eddng l\u00e0 c\u00e1c service kh\u00e1c n\u1eefa, v\u00e0 c\u0169ng kh\u00f4ng c\u00f3 g\u00ec l\u1ea1 khi ph\u1ea3i g\u1ecdi request qua nhi\u1ec1u service kh\u00e1c nhau. \u0110\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng rendering engine c\u1ee7a trang c\u00f3 th\u1ec3 duy tr\u00ec m\u1ed9t gi\u1edbi h\u1ea1n ph\u00e2n ph\u1ed1i trang r\u00f5 r\u00e0ng, m\u1ed7i service trong chu\u1ed7i c\u00e1c service n\u00e0y ph\u1ea3i tu\u00e2n theo h\u1ee3p \u0111\u1ed3ng hi\u1ec7u su\u1ea5t c\u1ee7a n\u00f3.</p> <p>H\u00ecnh 1 \u1edf tr\u00ean cho ta m\u1ed9t c\u00e1i nh\u00ecn to\u00e0n c\u1ea3nh v\u1ec1 ki\u1ebfn tr\u00fac c\u1ee7a n\u1ec1n t\u1ea3ng Amazon, n\u01a1i n\u1ed9i dung web \u0111\u1ed9ng \u0111\u01b0\u1ee3c t\u1ea1o ra b\u1eb1ng c\u00e1c th\u00e0nh ph\u1ea7n k\u1ebft xu\u1ea5t, c\u00e1c th\u00e0nh ph\u1ea7n n\u00e0y l\u1ea1i g\u1ecdi nhi\u1ec1u service kh\u00e1c nhau n\u1eefa. M\u1ed9t service c\u00f3 th\u1ec3 d\u00f9ng nhi\u1ec1u data store kh\u00e1c nhau \u0111\u1ec3 qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i c\u1ee7a ch\u00ednh n\u00f3, v\u00e0 c\u00e1c data store n\u00e0y ch\u1ec9 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c truy c\u1eadp trong ranh gi\u1edbi service c\u1ee7a service \u0111\u00f3. M\u1ed9t s\u1ed1 service ho\u1ea1t \u0111\u1ed9ng nh\u01b0 m\u1ed9t b\u1ed9 t\u1ed5ng h\u1ee3p (aggregator) b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng m\u1ed9t s\u1ed1 service kh\u00e1c \u0111\u1ec3 t\u1ea1o ra response t\u1ed5ng h\u1ee3p. Th\u00f4ng th\u01b0\u1eddng, c\u00e1c d\u1ecbch v\u1ee5 t\u1ed5ng h\u1ee3p (aggregator service) \u0111i theo h\u01b0\u1edbng stateless, m\u1eb7c d\u00f9 ch\u00fang d\u00f9ng caching r\u1ea5t nhi\u1ec1u.</p> <p>M\u1ed9t ph\u01b0\u01a1ng ph\u00e1p ph\u1ed5 bi\u1ebfn \u0111\u1ec3 t\u1ea1o m\u1ed9t SLA h\u01b0\u1edbng hi\u1ec7u su\u1ea5t l\u00e0 m\u00f4 t\u1ea3 n\u00f3 v\u1edbi c\u00e1c bi\u1ebfn th\u1ec3 trung b\u00ecnh (average), trung v\u1ecb (median) v\u00e0 k\u00ec v\u1ecdng (expected). \u1ede Amazon, ch\u00fang t\u00f4i nh\u1eadn th\u1ea5y r\u1eb1ng c\u00e1c ch\u1ec9 s\u1ed1 n\u00e0y kh\u00f4ng ph\u1ea3n \u00e1nh \u0111\u1ea7y \u0111\u1ee7 trong tr\u01b0\u1eddng h\u1ee3p m\u1ee5c ti\u00eau l\u00e0 t\u1ea1o ra m\u1ed9t h\u1ec7 th\u1ed1ng n\u01a1i t\u1ea5t c\u1ea3 c\u00e1c kh\u00e1ch h\u00e0ng \u0111\u1ec1u c\u00f3 tr\u1ea3i nghi\u1ec7m t\u1ed1t, h\u01a1n l\u00e0 ch\u1ec9 \u0111a s\u1ed1. V\u00ed d\u1ee5, n\u1ebfu s\u1eed d\u1ee5ng c\u00e1c k\u1ef9 thu\u1eadt c\u00e1 nh\u00e2n ho\u00e1 r\u1ed9ng r\u00e3i th\u00ec c\u00e1c kh\u00e1ch h\u00e0ng l\u00e2u d\u00e0i s\u1ebd y\u00eau c\u1ea7u x\u1eed l\u00fd nhi\u1ec1u h\u01a1n, \u0111i\u1ec1u n\u00e0y s\u1ebd \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn hi\u1ec7u su\u1ea5t \u1edf ph\u00e2n kh\u00fac cao c\u1ea5p. M\u1ed9t SLA d\u01b0\u1edbi d\u1ea1ng th\u1eddi gian response trung b\u00ecnh ho\u1eb7c trung v\u1ecb s\u1ebd kh\u00f4ng gi\u1ea3i quy\u1ebft \u0111\u01b0\u1ee3c v\u1ea5n \u0111\u1ec1 hi\u1ec7u su\u1ea5t c\u1ee7a ph\u00e2n kh\u00fac kh\u00e1ch h\u00e0ng quan tr\u1ecdng n\u00e0y. \u0110\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y, c\u00e1c SLA \u1edf Amazon \u0111\u01b0\u1ee3c th\u1ec3 hi\u1ec7n v\u00e0 \u0111o l\u01b0\u1eddng \u1edf ph\u00e2n v\u1ecb th\u1ee9 99.9 c\u1ee7a m\u1ee9c ph\u00e2n ph\u1ed1i. L\u1ef1a ch\u1ecdn 99.9% so v\u1edbi t\u1ec9 l\u1ec7 ph\u1ea7n tr\u0103m th\u1eadm ch\u00ed c\u00f2n cao h\u01a1n \u0111\u00e3 \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n d\u1ef1a tr\u00ean ph\u00e2n t\u00edch chi ph\u00ed - l\u1ee3i \u00edch cho th\u1ea5y r\u1eb1ng chi ph\u00ed \u0111\u00e3 t\u0103ng \u0111\u00e1ng k\u1ec3 \u0111\u1ec3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t \u0111\u1ebfn m\u1ee9c \u0111\u00f3. Kinh nghi\u1ec7m v\u1edbi c\u00e1c h\u1ec7 th\u1ed1ng live c\u1ee7a Amazon \u0111\u00e3 ch\u1ec9 ra r\u1eb1ng c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0y mang l\u1ea1i tr\u1ea3i nghi\u1ec7m t\u1ed5ng th\u1ec3 t\u1ed1t h\u01a1n so v\u1edbi nh\u1eefng h\u1ec7 th\u1ed1ng \u0111\u00e1p \u1ee9ng SLA \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh d\u1ef1a tr\u00ean c\u00e1c ch\u1ec9 s\u1ed1 trung b\u00ecnh.</p> <p>Trong b\u00e0i b\u00e1o n\u00e0y c\u00f3 nhi\u1ec1u t\u00e0i li\u1ec7u tham kh\u1ea3o v\u1ec1 ph\u00e2n v\u1ecb ph\u00e2n ph\u1ed1i th\u1ee9 99.9 n\u00e0y, \u0111i\u1ec1u n\u00e0y ph\u1ea3n \u00e1nh s\u1ef1 t\u1eadp trung kh\u00f4ng ng\u1eebng ngh\u1ec9 c\u1ee7a c\u00e1c k\u1ef9 s\u01b0 Amazon v\u00e0o hi\u1ec7u su\u1ea5t t\u1eeb g\u00f3c \u0111\u1ed9 tr\u1ea3i nghi\u1ec7m c\u1ee7a kh\u00e1ch h\u00e0ng. Nhi\u1ec1u b\u00e0i b\u00e1o kh\u00e1c b\u00e1o c\u00e1o m\u1ee9c trung b\u00ecnh, n\u00ean ch\u00fang \u0111\u01b0\u1ee3c \u0111\u01b0a v\u00e0o khi c\u00f3 \u00fd ngh\u0129a cho vi\u1ec7c so s\u00e1nh. Tuy nhi\u00ean, n\u1ed7 l\u1ef1c t\u1ed1i \u01b0u ho\u00e1 v\u00e0 k\u1ef9 thu\u1eadt c\u1ee7a Amazon kh\u00f4ng t\u1eadp trung v\u00e0o c\u00e1c gi\u00e1 tr\u1ecb trung b\u00ecnh. M\u1ed9t s\u1ed1 k\u1ef9 thu\u1eadt, ch\u1eb3ng h\u1ea1n nh\u01b0 l\u1ef1a ch\u1ecdn c\u00e2n b\u1eb1ng t\u1ea3i c\u1ee7a c\u00e1c write coordinator, ho\u00e0n to\u00e0n nh\u1eb1m m\u1ee5c \u0111\u00edch ki\u1ec3m so\u00e1t hi\u1ec7u su\u1ea5t \u1edf ph\u00e2n v\u1ecb th\u1ee9 99.9.</p> <p>C\u00e1c h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef th\u01b0\u1eddng \u0111\u00f3ng vai tr\u00f2 quan tr\u1ecdng trong vi\u1ec7c thi\u1ebft l\u1eadp SLA c\u1ee7a service, \u0111\u1eb7c bi\u1ec7t n\u1ebfu logic nghi\u1ec7p v\u1ee5 t\u01b0\u01a1ng \u0111\u1ed1i nh\u1eb9, nh\u01b0 tr\u01b0\u1eddng h\u1ee3p c\u1ee7a nhi\u1ec1u service c\u1ee7a Amazon. Qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i sau \u0111\u00f3 tr\u1edf th\u00e0nh th\u00e0nh ph\u1ea7n ch\u00ednh c\u1ee7a SLA c\u1ee7a service. M\u1ed9t trong nh\u1eefng th\u1ee9 c\u1ea7n c\u00e2n nh\u1eafc trong thi\u1ebft k\u1ebf ch\u00ednh c\u1ee7a Dynamo l\u00e0 vi\u1ec7c cung c\u1ea5p cho c\u00e1c service quy\u1ec1n ki\u1ec3m so\u00e1t c\u00e1c thu\u1ed9c t\u00ednh h\u1ec7 th\u1ed1ng c\u1ee7a ch\u00fang, nh\u01b0 t\u00ednh b\u1ec1n v\u1eefng ho\u1eb7c t\u00ednh nh\u1ea5t qu\u00e1n, \u0111\u1ed3ng th\u1eddi cho ph\u00e9p c\u00e1c service t\u1ef1 c\u00e2n b\u1eb1ng gi\u1eefa ch\u1ee9c n\u0103ng, hi\u1ec7u su\u1ea5t v\u00e0 hi\u1ec7u qu\u1ea3 chi ph\u00ed.</p>"},{"location":"misc/papers/amazon-dynamo/#23-cac-can-nhac-ve-thiet-ke","title":"2.3. C\u00e1c c\u00e2n nh\u1eafc v\u1ec1 thi\u1ebft k\u1ebf","text":"<p>C\u00e1c thu\u1eadt to\u00e1n replicate d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong c\u00e1c h\u1ec7 th\u1ed1ng th\u01b0\u01a1ng m\u1ea1i th\u01b0\u1eddng th\u1ef1c hi\u1ec7n sao ch\u00e9p \u0111\u1ed3ng b\u1ed9 (synchronous replica coordination) \u0111\u1ec3 cung c\u1ea5p giao di\u1ec7n truy c\u1eadp d\u1eef li\u1ec7u nh\u1ea5t qu\u00e1n m\u1ea1nh (strong consistency). \u0110\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c m\u1ee9c \u0111\u1ed9 nh\u1ea5t qu\u00e1n n\u00e0y, c\u00e1c thu\u1eadt to\u00e1n nh\u01b0 v\u1eady bu\u1ed9c ph\u1ea3i \u0111\u00e1nh \u0111\u1ed5i t\u00ednh kh\u1ea3 d\u1ee5ng c\u1ee7a d\u1eef li\u1ec7u trong c\u00e1c t\u00ednh hu\u1ed1ng l\u1ed7i nh\u1ea5t \u0111\u1ecbnh. V\u00ed d\u1ee5, thay v\u00ec gi\u1ea3i quy\u1ebft s\u1ef1 kh\u00f4ng ch\u1eafc ch\u1eafn v\u1ec1 t\u00ednh ch\u00ednh x\u00e1c c\u1ee7a response, d\u1eef li\u1ec7u s\u1ebd t\u1eeb ch\u1ed1i tr\u1ea3 v\u1ec1 cho \u0111\u1ebfn khi n\u00f3 ch\u1eafc ch\u1eafn \u0111\u00fang. T\u1eeb nh\u1eefng h\u1ec7 th\u1ed1ng database h\u1ed7 tr\u1ee3 replication \u0111\u1ea7u ti\u00ean, ng\u01b0\u1eddi ta bi\u1ebft r\u1eb1ng khi x\u1eed l\u00fd kh\u1ea3 n\u0103ng x\u1ea3y ra l\u1ed7i m\u1ea1ng, kh\u00f4ng th\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c \u0111\u1ed3ng th\u1eddi t\u00ednh nh\u1ea5t qu\u00e1n m\u1ea1nh v\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng d\u1eef li\u1ec7u cao [2, 11], v\u00ec c\u00e1c h\u1ec7 th\u1ed1ng v\u00e0 \u1ee9ng d\u1ee5ng nh\u01b0 v\u1eady c\u1ea7n ph\u1ea3i bi\u1ebft r\u1eb1ng c\u00e1c \u0111\u1eb7c t\u00ednh n\u00e0o c\u00f3 th\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c v\u00e0 \u0111\u1ea1t \u0111\u01b0\u1ee3c trong c\u00e1c \u0111i\u1ec1u ki\u1ec7n n\u00e0o.</p> <p>V\u1edbi c\u00e1c h\u1ec7 th\u1ed1ng d\u1ec5 x\u1ea3y ra l\u1ed7i server ho\u1eb7c m\u1ea1ng, c\u00f3 th\u1ec3 t\u0103ng t\u00ednh kh\u1ea3 d\u1ee5ng b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng c\u00e1c k\u1ef9 thu\u1eadt sao ch\u00e9p l\u1ea1c quan (optimistic replication technique), trong \u0111\u00f3 c\u00e1c thay \u0111\u1ed5i \u0111\u01b0\u1ee3c ph\u00e9p truy\u1ec1n t\u1edbi c\u00e1c replica \u1edf background v\u00e0 nh\u1eefng vi\u1ec7c \u0111\u1ed3ng th\u1eddi, kh\u00f4ng li\u00ean quan \u0111\u1ebfn nhau \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn. Th\u00e1ch th\u1ee9c \u1edf \u0111\u00e2y l\u00e0 n\u00f3 c\u00f3 th\u1ec3 d\u1eabn t\u1edbi nh\u1eefng thay \u0111\u1ed5i xung \u0111\u1ed9t v\u1edbi nhau, ch\u00fang c\u1ea7n ph\u1ea3i \u0111\u01b0\u1ee3c ph\u00e1t hi\u1ec7n v\u00e0 gi\u1ea3i quy\u1ebft. Qu\u00e1 tr\u00ecnh gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t d\u1eef li\u1ec7u c\u00f3 hai v\u1ea5n \u0111\u1ec1: khi n\u00e0o gi\u1ea3i quy\u1ebft v\u00e0 ai gi\u1ea3i quy\u1ebft. Dynamo \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 tr\u1edf th\u00e0nh m\u1ed9t data store nh\u1ea5t qu\u00e1n \u0111\u1ebfn c\u00f9ng (eventual consistency); ngh\u0129a l\u00e0 t\u1ea5t c\u1ea3 c\u00e1c c\u1eadp nh\u1eadt \u0111\u1ebfn cu\u1ed1i c\u00f9ng c\u0169ng s\u1ebd \u0111\u1ebfn t\u1ea5t c\u1ea3 c\u00e1c replica.</p> <p>M\u1ed9t \u0111i\u1ec1u quan tr\u1ecdng c\u1ea7n c\u00e2n nh\u1eafc trong thi\u1ebft k\u1ebf l\u00e0 quy\u1ebft \u0111\u1ecbnh th\u1eddi \u0111i\u1ec3m th\u1ef1c hi\u1ec7n quy tr\u00ecnh gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t trong c\u1eadp nh\u00e2t d\u1eef li\u1ec7u, t\u1ee9c l\u00e0 li\u1ec7u xung \u0111\u1ed9t c\u00f3 n\u00ean \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft trong qu\u00e1 tr\u00ecnh \u0111\u1ecdc ho\u1eb7c ghi d\u1eef li\u1ec7u hay kh\u00f4ng. Nhi\u1ec1u data store truy\u1ec1n th\u1ed1ng gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t trong qu\u00e1 tr\u00ecnh ghi v\u00e0 gi\u1eef cho vi\u1ec7c \u0111\u1ecdc \u0111\u01a1n gi\u1ea3n h\u01a1n [7]. Trong c\u00e1c h\u1ec7 th\u1ed1ng nh\u01b0 v\u1eady, vi\u1ec7c ghi c\u00f3 th\u1ec3 b\u1ecb t\u1eeb ch\u1ed1i n\u1ebfu data store kh\u00f4ng th\u1ec3 k\u1ebft n\u1ed1i \u0111\u1ebfn t\u1ea5t c\u1ea3 (ho\u1eb7c ph\u1ea7n l\u1edbn) c\u00e1c b\u1ea3n sao t\u1ea1i m\u1ed9t th\u1eddi \u0111i\u1ec3m nh\u1ea5t \u0111\u1ecbnh. M\u1eb7t kh\u00e1c, Dynamo nh\u1eafm \u0111\u1ebfn kh\u00f4ng gian thi\u1ebft k\u1ebf c\u1ee7a m\u1ed9t data store \"lu\u00f4n ghi \u0111\u01b0\u1ee3c\" (t\u1ee9c l\u00e0 m\u1ed9t c\u00e1i data store m\u00e0 vi\u1ec7c ghi d\u1eef li\u1ec7u kh\u00f4ng bao gi\u1edd b\u1ecb t\u1eeb ch\u1ed1i). \u0110\u1ed1i v\u1edbi m\u1ed9t s\u1ed1 service c\u1ee7a Amazon, vi\u1ec7c t\u1eeb ch\u1ed1i vi\u1ec7c ghi d\u1eef li\u1ec7u c\u1ee7a kh\u00e1ch c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn tr\u1ea3i nghi\u1ec7m kh\u00e1ch h\u00e0ng k\u00e9m. V\u00ed d\u1ee5, service gi\u1ecf h\u00e0ng ph\u1ea3i cho ph\u00e9p kh\u00e1ch h\u00e0ng th\u00eam v\u00e0 x\u00f3a c\u00e1c m\u1eb7t h\u00e0ng kh\u1ecfi gi\u1ecf h\u00e0ng c\u1ee7a h\u1ecd ngay c\u1ea3 khi m\u1ea1ng v\u00e0 m\u00e1y ch\u1ee7 b\u1ecb l\u1ed7i, y\u00eau c\u1ea7u n\u00e0y bu\u1ed9c ch\u00fang t\u00f4i ph\u1ea3i \u0111\u1ea9y s\u1ef1 ph\u1ee9c t\u1ea1p c\u1ee7a vi\u1ec7c gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t sang c\u00e1c l\u1ea7n \u0111\u1ecdc \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng vi\u1ec7c ghi kh\u00f4ng bao gi\u1edd b\u1ecb t\u1eeb ch\u1ed1i.</p> <p>L\u1ef1a ch\u1ecdn thi\u1ebft k\u1ebf ti\u1ebfp theo l\u00e0 ai s\u1ebd th\u1ef1c hi\u1ec7n gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t d\u1eef li\u1ec7u. \u0110i\u1ec1u n\u00e0y c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi ch\u00ednh \u1ee9ng d\u1ee5ng ho\u1eb7c data store. N\u1ebfu vi\u1ec7c gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi data store th\u00ec c\u00e1c l\u1ef1a ch\u1ecdn c\u1ee7a n\u00f3 s\u1ebd kh\u00e1 h\u1ea1n ch\u1ebf. Trong c\u00e1c tr\u01b0\u1eddng h\u1ee3p nh\u01b0 v\u1eady, data store ch\u1ec9 c\u00f3 th\u1ec3 d\u00f9ng m\u1ed9t s\u1ed1 c\u00e1ch \u0111\u01a1n gi\u1ea3n, nh\u01b0 \"l\u1ea7n ghi cu\u1ed1i th\u1eafng\" (last write wins) [22] \u0111\u1ec3 gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t c\u1eadp nh\u1eadt. M\u1eb7t kh\u00e1c, v\u00ec \u1ee9ng d\u1ee5ng nh\u1eadn th\u1ee9c \u0111\u01b0\u1ee3c l\u01b0\u1ee3c \u0111\u1ed3 d\u1eef li\u1ec7u n\u00ean n\u00f3 c\u00f3 th\u1ec3 quy\u1ebft \u0111\u1ecbnh ph\u01b0\u01a1ng ph\u00e1p gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t ph\u00f9 h\u1ee3p nh\u1ea5t v\u1edbi tr\u1ea3i nghi\u1ec7m c\u1ee7a kh\u00e1ch h\u00e0ng. V\u00ed d\u1ee5, \u1ee9ng d\u1ee5ng qu\u1ea3n l\u00fd gi\u1ecf h\u00e0ng c\u1ee7a kh\u00e1ch h\u00e0ng c\u00f3 th\u1ec3 ch\u1ecdn \"h\u1ee3p nh\u1ea5t\" c\u00e1c phi\u00ean b\u1ea3n (version) xung \u0111\u1ed9t v\u00e0 tr\u1ea3 v\u1ec1 m\u1ed9t gi\u1ecf h\u00e0ng th\u1ed1ng nh\u1ea5t. B\u1ea5t ch\u1ea5p t\u00ednh linh ho\u1ea1t n\u00e0y, m\u1ed9t s\u1ed1 nh\u00e0 ph\u00e1t tri\u1ec3n \u1ee9ng d\u1ee5ng c\u00f3 th\u1ec3 kh\u00f4ng mu\u1ed1n vi\u1ebft c\u01a1 ch\u1ebf gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t c\u1ee7a ri\u00eang h\u1ecd v\u00e0 ch\u1ecdn \u0111\u1ea9y n\u00f3 xu\u1ed1ng data store, do \u0111\u00f3, data store s\u1ebd ch\u1ecdn m\u1ed9t c\u00e1ch \u0111\u01a1n gi\u1ea3n nh\u01b0 \"last write wins\".</p> <p>M\u1ed9t s\u1ed1 nguy\u00ean t\u1eafc kh\u00e1c \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng trong thi\u1ebft k\u1ebf l\u00e0:</p> <ul> <li>Kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng t\u0103ng d\u1ea7n (Incremental scalability): Dynamo n\u00ean c\u00f3 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng quy m\u00f4 m\u1ed9t m\u00e1y ch\u1ee7 l\u01b0u tr\u1eef (node) t\u1ea1i m\u1ed9t th\u1eddi \u0111i\u1ec3m, v\u1edbi t\u00e1c \u0111\u1ed9ng t\u1ed1i thi\u1ec3u \u0111\u1ebfn ng\u01b0\u1eddi v\u1eadn h\u00e0nh h\u1ec7 th\u1ed1ng v\u00e0 ch\u00ednh h\u1ec7 th\u1ed1ng.</li> <li>T\u00ednh \u0111\u1ed1i x\u1ee9ng (Symmetry): M\u1ecdi node trong Dynamo ph\u1ea3i c\u00f3 c\u00f9ng vai tr\u00f2 v\u00e0 ch\u1ecbu tr\u00e1ch nhi\u1ec7m t\u01b0\u01a1ng t\u1ef1 nhau. Kh\u00f4ng c\u00f3 node n\u00e0o c\u00f3 vai tr\u00f2 \u0111\u1eb7c bi\u1ec7t trong vi\u1ec7c x\u1eed l\u00fd c\u00e1c request c\u1ee7a kh\u00e1ch h\u00e0ng. Theo kinh nghi\u1ec7m c\u1ee7a ch\u00fang t\u00f4i, t\u00ednh \u0111\u1ed1i x\u1ee9ng gi\u00fap \u0111\u01a1n gi\u1ea3n h\u00f3a qu\u00e1 tr\u00ecnh v\u1eadn h\u00e0nh v\u00e0 b\u1ea3o tr\u00ec h\u1ec7 th\u1ed1ng.</li> <li>T\u00ednh phi t\u1eadp trung (Decentralization): M\u1edf r\u1ed9ng c\u1ee7a t\u00ednh \u0111\u1ed1i x\u1ee9ng, thi\u1ebft k\u1ebf n\u00ean \u01b0u ti\u00ean c\u00e1c k\u1ef9 thu\u1eadt ngang h\u00e0ng phi t\u1eadp trung h\u01a1n l\u00e0 ki\u1ec3m so\u00e1t t\u1eadp trung. Tr\u01b0\u1edbc \u0111\u00e2y, vi\u1ec7c ki\u1ec3m so\u00e1t t\u1eadp trung \u0111\u00e3 d\u1eabn \u0111\u1ebfn t\u00ecnh tr\u1ea1ng ng\u1eebng ho\u1ea1t \u0111\u1ed9ng d\u1ecbch v\u1ee5 v\u00e0 m\u1ee5c ti\u00eau l\u00e0 tr\u00e1nh n\u00f3 x\u1ea3y ra. \u0110i\u1ec1u n\u00e0y d\u1eabn \u0111\u1ebfn m\u1ed9t h\u1ec7 th\u1ed1ng \u0111\u01a1n gi\u1ea3n h\u01a1n, c\u00f3 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng h\u01a1n v\u00e0 kh\u1ea3 d\u1ee5ng h\u01a1n.</li> <li>T\u00ednh kh\u00f4ng \u0111\u1ed3ng nh\u1ea5t (Heterogeneity): H\u1ec7 th\u1ed1ng c\u1ea7n c\u00f3 kh\u1ea3 n\u0103ng khai th\u00e1c t\u00ednh kh\u00f4ng \u0111\u1ed3ng nh\u1ea5t trong c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng m\u00e0 n\u00f3 ch\u1ea1y tr\u00ean \u0111\u00f3. V\u00ed d\u1ee5, vi\u1ec7c ph\u00e2n b\u1ed5 c\u00f4ng vi\u1ec7c ph\u1ea3i t\u1ef7 l\u1ec7 thu\u1eadn v\u1edbi kh\u1ea3 n\u0103ng c\u1ee7a t\u1eebng m\u00e1y ch\u1ee7. \u0110i\u1ec1u n\u00e0y r\u1ea5t c\u1ea7n thi\u1ebft trong vi\u1ec7c th\u00eam c\u00e1c node m\u1edbi c\u00f3 s\u1ee9c m\u1ea1nh t\u1ed1t h\u01a1n m\u00e0 kh\u00f4ng c\u1ea7n ph\u1ea3i n\u00e2ng c\u1ea5p t\u1ea5t c\u1ea3 c\u00e1c m\u00e1y ch\u1ee7 c\u00f9ng m\u1ed9t l\u00fac.</li> </ul>"},{"location":"misc/papers/amazon-dynamo/#3-cac-cong-viec-lien-quan","title":"3. C\u00e1c c\u00f4ng vi\u1ec7c li\u00ean quan","text":""},{"location":"misc/papers/amazon-dynamo/#31-cac-he-thong-ngang-hang-peer-to-peer-systems","title":"3.1. C\u00e1c h\u1ec7 th\u1ed1ng ngang h\u00e0ng (Peer-to-peer systems)","text":"<p>C\u00f3 m\u1ed9t s\u1ed1 h\u1ec7 th\u1ed1ng ngang h\u00e0ng (peer-to-peer - P2P) \u0111\u00e3 xem x\u00e9t v\u1ea5n \u0111\u1ec1 l\u01b0u tr\u1eef v\u00e0 ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u. Th\u1ebf h\u1ec7 h\u1ec7 th\u1ed1ng P2P \u0111\u1ea7u ti\u00ean, nh\u01b0 Freenet v\u00e0 Gnutella, ch\u1ee7 y\u1ebfu \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\u00e0m h\u1ec7 th\u1ed1ng chia s\u1ebb file. \u0110\u00e2y l\u00e0 nh\u1eefng v\u00ed d\u1ee5 v\u1ec1 m\u1ea1ng P2P kh\u00f4ng c\u00f3 c\u1ea5u tr\u00fac trong \u0111\u00f3 c\u00e1c li\u00ean k\u1ebft l\u1edbp ph\u1ee7 gi\u1eefa c\u00e1c m\u1ea1ng ngang h\u00e0ng \u0111\u01b0\u1ee3c thi\u1ebft l\u1eadp t\u00f9y \u00fd. Trong c\u00e1c m\u1ea1ng n\u00e0y, m\u1ed9t truy v\u1ea5n t\u00ecm ki\u1ebfm th\u01b0\u1eddng \u0111i kh\u1eafp m\u1ea1ng \u0111\u1ec3 t\u00ecm c\u00e0ng nhi\u1ec1u m\u00e1y ch\u1ee7 ngang h\u00e0ng chia s\u1ebb d\u1eef li\u1ec7u c\u00e0ng t\u1ed1t. C\u00e1c h\u1ec7 th\u1ed1ng P2P \u0111\u00e3 ph\u00e1t tri\u1ec3n sang th\u1ebf h\u1ec7 ti\u1ebfp theo, tr\u1edf th\u00e0nh c\u00e1i \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 m\u1ea1ng P2P c\u00f3 c\u1ea5u tr\u00fac. C\u00e1c m\u1ea1ng n\u00e0y s\u1eed d\u1ee5ng giao th\u1ee9c nh\u1ea5t qu\u00e1n to\u00e0n c\u1ea7u \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng b\u1ea5t k\u1ef3 node n\u00e0o c\u0169ng c\u00f3 th\u1ec3 \u0111\u1ecbnh tuy\u1ebfn truy v\u1ea5n t\u00ecm ki\u1ebfm \u0111\u1ebfn m\u1ed9t s\u1ed1 thi\u1ebft b\u1ecb ngang h\u00e0ng c\u00f3 d\u1eef li\u1ec7u mong mu\u1ed1n m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3. C\u00e1c h\u1ec7 th\u1ed1ng nh\u01b0 Pastry [16] v\u00e0 Chord [20] s\u1eed d\u1ee5ng c\u01a1 ch\u1ebf \u0111\u1ecbnh tuy\u1ebfn \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng c\u00e1c truy v\u1ea5n c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c tr\u1ea3 l\u1eddi trong m\u1ed9t s\u1ed1 b\u01b0\u1edbc nh\u1ea3y gi\u1edbi h\u1ea1n. \u0110\u1ec3 gi\u1ea3m \u0111\u1ed9 tr\u1ec5 b\u1ed5 sung do \u0111\u1ecbnh tuy\u1ebfn nhi\u1ec1u b\u01b0\u1edbc t\u1ea1o ra, m\u1ed9t s\u1ed1 h\u1ec7 th\u1ed1ng P2P (v\u00ed d\u1ee5 nh\u01b0 [14]) s\u1eed d\u1ee5ng \u0111\u1ecbnh tuy\u1ebfn O(1) trong \u0111\u00f3 m\u1ed7i thi\u1ebft b\u1ecb ngang h\u00e0ng duy tr\u00ec \u0111\u1ee7 th\u00f4ng tin \u0111\u1ecbnh tuy\u1ebfn c\u1ee5c b\u1ed9 \u0111\u1ec3 n\u00f3 c\u00f3 th\u1ec3 \u0111\u1ecbnh tuy\u1ebfn c\u00e1c y\u00eau c\u1ea7u (\u0111\u1ec3 truy c\u1eadp m\u1ed9t d\u1eef li\u1ec7u n\u00e0o \u0111\u00f3) t\u1edbi thi\u1ebft b\u1ecb ngang h\u00e0ng th\u00edch h\u1ee3p trong m\u1ed9t s\u1ed1 b\u01b0\u1edbc nh\u1ea3y c\u1ed1 \u0111\u1ecbnh.</p> <p>Nhi\u1ec1u h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef nh\u01b0 Oceanstore [9] v\u00e0 PAST [17] \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng d\u1ef1a tr\u00ean c\u00e1c l\u1edbp ph\u1ee7 \u0111\u1ecbnh tuy\u1ebfn n\u00e0y. Oceanstore cung c\u1ea5p d\u1ecbch v\u1ee5 l\u01b0u tr\u1eef li\u00ean t\u1ee5c, mang t\u00ednh giao d\u1ecbch, to\u00e0n c\u1ea7u, h\u1ed7 tr\u1ee3 c\u1eadp nh\u1eadt tu\u1ea7n t\u1ef1 tr\u00ean d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c replicate r\u1ed9ng r\u00e3i. \u0110\u1ec3 cho ph\u00e9p c\u1eadp nh\u1eadt \u0111\u1ed3ng th\u1eddi trong khi tr\u00e1nh \u0111\u01b0\u1ee3c nhi\u1ec1u v\u1ea5n \u0111\u1ec1 c\u1ed1 h\u1eefu v\u1edbi kh\u00f3a di\u1ec7n r\u1ed9ng, n\u00f3 s\u1eed d\u1ee5ng m\u00f4 h\u00ecnh c\u1eadp nh\u1eadt d\u1ef1a tr\u00ean gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t. Vi\u1ec7c gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t \u0111\u00e3 \u0111\u01b0\u1ee3c n\u00f3i \u0111\u1ebfn trong [21] \u0111\u1ec3 gi\u1ea3m s\u1ed1 l\u01b0\u1ee3ng transaction b\u1ecb h\u1ee7y b\u1ecf. Oceanstore gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t b\u1eb1ng c\u00e1ch x\u1eed l\u00fd m\u1ed9t lo\u1ea1t c\u00e1c c\u1eadp nh\u1eadt, ch\u1ecdn t\u1ed5ng th\u1ee9 t\u1ef1 (total order) trong s\u1ed1 ch\u00fang v\u00e0 sau \u0111\u00f3 \u00e1p d\u1ee5ng ch\u00fang m\u1ed9t c\u00e1ch nguy\u00ean t\u1eed (atomically) theo th\u1ee9 t\u1ef1 \u0111\u00f3. N\u00f3 \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng cho m\u00f4i tr\u01b0\u1eddng n\u01a1i d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c sao ch\u00e9p tr\u00ean c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng kh\u00f4ng \u0111\u00e1ng tin c\u1eady. \u0110\u1ec3 so s\u00e1nh, PAST cung c\u1ea5p m\u1ed9t l\u1edbp tr\u1eebu t\u01b0\u1ee3ng \u0111\u01a1n gi\u1ea3n tr\u00ean Pastry cho c\u00e1c object b\u1ec1n v\u1eefng v\u00e0 kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i. N\u00f3 gi\u1ea3 \u0111\u1ecbnh r\u1eb1ng \u1ee9ng d\u1ee5ng c\u00f3 th\u1ec3 x\u00e2y d\u1ef1ng ng\u1eef ngh\u0129a l\u01b0u tr\u1eef c\u1ea7n thi\u1ebft (ch\u1eb3ng h\u1ea1n nh\u01b0 c\u00e1c file c\u00f3 th\u1ec3 thay \u0111\u1ed5i) tr\u00ean \u0111\u00f3.</p>"},{"location":"misc/papers/amazon-dynamo/#32-cac-database-va-he-thong-file-phan-tan","title":"3.2. C\u00e1c database v\u00e0 h\u1ec7 th\u1ed1ng file ph\u00e2n t\u00e1n","text":"<p>Ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u h\u01b0\u1edbng t\u1edbi hi\u1ec7u su\u1ea5t, t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 \u0111\u1ed9 b\u1ec1n \u0111\u00e3 \u0111\u01b0\u1ee3c nghi\u00ean c\u1ee9u r\u1ed9ng r\u00e3i trong c\u1ed9ng \u0111\u1ed3ng h\u1ec7 th\u1ed1ng file v\u00e0 h\u1ec7 th\u1ed1ng database. So v\u1edbi c\u00e1c h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef P2P ch\u1ec9 h\u1ed7 tr\u1ee3 c\u00e1c namespace ph\u1eb3ng, c\u00e1c h\u1ec7 th\u1ed1ng file ph\u00e2n t\u00e1n th\u01b0\u1eddng h\u1ed7 tr\u1ee3 c\u00e1c namespace ph\u00e2n c\u1ea5p. C\u00e1c h\u1ec7 th\u1ed1ng nh\u01b0 Ficus [15] v\u00e0 Coda [19] sao ch\u00e9p c\u00e1c file \u0111\u1ec3 c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao nh\u01b0ng ph\u1ea3i \u0111\u00e1nh \u0111\u1ed5i b\u1eb1ng t\u00ednh nh\u1ea5t qu\u00e1n. Xung \u0111\u1ed9t c\u1eadp nh\u1eadt th\u01b0\u1eddng \u0111\u01b0\u1ee3c qu\u1ea3n l\u00fd b\u1eb1ng c\u00e1c h\u00e0m gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t chuy\u00ean bi\u1ec7t. H\u1ec7 th\u1ed1ng Farsite [1] l\u00e0 m\u1ed9t h\u1ec7 th\u1ed1ng file ph\u00e2n t\u00e1n kh\u00f4ng s\u1eed d\u1ee5ng b\u1ea5t k\u1ef3 m\u00e1y ch\u1ee7 t\u1eadp trung n\u00e0o nh\u01b0 NFS (Network File System). Farsite \u0111\u1ea1t \u0111\u01b0\u1ee3c t\u00ednh kh\u1ea3 d\u1ee5ng cao v\u00e0 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng b\u1eb1ng replication. Google File System (GFS) [6] l\u00e0 m\u1ed9t h\u1ec7 th\u1ed1ng file ph\u00e2n t\u00e1n kh\u00e1c \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng \u0111\u1ec3 l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i c\u00e1c \u1ee9ng d\u1ee5ng n\u1ed9i b\u1ed9 c\u1ee7a Google. GFS s\u1eed d\u1ee5ng thi\u1ebft k\u1ebf \u0111\u01a1n gi\u1ea3n v\u1edbi m\u1ed9t server ch\u00ednh duy nh\u1ea5t \u0111\u1ec3 l\u01b0u tr\u1eef to\u00e0n b\u1ed9 metadata v\u00e0 n\u01a1i d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c chia th\u00e0nh c\u00e1c chunk (ph\u1ea7n) v\u00e0 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong c\u00e1c chunkserver. Bayou l\u00e0 m\u1ed9t h\u1ec7 th\u1ed1ng database quan h\u1ec7 ph\u00e2n t\u00e1n c\u00f3 c\u00e1c thao t\u00e1c khi b\u1ecb ng\u1eaft k\u1ebft n\u1ed1i v\u00e0 cung c\u1ea5p t\u00ednh nh\u1ea5t qu\u00e1n \u0111\u1ebfn c\u00f9ng c\u1ee7a d\u1eef li\u1ec7u [21].</p> <p>Trong s\u1ed1 c\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y, Bayou, Coda v\u00e0 Ficus c\u00f3 c\u00e1c thao t\u00e1c khi b\u1ecb ng\u1eaft k\u1ebft n\u1ed1i v\u00e0 c\u00f3 kh\u1ea3 n\u0103ng ph\u1ee5c h\u1ed3i tr\u01b0\u1edbc c\u00e1c s\u1ef1 c\u1ed1 nh\u01b0 ph\u00e2n v\u00f9ng m\u1ea1ng v\u00e0 m\u1ea5t \u0111i\u1ec7n. C\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y kh\u00e1c nhau v\u1ec1 th\u1ee7 t\u1ee5c gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t. Ch\u1eb3ng h\u1ea1n, Coda v\u00e0 Ficus th\u1ef1c hi\u1ec7n gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t \u1edf c\u1ea5p h\u1ec7 th\u1ed1ng v\u00e0 Bayou cho ph\u00e9p gi\u1ea3i quy\u1ebft \u1edf c\u1ea5p \u1ee9ng d\u1ee5ng. Tuy nhi\u00ean, t\u1ea5t c\u1ea3 ch\u00fang \u0111\u1ec1u \u0111\u1ea3m b\u1ea3o eventual consistency. T\u01b0\u01a1ng t\u1ef1 nh\u01b0 c\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y, Dynamo cho ph\u00e9p ti\u1ebfp t\u1ee5c \u0111\u1ecdc v\u00e0 ghi ngay c\u1ea3 khi ph\u00e2n v\u00f9ng m\u1ea1ng v\u00e0 gi\u1ea3i quy\u1ebft c\u00e1c xung \u0111\u1ed9t b\u1eb1ng c\u00e1c c\u01a1 ch\u1ebf gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t kh\u00e1c nhau. C\u00e1c h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef kh\u1ed1i ph\u00e2n t\u00e1n nh\u01b0 FAB [18] chia c\u00e1c object c\u00f3 k\u00edch th\u01b0\u1edbc l\u1edbn th\u00e0nh c\u00e1c block nh\u1ecf h\u01a1n v\u00e0 l\u01b0u tr\u1eef t\u1eebng block theo c\u00e1ch c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao. So v\u1edbi c\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y, kho l\u01b0u tr\u1eef key-value ph\u00f9 h\u1ee3p h\u01a1n trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y v\u00ec: (a) n\u00f3 nh\u1eb1m m\u1ee5c \u0111\u00edch l\u01b0u tr\u1eef c\u00e1c object t\u01b0\u01a1ng \u0111\u1ed1i nh\u1ecf (k\u00edch th\u01b0\u1edbc &lt; 1MB) v\u00e0 (b) kho l\u01b0u tr\u1eef key-value d\u1ec5 d\u00e0ng \u0111\u1ecbnh c\u1ea5u h\u00ecnh h\u01a1n tr\u00ean m\u1ed7i h\u1ec7 th\u1ed1ng. Antiquity l\u00e0 m\u1ed9t h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef ph\u00e2n t\u00e1n di\u1ec7n r\u1ed9ng \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 x\u1eed l\u00fd nhi\u1ec1u l\u1ed7i server [23]. N\u00f3 s\u1eed d\u1ee5ng secure log \u0111\u1ec3 b\u1ea3o to\u00e0n t\u00ednh to\u00e0n v\u1eb9n c\u1ee7a d\u1eef li\u1ec7u, replicate t\u1eebng log tr\u00ean nhi\u1ec1u server \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o \u0111\u1ed9 b\u1ec1n v\u00e0 s\u1eed d\u1ee5ng c\u00e1c giao th\u1ee9c ch\u1ecbu l\u1ed7i Byzantine \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o t\u00ednh nh\u1ea5t qu\u00e1n c\u1ee7a d\u1eef li\u1ec7u. Ng\u01b0\u1ee3c l\u1ea1i v\u1edbi Antiquity, Dynamo kh\u00f4ng t\u1eadp trung v\u00e0o v\u1ea5n \u0111\u1ec1 to\u00e0n v\u1eb9n v\u00e0 b\u1ea3o m\u1eadt d\u1eef li\u1ec7u m\u00e0 \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng cho m\u1ed9t m\u00f4i tr\u01b0\u1eddng \u0111\u00e1ng tin c\u1eady. Bigtable l\u00e0 m\u1ed9t h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef ph\u00e2n t\u00e1n \u0111\u1ec3 qu\u1ea3n l\u00fd d\u1eef li\u1ec7u c\u00f3 c\u1ea5u tr\u00fac. N\u00f3 duy tr\u00ec m\u1ed9t map th\u01b0a, \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp, \u0111a chi\u1ec1u v\u00e0 cho ph\u00e9p c\u00e1c \u1ee9ng d\u1ee5ng truy c\u1eadp d\u1eef li\u1ec7u c\u1ee7a ch\u00fang b\u1eb1ng nhi\u1ec1u thu\u1ed9c t\u00ednh [2]. So v\u1edbi Bigtable, Dynamo nh\u1eafm \u0111\u1ebfn c\u00e1c \u1ee9ng d\u1ee5ng ch\u1ec9 y\u00eau c\u1ea7u quy\u1ec1n truy c\u1eadp key-value v\u1edbi tr\u1ecdng t\u00e2m ch\u00ednh l\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng cao, n\u01a1i c\u00e1c b\u1ea3n c\u1eadp nh\u1eadt kh\u00f4ng b\u1ecb t\u1eeb ch\u1ed1i ngay c\u1ea3 khi c\u00f3 ph\u00e2n v\u00f9ng m\u1ea1ng ho\u1eb7c l\u1ed7i server.</p> <p></p> H\u00ecnh 2: Ph\u00e2n v\u00f9ng v\u00e0 sao ch\u00e9p kho\u00e1 tr\u00ean v\u00f2ng Dynamo <p>C\u00e1c h\u1ec7 th\u1ed1ng database quan h\u1ec7 truy\u1ec1n th\u1ed1ng s\u1eed d\u1ee5ng sao ch\u00e9p th\u00ec t\u1eadp trung v\u00e0o v\u1ea5n \u0111\u1ec1 \u0111\u1ea3m b\u1ea3o t\u00ednh nh\u1ea5t qu\u00e1n m\u1ea1nh cho d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c sao ch\u00e9p. M\u1eb7c d\u00f9 t\u00ednh nh\u1ea5t qu\u00e1n m\u1ea1nh cung c\u1ea5p cho ng\u01b0\u1eddi vi\u1ebft \u1ee9ng d\u1ee5ng m\u1ed9t m\u00f4 h\u00ecnh l\u1eadp tr\u00ecnh thu\u1eadn ti\u1ec7n, nh\u01b0ng c\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y b\u1ecb h\u1ea1n ch\u1ebf v\u1ec1 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng v\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng [7]. C\u00e1c h\u1ec7 th\u1ed1ng n\u00e0y kh\u00f4ng c\u00f3 kh\u1ea3 n\u0103ng x\u1eed l\u00fd c\u00e1c ph\u00e2n v\u00f9ng m\u1ea1ng v\u00ec ch\u00fang th\u01b0\u1eddng cung c\u1ea5p s\u1ef1 \u0111\u1ea3m b\u1ea3o t\u00ednh nh\u1ea5t qu\u00e1n m\u1ea1nh.</p>"},{"location":"misc/papers/amazon-dynamo/#33-thao-luan","title":"3.3. Th\u1ea3o lu\u1eadn","text":"<p>Dynamo kh\u00e1c v\u1edbi c\u00e1c h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef phi t\u1eadp trung n\u00f3i tr\u00ean v\u1ec1 c\u00e1c y\u00eau c\u1ea7u c\u1ee7a n\u00f3. \u0110\u1ea7u ti\u00ean, Dynamo ch\u1ee7 y\u1ebfu nh\u1eafm m\u1ee5c ti\u00eau v\u00e0o c\u00e1c \u1ee9ng d\u1ee5ng c\u1ea7n data store \u201clu\u00f4n ghi \u0111\u01b0\u1ee3c\u201d, n\u01a1i kh\u00f4ng c\u00f3 b\u1ea3n c\u1eadp nh\u1eadt n\u00e0o b\u1ecb t\u1eeb ch\u1ed1i do l\u1ed7i ho\u1eb7c ghi \u0111\u1ed3ng th\u1eddi. \u0110\u00e2y l\u00e0 m\u1ed9t y\u00eau c\u1ea7u quan tr\u1ecdng \u0111\u1ed1i v\u1edbi nhi\u1ec1u \u1ee9ng d\u1ee5ng c\u1ee7a Amazon. Th\u1ee9 hai, nh\u01b0 \u0111\u00e3 nh\u1eafc tr\u01b0\u1edbc \u0111\u00f3, Dynamo \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng cho c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng trong m\u1ed9t domain qu\u1ea3n tr\u1ecb duy nh\u1ea5t, n\u01a1i t\u1ea5t c\u1ea3 c\u00e1c node \u0111\u01b0\u1ee3c coi l\u00e0 \u0111\u00e1ng tin c\u1eady. Th\u1ee9 ba, c\u00e1c \u1ee9ng d\u1ee5ng s\u1eed d\u1ee5ng Dynamo kh\u00f4ng y\u00eau c\u1ea7u h\u1ed7 tr\u1ee3 namespace ph\u00e2n c\u1ea5p (chu\u1ea9n m\u1ef1c trong nhi\u1ec1u h\u1ec7 th\u1ed1ng file) ho\u1eb7c l\u01b0\u1ee3c \u0111\u1ed3 quan h\u1ec7 ph\u1ee9c t\u1ea1p (\u0111\u01b0\u1ee3c database truy\u1ec1n th\u1ed1ng h\u1ed7 tr\u1ee3). Th\u1ee9 t\u01b0, Dynamo \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng cho c\u00e1c \u1ee9ng d\u1ee5ng nh\u1ea1y c\u1ea3m v\u1edbi \u0111\u1ed9 tr\u1ec5, y\u00eau c\u1ea7u th\u1ef1c hi\u1ec7n \u00edt nh\u1ea5t 99,9% thao t\u00e1c \u0111\u1ecdc v\u00e0 ghi trong v\u00f2ng v\u00e0i tr\u0103m mili gi\u00e2y. \u0110\u1ec3 \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u nghi\u00eam ng\u1eb7t v\u1ec1 \u0111\u1ed9 tr\u1ec5 n\u00e0y, ch\u00fang t\u00f4i b\u1eaft bu\u1ed9c ph\u1ea3i tr\u00e1nh \u0111\u1ecbnh tuy\u1ebfn c\u00e1c request qua nhi\u1ec1u node (\u0111\u00e2y l\u00e0 thi\u1ebft k\u1ebf \u0111i\u1ec3n h\u00ecnh \u0111\u01b0\u1ee3c m\u1ed9t s\u1ed1 h\u1ec7 th\u1ed1ng hash table ph\u00e2n t\u00e1n nh\u01b0 Chord v\u00e0 Pastry \u00e1p d\u1ee5ng). \u0110i\u1ec1u n\u00e0y l\u00e0 do \u0111\u1ecbnh tuy\u1ebfn nhi\u1ec1u b\u01b0\u1edbc l\u00e0m t\u0103ng s\u1ef1 thay \u0111\u1ed5i v\u1ec1 th\u1eddi gian response, do \u0111\u00f3 l\u00e0m t\u0103ng \u0111\u1ed9 tr\u1ec5 \u1edf ph\u00e2n v\u1ecb cao h\u01a1n. Dynamo c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c m\u00f4 t\u1ea3 nh\u01b0 m\u1ed9t DHT (Distributed hash table - b\u1ea3ng b\u0103m ph\u00e2n t\u00e1n) zero-hop, trong \u0111\u00f3 m\u1ed7i node duy tr\u00ec \u0111\u1ee7 th\u00f4ng tin \u0111\u1ecbnh tuy\u1ebfn c\u1ee5c b\u1ed9 \u0111\u1ec3 \u0111\u1ecbnh tuy\u1ebfn tr\u1ef1c ti\u1ebfp request \u0111\u1ebfn node th\u00edch h\u1ee3p.</p>"},{"location":"misc/papers/amazon-dynamo/#4-kien-truc-he-thong","title":"4. Ki\u1ebfn tr\u00fac h\u1ec7 th\u1ed1ng","text":"<p>Ki\u1ebfn tr\u00fac c\u1ee7a m\u1ed9t h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef ho\u1ea1t \u0111\u1ed9ng trong m\u1ed9t m\u00f4i tr\u01b0\u1eddng th\u1ef1c t\u1ebf kh\u00e1 ph\u1ee9c t\u1ea1p. Ngo\u00e0i th\u00e0nh ph\u1ea7n l\u01b0u tr\u1eef d\u1eef li\u1ec7u th\u1ef1c t\u1ebf, h\u1ec7 th\u1ed1ng c\u1ea7n c\u00f3 c\u00e1c gi\u1ea3i ph\u00e1p m\u1ea1nh m\u1ebd v\u00e0 c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng \u0111\u1ec3 c\u00e2n b\u1eb1ng t\u1ea3i, ph\u00e1t hi\u1ec7n v\u00e0 kh\u1eafc ph\u1ee5c l\u1ed7i, x\u1eed l\u00fd qu\u00e1 t\u1ea3i, \u0111\u1ed3ng b\u1ed9 ho\u00e1 c\u00e1c replica, chuy\u1ec3n tr\u1ea1ng th\u00e1i, l\u1eadp l\u1ecbch c\u00f4ng vi\u1ec7c, s\u1eafp x\u1ebfp v\u00e0 \u0111\u1ecbnh tuy\u1ebfn request, c\u1ea3nh b\u00e1o v\u00e0 gi\u00e1m s\u00e1t h\u1ec7 th\u1ed1ng, qu\u1ea3n l\u00fd c\u1ea5u h\u00ecnh. Ch\u00fang ta s\u1ebd kh\u00f4ng \u0111i v\u00e0o m\u00f4 t\u1ea3 chi ti\u1ebft t\u1eebng gi\u1ea3i ph\u00e1p, m\u00e0 ch\u1ec9 t\u1eadp trung v\u00e0o c\u00e1c k\u1ef9 thu\u1eadt h\u1ec7 th\u1ed1ng ph\u00e2n t\u00e1n c\u1ed1t l\u00f5i \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong Dynamo: ph\u00e2n v\u00f9ng (partitioning), sao ch\u00e9p (replication), phi\u00ean b\u1ea3n h\u00f3a d\u1eef li\u1ec7u (data versioning), giao th\u1ee9c th\u00e0nh vi\u00ean (membership) x\u1eed l\u00fd l\u1ed7i (failure handling) v\u00e0 m\u1edf r\u1ed9ng quy m\u00f4 (scaling).</p> V\u1ea5n \u0111\u1ec1 K\u1ef9 thu\u1eadt L\u1ee3i th\u1ebf Partitioning Consistent hashing Kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng gia t\u0103ng Kh\u1ea3 n\u0103ng ghi d\u1eef li\u1ec7u c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao Vector clocks c\u00f3 \u0111\u1ed1i chi\u1ebfu trong qu\u00e1 tr\u00ecnh \u0111\u1ecdc K\u00edch th\u01b0\u1edbc version \u0111\u1ed9c l\u1eadp v\u1edbi t\u1ed1c \u0111\u1ed9 update X\u1eed l\u00fd l\u1ed7i t\u1ea1m th\u1eddi Sloppy Quorum v\u00e0 Hinted handoff B\u1ea3o \u0111\u1ea3m t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 \u0111\u1ed9 b\u1ec1n cao khi m\u1ed9t s\u1ed1 replica b\u1ecb ch\u1ebft H\u1ed3i ph\u1ee5c sau c\u00e1c l\u1ed7i dai d\u1eb3ng Ph\u1ea3n entropy v\u1edbi c\u00e2y Merkle \u0110\u1ed3ng b\u1ed9 c\u00e1c replica ph\u00e2n k\u1ef3 \u1edf background Giao th\u1ee9c th\u00e0nh vi\u00ean v\u00e0 ph\u00e1t hi\u1ec7n l\u1ed7i Giao th\u1ee9c th\u00e0nh vi\u00ean v\u00e0 ph\u00e1t hi\u1ec7n l\u1ed7i d\u1ef1a tr\u00ean gossip B\u1ea3o \u0111\u1ea3m t\u00ednh \u0111\u1ed1i x\u1ee9ng v\u00e0 tr\u00e1nh c\u00f3 node \u0111\u1eb7c bi\u1ec7t \u0111\u1ec3 l\u01b0u membership v\u00e0 th\u00f4ng tin tr\u1ea1ng th\u00e1i c\u00e1c node kh\u00e1c <p>B\u1ea3ng 1 tr\u00ean \u0111\u00e2y gi\u1edbi thi\u1ec7u t\u00f3m t\u1eaft danh s\u00e1ch c\u00e1c k\u1ef9 thu\u1eadt m\u00e0 Dynamo s\u1eed d\u1ee5ng c\u00f9ng l\u1ee3i th\u1ebf t\u01b0\u01a1ng \u1ee9ng c\u1ee7a m\u1ed7i k\u1ef9 thu\u1eadt.</p>"},{"location":"misc/papers/amazon-dynamo/#41-giao-dien-he-thong","title":"4.1. Giao di\u1ec7n h\u1ec7 th\u1ed1ng","text":"<p>Dynamo l\u01b0u tr\u1eef c\u00e1c object (\u0111\u1ed1i t\u01b0\u1ee3ng) li\u00ean k\u1ebft v\u1edbi m\u1ed9t key (kho\u00e1) th\u00f4ng qua m\u1ed9t giao di\u1ec7n \u0111\u01a1n gi\u1ea3n; n\u00f3 g\u1ed3m hai thao t\u00e1c: <code>get()</code> v\u00e0 <code>put()</code>. Thao t\u00e1c <code>get(key)</code> \u0111\u1ecbnh v\u1ecb c\u00e1c replica ch\u1ee9a object li\u00ean k\u1ebft v\u1edbi key trong h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef v\u00e0 tr\u1ea3 v\u1ec1 m\u1ed9t object duy nh\u1ea5t ho\u1eb7c m\u1ea3ng c\u00e1c object v\u1edbi version xung \u0111\u1ed9t c\u00f9ng v\u1edbi m\u1ed9t <code>context</code>. Thao t\u00e1c <code>put(key, context, object)</code> s\u1ebd x\u00e1c \u0111\u1ecbnh c\u00e1c replica n\u01a1i m\u00e0 object n\u00ean \u0111\u01b0\u1ee3c cho v\u00e0o d\u1ef1a tr\u00ean key li\u00ean k\u1ebft, v\u00e0 ghi c\u00e1c object v\u00e0o c\u00e1c replica \u0111\u00f3 tr\u00ean \u0111\u0129a. <code>context</code> s\u1ebd m\u00e3 ho\u00e1 metadata h\u1ec7 th\u1ed1ng v\u1ec1 object m\u00e0 kh\u00f4ng ti\u1ebft l\u1ed9 v\u1edbi caller v\u00e0 n\u00f3 ch\u1ee9a m\u1ed9t s\u1ed1 th\u00f4ng tin kh\u00e1c nh\u01b0 version c\u1ee7a object. Th\u00f4ng tin trong <code>context</code> \u0111\u01b0\u1ee3c l\u01b0u c\u00f9ng v\u1edbi object n\u00ean n\u00f3 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c h\u1ec7 th\u1ed1ng s\u1eed d\u1ee5ng \u0111\u1ec3 ki\u1ec3m tra t\u00ednh \u0111\u00fang \u0111\u1eafn c\u1ee7a object trong put request.</p> <p>Dynamo coi key v\u00e0 object trong put request l\u00e0 m\u1ed9t m\u1ea3ng bytes th\u00f4ng th\u01b0\u1eddng. N\u00f3 s\u1ebd d\u00f9ng MD5 hash l\u00ean key \u0111\u1ec3 t\u1ea1o ra m\u1ed9t identifier 128 bit, identifier n\u00e0y s\u1ebd \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh node ch\u1ecbu tr\u00e1ch nhi\u1ec7m l\u01b0u d\u1eef li\u1ec7u d\u1ef1a tr\u00ean key n\u00e0y.</p>"},{"location":"misc/papers/amazon-dynamo/#42-thuat-toan-phan-vung","title":"4.2. Thu\u1eadt to\u00e1n ph\u00e2n v\u00f9ng","text":"<p>M\u1ed9t trong nh\u1eefng y\u00eau c\u1ea7u ch\u00ednh trong thi\u1ebft k\u1ebf c\u1ee7a Dynamo l\u00e0 n\u00f3 ph\u1ea3i c\u00f3 kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng gia t\u0103ng. \u0110i\u1ec1u n\u00e0y y\u00eau c\u1ea7u m\u1ed9t c\u01a1 ch\u1ebf ph\u00e2n v\u00f9ng data t\u1ef1 \u0111\u1ed9ng tr\u00ean m\u1ed9t t\u1eadp c\u00e1c node (m\u00e1y ch\u1ee7 l\u01b0u tr\u1eef) trong h\u1ec7 th\u1ed1ng. L\u01b0\u1ee3c \u0111\u1ed3 ph\u00e2n v\u00f9ng c\u1ee7a Dynamo d\u1ef1a tr\u00ean consistent hashing \u0111\u1ec3 ph\u00e2n ph\u1ed1i t\u1ea3i tr\u00ean nhi\u1ec1u m\u00e1y ch\u1ee7 l\u01b0u tr\u1eef. Trong consistent hashing [10], ph\u1ea1m vi output c\u1ee7a h\u00e0m hash \u0111\u01b0\u1ee3c xem l\u00e0 m\u1ed9t kh\u00f4ng gian v\u00f2ng c\u1ed1 \u0111\u1ecbnh hay ng\u1eafn g\u1ecdn l\u00e0 \"v\u00f2ng\" (ngh\u0129a l\u00e0 x\u1ebfp c\u00e1c gi\u00e1 tr\u1ecb hash tr\u00ean m\u1ed9t h\u00ecnh tr\u00f2n, gi\u00e1 tr\u1ecb hash l\u1edbn nh\u1ea5t v\u00e0 nh\u1ecf nh\u1ea5t li\u1ec1n k\u1ec1 v\u1edbi nhau). M\u1ed7i node trong h\u1ec7 th\u1ed1ng \u0111\u01b0\u1ee3c g\u00e1n m\u1ed9t gi\u00e1 tr\u1ecb ng\u1eabu nhi\u00ean trong kh\u00f4ng gian n\u00e0y, \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 \"v\u1ecb tr\u00ed\" tr\u00ean v\u00f2ng. M\u1ed7i data item (\u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh b\u1edfi m\u1ed9t key) \u0111\u01b0\u1ee3c g\u00e1n cho m\u1ed9t node b\u1eb1ng c\u00e1ch hash key c\u1ee7a data item \u0111\u00f3 \u0111\u1ec3 cho ra v\u1ecb tr\u00ed tr\u00ean v\u00f2ng, sau \u0111\u00f3 \u0111i theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3 \u0111\u1ec3 t\u00ecm node \u0111\u1ea7u ti\u00ean v\u1edbi v\u1ecb tr\u00ed l\u1edbn h\u01a1n v\u1ecb tr\u00ed c\u1ee7a item. V\u00ec th\u1ebf, m\u1ed7i node s\u1ebd ch\u1ecbu tr\u00e1ch nhi\u1ec7m cho m\u1ed9t v\u00f9ng tr\u00ean v\u00f2ng gi\u1eefa node \u0111\u00f3 v\u00e0 node ngay tr\u01b0\u1edbc n\u00f3 tr\u00ean v\u00f2ng. L\u1ee3i th\u1ebf c\u01a1 b\u1ea3n c\u1ee7a consistent hashing l\u00e0 khi th\u00eam m\u1ed9t node m\u1edbi v\u00e0o, n\u00f3 ch\u1ec9 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn c\u00e1c node li\u1ec1n k\u1ec1 v\u1edbi n\u00f3 tr\u00ean v\u00f2ng, m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn c\u00e1c node c\u00f2n l\u1ea1i.</p> <p>Thu\u1eadt to\u00e1n consistent hashing c\u01a1 b\u1ea3n c\u00f3 m\u1ed9t s\u1ed1 v\u1ea5n \u0111\u1ec1. Th\u1ee9 nh\u1ea5t, vi\u1ec7c g\u00e1n ng\u1eabu nhi\u00ean v\u1ecb tr\u00ed c\u1ee7a m\u1ed7i node tr\u00ean v\u00f2ng s\u1ebd d\u1eabn \u0111\u1ebfn ph\u00e2n b\u1ed1 data v\u00e0 t\u1ea3i kh\u00f4ng \u0111\u1ed3ng \u0111\u1ec1u. Th\u1ee9 hai, thu\u1eadt to\u00e1n c\u01a1 b\u1ea3n n\u00e0y kh\u00f4ng t\u00ednh \u0111\u1ebfn t\u00ednh kh\u00f4ng \u0111\u1ed3ng nh\u1ea5t v\u1ec1 hi\u1ec7u su\u1ea5t c\u1ee7a c\u00e1c node. \u0110\u1ec3 gi\u1ea3i quy\u1ebft nh\u1eefng v\u1ea5n \u0111\u1ec1 n\u00e0y, Dynamo s\u1eed d\u1ee5ng m\u1ed9t bi\u1ebfn th\u1ec3 c\u1ee7a consistent hashing (t\u01b0\u01a1ng t\u1ef1 bi\u1ebfn th\u1ec3 trong [10, 20]): thay v\u00ec map m\u1ed9t node \u0111\u1ebfn m\u1ed9t \u0111i\u1ec3m tr\u00ean h\u00ecnh tr\u00f2n, m\u1ed7i node s\u1ebd \u0111\u01b0\u1ee3c g\u00e1n v\u00e0o nhi\u1ec1u \u0111i\u1ec3m. \u0110\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y, Dynamo s\u1eed d\u1ee5ng kh\u00e1i ni\u1ec7m \"node \u1ea3o\" (virtual node). Node \u1ea3o s\u1ebd gi\u1ed1ng nh\u01b0 node duy nh\u1ea5t trong h\u1ec7 th\u1ed1ng, nh\u01b0ng m\u1ed7i node s\u1ebd ch\u1ecbu tr\u00e1ch nhi\u1ec7m cho nhi\u1ec1u node \u1ea3o. Th\u1ef1c t\u1ebf, khi m\u1ed9t node m\u1edbi \u0111\u01b0\u1ee3c th\u00eam v\u00e0o h\u1ec7 th\u1ed1ng, n\u00f3 \u0111\u01b0\u1ee3c g\u00e1n nhi\u1ec1u v\u1ecb tr\u00ed (sau n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 c\u00e1c \"token\") tr\u00ean v\u00f2ng. Qu\u00e1 tr\u00ecnh tinh ch\u1ec9nh l\u01b0\u1ee3c \u0111\u1ed3 ph\u00e2n v\u00f9ng c\u1ee7a Dynamo s\u1ebd \u0111\u01b0\u1ee3c n\u00f3i \u0111\u1ebfn trong ph\u1ea7n 6.</p> <p>D\u00f9ng c\u00e1c node \u1ea3o s\u1ebd c\u00f3 nh\u1eefng \u00edch l\u1ee3i nh\u01b0 sau:</p> <ul> <li>N\u1ebfu m\u1ed9t node b\u1ecb ch\u1ebft (do l\u1ed7i ho\u1eb7c b\u1ea3o tr\u00ec), t\u1ea3i c\u1ee7a node n\u00e0y s\u1ebd \u0111\u01b0\u1ee3c chia \u0111\u1ec1u cho c\u00e1c node c\u00f2n l\u1ea1i.</li> <li>Khi m\u1ed9t node s\u1ed1ng l\u1ea1i, ho\u1eb7c node m\u1edbi \u0111\u01b0\u1ee3c th\u00eam v\u00e0o, node n\u00e0y s\u1ebd \u0111\u01b0\u1ee3c chia m\u1ed9t ph\u1ea7n t\u01b0\u01a1ng \u0111\u01b0\u01a1ng t\u1ea3i t\u1eeb c\u00e1c node kh\u00e1c.</li> <li>S\u1ed1 node \u1ea3o m\u00e0 m\u1ed9t node th\u1eadt ch\u1ecbu tr\u00e1ch nhi\u1ec7m c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh d\u1ef1a tr\u00ean hi\u1ec7u su\u1ea5t c\u1ee7a n\u00f3, d\u1ef1a v\u00e0o t\u00ednh kh\u00f4ng \u0111\u1ed3ng nh\u1ea5t trong c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng v\u1eadt l\u00fd.</li> </ul>"},{"location":"misc/papers/amazon-dynamo/#43-sao-chep-replication","title":"4.3. Sao ch\u00e9p (Replication)","text":"<p>\u0110\u1ec3 c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 \u0111\u1ed9 b\u1ec1n cao, Dynamo replicate data tr\u00ean nhi\u1ec1u m\u00e1y ch\u1ee7 kh\u00e1c nhau. M\u1ed7i data item s\u1ebd \u0111\u01b0\u1ee3c replicate l\u00ean N m\u00e1y ch\u1ee7 kh\u00e1c, trong \u0111\u00f3 N l\u00e0 tham s\u1ed1 \u0111\u01b0\u1ee3c c\u1ea5u h\u00ecnh tr\u00ean m\u1ed7i instance c\u1ee7a Dynamo. M\u1ed7i kho\u00e1 k \u0111\u01b0\u1ee3c g\u00e1n v\u00e0o m\u1ed7i coordinator node (\u0111\u00e3 n\u00f3i \u1edf ph\u1ea7n tr\u01b0\u1edbc). Coordinator n\u00e0y s\u1ebd ch\u1ecbu tr\u00e1ch nhi\u1ec7m replicate c\u00e1c data item trong \u0111o\u1ea1n m\u00e0 n\u00f3 qu\u1ea3n l\u00fd. Ngo\u00e0i vi\u1ec7c l\u01b0u tr\u1eef c\u00e1c key trong \u0111o\u1ea1n m\u00e0 n\u00f3 ki\u1ec3m so\u00e1t, coordinator s\u1ebd replicate c\u00e1c key n\u00e0y l\u00ean N-1 node ti\u1ebfp theo (theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3) tr\u00ean v\u00f2ng. \u0110i\u1ec1u n\u00e0y s\u1ebd khi\u1ebfn h\u1ec7 th\u1ed1ng tr\u1edf th\u00e0nh n\u01a1i m\u1ed7i node s\u1ebd ch\u1ecbu tr\u00e1ch nhi\u1ec7m cho ph\u1ea7n tr\u00ean v\u00f2ng gi\u1eefa n\u00f3 v\u00e0 node th\u1ee9 N tr\u01b0\u1edbc n\u00f3 (k\u1ec3 c\u1ea3 \u0111o\u1ea1n m\u00e0 node th\u1ee9 N tr\u01b0\u1edbc n\u00f3 qu\u1ea3n l\u00fd). Trong h\u00ecnh 2, node B replicate kho\u00e1 k \u0111\u1ebfn node C v\u00e0 D c\u00f9ng v\u1edbi vi\u1ec7c l\u01b0u tr\u1eef kho\u00e1 k tr\u00ean ch\u00ednh node B. Node D s\u1ebd l\u01b0u c\u00e1c kho\u00e1 trong c\u00e1c \u0111o\u1ea1n <code>(A, B]</code>, <code>(B, C]</code>, <code>(C, D]</code>.</p> <p>Danh s\u00e1ch c\u00e1c node ch\u1ecbu tr\u00e1ch nhi\u1ec7m l\u01b0u m\u1ed9t kho\u00e1 n\u00e0o \u0111\u00f3 \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 danh s\u00e1ch \u01b0u ti\u00ean (preference list). H\u1ec7 th\u1ed1ng \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf (nh\u01b0 \u0111\u01b0\u1ee3c gi\u1ea3i th\u00edch trong ph\u1ea7n 4.8) sao cho m\u1ecdi node trong h\u1ec7 th\u1ed1ng c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh node n\u00e0o s\u1ebd n\u00e0o trong danh s\u00e1ch n\u00e0y cho b\u1ea5t k\u1ef3 kho\u00e1 n\u00e0o. \u0110\u1ec3 gi\u1ea3i quy\u1ebft l\u1ed7i node, danh s\u00e1ch \u01b0u ti\u00ean s\u1ebd ch\u1ee9a nhi\u1ec1u h\u01a1n N node. L\u01b0u \u00fd r\u1eb1ng v\u1edbi vi\u1ec7c s\u1eed d\u1ee5ng c\u00e1c node \u1ea3o, c\u00f3 th\u1ec3 N node ti\u1ebfp theo cho m\u1ed9t kho\u00e1 c\u00f3 th\u1ec3 l\u00e0 c\u1ee7a \u00edt h\u01a1n N node th\u1eadt (v\u00ed d\u1ee5 nh\u01b0 m\u1ed9t node th\u1eadt c\u00f3 nhi\u1ec1u h\u01a1n m\u1ed9t node \u1ea3o trong N node ti\u1ebfp theo). \u0110\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y, danh s\u00e1ch \u01b0u ti\u00ean c\u1ee7a m\u1ed9t kho\u00e1 s\u1ebd \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng b\u1eb1ng c\u00e1ch b\u1ecf qua m\u1ed9t s\u1ed1 v\u1ecb tr\u00ed trong v\u00f2ng \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o r\u1eb1ng danh s\u00e1ch ch\u1ec9 ch\u1ee9a c\u00e1c node th\u1eadt ri\u00eang bi\u1ec7t nhau.</p>"},{"location":"misc/papers/amazon-dynamo/#44-phien-ban-hoa-du-lieu-data-versioning","title":"4.4. Phi\u00ean b\u1ea3n h\u00f3a d\u1eef li\u1ec7u (Data Versioning)","text":"<p>Dynamo cung c\u1ea5p t\u00ednh nh\u1ea5t qu\u00e1n \u0111\u1ebfn c\u00f9ng, ngh\u0129a l\u00e0 cho ph\u00e9p c\u00e1c c\u1eadp nh\u1eadt \u0111\u1ebfn cu\u1ed1i c\u00f9ng s\u1ebd \u0111\u01b0\u1ee3c ph\u00e2n b\u1ed1 \u0111\u1ebfn t\u1ea5t c\u1ea3 c\u00e1c replica. M\u1ed9t l\u1eddi g\u1ecdi h\u00e0m <code>put()</code> s\u1ebd tr\u1ea3 v\u1ec1 cho ng\u01b0\u1eddi g\u1ecdi tr\u01b0\u1edbc khi c\u00e1c c\u1eadp nh\u1eadt \u0111\u1ebfn \u0111\u01b0\u1ee3c c\u00e1c replica. \u0110i\u1ec1u n\u00e0y c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn tr\u01b0\u1eddng h\u1ee3p g\u1ecdi h\u00e0m <code>get()</code> ngay sau \u0111\u00f3 s\u1ebd tr\u1ea3 v\u1ec1 m\u1ed9t object kh\u00f4ng ch\u1ee9a c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t. N\u1ebfu kh\u00f4ng c\u00f3 l\u1ed7i x\u1ea3y ra th\u00ec th\u1eddi gian ph\u00e2n b\u1ed1 s\u1ebd n\u1eb1m trong m\u1ed9t kho\u1ea3ng n\u00e0o \u0111\u00f3. Tuy nhi\u00ean, trong tr\u01b0\u1eddng h\u1ee3p l\u1ed7i (v\u00ed d\u1ee5 nh\u01b0 server s\u1eadp ho\u1eb7c ph\u00e2n v\u00f9ng m\u1ea1ng), c\u00e1c c\u1eadp nh\u1eadt c\u00f3 th\u1ec3 s\u1ebd kh\u00f4ng \u0111\u1ebfn t\u1ea5t c\u1ea3 c\u00e1c replica trong m\u1ed9t kho\u1ea3ng th\u1eddi gian kh\u00e1 l\u1edbn.</p> <p>C\u00f3 m\u1ed9t l\u1edbp c\u00e1c \u1ee9ng d\u1ee5ng trong n\u1ec1n t\u1ea3ng Amazon c\u00f3 th\u1ec3 ch\u1ecbu \u0111\u01b0\u1ee3c nh\u1eefng s\u1ef1 thi\u1ebfu nh\u1ea5t qu\u00e1n nh\u01b0 v\u1eady v\u00e0 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng \u0111\u1ec3 ho\u1ea1t \u0111\u1ed9ng trong c\u00e1c \u0111i\u1ec1u ki\u1ec7n nh\u01b0 th\u1ebf. V\u00ed d\u1ee5, \u1ee9ng d\u1ee5ng gi\u1ecf h\u00e0ng y\u00eau c\u1ea7u r\u1eb1ng thao t\u00e1c \"Th\u00eam h\u00e0ng v\u00e0o gi\u1ecf h\u00e0ng\" kh\u00f4ng bao gi\u1edd \u0111\u01b0\u1ee3c b\u1ecf qua ho\u1eb7c t\u1eeb ch\u1ed1i. N\u1ebfu tr\u1ea1ng th\u00e1i m\u1edbi nh\u1ea5t c\u1ee7a gi\u1ecf h\u00e0ng kh\u00f4ng kh\u1ea3 d\u1ee5ng, v\u00e0 ng\u01b0\u1eddi d\u00f9ng th\u1ef1c hi\u1ec7n thay \u0111\u1ed5i cho m\u1ed9t version c\u0169 h\u01a1n c\u1ee7a gi\u1ecf h\u00e0ng th\u00ec thay \u0111\u1ed5i \u0111\u00f3 v\u1eabn c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c gi\u1eef l\u1ea1i. Nh\u01b0ng \u0111\u1ed3ng th\u1eddi, n\u00f3 kh\u00f4ng \u0111\u01b0\u1ee3c thay th\u1ebf tr\u1ea1ng h\u00e1i hi\u1ec7n t\u1ea1i c\u1ee7a gi\u1ecf h\u00e0ng, tr\u1ea1ng th\u00e1i n\u00e0y c\u00f3 th\u1ec3 ch\u1ee9a nh\u1eefng thay \u0111\u1ed5i quan tr\u1ecdng. L\u01b0u \u00fd r\u1eb1ng c\u1ea3 hai thao t\u00e1c \"th\u00eam v\u00e0o gi\u1ecf h\u00e0ng\" v\u00e0 \"b\u1ecf kh\u1ecfi gi\u1ecf h\u00e0ng\" \u0111\u1ec1u \u0111\u01b0\u1ee3c chuy\u1ec3n th\u00e0nh c\u00e1c <code>put()</code> request \u0111\u1ebfn Dynamo. Khi kh\u00e1ch mu\u1ed1n th\u00eam m\u1ed9t m\u1eb7t h\u00e0ng v\u00e0o (ho\u1eb7c xo\u00e1 kh\u1ecfi) gi\u1ecf h\u00e0ng, v\u00e0 version m\u1edbi nh\u1ea5t c\u1ee7a gi\u1ecf h\u00e0ng kh\u00f4ng kh\u1ea3 d\u1ee5ng, m\u1eb7t h\u00e0ng \u0111\u00f3 s\u1ebd \u0111\u01b0\u1ee3c th\u00eam v\u00e0o (ho\u1eb7c xo\u00e1 kh\u1ecfi) version c\u0169 h\u01a1n v\u00e0 c\u00e1c version kh\u00e1c nhau s\u1ebd \u0111\u01b0\u1ee3c \u0111\u1ed1i chi\u1ebfu sau.</p> <p>\u0110\u1ec3 \u0111\u1ea3m b\u1ea3o \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y, Dynamo coi k\u1ebft qu\u1ea3 c\u1ee7a m\u1ed7i thay \u0111\u1ed5i l\u00e0 m\u1ed9t version m\u1edbi v\u00e0 kh\u00f4ng ch\u1ec9nh s\u1eeda \u0111\u01b0\u1ee3c c\u1ee7a d\u1eef li\u1ec7u. N\u00f3 cho ph\u00e9p nhi\u1ec1u version c\u1ee7a m\u1ed9t object xu\u1ea5t hi\u1ec7n trong h\u1ec7 th\u1ed1ng \u1edf c\u00f9ng m\u1ed9t th\u1eddi \u0111i\u1ec3m. Trong h\u1ea7u h\u1ebft c\u00e1c tr\u01b0\u1eddng h\u1ee3p, version m\u1edbi s\u1ebd bao g\u1ed3m (c\u00e1c) version tr\u01b0\u1edbc \u0111\u00f3, v\u00e0 b\u1ea3n th\u00e2n h\u1ec7 th\u1ed1ng c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh version ch\u00ednh th\u1ee9c (\u0111\u1ed1i chi\u1ebfu c\u00fa ph\u00e1p). Tuy nhi\u00ean, vi\u1ec7c ph\u00e2n nh\u00e1nh version c\u00f3 th\u1ec3 x\u1ea3y ra khi c\u00f3 l\u1ed7i, c\u00f9ng v\u1edbi c\u00e1c c\u1eadp nh\u1eadt c\u00f9ng th\u1eddi \u0111i\u1ec3m, d\u1eabn t\u1edbi c\u00e1c version xung \u0111\u1ed9t c\u1ee7a c\u00f9ng m\u1ed9t object. Trong nh\u1eefng tr\u01b0\u1eddng h\u1ee3p n\u00e0y, h\u1ec7 th\u1ed1ng kh\u00f4ng th\u1ec3 \u0111\u1ed1i chi\u1ebfu nhi\u1ec1u version c\u1ee7a c\u00f9ng object v\u00e0 kh\u00e1ch h\u00e0ng ph\u1ea3i th\u1ef1c hi\u1ec7n \u0111\u1ed1i chi\u1ebfu \u0111\u1ec3 thu g\u1ecdn nhi\u1ec1u nh\u00e1nh c\u1ee7a d\u1eef li\u1ec7u th\u00e0nh m\u1ed9t (\u0111\u1ed1i chi\u1ebfu ng\u1eef ngh\u0129a). M\u1ed9t v\u00ed d\u1ee5 c\u1ee7a thao t\u00e1c thu g\u1ecdn l\u00e0 \"h\u1ee3p nh\u1ea5t\" c\u00e1c version kh\u00e1c nhau c\u1ee7a gi\u1ecf h\u00e0ng. V\u1edbi c\u01a1 ch\u1ebf \u0111\u1ed1i chi\u1ebfu n\u00e0y, thao t\u00e1c \"th\u00eam v\u00e0o gi\u1ecf h\u00e0ng\" s\u1ebd kh\u00f4ng bao gi\u1edd m\u1ea5t. Tuy nhi\u00ean, nh\u1eefng m\u1eb7t h\u00e0ng \u0111\u00e3 xo\u00e1 c\u00f3 th\u1ec3 xu\u1ea5t hi\u1ec7n l\u1ea1i.</p> <p>\u0110i\u1ec1u quan tr\u1ecdng l\u00e0 ph\u1ea3i hi\u1ec3u r\u1eb1ng m\u1ed9t s\u1ed1 lo\u1ea1i l\u1ed7i nh\u1ea5t \u0111\u1ecbnh c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn vi\u1ec7c h\u1ec7 th\u1ed1ng kh\u00f4ng ch\u1ec9 c\u00f3 hai m\u00e0 c\u00f3 nhi\u1ec1u version c\u1ee7a c\u00f9ng m\u1ed9t d\u1eef li\u1ec7u. C\u00e1c b\u1ea3n c\u1eadp nh\u1eadt khi c\u00f3 ph\u00e2n v\u00f9ng m\u1ea1ng v\u00e0 l\u1ed7i node c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn m\u1ed9t object c\u00f3 l\u1ecbch s\u1eed version kh\u00e1c nhau m\u00e0 h\u1ec7 th\u1ed1ng s\u1ebd c\u1ea7n ph\u1ea3i \u0111i\u1ec1u ch\u1ec9nh trong t\u01b0\u01a1ng lai. \u0110i\u1ec1u n\u00e0y \u0111\u00f2i h\u1ecfi ch\u00fang t\u00f4i ph\u1ea3i thi\u1ebft k\u1ebf \u1ee9ng d\u1ee5ng x\u00e1c nh\u1eadn r\u00f5 r\u00e0ng kh\u1ea3 n\u0103ng c\u00f3 nhi\u1ec1u version c\u1ee7a c\u00f9ng m\u1ed9t d\u1eef li\u1ec7u (\u0111\u1ec3 kh\u00f4ng m\u1ea5t b\u1ea5t k\u1ef3 c\u1eadp nh\u1eadt n\u00e0o).</p> <p>Dynamo s\u1eed d\u1ee5ng vector clock [12] \u0111\u1ec3 n\u1eafm b\u1eaft quan h\u1ec7 nh\u00e2n qu\u1ea3 gi\u1eefa c\u00e1c version kh\u00e1c nhau c\u1ee7a c\u00f9ng m\u1ed9t object. M\u1ed9t vector clock l\u00e0 m\u1ed9t danh s\u00e1ch c\u00e1c c\u1eb7p (node, b\u1ed9 \u0111\u1ebfm). M\u1ed9t vector clock \u0111\u01b0\u1ee3c li\u00ean k\u1ebft v\u1edbi m\u1ed9t version c\u1ee7a m\u1ecdi object. Ta c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh hai version c\u1ee7a m\u1ed9t object n\u1eb1m tr\u00ean c\u00e1c nh\u00e1nh song song hay c\u00f3 th\u1ee9 t\u1ef1 nh\u00e2n qu\u1ea3 b\u1eb1ng c\u00e1ch ki\u1ec3m tra c\u00e1c vector clock c\u1ee7a ch\u00fang. N\u1ebfu b\u1ed9 \u0111\u1ebfm tr\u00ean clock c\u1ee7a object \u0111\u1ea7u ti\u00ean nh\u1ecf h\u01a1n ho\u1eb7c b\u1eb1ng t\u1ea5t c\u1ea3 c\u00e1c node trong clock th\u1ee9 hai th\u00ec c\u00e1i \u0111\u1ea7u ti\u00ean s\u1ebd x\u1ea3y ra tr\u01b0\u1edbc c\u00e1i th\u1ee9 hai v\u00e0 c\u00f3 th\u1ec3 b\u1ecf \u0111i. Ng\u01b0\u1ee3c l\u1ea1i, hai thay \u0111\u1ed5i n\u00e0y \u0111\u01b0\u1ee3c coi l\u00e0 c\u00f3 xung \u0111\u1ed9t v\u00e0 c\u1ea7n ph\u1ea3i \u0111i\u1ec1u ch\u1ec9nh.</p> <p>Trong Dynamo, khi m\u1ed9t kh\u00e1ch h\u00e0ng mu\u1ed1n c\u1eadp nh\u1eadt m\u1ed9t object, c\u1ea7n ph\u1ea3i x\u00e1c \u0111\u1ecbnh version n\u00e0o s\u1ebd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt. \u0110i\u1ec1u n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1eb1ng vi\u1ec7c nh\u1eadn context truy\u1ec1n b\u1edfi kh\u00e1ch h\u00e0ng t\u1eeb thao t\u00e1c \u0111\u1ecdc tr\u01b0\u1edbc \u0111\u00f3, trong \u0111\u00f3 s\u1ebd bao g\u1ed3m th\u00f4ng tin vector clock. Khi x\u1eed l\u00fd request \u0111\u1ecdc, n\u1ebfu Dynamo c\u00f3 quy\u1ec1n truy c\u1eadp v\u00e0o nhi\u1ec1u nh\u00e1nh kh\u00f4ng th\u1ec3 \u0111\u1ed1i chi\u1ebfu v\u1ec1 m\u1eb7t c\u00fa ph\u00e1p, n\u00f3 s\u1ebd tr\u1ea3 v\u1ec1 t\u1ea5t c\u1ea3 c\u00e1c object \u1edf c\u00e1c node l\u00e1, v\u1edbi th\u00f4ng tin version t\u01b0\u01a1ng \u1ee9ng trong context. M\u1ed9t c\u1eadp nh\u1eadt d\u00f9ng context n\u00e0y \u0111\u01b0\u1ee3c coi l\u00e0 \u0111\u00e3 \u0111\u1ed1i chi\u1ebfu c\u00e1c version kh\u00e1c nhau v\u00e0 c\u00e1c nh\u00e1nh s\u1ebd thu g\u1ecdn l\u1ea1i th\u00e0nh m\u1ed9t version m\u1edbi duy nh\u1ea5t.</p> <p></p> H\u00ecnh 3: S\u1ef1 ti\u1ebfn ho\u00e1 c\u00e1c version c\u1ee7a m\u1ed9t object theo th\u1eddi gian <p>\u0110\u1ec3 minh ho\u1ea1 vi\u1ec7c s\u1eed d\u1ee5ng vector clock, ta h\u00e3y c\u00f9ng xem x\u00e9t v\u00ed d\u1ee5 trong h\u00ecnh 3. M\u1ed9t client ghi m\u1ed9t object m\u1edbi. Node (g\u1ecdi l\u00e0 <code>Sx</code> \u0111i) x\u1eed l\u00fd vi\u1ec7c ghi key n\u00e0y s\u1ebd t\u0103ng s\u1ed1 th\u1ee9 t\u1ef1 c\u1ee7a n\u00f3 l\u00ean v\u00e0 d\u00f9ng s\u1ed1 n\u00e0y \u0111\u1ec3 t\u1ea1o vector clock c\u1ee7a d\u1eef li\u1ec7u. H\u1ec7 th\u1ed1ng b\u00e2y gi\u1edd s\u1ebd c\u00f3 object <code>D1</code> v\u00e0 clock c\u1ee7a n\u00f3 l\u00e0 <code>[(Sx, 1)]</code>. Client sau \u0111\u00f3 c\u1eadp nh\u1eadt object n\u00e0y. Gi\u1ea3 s\u1eed c\u00f9ng node \u0111\u00f3 x\u1eed l\u00fd request n\u00e0y. H\u1ec7 th\u1ed1ng gi\u1edd s\u1ebd c\u00f3 object <code>D2</code> v\u00e0 clock l\u00e0 <code>[(Sx, 2)]</code>. <code>D2</code> theo sau <code>D1</code> v\u00e0 do \u0111\u00f3 ghi \u0111\u00e8 l\u00ean <code>D1</code>, tuy nhi\u00ean c\u00f3 th\u1ec3 c\u00f3 c\u00e1c replica c\u1ee7a <code>D1</code> t\u1ed3n t\u1ea1i \u1edf c\u00e1c node m\u1ea1ng kh\u00e1c ch\u01b0a nh\u00ecn th\u1ea5y <code>D2</code>. Gi\u1ea3 s\u1eed r\u1eb1ng c\u00f9ng m\u1ed9t client c\u1eadp nh\u1eadt object l\u1ea7n n\u1eefa v\u00e0 m\u1ed9t server kh\u00e1c (g\u1ecdi l\u00e0 <code>Sy</code> \u0111i) x\u1eed l\u00fd request. H\u1ec7 th\u1ed1ng gi\u1edd s\u1ebd c\u00f3 data <code>D3</code> v\u00e0 clock l\u00e0 <code>[(Sx, 2), (Sy, 1)]</code>.</p> <p>Ti\u1ebfp theo, gi\u1ea3 s\u1eed m\u1ed9t client kh\u00e1c \u0111\u1ecdc <code>D2</code> v\u00e0 c\u1eadp nh\u1eadt n\u00f3, v\u00e0 m\u1ed9t node kh\u00e1c (g\u1ecdi l\u00e0 <code>Sz</code> \u0111i) th\u1ef1c hi\u1ec7n vi\u1ec7c ghi. H\u1ec7 th\u1ed1ng gi\u1edd s\u1ebd c\u00f3 <code>D4</code> (con c\u1ee7a <code>D2</code>) v\u1edbi vector clock l\u00e0 <code>[(Sx, 2), (Sz, 1)]</code>. M\u1ed9t node nh\u1eadn bi\u1ebft <code>D1</code> ho\u1eb7c <code>D2</code> c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh, khi nh\u1eadn <code>D4</code> v\u00e0 clock c\u1ee7a n\u00f3, r\u1eb1ng <code>D1</code> v\u00e0 <code>D2</code> b\u1ecb ghi \u0111\u00e8 b\u1edfi d\u1eef li\u1ec7u m\u1edbi v\u00e0 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c d\u1ecdn \u0111i. Node nh\u1eadn bi\u1ebft <code>D3</code> v\u00e0 nh\u1eadn <code>D4</code> s\u1ebd th\u1ea5y r\u1eb1ng kh\u00f4ng c\u00f3 quan h\u1ec7 nh\u00e2n qu\u1ea3 gi\u1eefa ch\u00fang. N\u00f3i c\u00e1ch kh\u00e1c, c\u00f3 c\u00e1c thay \u0111\u1ed5i trong <code>D3</code> v\u00e0 <code>D4</code> kh\u00f4ng ph\u1ea3n \u00e1nh l\u1eabn nhau. C\u1ea3 hai version n\u00e0y ph\u1ea3i \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i v\u00e0 tr\u00ecnh b\u00e0y cho client (khi \u0111\u1ecdc) \u0111\u1ec3 \u0111\u1ed1i chi\u1ebfu ng\u1eef ngh\u0129a.</p> <p>Gi\u1edd gi\u1ea3 s\u1eed client n\u00e0o \u0111\u00f3 \u0111\u1ecdc c\u1ea3 <code>D3</code> v\u00e0 <code>D4</code> (context s\u1ebd ph\u1ea3n \u00e1nh r\u1eb1ng c\u1ea3 hai gi\u00e1 tr\u1ecb \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 khi \u0111\u1ecdc). Context c\u1ee7a thao t\u00e1c \u0111\u1ecdc l\u00e0 m\u1ed9t b\u1ea3n t\u00f3m t\u1eaft c\u1ee7a c\u00e1c clock <code>D3</code> v\u00e0 <code>D4</code>, c\u1ee5 th\u1ec3 l\u00e0 <code>[(Sx, 2), (Sy, 1), (Sz, 1)]</code>. N\u1ebfu client th\u1ef1c hi\u1ec7n \u0111\u1ed1i chi\u1ebfu v\u00e0 node Sx \u0111i\u1ec1u ph\u1ed1i vi\u1ec7c ghi, Sx s\u1ebd c\u1eadp nh\u1eadt s\u1ed1 th\u1ee9 t\u1ef1 c\u1ee7a n\u00f3 trong clock. D\u1eef li\u1ec7u m\u1edbi D5 s\u1ebd c\u00f3 clock nh\u01b0 sau: <code>[(Sx, 3), (Sy, 1), (Sz, 1)]</code>.</p> <p>M\u1ed9t v\u1ea5n \u0111\u1ec1 c\u00f3 th\u1ec3 x\u1ea3y ra v\u1edbi vector clock l\u00e0 k\u00edch th\u01b0\u1edbc c\u1ee7a n\u00f3 c\u00f3 th\u1ec3 t\u0103ng l\u00ean nhi\u1ec1u n\u1ebfu nhi\u1ec1u server ph\u1ed1i h\u1ee3p ghi v\u00e0o m\u1ed9t object. Trong th\u1ef1c t\u1ebf, \u0111i\u1ec1u n\u00e0y kh\u00f3 x\u1ea3y ra v\u00ec vi\u1ec7c ghi th\u01b0\u1eddng xuy\u00ean \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi m\u1ed9t trong N node trong danh s\u00e1ch \u01b0u ti\u00ean. Trong tr\u01b0\u1eddng h\u1ee3p ph\u00e2n v\u00f9ng m\u1ea1ng ho\u1eb7c server ch\u1ebft, request ghi c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi c\u00e1c node kh\u00f4ng n\u1eb1m trong top N node \u0111\u01b0\u1ee3c \u01b0u ti\u00ean, khi\u1ebfn k\u00edch th\u01b0\u1edbc vector clock t\u0103ng l\u00ean. Trong c\u00e1c tr\u01b0\u1eddng h\u1ee3p nh\u01b0 v\u1eady, ta n\u00ean gi\u1edbi h\u1ea1ng k\u00edch th\u01b0\u1edbc c\u1ee7a vector clock. Dynamo s\u1eed d\u1ee5ng l\u01b0\u1ee3c \u0111\u1ed3 c\u1eaft ng\u1eafn clock nh\u01b0 sau: C\u00f9ng v\u1edbi m\u1ed7i c\u1eb7p (node, b\u1ed9 \u0111\u1ebfm), Dynamo l\u01b0u timestamp cho bi\u1ebft l\u1ea7n cu\u1ed1i c\u00f9ng c\u1eadp nh\u1eadt data item. Khi s\u1ed1 c\u1eb7p (node, b\u1ed9 \u0111\u1ebfm) trong vector clock \u0111\u1ea1t ng\u01b0\u1ee1ng (v\u00ed d\u1ee5 nh\u01b0 10 ch\u1eb3ng h\u1ea1n), c\u1eb7p c\u0169 nh\u1ea5t s\u1ebd b\u1ecb xo\u00e1 kh\u1ecfi clock. R\u00f5 r\u00e0ng l\u00e0 vi\u1ec7c c\u1eaft ng\u1eafn n\u00e0y c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn s\u1ef1 thi\u1ebfu hi\u1ec7u qu\u1ea3 trong vi\u1ec7c \u0111i\u1ec1u ch\u1ec9nh v\u00ec c\u00e1c m\u1ed1i quan h\u1ec7 nh\u00e2n qu\u1ea3 kh\u00f4ng th\u1ec3 \u0111\u01b0\u1ee3c suy ra m\u1ed9t c\u00e1ch ch\u00ednh x\u00e1c. Tuy nhi\u00ean, v\u1ea5n \u0111\u1ec1 n\u00e0y ch\u01b0a xu\u1ea5t hi\u1ec7n trong th\u1ef1c t\u1ebf n\u00ean n\u00f3 ch\u01b0a \u0111\u01b0\u1ee3c \u0111i\u1ec1u tra k\u1ef9 l\u01b0\u1ee1ng.</p>"},{"location":"misc/papers/amazon-dynamo/#45-thuc-thi-cac-thao-tac-get-va-put","title":"4.5. Th\u1ef1c thi c\u00e1c thao t\u00e1c get() v\u00e0 put()","text":"<p>B\u1ea5t k\u1ef3 node n\u00e0o trong Dynamo c\u0169ng c\u00f3 th\u1ec3 nh\u1eadn c\u00e1c thao t\u00e1c <code>get()</code> v\u00e0 <code>put()</code> t\u1eeb client cho b\u1ea5t c\u1ee9 key n\u00e0o. Trong ph\u1ea7n n\u00e0y, \u0111\u1ec3 cho \u0111\u01a1n gi\u1ea3n, ta s\u1ebd \u0111i v\u00e0o m\u00f4 t\u1ea3 c\u00e1ch th\u1ee9c th\u1ef1c thi c\u00e1c thao t\u00e1c n\u00e0y trong m\u1ed9t m\u00f4i tr\u01b0\u1eddng kh\u00f4ng c\u00f3 l\u1ed7i v\u00e0 trong ph\u1ea7n ti\u1ebfp theo ta s\u1ebd m\u00f4 t\u1ea3 c\u00e1ch th\u1ee9c th\u1ef1c thi ch\u00fang trong m\u1ed9t m\u00f4i tr\u01b0\u1eddng c\u00f3 l\u1ed7i.</p> <p>C\u1ea3 hai thao t\u00e1c <code>get()</code> v\u00e0 <code>put()</code> \u0111\u1ec1u \u0111\u01b0\u1ee3c th\u1ef1c thi b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng framework x\u1eed l\u00fd request d\u00e0nh ri\u00eang cho c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng Amazon th\u00f4ng qua HTTP. C\u00f3 hai c\u00e1ch client c\u00f3 th\u1ec3 d\u00f9ng \u0111\u1ec3 ch\u1ecdn node: (1) \u0111\u1ecbnh tuy\u1ebfn request th\u00f4ng qua m\u1ed9t load balancer th\u00f4ng th\u01b0\u1eddng s\u1ebd ch\u1ecdn node d\u1ef1a tr\u00ean th\u00f4ng tin t\u1ea3i, ho\u1eb7c (2) s\u1eed d\u1ee5ng m\u1ed9t th\u01b0 vi\u1ec7n client c\u00f3 kh\u1ea3 n\u0103ng ph\u00e2n v\u00f9ng \u0111\u1ec3 \u0111\u1ecbnh tuy\u1ebfn request tr\u1ef1c ti\u1ebfp \u0111\u1ebfn c\u00e1c node \u0111i\u1ec1u ph\u1ed1i th\u00edch h\u1ee3p. \u01afu \u0111i\u1ec3m c\u1ee7a c\u00e1ch th\u1ee9 nh\u1ea5t l\u00e0 client kh\u00f4ng c\u1ea7n ph\u1ea3i li\u00ean k\u1ebft b\u1ea5t k\u1ef3 code n\u00e0o \u0111\u1eb7c bi\u1ec7t cho Dynamo trong \u1ee9ng d\u1ee5ng c\u1ee7a n\u00f3, trong khi c\u00e1ch th\u1ee9 hai c\u00f3 th\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c \u0111\u1ed9 tr\u1ec5 th\u1ea5p h\u01a1n v\u00ec n\u00f3 b\u1ecf qua b\u01b0\u1edbc chuy\u1ec3n ti\u1ebfp.</p> <p>Node x\u1eed l\u00fd thao t\u00e1c \u0111\u1ecdc ghi \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 node \u0111i\u1ec1u ph\u1ed1i. Th\u00f4ng th\u01b0\u1eddng, n\u00f3 n\u1eb1m trong top N node trong danh s\u00e1ch \u01b0u ti\u00ean. N\u1ebfu request \u0111\u01b0\u1ee3c nh\u1eadn th\u00f4ng qua load balancer, c\u00e1c request \u0111\u1ec3 truy c\u1eadp m\u1ed9t key c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111\u1ecbnh tuy\u1ebfn \u0111\u1ebfn b\u1ea5t k\u1ef3 node ng\u1eabu nhi\u00ean n\u00e0o tr\u00ean v\u00f2ng. Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, node nh\u1eadn request s\u1ebd kh\u00f4ng \u0111i\u1ec1u ph\u1ed1i request n\u1ebfu n\u00f3 kh\u00f4ng n\u1eb1m trong top N c\u1ee7a danh s\u00e1ch \u01b0u ti\u00ean c\u1ee7a key \u0111\u01b0\u1ee3c request. Thay v\u00e0o \u0111\u00f3, node n\u00e0y s\u1ebd chuy\u1ec3n ti\u1ebfp request \u0111\u1ebfn node \u0111\u1ea7u ti\u00ean trong s\u1ed1 top N node trong danh s\u00e1ch \u01b0u ti\u00ean.</p> <p>C\u00e1c thao t\u00e1c \u0111\u1ecdc v\u00e0 ghi s\u1ebd li\u00ean quan \u0111\u1ebfn N node c\u00f2n s\u1ed1ng \u0111\u1ea7u ti\u00ean trong danh s\u00e1ch \u01b0u ti\u00ean, b\u1ecf qua c\u00e1c node b\u1ecb ch\u1ebft ho\u1eb7c kh\u00f4ng truy c\u1eadp \u0111\u01b0\u1ee3c. Khi t\u1ea5t c\u1ea3 c\u00e1c node c\u00f2n s\u1ed1ng, top N node trong danh s\u00e1ch \u01b0u ti\u00ean c\u1ee7a m\u1ed9t key s\u1ebd \u0111\u01b0\u1ee3c truy c\u1eadp. Khi c\u00f3 node ch\u1ebft ho\u1eb7c ph\u00e2n v\u00f9ng m\u1ea1ng, c\u00e1c node \u0111\u01b0\u1ee3c x\u1ebfp h\u1ea1ng th\u1ea5p h\u01a1n trong danh s\u00e1ch \u01b0u ti\u00ean s\u1ebd \u0111\u01b0\u1ee3c truy c\u1eadp.</p> <p>\u0110\u1ec3 duy tr\u00ec t\u00ednh nh\u1ea5t qu\u00e1n gi\u1eefa c\u00e1c replica, Dynamo s\u1eed d\u1ee5ng m\u1ed9t giao th\u1ee9c nh\u1ea5t qu\u00e1n t\u01b0\u01a1ng t\u1ef1 th\u1ee9 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong c\u00e1c h\u1ec7 th\u1ed1ng quorum. Giao th\u1ee9c n\u00e0y c\u00f3 hai gi\u00e1 tr\u1ecb c\u1ea5u h\u00ecnh ch\u00ednh: R v\u00e0 W. R l\u00e0 s\u1ed1 l\u01b0\u1ee3ng node t\u1ed1i thi\u1ec3u ph\u1ea3i tham gia v\u00e0o m\u1ed9t thao t\u00e1c \u0111\u1ecdc th\u00e0nh c\u00f4ng. W l\u00e0 s\u1ed1 l\u01b0\u1ee3ng node t\u1ed1i thi\u1ec3u ph\u1ea3i tham gia v\u00e0o m\u1ed9t thao t\u00e1c ghi th\u00e0nh c\u00f4ng. \u0110\u1eb7t R v\u00e0 W sao cho R + W &gt; N s\u1ebd t\u1ea1o ra m\u1ed9t h\u1ec7 th\u1ed1ng nh\u01b0 quorum. Trong m\u00f4 h\u00ecnh n\u00e0y, \u0111\u1ed9 tr\u1ec5 c\u1ee7a m\u1ed9t thao t\u00e1c <code>get</code> (ho\u1eb7c <code>put</code>) s\u1ebd ph\u1ee5 thu\u1ed9c v\u00e0o node ch\u1eadm nh\u1ea5t trong R (ho\u1eb7c W) node. V\u00ec l\u00fd do n\u00e0y, R v\u00e0 W th\u01b0\u1eddng \u0111\u01b0\u1ee3c c\u1ea5u h\u00ecnh \u0111\u1ec3 nh\u1ecf h\u01a1n N, \u0111\u1ec3 c\u1ea3i thi\u1ec7n \u0111\u1ed9 tr\u1ec5.</p> <p>Khi nh\u1eadn \u0111\u01b0\u1ee3c request <code>put()</code> cho m\u00f4t key, node \u0111i\u1ec1u ph\u1ed1i s\u1ebd sinh ra vector clock cho version m\u1edbi v\u00e0 vi\u1ebft version m\u1edbi n\u00e0y v\u00e0o ch\u00ednh n\u00f3. Node \u0111i\u1ec1u ph\u1ed1i s\u1ebd g\u1eedi phi\u00ean b\u1ea3n m\u1edbi n\u00e0y (c\u00f9ng v\u1edbi vector clock m\u1edbi) \u0111\u1ebfn N node cao nh\u1ea5t trong danh s\u00e1ch \u01b0u ti\u00ean. N\u1ebfu \u00edt nh\u1ea5t W-1 node ph\u1ea3n h\u1ed3i th\u00e0nh c\u00f4ng th\u00ec vi\u1ec7c ghi \u0111\u01b0\u1ee3c coi l\u00e0 th\u00e0nh c\u00f4ng (v\u00ec node \u0111i\u1ec1u ph\u1ed1i \u0111\u00e3 ghi th\u00e0nh c\u00f4ng r\u1ed3i).</p> <p>T\u01b0\u01a1ng t\u1ef1, v\u1edbi request <code>get()</code>, node \u0111i\u1ec1u ph\u1ed1i s\u1ebd request t\u1ea5t c\u1ea3 c\u00e1c version hi\u1ec7n c\u00f3 cho key \u0111\u00f3 t\u1eeb N node cao nh\u1ea5t trong danh s\u00e1ch \u01b0u ti\u00ean c\u1ee7a key, sau \u0111\u00f3 \u0111\u1ee3i R ph\u1ea3n h\u1ed3i th\u00e0nh c\u00f4ng tr\u01b0\u1edbc khi tr\u1ea3 k\u1ebft qu\u1ea3 cho client. N\u1ebfu node \u0111i\u1ec1u ph\u1ed1i nh\u1eadn \u0111\u01b0\u1ee3c nhi\u1ec1u h\u01a1n m\u1ed9t versuon c\u1ee7a d\u1eef li\u1ec7u, n\u00f3 s\u1ebd tr\u1ea3 v\u1ec1 t\u1ea5t c\u1ea3 c\u00e1c version kh\u00f4ng c\u00f3 quan h\u1ec7 nh\u00e2n qu\u1ea3 n\u00e0y v\u1ec1 cho client. C\u00e1c version n\u00e0y s\u1ebd \u0111\u01b0\u1ee3c \u0111\u1ed1i chi\u1ebfu v\u00e0 version \u0111\u01b0\u1ee3c \u0111\u1ed1i chi\u1ebfu s\u1ebd \u0111\u01b0\u1ee3c ghi tr\u1edf l\u1ea1i.</p>"},{"location":"misc/papers/amazon-dynamo/#46-xu-ly-loi-hinted-handoff","title":"4.6. X\u1eed l\u00fd l\u1ed7i: Hinted Handoff","text":"<p>N\u1ebfu Dynamo s\u1eed d\u1ee5ng c\u00e1ch ti\u1ebfp c\u1eadn quorum truy\u1ec1n th\u1ed1ng, n\u00f3 s\u1ebd kh\u00f4ng kh\u1ea3 d\u1ee5ng khi server c\u00f3 l\u1ed7i v\u00e0 ph\u00e2n v\u00f9ng m\u1ea1ng, v\u00e0 s\u1ebd l\u00e0m gi\u1ea3m \u0111\u1ed9 b\u1ec1n h\u1ec7 th\u1ed1ng, ngay c\u1ea3 trong \u0111i\u1ec1u ki\u1ec7n l\u1ed7i \u0111\u01a1n gi\u1ea3n nh\u1ea5t. \u0110\u1ec3 gi\u1ea3i quy\u1ebft \u0111i\u1ec1u n\u00e0y, n\u00f3 s\u1ebd kh\u00f4ng \u00e1p d\u1ee5ng c\u00e1c quy t\u1eafc quorum nghi\u00eam ng\u1eb7t m\u00e0 s\u1ebd s\u1eed d\u1ee5ng \"sloppy quorum\"; t\u1ea5t c\u1ea3 c\u00e1c thao t\u00e1c \u0111\u1ecdc v\u00e0 ghi s\u1ebd \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n tr\u00ean N node \u0111\u1ea7u ti\u00ean trong danh s\u00e1ch \u01b0u ti\u00ean, m\u00e0 kh\u00f4ng nh\u1ea5t thi\u1ebft ph\u1ea3i l\u00e0 N node \u0111\u1ea7u ti\u00ean m\u00e0 n\u00f3 g\u1eb7p khi \u0111i theo v\u00f2ng consistent hashing.</p> <p>X\u00e9t v\u00ed d\u1ee5 v\u1ec1 c\u1ea5u h\u00ecnh Dynamo trong h\u00ecnh 2 v\u1edbi N = 3. Trong v\u00ed d\u1ee5 n\u00e0y, n\u1ebfu node A ch\u1ebft ho\u1eb7c kh\u00f4ng truy c\u1eadp \u0111\u01b0\u1ee3c trong khi th\u1ef1c hi\u1ec7n thao t\u00e1c ghi, b\u1ea3n sao m\u00e0 th\u01b0\u1eddng s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u tr\u00ean A s\u1ebd \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn node D. Vi\u1ec7c n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 \u0111\u1ed9 b\u1ec1n nh\u01b0 mong mu\u1ed1n. B\u1ea3n sao \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn D s\u1ebd c\u00f3 m\u1ed9t hint trong metadata c\u1ee7a n\u00f3 cho bi\u1ebft node n\u00e0o l\u00e0 node \u0111\u00edch (trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y l\u00e0 A). C\u00e1c node nh\u1eadn \u0111\u01b0\u1ee3c b\u1ea3n sao s\u1ebd gi\u1eef ch\u00fang trong m\u1ed9t database c\u1ee5c b\u1ed9 ri\u00eang bi\u1ec7t \u0111\u01b0\u1ee3c qu\u00e9t \u0111\u1ecbnh k\u1ef3. Khi ph\u00e1t hi\u1ec7n ra r\u1eb1ng A s\u1ed1ng l\u1ea1i, D s\u1ebd c\u1ed1 g\u1eafng g\u1eedi b\u1ea3n sao \u0111\u1ebfn A. Khi vi\u1ec7c chuy\u1ec3n th\u00e0nh c\u00f4ng, D c\u00f3 th\u1ec3 xo\u00e1 object kh\u1ecfi database c\u1ee5c b\u1ed9 m\u00e0 kh\u00f4ng l\u00e0m gi\u1ea3m s\u1ed1 l\u01b0\u1ee3ng b\u1ea3n sao trong h\u1ec7 th\u1ed1ng.</p> <p>V\u1edbi hinted handoff, Dynamo \u0111\u1ea3m b\u1ea3o r\u1eb1ng c\u00e1c thao t\u00e1c \u0111\u1ecdc v\u00e0 ghi kh\u00f4ng b\u1ecb l\u1ed7i do node ho\u1eb7c m\u1ea1ng t\u1ea1m th\u1eddi. C\u00e1c \u1ee9ng d\u1ee5ng c\u1ea7n t\u00ednh kh\u1ea3 d\u1ee5ng cao nh\u1ea5t c\u00f3 th\u1ec3 \u0111\u1eb7t W = 1, \u0111\u1ea3m b\u1ea3o r\u1eb1ng m\u1ed9t thao t\u00e1c ghi \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn n\u1ebfu \u00edt nh\u1ea5t m\u1ed9t node trong h\u1ec7 th\u1ed1ng \u0111\u00e3 ghi key \u0111\u00f3 v\u00e0o b\u1ed9 nh\u1edb c\u1ee5c b\u1ed9. Do \u0111\u00f3, thao t\u00e1c ghi ch\u1ec9 b\u1ecb t\u1eeb ch\u1ed1i khi t\u1ea5t c\u1ea3 c\u00e1c node trong h\u1ec7 th\u1ed1ng \u0111\u1ec1u kh\u00f4ng kh\u1ea3 d\u1ee5ng. Tuy nhi\u00ean, trong th\u1ef1c t\u1ebf, h\u1ea7u h\u1ebft c\u00e1c d\u1ecbch v\u1ee5 Amazon \u0111ang ho\u1ea1t \u0111\u1ed9ng \u0111\u1ec1u \u0111\u1eb7t W cao h\u01a1n \u0111\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c m\u1ee9c \u0111\u1ed9 b\u1ec1n mong mu\u1ed1n. Ph\u1ea7n 6 s\u1ebd tr\u00ecnh b\u00e0y chi ti\u1ebft h\u01a1n v\u1ec1 c\u00e1ch c\u1ea5u h\u00ecnh N, R v\u00e0 W.</p> <p>M\u1ed9t h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao b\u1eaft bu\u1ed9c ph\u1ea3i c\u00f3 kh\u1ea3 n\u0103ng ph\u1ea3n \u1ee9ng tr\u01b0\u1edbc s\u1ef1 c\u1ed1 c\u1ee7a to\u00e0n b\u1ed9 (c\u00e1c) data center. S\u1ef1 c\u1ed1 data center x\u1ea3y ra do m\u1ea5t \u0111i\u1ec7n, l\u1ed7i h\u1ec7 th\u1ed1ng l\u00e0m m\u00e1t, m\u1ea5t m\u1ea1ng, thi\u00ean tai. Dynamo \u0111\u01b0\u1ee3c c\u1ea5u h\u00ecnh sao cho m\u1ed7i object \u0111\u01b0\u1ee3c replicate tr\u00ean nhi\u1ec1u data center. C\u1ee5 th\u1ec3, danh s\u00e1ch \u01b0u ti\u00ean c\u1ee7a m\u1ed9t key \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng sao cho c\u00e1c node l\u01b0u tr\u1eef \u0111\u01b0\u1ee3c ph\u00e2n b\u1ed1 tr\u00ean nhi\u1ec1u data center. C\u00e1c data center n\u00e0y \u0111\u01b0\u1ee3c k\u1ebft n\u1ed1i v\u1edbi nhau b\u1eb1ng c\u00e1c li\u00ean k\u1ebft m\u1ea1ng t\u1ed1c \u0111\u1ed9 cao. C\u00e1ch th\u1ee9c sao ch\u00e9p tr\u00ean nhi\u1ec1u data center cho ph\u00e9p h\u1ec7 th\u1ed1ng x\u1eed l\u00fd s\u1ef1 c\u1ed1 to\u00e0n b\u1ed9 data center m\u00e0 kh\u00f4ng l\u00e0m gi\u00e1n \u0111o\u1ea1n d\u1eef li\u1ec7u.</p>"},{"location":"misc/papers/amazon-dynamo/#47-xu-ly-loi-dai-dang-ong-bo-replica","title":"4.7. X\u1eed l\u00fd l\u1ed7i dai d\u1eb3ng: \u0110\u1ed3ng b\u1ed9 replica","text":"<p>Hinted handoff ho\u1ea1t \u0111\u1ed9ng ngon nh\u1ea5t n\u1ebfu t\u1ec9 l\u1ec7 thay \u0111\u1ed5i th\u00e0nh vi\u00ean (node) th\u1ea5p v\u00e0 s\u1ef1 c\u1ed1 node ch\u1ec9 l\u00e0 nh\u1ea5t th\u1eddi. C\u00f3 nh\u1eefng tr\u01b0\u1eddng h\u1ee3p m\u00e0 c\u00e1c b\u1ea3n sao hinted kh\u00f4ng kh\u1ea3 d\u1ee5ng tr\u01b0\u1edbc khi ch\u00fang c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 node ban \u0111\u1ea7u. \u0110\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y v\u00e0 c\u00e1c v\u1ea5n \u0111\u1ec1 kh\u00e1c v\u1ec1 \u0111\u1ed9 b\u1ec1n, Dynamo tri\u1ec3n khai giao th\u1ee9c ph\u1ea3n entropy (\u0111\u1ed3ng b\u1ed9 replica) \u0111\u1ec3 gi\u1eef c\u00e1c b\u1ea3n sao \u0111\u01b0\u1ee3c \u0111\u1ed3ng b\u1ed9.</p> <p>\u0110\u1ec3 ph\u00e1t hi\u1ec7n nh\u1eefng s\u1ef1 b\u1ea5t nh\u1ea5t gi\u1eefa c\u00e1c replica nhanh h\u01a1n v\u00e0 gi\u1ea3m thi\u1ec3u l\u01b0\u1ee3ng d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c truy\u1ec1n, Dynamo d\u00f9ng c\u00e2y Merkle [13]. C\u00e2y Merkle l\u00e0 m\u1ed9t c\u00e2y hash trong \u0111\u00f3 c\u00e1c node l\u00e1 l\u00e0 c\u00e1c gi\u00e1 tr\u1ecb hash c\u1ee7a t\u1eebng key ri\u00eang l\u1ebb. C\u00e1c node cha cao h\u01a1n trong c\u00e2y l\u00e0 c\u00e1c gi\u00e1 tr\u1ecb hash c\u1ee7a c\u00e1c node con t\u01b0\u01a1ng \u1ee9ng. \u01afu \u0111i\u1ec3m ch\u00ednh c\u1ee7a c\u00e2y Merkle l\u00e0 m\u1ed7i nh\u00e1nh c\u1ee7a c\u00e2y c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c ki\u1ec3m tra m\u1ed9t c\u00e1ch \u0111\u1ed9c l\u1eadp m\u00e0 kh\u00f4ng c\u1ea7n c\u00e1c node ph\u1ea3i t\u1ea3i to\u00e0n b\u1ed9 c\u00e2y ho\u1eb7c to\u00e0n b\u1ed9 t\u1eadp d\u1eef li\u1ec7u. H\u01a1n n\u1eefa, c\u00e2y Merkle gi\u00fap gi\u1ea3m thi\u1ec3u l\u01b0\u1ee3ng d\u1eef li\u1ec7u c\u1ea7n \u0111\u01b0\u1ee3c truy\u1ec1n trong qu\u00e1 tr\u00ecnh \u0111\u1ed3ng b\u1ed9. V\u00ed d\u1ee5, n\u1ebfu gi\u00e1 tr\u1ecb hash c\u1ee7a hai c\u00e2y gi\u1ed1ng nhau, th\u00ec c\u00e1c gi\u00e1 tr\u1ecb c\u1ee7a c\u00e1c node l\u00e1 trong c\u00e2y c\u0169ng gi\u1ed1ng nhau v\u00e0 c\u00e1c node kh\u00f4ng c\u1ea7n \u0111\u1ed3ng b\u1ed9. N\u1ebfu kh\u00f4ng, n\u00f3 c\u00f3 ngh\u0129a l\u00e0 c\u00e1c gi\u00e1 tr\u1ecb c\u1ee7a m\u1ed9t s\u1ed1 b\u1ea3n sao kh\u00e1c nhau. Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, c\u00e1c node c\u00f3 th\u1ec3 trao \u0111\u1ed5i c\u00e1c gi\u00e1 tr\u1ecb hash c\u1ee7a c\u00e1c node con v\u00e0 qu\u00e1 tr\u00ecnh ti\u1ebfp t\u1ee5c cho \u0111\u1ebfn khi n\u00f3 \u0111\u1ea1t \u0111\u1ebfn c\u00e1c node l\u00e1 c\u1ee7a c\u00e2y, t\u1ea1i \u0111\u00f3 c\u00e1c host c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh c\u00e1c key kh\u00f4ng \u0111\u1ed3ng b\u1ed9. C\u00e2y Merkle gi\u1ea3m thi\u1ec3u l\u01b0\u1ee3ng d\u1eef li\u1ec7u c\u1ea7n \u0111\u01b0\u1ee3c truy\u1ec1n trong qu\u00e1 tr\u00ecnh \u0111\u1ed3ng b\u1ed9 v\u00e0 gi\u1ea3m s\u1ed1 l\u1ea7n \u0111\u1ecdc \u0111\u0129a trong qu\u00e1 tr\u00ecnh ph\u1ea3n entropy.</p> <p>Dynamo s\u1eed d\u1ee5ng c\u00e2y Merkle cho ph\u1ea3n entropy nh\u01b0 sau: M\u1ed7i node duy tr\u00ec m\u1ed9t c\u00e2y Merkle ri\u00eang bi\u1ec7t cho m\u1ed7i kho\u1ea3ng key (t\u1eadp h\u1ee3p c\u00e1c key \u0111\u01b0\u1ee3c bao ph\u1ee7 b\u1edfi m\u1ed9t node \u1ea3o). \u0110i\u1ec1u n\u00e0y cho ph\u00e9p c\u00e1c node so s\u00e1nh xem c\u00e1c key trong m\u1ed9t kho\u1ea3ng key c\u00f3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt hay kh\u00f4ng. Trong k\u1ebf ho\u1ea1ch n\u00e0y, hai node trao \u0111\u1ed5i c\u00e1c node g\u1ed1c c\u1ee7a c\u00e2y Merkle t\u01b0\u01a1ng \u1ee9ng v\u1edbi c\u00e1c kho\u1ea3ng key m\u00e0 ch\u00fang chia s\u1ebb. Sau \u0111\u00f3, s\u1eed d\u1ee5ng c\u00e1ch duy\u1ec7t c\u00e2y \u0111\u00e3 \u0111\u01b0\u1ee3c m\u00f4 t\u1ea3 \u1edf tr\u00ean, c\u00e1c node x\u00e1c \u0111\u1ecbnh xem ch\u00fang c\u00f3 b\u1ea5t k\u1ef3 s\u1ef1 kh\u00e1c bi\u1ec7t n\u00e0o kh\u00f4ng v\u00e0 th\u1ef1c hi\u1ec7n h\u00e0nh \u0111\u1ed9ng ph\u1ea3n entropy th\u00edch h\u1ee3p. Nh\u01b0\u1ee3c \u0111i\u1ec3m l\u00e0 nhi\u1ec1u kho\u1ea3ng key thay \u0111\u1ed5i khi m\u1ed9t node tham gia ho\u1eb7c r\u1eddi kh\u1ecfi h\u1ec7 th\u1ed1ng, do \u0111\u00f3 y\u00eau c\u1ea7u t\u00ednh to\u00e1n l\u1ea1i (c\u00e1c) c\u00e2y. Tuy nhi\u00ean, v\u1ea5n \u0111\u1ec1 n\u00e0y \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft b\u1eb1ng c\u00e1ch ph\u00e2n chia m\u1ed9t c\u00e1ch tinh vi h\u01a1n, s\u1ebd \u0111\u01b0\u1ee3c m\u00f4 t\u1ea3 trong ph\u1ea7n 6.2.</p>"},{"location":"misc/papers/amazon-dynamo/#48-giao-thuc-thanh-vien-va-phat-hien-su-co","title":"4.8. Giao th\u1ee9c th\u00e0nh vi\u00ean v\u00e0 ph\u00e1t hi\u1ec7n s\u1ef1 c\u1ed1","text":""},{"location":"misc/papers/amazon-dynamo/#481-vong-thanh-vien","title":"4.8.1. V\u00f2ng th\u00e0nh vi\u00ean","text":"<p>Trong m\u00f4i tr\u01b0\u1eddng c\u1ee7a Amazon, node b\u1ecb ch\u1ebft (do s\u1ef1 c\u1ed1 ho\u1eb7c b\u1ea3o tr\u00ec) th\u01b0\u1eddng ng\u1eafn nh\u01b0ng \u0111\u00f4i khi c\u00f3 th\u1ec3 d\u00e0i h\u01a1n d\u1ef1 ki\u1ebfn. S\u1ef1 c\u1ed1 node hi\u1ebfm khi d\u1eabn \u0111\u1ebfn vi\u1ec7c lo\u1ea1i b\u1ecf ho\u00e0n to\u00e1n node \u0111\u00f3 v\u00e0 v\u00ec th\u1ebf s\u1ebd kh\u00f4ng d\u1eabn \u0111\u1ebfn vi\u1ec7c t\u00e1i c\u00e2n b\u1eb1ng ph\u00e2n v\u00f9ng ho\u1eb7c s\u1eeda ch\u1eefa c\u00e1c b\u1ea3n sao kh\u00f4ng th\u00ea truy c\u1eadp \u0111\u01b0\u1ee3c. T\u01b0\u01a1ng t\u1ef1, l\u1ed7i ng\u01b0\u1eddi d\u00f9ng c\u00f3 th\u1ec3 d\u1eabn \u0111\u1ebfn vi\u1ec7c kh\u1edfi \u0111\u1ed9ng l\u1ea1i c\u00e1c node Dynamo. V\u00ec nh\u1eefng l\u00fd do n\u00e0y, ta n\u00ean s\u1eed d\u1ee5ng m\u1ed9t c\u01a1 ch\u1ebf r\u00f5 r\u00e0ng \u0111\u1ec3 kh\u1edfi \u0111\u1ed9ng v\u00e0 lo\u1ea1i b\u1ecf c\u00e1c node kh\u1ecfi v\u00f2ng. M\u1ed9t admin s\u1ebd s\u1eed d\u1ee5ng m\u1ed9t command-line tool ho\u1eb7c browser \u0111\u1ec3 k\u1ebft n\u1ed1i \u0111\u1ebfn m\u1ed9t node Dynamo v\u00e0 th\u1ef1c hi\u1ec7n m\u1ed9t thay \u0111\u1ed5i th\u00e0nh vi\u00ean \u0111\u1ec3 th\u00eam m\u1ed9t node v\u00e0o v\u00f2ng ho\u1eb7c lo\u1ea1i b\u1ecf m\u1ed9t node kh\u1ecfi v\u00f2ng. Node nh\u1eadn y\u00eau c\u1ea7u s\u1ebd ghi l\u1ea1i thay \u0111\u1ed5i th\u00e0nh vi\u00ean v\u00e0 th\u1eddi gian th\u1ef1c hi\u1ec7n v\u00e0o b\u1ed9 nh\u1edb l\u01b0u tr\u1eef. C\u00e1c thay \u0111\u1ed5i th\u00e0nh vi\u00ean t\u1ea1o th\u00e0nh m\u1ed9t l\u1ecbch s\u1eed v\u00ec c\u00e1c node c\u00f3 th\u1ec3 b\u1ecb lo\u1ea1i b\u1ecf v\u00e0 th\u00eam l\u1ea1i nhi\u1ec1u l\u1ea7n. M\u1ed9t giao th\u1ee9c gossip s\u1ebd ph\u00e2n b\u1ed1 c\u00e1c thay \u0111\u1ed5i th\u00e0nh vi\u00ean v\u00e0 duy tr\u00ec m\u1ed9t giao di\u1ec7n th\u00e0nh vi\u00ean nh\u1ea5t qu\u00e1n \u0111\u1ebfn c\u00f9ng. M\u1ed7i node s\u1ebd li\u00ean h\u1ec7 v\u1edbi m\u1ed9t node ng\u1eabu nhi\u00ean m\u1ed7i gi\u00e2y v\u00e0 hai node s\u1ebd c\u1eadp nh\u1eadt l\u1ecbch s\u1eed thay \u0111\u1ed5i th\u00e0nh vi\u00ean c\u1ee7a m\u00ecnh m\u1ed9t c\u00e1ch hi\u1ec7u qu\u1ea3.</p> <p>Khi m\u1ed9t node \u0111\u01b0\u1ee3c kh\u1edfi \u0111\u1ed9ng l\u1ea7n \u0111\u1ea7u, n\u00f3 ch\u1ecdn m\u1ed9t t\u1eadp c\u00e1c token (node \u1ea3o trong kh\u00f4ng gian consistent hash) v\u00e0 \u00e1nh x\u1ea1 c\u00e1c node v\u00e0o c\u00e1c t\u1eadp token t\u01b0\u01a1ng \u1ee9ng c\u1ee7a ch\u00fang. \u00c1nh x\u1ea1 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef tr\u00ean \u0111\u0129a v\u00e0 ban \u0111\u1ea7u ch\u1ec9 ch\u1ee9a node c\u1ee5c b\u1ed9 v\u00e0 t\u1eadp token. C\u00e1c \u00e1nh x\u1ea1 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef tr\u00ean c\u00e1c node Dynamo kh\u00e1c nhau \u0111\u01b0\u1ee3c \u0111i\u1ec1u ph\u1ed1i trong c\u00f9ng m\u1ed9t giao ti\u1ebfp \u0111\u1ec3 \u0111i\u1ec1u ph\u1ed1i l\u1ecbch s\u1eed thay \u0111\u1ed5i th\u00e0nh vi\u00ean. Do \u0111\u00f3, ph\u00e2n v\u00f9ng v\u00e0 th\u00f4ng tin v\u1ecb tr\u00ed c\u0169ng \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i th\u00f4ng qua giao th\u1ee9c gossip v\u00e0 m\u1ed7i node l\u01b0u tr\u1eef bi\u1ebft \u0111\u01b0\u1ee3c c\u00e1c kho\u1ea3ng token \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi c\u00e1c node kh\u00e1c. \u0110i\u1ec1u n\u00e0y cho ph\u00e9p m\u1ed7i node chuy\u1ec3n ti\u1ebfp c\u00e1c thao t\u00e1c \u0111\u1ecdc / ghi c\u1ee7a m\u1ed9t key tr\u1ef1c ti\u1ebfp \u0111\u1ebfn t\u1eadp h\u1ee3p c\u00e1c node th\u00edch h\u1ee3p.</p>"},{"location":"misc/papers/amazon-dynamo/#482-external-discovery","title":"4.8.2. External Discovery","text":"<p>C\u01a1 ch\u1ebf \u1edf tr\u00ean c\u00f3 th\u1ec3 t\u1ea1m th\u1eddi t\u1ea1o ra \u0111\u01b0\u1ee3c m\u1ed9t v\u00f2ng Dynamo \u0111\u01b0\u1ee3c ph\u00e2n v\u00f9ng h\u1ee3p l\u00fd. V\u00ed d\u1ee5, admin c\u00f3 th\u1ec3 li\u00ean h\u1ec7 v\u1edbi node A \u0111\u1ec3 th\u00eam A v\u00e0o v\u00f2ng, sau \u0111\u00f3 li\u00ean h\u1ec7 v\u1edbi node B \u0111\u1ec3 th\u00eam B v\u00e0o v\u00f2ng. Trong k\u1ecbch b\u1ea3n n\u00e0y, node A v\u00e0 B s\u1ebd xem ch\u00fang l\u00e0 th\u00e0nh vi\u00ean c\u1ee7a v\u00f2ng, nh\u01b0ng ch\u01b0a nh\u1eadn ra nhau trong v\u00f2ng. \u0110\u1ec3 ng\u0103n ch\u1eb7n c\u00e1c ph\u00e2n v\u00f9ng logic, m\u1ed9t s\u1ed1 node Dynamo s\u1ebd \u0111\u00f3ng vai tr\u00f2 seed. Seed l\u00e0 c\u00e1c node \u0111\u01b0\u1ee3c ph\u00e1t hi\u1ec7n th\u00f4ng qua m\u1ed9t c\u01a1 ch\u1ebf b\u00ean ngo\u00e0i v\u00e0 \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn b\u1edfi t\u1ea5t c\u1ea3 c\u00e1c node. V\u00ec t\u1ea5t c\u1ea3 c\u00e1c node cu\u1ed1i c\u00f9ng s\u1ebd \u0111\u1ed3ng b\u1ed9 th\u00e0nh vi\u00ean c\u1ee7a m\u00ecnh v\u1edbi seed, do v\u1eady vi\u1ec7c ph\u00e2n v\u00f9ng logic r\u1ea5t kh\u00f3 x\u1ea3y ra. Seed c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c l\u1ea5y t\u1eeb static configuration ho\u1eb7c t\u1eeb configuration service. Th\u00f4ng th\u01b0\u1eddng, seed l\u00e0 c\u00e1c node c\u00f3 \u0111\u1ea7y \u0111\u1ee7 ch\u1ee9c n\u0103ng trong v\u00f2ng Dynamo.</p>"},{"location":"misc/papers/amazon-dynamo/#483-phat-hien-su-co","title":"4.8.3. Ph\u00e1t hi\u1ec7n s\u1ef1 c\u1ed1","text":"<p>T\u00ednh n\u0103ng ph\u00e1t hi\u1ec7n s\u1ef1 c\u1ed1 trong Dynamo \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 tr\u00e1nh vi\u1ec7c giao ti\u1ebfp v\u1edbi c\u00e1c node b\u1ecb ch\u1ebft trong khi \u0111ang th\u1ef1c hi\u1ec7n c\u00e1c thao t\u00e1c <code>get()</code> v\u00e0 <code>put()</code> c\u0169ng nh\u01b0 khi chuy\u1ec3n ph\u00e2n v\u00f9ng v\u00e0 c\u00e1c b\u1ea3n sao hinted. \u0110\u1ec3 tr\u00e1nh vi\u1ec7c c\u1ed1 g\u1eafng giao ti\u1ebfp v\u1edbi c\u00e1c node ch\u1ebft, ch\u1ec9 c\u1ea7n m\u1ed9t \u0111\u1ecbnh ngh\u0129a \u0111\u01a1n gi\u1ea3n v\u1ec1 ph\u00e1t hi\u1ec7n s\u1ef1 c\u1ed1 l\u00e0 \u0111\u1ee7: node A s\u1ebd xem node B ch\u1ebft khi node B kh\u00f4ng tr\u1ea3 l\u1eddi node A (ngay c\u1ea3 khi B tr\u1ea3 l\u1eddi node C). Khi c\u00f3 t\u1ed1c \u0111\u1ed9 \u1ed5n \u0111\u1ecbnh c\u00e1c client request t\u1ea1o ra li\u00ean l\u1ea1c n\u1ed9i b\u1ed9 trong v\u00f2ng Dynamo, node A nhanh ch\u00f3ng nh\u1eadn ra r\u1eb1ng node B kh\u00f4ng tr\u1ea3 l\u1eddi khi B th\u1ea5t b\u1ea1i trong vi\u1ec7c tr\u1ea3 l\u1eddi tin nh\u1eafn c\u1ee7a A; Node A sau \u0111\u00f3 s\u1eed d\u1ee5ng c\u00e1c node thay th\u1ebf \u0111\u1ec3 ph\u1ee5c v\u1ee5 c\u00e1c request t\u01b0\u01a1ng \u1ee9ng v\u1edbi c\u00e1c ph\u00e2n v\u00f9ng c\u1ee7a B; A \u0111\u1ecbnh k\u1ef3 th\u1eed l\u1ea1i B \u0111\u1ec3 ki\u1ec3m tra vi\u1ec7c ph\u1ee5c h\u1ed3i c\u1ee7a B. Trong tr\u01b0\u1eddng h\u1ee3p kh\u00f4ng c\u00f3 request client n\u00e0o \u0111\u1ec3 t\u1ea1o ra li\u00ean l\u1ea1c gi\u1eefa hai node, ta kh\u00f4ng c\u1ea7n ph\u1ea3i bi\u1ebft r\u1eb1ng node kia c\u00f3 th\u1ec3 truy c\u1eadp \u0111\u01b0\u1ee3c hay kh\u00f4ng.</p> <p>C\u00e1c giao th\u1ee9c ph\u00e1t hi\u1ec7n s\u1ef1 c\u1ed1 phi t\u1eadp trung s\u1eed d\u1ee5ng m\u1ed9t giao th\u1ee9c ki\u1ec3u gossip \u0111\u01a1n gi\u1ea3n, trong \u0111\u00f3 cho ph\u00e9p m\u1ed7i node trong h\u1ec7 th\u1ed1ng t\u00ecm hi\u1ec3u vi\u1ec7c th\u00eam v\u00e0o (ho\u1eb7c b\u1edbt \u0111i) c\u00e1c node kh\u00e1c. \u0110\u1ec3 bi\u1ebft th\u00eam th\u00f4ng tin v\u1ec1 c\u00e1c b\u1ed9 ph\u00e1t hi\u1ec7n s\u1ef1 c\u1ed1 phi t\u1eadp trung v\u00e0 c\u00e1c tham s\u1ed1 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn s\u1ef1 ch\u00ednh x\u00e1c c\u1ee7a ch\u00fang, m\u1eddi b\u1ea1n tham kh\u1ea3o [8]. C\u00e1c thi\u1ebft k\u1ebf ban \u0111\u1ea7u c\u1ee7a Dynamo d\u00f9ng m\u1ed9t b\u1ed9 ph\u00e1t hi\u1ec7n l\u1ed7i phi t\u1eadp trung \u0111\u1ec3 duy tr\u00ec m\u1ed9t view nh\u1ea5t qu\u00e1n v\u1ec1 tr\u1ea1ng th\u00e1i s\u1ef1 c\u1ed1. Sau \u0111\u00f3, ng\u01b0\u1eddi ta x\u00e1c \u0111\u1ecbnh r\u1eb1ng c\u00e1c ph\u01b0\u01a1ng th\u1ee9c th\u00eam hay b\u1edbt node r\u00f5 r\u00e0ng lo\u1ea1i b\u1ecf nhu c\u1ea7u v\u1ec1 m\u1ed9t view to\u00e0n c\u1ea7u v\u1ec1 tr\u1ea1ng th\u00e1i s\u1ef1 c\u1ed1. \u0110i\u1ec1u n\u00e0y l\u00e0 v\u00ec c\u00e1c node \u0111\u01b0\u1ee3c th\u00f4ng b\u00e1o v\u1ec1 vi\u1ec7c th\u00eam v\u00e0o v\u00e0 lo\u1ea1i b\u1ecf c\u00e1c node v\u0129nh vi\u1ec5n b\u1eb1ng c\u00e1c ph\u01b0\u01a1ng th\u1ee9c th\u00eam v\u00e0 b\u1edbt node r\u00f5 r\u00e0ng v\u00e0 c\u00e1c s\u1ef1 c\u1ed1 t\u1ea1m th\u1eddi \u0111\u01b0\u1ee3c ph\u00e1t hi\u1ec7n b\u1edfi c\u00e1c node ri\u00eang l\u1ebb khi ch\u00fang kh\u00f4ng th\u1ec3 giao ti\u1ebfp v\u1edbi c\u00e1c node kh\u00e1c (trong khi chuy\u1ec3n ti\u1ebfp c\u00e1c request).</p>"},{"location":"misc/papers/amazon-dynamo/#49-them-bot-node-luu-tru","title":"4.9. Th\u00eam / b\u1edbt node l\u01b0u tr\u1eef","text":"<p>Khi m\u1ed9t node m\u1edbi (g\u1ecdi l\u00e0 X) \u0111\u01b0\u1ee3c th\u00eam v\u00e0o h\u1ec7 th\u1ed1ng, n\u00f3 \u0111\u01b0\u1ee3c g\u00e1n m\u1ed9t s\u1ed1 token \u0111\u01b0\u1ee3c ph\u00e2n t\u00e1n ng\u1eabu nhi\u00ean tr\u00ean v\u00f2ng. \u0110\u1ed1i v\u1edbi m\u1ed7i kho\u1ea3ng key \u0111\u01b0\u1ee3c giao cho node X, c\u00f3 th\u1ec3 c\u00f3 m\u1ed9t s\u1ed1 node (\u00edt h\u01a1n ho\u1eb7c b\u1eb1ng N) \u0111ang ch\u1ecbu tr\u00e1ch nhi\u1ec7m x\u1eed l\u00fd c\u00e1c key n\u1eb1m trong kho\u1ea3ng token c\u1ee7a n\u00f3. Do ph\u00e2n b\u1ed5 kho\u1ea3ng key cho X, m\u1ed9t s\u1ed1 node hi\u1ec7n c\u00f3 kh\u00f4ng c\u00f2n ph\u1ea3i gi\u1eef m\u1ed9t s\u1ed1 key v\u00e0 c\u00e1c node n\u00e0y chuy\u1ec3n c\u00e1c key n\u00e0y cho X. X\u00e9t m\u1ed9t v\u00ed d\u1ee5 khi node X \u0111\u01b0\u1ee3c th\u00eam v\u00e0o v\u00f2ng nh\u01b0 trong h\u00ecnh 2 gi\u1eefa A v\u00e0 B. Khi X \u0111\u01b0\u1ee3c th\u00eam v\u00e0o h\u1ec7 th\u1ed1ng, n\u00f3 ch\u1ecbu tr\u00e1ch nhi\u1ec7m l\u01b0u tr\u1eef c\u00e1c key trong c\u00e1c kho\u1ea3ng <code>(F, G]</code>, <code>(G, A]</code> v\u00e0 <code>(A, X]</code>. Do \u0111\u00f3, c\u00e1c node B, C v\u00e0 D kh\u00f4ng c\u00f2n ph\u1ea3i l\u01b0u tr\u1eef c\u00e1c key trong c\u00e1c kho\u1ea3ng t\u01b0\u01a1ng \u1ee9ng n\u00e0y. Do \u0111\u00f3, c\u00e1c node B, C v\u00e0 D s\u1ebd chuy\u1ec3n c\u00e1c key th\u00edch h\u1ee3p cho X sau khi X x\u00e1c nh\u1eadn. Khi m\u1ed9t node b\u1ecb x\u00f3a kh\u1ecfi h\u1ec7 th\u1ed1ng, vi\u1ec7c ph\u00e2n b\u1ed5 l\u1ea1i c\u00e1c key x\u1ea3y ra theo m\u1ed9t qu\u00e1 tr\u00ecnh ng\u01b0\u1ee3c l\u1ea1i.</p> <p>Kinh nghi\u1ec7m v\u1eadn h\u00e0nh \u0111\u00e3 cho th\u1ea5y c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0y ph\u00e2n ph\u1ed1i key \u0111\u1ed3ng \u0111\u1ec1u tr\u00ean c\u00e1c node l\u01b0u tr\u1eef, \u0111i\u1ec1u n\u00e0y quan tr\u1ecdng \u0111\u1ec3 \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u v\u1ec1 \u0111\u1ed9 tr\u1ec5 v\u00e0 \u0111\u1ea3m b\u1ea3o vi\u1ec7c kh\u1edfi \u0111\u1ed9ng nhanh ch\u00f3ng. Cu\u1ed1i c\u00f9ng, vi\u1ec7c th\u00eam m\u1ed9t b\u01b0\u1edbc x\u00e1c nh\u1eadn gi\u1eefa node cho v\u00e0 node nh\u1eadn \u0111\u1ea3m b\u1ea3o r\u1eb1ng node nh\u1eadn kh\u00f4ng nh\u1eadn b\u1ea5t k\u1ef3 chuy\u1ec3n ti\u1ebfp tr\u00f9ng l\u1eb7p n\u00e0o trong m\u1ed9t kho\u1ea3ng key cho tr\u01b0\u1edbc. </p>"},{"location":"misc/papers/amazon-dynamo/#5-cai-at","title":"5. C\u00e0i \u0111\u1eb7t","text":"<p>Trong Dynamo, m\u1ed7i node l\u01b0u tr\u1eef c\u00f3 3 th\u00e0nh ph\u1ea7n ch\u00ednh: \u0111i\u1ec1u ph\u1ed1i request, giao th\u1ee9c th\u00e0nh vi\u00ean v\u00e0 ph\u00e1t hi\u1ec7n s\u1ef1 c\u1ed1, v\u00e0 m\u1ed9t engine l\u01b0u tr\u1eef c\u1ee5c b\u1ed9. T\u1ea5t c\u1ea3 c\u00e1c th\u00e0nh ph\u1ea7n n\u00e0y \u0111\u01b0\u1ee3c c\u00e0i \u0111\u1eb7t b\u1eb1ng Java.</p> <p>Th\u00e0nh ph\u1ea7n l\u01b0u tr\u1eef c\u1ee5c b\u1ed9 c\u1ee7a Dynamo cho ph\u00e9p c\u00e1c engine l\u01b0u tr\u1eef kh\u00e1c nhau \u0111\u01b0\u1ee3c c\u00e0i v\u00e0o. C\u00e1c engine l\u01b0u tr\u1eef \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\u00e0 Berkeley Database (BDB) Transactional Data Store, BDB Java Edition, MySQL, v\u00e0 m\u1ed9t in-memory buffer v\u1edbi persistent backing store. L\u00fd do ch\u00ednh \u0111\u1ec3 ch\u1ecdn thi\u1ebft k\u1ebf linh ho\u1ea1t nh\u01b0 v\u1eady l\u00e0 \u0111\u1ec3 ch\u1ecdn engine l\u01b0u tr\u1eef ph\u00f9 h\u1ee3p nh\u1ea5t cho c\u00e1c \u1ee9ng d\u1ee5ng. V\u00ed d\u1ee5, BDB c\u00f3 th\u1ec3 x\u1eed l\u00fd c\u00e1c object c\u00f3 k\u00edch th\u01b0\u1edbc th\u01b0\u1eddng l\u00e0 h\u00e0ng ch\u1ee5c kilobyte trong khi MySQL c\u00f3 th\u1ec3 x\u1eed l\u00fd c\u00e1c object c\u00f3 k\u00edch th\u01b0\u1edbc l\u1edbn h\u01a1n. C\u00e1c \u1ee9ng d\u1ee5ng ch\u1ecdn engine l\u01b0u tr\u1eef c\u1ee5c b\u1ed9 c\u1ee7a Dynamo d\u1ef1a tr\u00ean ph\u00e2n ph\u1ed1i k\u00edch th\u01b0\u1edbc object c\u1ee7a ch\u00fang. \u0110a s\u1ed1 c\u00e1c phi\u00ean b\u1ea3n th\u1ef1c t\u1ebf c\u1ee7a Dynamo s\u1eed d\u1ee5ng BDB Transactional Data Store.</p> <p>Th\u00e0nh ph\u1ea7n \u0111i\u1ec1u ph\u1ed1i request \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng d\u1ef1a tr\u00ean n\u1ec1n t\u1ea3ng tin nh\u1eafn h\u01b0\u1edbng s\u1ef1 ki\u1ec7n trong \u0111\u00f3 quy tr\u00ecnh x\u1eed l\u00fd tin nh\u1eafn \u0111\u01b0\u1ee3c chia th\u00e0nh nhi\u1ec1u giai \u0111o\u1ea1n t\u01b0\u01a1ng t\u1ef1 nh\u01b0 ki\u1ebfn tr\u00fac SEDA [24]. T\u1ea5t c\u1ea3 c\u00e1c th\u00f4ng tin li\u00ean l\u1ea1c \u0111\u01b0\u1ee3c c\u00e0i \u0111\u1eb7t b\u1eb1ng Java NIO channel. \u0110i\u1ec1u ph\u1ed1i vi\u00ean s\u1ebd th\u1ef1c hi\u1ec7n c\u00e1c request \u0111\u1ecdc / ghi thay cho client b\u1eb1ng c\u00e1ch thu th\u1eadp d\u1eef li\u1ec7u t\u1eeb m\u1ed9t hay nhi\u1ec1u node (khi \u0111\u1ecdc) ho\u1eb7c l\u01b0u d\u1eef li\u1ec7u v\u00e0o m\u1ed9t hay nhi\u1ec1u node (khi ghi). M\u1ed7i request t\u1eeb client s\u1ebd t\u1ea1o ra m\u1ed9t m\u00e1y tr\u1ea1ng th\u00e1i tr\u00ean node nh\u1eadn \u0111\u01b0\u1ee3c request. Tr\u1ea1ng th\u00e1i m\u00e1y n\u00e0y ch\u1ee9a t\u1ea5t c\u1ea3 c\u00e1c logic \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh c\u00e1c node ch\u1ecbu tr\u00e1ch nhi\u1ec7m cho m\u1ed9t key, g\u1eedi c\u00e1c request, \u0111\u1ee3i ph\u1ea3n h\u1ed3i, th\u1ef1c hi\u1ec7n c\u00e1c b\u01b0\u1edbc th\u1eed l\u1ea1i, x\u1eed l\u00fd c\u00e1c ph\u1ea3n h\u1ed3i v\u00e0 \u0111\u00f3ng g\u00f3i k\u1ebft qu\u1ea3 tr\u1ea3 v\u1ec1 cho client. M\u1ed7i m\u00e1y tr\u1ea1ng th\u00e1i th\u1ef1c hi\u1ec7n \u0111\u00fang m\u1ed9t request t\u1eeb client. V\u00ed d\u1ee5, m\u1ed9t thao t\u00e1c \u0111\u1ecdc th\u1ef1c hi\u1ec7n c\u00e1c giai \u0111o\u1ea1n sau: (1) g\u1eedi c\u00e1c request \u0111\u1ecdc \u0111\u1ebfn c\u00e1c node, (2) \u0111\u1ee3i ph\u1ea3n h\u1ed3i th\u00e0nh c\u00f4ng t\u1eeb m\u1ed9t s\u1ed1 t\u1ed1i thi\u1ec3u c\u00e1c node, (3) n\u1ebfu s\u1ed1 l\u01b0\u1ee3ng ph\u1ea3n h\u1ed3i nh\u1ecf h\u01a1n s\u1ed1 l\u01b0\u1ee3ng y\u00eau c\u1ea7u, request th\u1ea5t b\u1ea1i, (4) ng\u01b0\u1ee3c l\u1ea1i, thu th\u1eadp t\u1ea5t c\u1ea3 c\u00e1c version d\u1eef li\u1ec7u v\u00e0 x\u00e1c \u0111\u1ecbnh version n\u00e0o s\u1ebd \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 v\u00e0 (5) n\u1ebfu vi\u1ec7c versioning \u0111\u01b0\u1ee3c b\u1eadt, th\u1ef1c hi\u1ec7n ph\u00e2n gi\u1ea3i c\u00fa ph\u00e1p v\u00e0 t\u1ea1o ra m\u1ed9t context ghi t\u00f9y \u00fd ch\u1ee9a vector clock bao g\u1ed3m t\u1ea5t c\u1ea3 c\u00e1c version c\u00f2n l\u1ea1i. \u0110\u1ec3 ng\u1eafn g\u1ecdn, c\u00e1c giai \u0111o\u1ea1n x\u1eed l\u00fd l\u1ed7i v\u00e0 th\u1eed l\u1ea1i \u0111\u01b0\u1ee3c b\u1ecf qua.</p> <p>Sau khi response c\u1ee7a thao t\u00e1c \u0111\u1ecdc \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 cho caller, m\u00e1y tr\u1ea1ng th\u00e1i s\u1ebd \u0111\u1ee3i m\u1ed9t kho\u1ea3ng th\u1eddi gian nh\u1ecf \u0111\u1ec3 nh\u1eadn c\u00e1c response ch\u01b0a \u0111\u01b0\u1ee3c x\u1eed l\u00fd. N\u1ebfu c\u00e1c version c\u0169 \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 trong b\u1ea5t k\u1ef3 response n\u00e0o, m\u00e1y tr\u1ea1ng th\u00e1i s\u1ebd c\u1eadp nh\u1eadt c\u00e1c node \u0111\u00f3 v\u1edbi version m\u1edbi nh\u1ea5t. Qu\u00e1 tr\u00ecnh n\u00e0y \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 ph\u1ee5c h\u1ed3i \u0111\u1ecdc v\u00ec n\u00f3 ph\u1ee5c h\u1ed3i c\u00e1c b\u1ea3n sao \u0111\u00e3 b\u1ecf l\u1ee1 m\u1ed9t c\u1eadp nh\u1eadt g\u1ea7n \u0111\u00e2y v\u00e0o m\u1ed9t th\u1eddi \u0111i\u1ec3m thu\u1eadn ti\u1ec7n v\u00e0 gi\u1ea3m thi\u1ec3u vi\u1ec7c ph\u1ea3i th\u1ef1c hi\u1ec7n c\u00e1c b\u01b0\u1edbc ph\u1ee5c h\u1ed3i trong qu\u00e1 tr\u00ecnh ph\u1ea3n entropy.</p> <p>Nh\u01b0 \u0111\u00e3 n\u00f3i \u1edf tr\u00ean, c\u00e1c request ghi \u0111\u01b0\u1ee3c \u0111i\u1ec1u ph\u1ed1i b\u1edfi m\u1ed9t trong top N node trong danh s\u00e1ch \u01b0u ti\u00ean. D\u00f9 s\u1ebd l\u00e0 l\u00fd t\u01b0\u1edfng nh\u1ea5t n\u1ebfu ch\u1ecdn node \u0111\u1ea7u ti\u00ean trong top N node \u0111\u1ec3 \u0111i\u1ec1u ph\u1ed1i c\u00e1c request ghi v\u00e0o chung m\u1ed9t ch\u1ed7, n\u00f3 s\u1ebd t\u1ea1o ra vi\u1ec7c ph\u00e2n b\u1ed1 kh\u00f4ng \u0111\u1ec1u t\u1ea3i v\u00e0 d\u1eabn \u0111\u1ebfn vi\u1ec7c vi ph\u1ea1m SLA. \u0110i\u1ec1u n\u00e0y l\u00e0 v\u00ec l\u01b0\u1ee3ng request kh\u00f4ng \u0111\u01b0\u1ee3c ph\u00e2n b\u1ed1 \u0111\u1ec1u tr\u00ean c\u00e1c object. \u0110\u1ec3 gi\u1ea3i quy\u1ebft v\u1ea5n \u0111\u1ec1 n\u00e0y, b\u1ea5t k\u1ef3 node n\u00e0o trong top N node trong danh s\u00e1ch \u01b0u ti\u00ean c\u0169ng c\u00f3 th\u1ec3 \u0111i\u1ec1u ph\u1ed1i c\u00e1c request ghi. C\u1ee5 th\u1ec3, v\u00ec m\u1ed7i request ghi th\u01b0\u1eddng \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n ngay sau m\u1ed9t thao t\u00e1c \u0111\u1ecdc, node \u0111i\u1ec1u ph\u1ed1i cho m\u1ed9t request ghi th\u01b0\u1eddng l\u00e0 node tr\u1ea3 l\u1eddi nhanh nh\u1ea5t cho thao t\u00e1c \u0111\u1ecdc tr\u01b0\u1edbc \u0111\u00f3 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong th\u00f4ng tin context c\u1ee7a request. T\u1ed1i \u01b0u n\u00e0y cho ph\u00e9p ch\u1ecdn node c\u00f3 d\u1eef li\u1ec7u \u0111\u00e3 \u0111\u01b0\u1ee3c \u0111\u1ecdc b\u1edfi thao t\u00e1c \u0111\u1ecdc tr\u01b0\u1edbc \u0111\u00f3, t\u0103ng kh\u1ea3 n\u0103ng \u0111\u1ea1t \u0111\u01b0\u1ee3c t\u00ednh nh\u1ea5t qu\u00e1n \"read-your-writes\" v\u00e0 gi\u1ea3m \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng c\u1ee7a hi\u1ec7u su\u1ea5t x\u1eed l\u00fd request, c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t \u1edf ph\u00e2n v\u1ecb 99.9.</p>"},{"location":"misc/papers/amazon-dynamo/#6-kinh-nghiem-va-bai-hoc","title":"6. Kinh nghi\u1ec7m v\u00e0 b\u00e0i h\u1ecdc","text":"<p>Dynamo \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1edfi nhi\u1ec1u service v\u1edbi c\u1ea5u h\u00ecnh kh\u00e1c nhau. C\u00e1c instance n\u00e0y kh\u00e1c nhau b\u1edfi logic \u0111\u1ed1i chi\u1ebfu version v\u00e0 c\u00e1c \u0111\u1eb7c t\u00ednh \u0111\u1ecdc / ghi quorum. C\u00e1c pattern ch\u00ednh m\u00e0 Dynamo \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\u00e0:</p> <ul> <li>\u0110\u1ed1i chi\u1ebfu c\u1ee5 th\u1ec3 v\u1ec1 business logic: \u0110\u00e2y l\u00e0 use case ph\u1ed5 bi\u1ebfn nh\u1ea5t c\u1ee7a Dynamo. M\u1ed7i data object \u0111\u01b0\u1ee3c sao ch\u00e9p qua nhi\u1ec1u node. Trong tr\u01b0\u1eddng h\u1ee3p c\u00f3 c\u00e1c version kh\u00e1c nhau, \u1ee9ng d\u1ee5ng client s\u1ebd d\u00f9ng logic \u0111\u1ed1i chi\u1ebfu c\u1ee7a ri\u00eang n\u00f3. V\u00ed d\u1ee5 gi\u1ecf h\u00e0ng mua s\u1eafm \u0111\u00e3 \u0111\u01b0\u1ee3c \u0111\u1ec1 c\u1eadp \u1edf tr\u00ean l\u00e0 m\u1ed9t v\u00ed d\u1ee5 \u0111i\u1ec3n h\u00ecnh cho lo\u1ea1i n\u00e0y. Logic \u0111\u1ed1i chi\u1ebfu c\u1ee7a n\u00f3 s\u1ebd \u0111\u1ed1i chi\u1ebfu c\u00e1c object b\u1eb1ng c\u00e1ch h\u1ee3p nh\u1ea5t c\u00e1c version kh\u00e1c nhau c\u1ee7a gi\u1ecf h\u00e0ng mua s\u1eafm.</li> <li>\u0110\u1ed1i chi\u1ebfu d\u1ef1a tr\u00ean timestamp: Tr\u01b0\u1eddng h\u1ee3p n\u00e0y kh\u00e1c v\u1edbi tr\u01b0\u1eddng h\u1ee3p tr\u00ean ch\u1ec9 \u1edf ch\u1ed7 c\u00e1ch \u0111\u1ed1i chi\u1ebfu. Khi c\u00f3 c\u00e1c version kh\u00e1c nhau, Dynamo s\u1ebd th\u1ef1c hi\u1ec7n \u0111\u1ed1i chi\u1ebfu d\u1ef1a tr\u00ean timestamp theo ki\u1ec3u \"last write wins\", ngh\u0129a l\u00e0 object c\u00f3 timestamp l\u1edbn nh\u1ea5t s\u1ebd \u0111\u01b0\u1ee3c ch\u1ecdn l\u00e0 version \u0111\u00fang. Service duy tr\u00ec th\u00f4ng tin phi\u00ean c\u1ee7a kh\u00e1ch h\u00e0ng l\u00e0 m\u1ed9t v\u00ed d\u1ee5 \u0111i\u1ec3n h\u00ecnh cho lo\u1ea1i n\u00e0y.</li> <li>Engine \u0111\u1ecdc hi\u1ec7u su\u1ea5t cao: Trong khi Dynamo \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng \u0111\u1ec3 l\u00e0 m\u1ed9t data store \"lu\u00f4n c\u00f3 th\u1ec3 ghi\", m\u1ed9t s\u1ed1 service \u0111ang tinh ch\u1ec9nh c\u00e1c \u0111\u1eb7c t\u00ednh quorum c\u1ee7a n\u00f3 v\u00e0 s\u1eed d\u1ee5ng n\u00f3 nh\u01b0 m\u1ed9t engine \u0111\u1ecdc hi\u1ec7u su\u1ea5t cao. Th\u00f4ng th\u01b0\u1eddng, c\u00e1c service n\u00e0y c\u00f3 t\u1ef7 l\u1ec7 request \u0111\u1ecdc cao v\u00e0 ch\u1ec9 c\u00f3 m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng nh\u1ecf c\u00e1c update. Trong c\u1ea5u h\u00ecnh n\u00e0y, th\u00f4ng th\u01b0\u1eddng R \u0111\u01b0\u1ee3c \u0111\u1eb7t l\u00e0 1 v\u00e0 W \u0111\u01b0\u1ee3c \u0111\u1eb7t l\u00e0 N. V\u1edbi c\u00e1c service n\u00e0y, Dynamo cung c\u1ea5p kh\u1ea3 n\u0103ng ph\u00e2n v\u00f9ng v\u00e0 sao ch\u00e9p d\u1eef li\u1ec7u c\u1ee7a ch\u00fang qua nhi\u1ec1u node, do \u0111\u00f3 cung c\u1ea5p kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng t\u0103ng d\u1ea7n. M\u1ed9t s\u1ed1 service duy tr\u00ec danh m\u1ee5c s\u1ea3n ph\u1ea9m v\u00e0 c\u00e1c m\u1eb7t h\u00e0ng khuy\u1ebfn m\u00e3i n\u1eb1m trong lo\u1ea1i n\u00e0y.</li> </ul> <p>L\u1ee3i th\u1ebf ch\u00ednh c\u1ee7a Dynamo l\u00e0 c\u00e1c \u1ee9ng d\u1ee5ng client c\u00f3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh c\u00e1c gi\u00e1 tr\u1ecb N, R v\u00e0 W \u0111\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c m\u1ee9c \u0111\u1ed9 hi\u1ec7u su\u1ea5t, kh\u1ea3 d\u1ee5ng v\u00e0 b\u1ec1n v\u1eefng mong mu\u1ed1n. V\u00ed d\u1ee5, gi\u00e1 tr\u1ecb N quy\u1ebft \u0111\u1ecbnh \u0111\u1ed9 b\u1ec1n c\u1ee7a m\u1ed7i object. Gi\u00e1 tr\u1ecb N th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\u00e0 3.</p> <p>Gi\u00e1 tr\u1ecb W v\u00e0 R \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn t\u00ednh kh\u1ea3 d\u1ee5ng, \u0111\u1ed9 b\u1ec1n v\u00e0 t\u00ednh nh\u1ea5t qu\u00e1n c\u1ee7a object. V\u00ed d\u1ee5, n\u1ebfu W = 1, h\u1ec7 th\u1ed1ng s\u1ebd kh\u00f4ng bao gi\u1edd t\u1eeb ch\u1ed1i m\u1ed9t request ghi n\u00e0o mi\u1ec5n l\u00e0 c\u00f3 \u00edt nh\u1ea5t m\u1ed9t node trong h\u1ec7 th\u1ed1ng c\u00f3 th\u1ec3 x\u1eed l\u00fd request ghi. Tuy nhi\u00ean, gi\u00e1 tr\u1ecb W v\u00e0 R th\u1ea5p c\u00f3 th\u1ec3 l\u00e0m t\u0103ng nguy c\u01a1 kh\u00f4ng nh\u1ea5t qu\u00e1n v\u00ec c\u00e1c request ghi \u0111\u01b0\u1ee3c coi l\u00e0 th\u00e0nh c\u00f4ng v\u00e0 tr\u1ea3 v\u1ec1 cho client ngay c\u1ea3 khi ch\u00fang kh\u00f4ng \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi \u0111a s\u1ed1 c\u00e1c replica. \u0110i\u1ec1u n\u00e0y c\u0169ng t\u1ea1o ra m\u1ed9t \u0111i\u1ec3m y\u1ebfu v\u1ec1 \u0111\u1ed9 b\u1ec1n khi m\u1ed9t request ghi \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 cho client ngay c\u1ea3 khi n\u00f3 ch\u1ec9 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef tr\u00ean m\u1ed9t s\u1ed1 node nh\u1ecf trong h\u1ec7 th\u1ed1ng.</p> <p>Ng\u01b0\u1eddi ta cho r\u1eb1ng \u0111\u1ed9 b\u1ec1n v\u00e0 t\u00ednh kh\u1ea3 d\u1ee5ng lu\u00f4n \u0111i \u0111\u00f4i v\u1edbi nhau. Tuy nhi\u00ean, \u0111i\u1ec1u \u0111\u00f3 kh\u00f4ng h\u1eb3n \u0111\u00fang \u1edf \u0111\u00e2y. V\u00ed d\u1ee5, \u0111i\u1ec3m y\u1ebfu \u0111\u1ed9 b\u1ec1n c\u00f3 th\u1ec3 gi\u1ea3m \u0111i khi t\u0103ng W. \u0110i\u1ec1u n\u00e0y c\u00f3 th\u1ec3 l\u00e0m t\u0103ng x\u00e1c su\u1ea5t t\u1eeb ch\u1ed1i c\u00e1c request (do \u0111\u00f3 gi\u1ea3m kh\u1ea3 d\u1ee5ng) v\u00ec nhi\u1ec1u node l\u01b0u tr\u1eef c\u1ea7n ph\u1ea3i ho\u1ea1t \u0111\u1ed9ng \u0111\u1ec3 x\u1eed l\u00fd m\u1ed9t request ghi.</p> <p>C\u1ea5u h\u00ecnh (N, R, W) ph\u1ed5 bi\u1ebfn \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1edfi nhi\u1ec1u phi\u00ean b\u1ea3n c\u1ee7a Dynamo l\u00e0 (3, 2, 2). C\u00e1c gi\u00e1 tr\u1ecb n\u00e0y \u0111\u01b0\u1ee3c ch\u1ecdn \u0111\u1ec3 \u0111\u00e1p \u1ee9ng c\u00e1c m\u1ee9c \u0111\u1ed9 hi\u1ec7u su\u1ea5t, \u0111\u1ed9 b\u1ec1n, t\u00ednh nh\u1ea5t qu\u00e1n v\u00e0 kh\u1ea3 d\u1ee5ng mong mu\u1ed1n.</p> <p>T\u1ea5t c\u1ea3 c\u00e1c \u0111o l\u01b0\u1eddng \u0111\u01b0\u1ee3c tr\u00ecnh b\u00e0y trong ph\u1ea7n n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n tr\u00ean m\u1ed9t h\u1ec7 th\u1ed1ng th\u1ef1c t\u1ebf \u0111ang ho\u1ea1t \u0111\u1ed9ng v\u1edbi c\u1ea5u h\u00ecnh (3, 2, 2) v\u00e0 ch\u1ea1y m\u1ed9t v\u00e0i tr\u0103m node v\u1edbi c\u1ea5u h\u00ecnh ph\u1ea7n c\u1ee9ng \u0111\u1ed3ng nh\u1ea5t. Nh\u01b0 \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u1edf tr\u00ean, m\u1ed7i phi\u00ean b\u1ea3n c\u1ee7a Dynamo ch\u1ee9a c\u00e1c node \u0111\u01b0\u1ee3c \u0111\u1eb7t trong nhi\u1ec1u data center. C\u00e1c data center n\u00e0y th\u01b0\u1eddng \u0111\u01b0\u1ee3c k\u1ebft n\u1ed1i th\u00f4ng qua c\u00e1c li\u00ean k\u1ebft m\u1ea1ng t\u1ed1c \u0111\u1ed9 cao. Nh\u01b0 \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u1edf tr\u00ean, \u0111\u1ec3 t\u1ea1o ra m\u1ed9t response \u0111\u1ecdc (ho\u1eb7c ghi) th\u00e0nh c\u00f4ng, R (ho\u1eb7c W) node c\u1ea7n ph\u1ea3i ph\u1ea3n h\u1ed3i cho node \u0111i\u1ec1u ph\u1ed1i. R\u00f5 r\u00e0ng, \u0111\u1ed9 tr\u1ec5 m\u1ea1ng gi\u1eefa c\u00e1c data center \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn th\u1eddi gian ph\u1ea3n h\u1ed3i v\u00e0 c\u00e1c node (v\u00e0 v\u1ecb tr\u00ed data cebter c\u1ee7a ch\u00fang) \u0111\u01b0\u1ee3c ch\u1ecdn sao cho c\u00e1c SLA c\u1ee7a \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c \u0111\u00e1p \u1ee9ng.</p>"},{"location":"misc/papers/amazon-dynamo/#61-can-bang-hieu-suat-va-o-ben","title":"6.1. C\u00e2n b\u1eb1ng hi\u1ec7u su\u1ea5t v\u00e0 \u0111\u1ed9 b\u1ec1n","text":"<p>Trong khi m\u1ee5c ti\u00eau c\u1ee7a Dynamo l\u00e0 x\u00e2y d\u1ef1ng m\u1ed9t data store c\u00f3 kh\u1ea3 n\u0103ng kh\u1ea3 d\u1ee5ng cao, hi\u1ec7u su\u1ea5t c\u0169ng l\u00e0 m\u1ed9t ti\u00eau ch\u00ed quan tr\u1ecdng trong n\u1ec1n t\u1ea3ng c\u1ee7a Amazon. Nh\u01b0 \u0111\u00e3 \u0111\u1ec1 c\u1eadp \u1edf tr\u00ean, \u0111\u1ec3 cung c\u1ea5p m\u1ed9t tr\u1ea3i nghi\u1ec7m kh\u00e1ch h\u00e0ng nh\u1ea5t qu\u00e1n, c\u00e1c d\u1ecbch v\u1ee5 c\u1ee7a Amazon \u0111\u1eb7t c\u00e1c m\u1ee5c ti\u00eau hi\u1ec7u su\u1ea5t \u1edf ph\u00e2n v\u1ecb cao (nh\u01b0 ph\u00e2n v\u1ecb 99.9 ho\u1eb7c 99.99). M\u1ed9t SLA \u0111i\u1ec3n h\u00ecnh \u0111\u01b0\u1ee3c y\u00eau c\u1ea7u c\u1ee7a c\u00e1c d\u1ecbch v\u1ee5 s\u1eed d\u1ee5ng Dynamo l\u00e0 99.9% c\u00e1c request \u0111\u1ecdc v\u00e0 ghi \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n trong v\u00f2ng 300ms.</p> <p></p> H\u00ecnh 4: \u0110\u1ed9 tr\u1ec5 trung b\u00ecnh v\u00e0 ph\u00e2n v\u1ecb 99.9 c\u1ee7a c\u00e1c request \u0111\u1ecdc v\u00e0 ghi trong m\u00f9a cao \u0111i\u1ec3m th\u00e1ng 12 n\u0103m 2006. M\u1ed7i \u0111o\u1ea1n tr\u00ean tr\u1ee5c ho\u00e0nh b\u1eb1ng 12 ti\u1ebfng. \u0110\u1ed9 tr\u1ec5 tu\u00e2n theo m\u00f4 h\u00ecnh ng\u00e0y \u0111\u00eam t\u01b0\u01a1ng t\u1ef1 nh\u01b0 t\u1ed1c \u0111\u1ed9 request v\u00e0 \u0111\u1ed9 tr\u00ea ph\u00e2n v\u1ecb 99.9 l\u00e0 m\u1ee9c cao h\u01a1n trung b\u00ecnh. <p>V\u00ec Dynamo \u0111\u01b0\u1ee3c ch\u1ea1y tr\u00ean c\u00e1c th\u00e0nh ph\u1ea7n ph\u1ea7n c\u1ee9ng th\u00f4ng th\u01b0\u1eddng ti\u00eau chu\u1ea9n c\u00f3 th\u00f4ng l\u01b0\u1ee3ng I/O \u00edt h\u01a1n nhi\u1ec1u so v\u1edbi c\u00e1c server doanh nghi\u1ec7p cao c\u1ea5p, n\u00ean vi\u1ec7c cung c\u1ea5p hi\u1ec7u su\u1ea5t cao \u1ed5n \u0111\u1ecbnh cho vi\u1ec7c \u0111\u1ecdc v\u00e0 ghi l\u00e0 m\u1ed9t nhi\u1ec7m v\u1ee5 kh\u00f4ng h\u1ec1 \u0111\u01a1n gi\u1ea3n. S\u1ef1 tham gia c\u1ee7a nhi\u1ec1u node l\u01b0u tr\u1eef trong thao t\u00e1c \u0111\u1ecdc v\u00e0 ghi khi\u1ebfn vi\u1ec7c n\u00e0y c\u00e0ng tr\u1edf n\u00ean kh\u00f3 kh\u0103n h\u01a1n, v\u00ec hi\u1ec7u su\u1ea5t c\u1ee7a c\u00e1c thao t\u00e1c n\u00e0y b\u1ecb h\u1ea1n ch\u1ebf b\u1edfi R v\u00e0 W c\u1ee7a c\u00e1c replica. H\u00ecnh 4 cho th\u1ea5y \u0111\u1ed9 tr\u1ec5 trung b\u00ecnh v\u00e0 ph\u00e2n v\u1ecb 99.9 c\u1ee7a thao t\u00e1c \u0111\u1ed9c v\u00e0 ghi trong th\u1eddi gian 30 ng\u00e0y. Nh\u01b0 ta th\u1ea5y, \u0111\u1ed9 tr\u1ec5 th\u1ec3 hi\u1ec7n m\u1ed9t m\u00f4 h\u00ecnh ng\u00e0y \u0111\u00eam r\u00f5 r\u00e0ng, \u0111\u00f3 l\u00e0 k\u1ebft qu\u1ea3 c\u1ee7a m\u00f4 h\u00ecnh ng\u00e0y \u0111\u00eam c\u1ee7a t\u1ed1c \u0111\u1ed9 request \u0111\u1ebfn. Ngo\u00e0i ra, \u0111\u1ed9 tr\u1ec5 ghi r\u00f5 r\u00e0ng l\u00e0 cao h\u01a1n \u0111\u1ed9 tr\u1ec5 \u0111\u1ecdc v\u00ec c\u00e1c thao c\u00e1c ghi lu\u00f4n c\u1ea7n truy c\u1eadp v\u00e0o \u0111\u0129a. Th\u00eam n\u1eefa, \u0111\u1ed9 tr\u1ec5 ph\u00e2n v\u1ecb 99.9 l\u00e0 kho\u1ea3ng 200 ms v\u00e0 cao h\u01a1n m\u1ee9c trung b\u00ecnh kh\u00e1 nhi\u1ec1u. \u0110i\u1ec1u n\u00e0y l\u00e0 do \u0111\u1ed9 tr\u1ec5 ph\u00e2n v\u1ecb 99.9 b\u1ecb \u1ea3nh h\u01b0\u1edfng b\u1edfi nhi\u1ec1u y\u1ebfu t\u1ed1 nh\u01b0 bi\u1ebfn \u0111\u1ed9ng c\u1ee7a t\u1ea3i request, k\u00edch th\u01b0\u1edbc object v\u00e0 m\u00f4 h\u00ecnh truy c\u1eadp c\u1ee5c b\u1ed9.</p> <p>M\u1eb7c d\u00f9 m\u1ee9c hi\u1ec7u su\u1ea5t n\u00e0y c\u00f3 th\u1ec3 ch\u1ea5p nh\u1eadn \u0111\u01b0\u1ee3c v\u1edbi m\u1ed9t s\u1ed1 service, nh\u01b0ng m\u1ed9t s\u1ed1 d\u1ecbch v\u1ee5 h\u01b0\u1edbng t\u1edbi kh\u00e1ch h\u00e0ng c\u00f2n y\u00eau c\u1ea7u m\u1ee9c hi\u1ec7u su\u1ea5t cao h\u01a1n. V\u1edbi c\u00e1c service n\u00e0y, Dynamo cung c\u1ea5p kh\u1ea3 n\u0103ng \u0111\u00e1nh \u0111\u1ed5i \u0111\u1ed9 b\u1ec1n \u0111\u1ec3 l\u1ea5y hi\u1ec7u su\u1ea5t cao. Trong qu\u00e1 tr\u00ecnh t\u1ed1i \u01b0u ho\u00e1, m\u1ed7i node l\u01b0u tr\u1eef duy tr\u00ec m\u1ed9t object buffer trong b\u1ed9 nh\u1edb ch\u00ednh. M\u1ed7i thao t\u00e1c ghi \u0111\u01b0\u1ee3c l\u01b0u v\u00e0o buffer v\u00e0 \u0111\u01b0\u1ee3c ghi \u0111\u1ecbnh k\u1ef3 v\u00e0o \u0111\u0129a b\u1edfi m\u1ed9t lu\u1ed3ng ghi. Trong k\u1ebf ho\u1ea1ch n\u00e0y, thao t\u00e1c \u0111\u1ecdc s\u1ebd ki\u1ec3m tra xem key c\u00f3 n\u1eb1m trong buffer kh\u00f4ng. N\u1ebfu c\u00f3 th\u00ec object \u0111\u01b0\u1ee3c \u0111\u1ecdc t\u1eeb buffer thay v\u00ec \u0111\u1ecdc t\u1eeb engine l\u01b0u tr\u1eef.</p> <p></p> H\u00ecnh 5: So s\u00e1nh hi\u1ec7u su\u1ea5t c\u1ee7a c\u00e1c thao t\u00e1c ghi c\u00f3 buffer v\u00e0 kh\u00f4ng c\u00f3 buffer trong m\u1ed9t kho\u1ea3ng th\u1eddi gian 24 gi\u1edd. C\u00e1c kho\u1ea3ng th\u1eddi gian gi\u1eefa c\u00e1c \u0111\u00e1nh d\u1ea5u tr\u00ean tr\u1ee5c ho\u00e0nh t\u01b0\u01a1ng \u1ee9ng v\u1edbi m\u1ed9t gi\u1edd. <p>T\u1ed1i \u01b0u n\u00e0y khi\u1ebfn \u0111\u1ed9 tr\u1ec5 ph\u00e2n v\u1ecb 99.9 gi\u1ea3m \u0111i 5 l\u1ea7n trong gi\u1edd cao \u0111i\u1ec3m, ngay c\u1ea3 v\u1edbi m\u1ed9t buffer r\u1ea5t nh\u1ecf g\u1ed3m 1000 object (xem h\u00ecnh 5). Ngo\u00e0i ra, vi\u1ec7c ghi v\u00e0o buffer s\u1ebd l\u00e0m gi\u1ea3m \u0111\u1ed9 tr\u1ec5 \u1edf ph\u00e2n v\u1ecb cao h\u01a1n. R\u00f5 r\u00e0ng, k\u1ebf ho\u1ea1ch n\u00e0y \u0111\u00e1nh \u0111\u1ed5i \u0111\u1ed9 b\u1ec1n \u0111\u1ec3 l\u1ea5y hi\u1ec7u su\u1ea5t. Trong k\u1ebf ho\u1ea1ch n\u00e0y, server ch\u1ebft s\u1ebd l\u00e0m m\u1ea5t \u0111i m\u1ed9t s\u1ed1 l\u1ea7n ghi trong buffer. \u0110\u1ebb gi\u1ea3m r\u1ee7i ro, thao t\u00e1c ghi \u0111\u01b0\u1ee3c tinh ch\u1ec9nh l\u1ea1i \u0111\u1ec3 cho ph\u00e9p node \u0111i\u1ec1u ph\u1ed1i ch\u1ecdn m\u1ed9t trong N replica \u0111\u1ec3 th\u1ef1c hi\u1ec7n m\u1ed9t \"durable write\". V\u00ec node \u0111i\u1ec1u ph\u1ed1i ch\u1ec9 c\u1ea7n ch\u1edd W ph\u1ea3n h\u1ed3i, hi\u1ec7u su\u1ea5t c\u1ee7a thao t\u00e1c ghi kh\u00f4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng b\u1edfi hi\u1ec7u su\u1ea5t c\u1ee7a thao t\u00e1c durable write \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi m\u1ed9t replica duy nh\u1ea5t.</p>"},{"location":"misc/papers/amazon-dynamo/#62-am-bao-phan-phoi-tai-eu","title":"6.2. \u0110\u1ea3m b\u1ea3o ph\u00e2n ph\u1ed1i t\u1ea3i \u0111\u1ec1u","text":"<p>Dynamo d\u00f9ng consistent hashing \u0111\u1ec3 ph\u00e2n v\u00f9ng kh\u00f4ng gian key c\u1ee7a n\u00f3 qua c\u00e1c replica v\u00e0 \u0111\u1ea3m b\u1ea3o ph\u00e2n ph\u1ed1i t\u1ea3i \u0111\u1ec1u. M\u1ed9t ph\u00e2n ph\u1ed1i key \u0111\u1ec1u c\u00f3 th\u1ec3 gi\u00fap ch\u00fang ta \u0111\u1ea1t \u0111\u01b0\u1ee3c ph\u00e2n ph\u1ed1i t\u1ea3i \u0111\u1ec1u, gi\u1ea3 \u0111\u1ecbnh r\u1eb1ng ph\u00e2n ph\u1ed1i truy c\u1eadp c\u00e1c key kh\u00f4ng b\u1ecb l\u1ec7ch qu\u00e1 nhi\u1ec1u. \u0110\u1eb7c bi\u1ec7t, thi\u1ebft k\u1ebf Dynamo gi\u1ea3 \u0111\u1ecbnh r\u1eb1ng ngay c\u1ea3 khi ph\u00e2n ph\u1ed1i truy c\u1eadp c\u00e1c key b\u1ecb l\u1ec7ch, v\u1eabn c\u00f3 \u0111\u1ee7 c\u00e1c key ph\u1ed5 bi\u1ebfn \u0111\u1ec3 ph\u00e2n ph\u1ed1i t\u1ea3i \u0111\u1ec1u qua c\u00e1c node. Ph\u1ea7n n\u00e0y s\u1ebd th\u1ea3o lu\u1eadn v\u1ec1 s\u1ef1 m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i v\u00e0 \u1ea3nh h\u01b0\u1edfng c\u1ee7a c\u00e1c chi\u1ebfn l\u01b0\u1ee3c ph\u00e2n v\u00f9ng kh\u00e1c nhau \u0111\u1ebfn ph\u00e2n ph\u1ed1i t\u1ea3i.</p> <p></p> H\u00ecnh 6: T\u1ec9 l\u1ec7 c\u00e1c node b\u1ecb m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i (c\u00e1c node c\u00f3 t\u1ea3i cao h\u01a1n ng\u01b0\u1ee1ng trung b\u00ecnh) v\u00e0 t\u1ea3i c\u1ee7a c\u00e1c node \u0111\u00f3. C\u00e1c kho\u1ea3ng th\u1eddi gian gi\u1eefa c\u00e1c \u0111\u00e1nh d\u1ea5u tr\u00ean tr\u1ee5c ho\u00e0nh t\u01b0\u01a1ng \u1ee9ng v\u1edbi 30 ph\u00fat. <p>\u0110\u1ec3 nghi\u00ean c\u1ee9u s\u1ef1 m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i v\u00e0 s\u1ef1 t\u01b0\u01a1ng quan c\u1ee7a n\u00f3 v\u1edbi s\u1ed1 request, t\u1ed5ng s\u1ed1 request nh\u1eadn \u0111\u01b0\u1ee3c b\u1edfi m\u1ed7i node \u0111\u01b0\u1ee3c \u0111o trong m\u1ed9t kho\u1ea3ng th\u1eddi gian 24 gi\u1edd - \u0111\u01b0\u1ee3c chia th\u00e0nh c\u00e1c kho\u1ea3ng th\u1eddi gian 30 ph\u00fat. Trong kho\u1ea3ng th\u1eddi gian n\u00e0y, m\u1ed9t node \u0111\u01b0\u1ee3c coi l\u00e0 \"m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i\" n\u1ebfu t\u1ea3i c\u1ee7a node l\u1ec7ch kh\u1ecfi t\u1ea3i trung b\u00ecnh m\u1ed9t gi\u00e1 tr\u1ecb nh\u1ecf h\u01a1n m\u1ed9t ng\u01b0\u1ee1ng nh\u1ea5t \u0111\u1ecbnh (\u1edf \u0111\u00e2y l\u00e0 15%). N\u1ebfu kh\u00f4ng th\u00ec node \u0111\u00f3 \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 \"qu\u00e1 m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i\". H\u00ecnh 6 cho th\u1ea5y t\u1ec9 l\u1ec7 c\u00e1c node b\u1ecb m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i trong kho\u1ea3ng th\u1eddi gian \u0111\u00f3. Nh\u01b0 ta th\u1ea5y, t\u1ec9 l\u1ec7 c\u00e1c node b\u1ecb m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i gi\u1ea3m khi t\u1ea3i t\u0103ng. V\u00ed d\u1ee5, trong c\u00e1c kho\u1ea3ng th\u1eddi gian c\u00f3 t\u1ea3i th\u1ea5p, t\u1ec9 l\u1ec7 c\u00e1c node b\u1ecb m\u1ea5t c\u00e2n b\u1eb1ng t\u1ea3i l\u00e0 20% v\u00e0 trong c\u00e1c kho\u1ea3ng th\u1eddi gian c\u00f3 t\u1ea3i cao, t\u1ec9 l\u1ec7 n\u00e0y l\u00e0 10%. M\u1ed9t c\u00e1ch gi\u1ea3i th\u00edch cho hi\u1ec7n t\u01b0\u1ee3ng n\u00e0y l\u00e0 do vi\u1ec7c t\u1ea3i t\u0103ng d\u1eabn \u0111\u1ebfn vi\u1ec7c truy c\u1eadp c\u00e1c key ph\u1ed5 bi\u1ebfn h\u01a1n, do \u0111\u00f3 ph\u00e2n ph\u1ed1i t\u1ea3i \u0111\u1ec1u h\u01a1n. Tuy nhi\u00ean, trong c\u00e1c kho\u1ea3ng th\u1eddi gian c\u00f3 t\u1ea3i th\u1ea5p, \u00edt key ph\u1ed5 bi\u1ebfn \u0111\u01b0\u1ee3c truy c\u1eadp, do \u0111\u00f3 ph\u00e2n ph\u1ed1i t\u1ea3i kh\u00f4ng \u0111\u1ec1u.</p> <p></p> H\u00ecnh 7: Ph\u00e2n v\u00f9ng v\u00e0 v\u1ecb tr\u00ed c\u00e1c key trong ba chi\u1ebfn l\u01b0\u1ee3c kh\u00e1c nhau. A, B v\u00e0 C m\u00f4 t\u1ea3 ba node duy nh\u1ea5t t\u1ea1o th\u00e0nh danh s\u00e1ch \u01b0u ti\u00ean cho key k1 tr\u00ean v\u00f2ng consistent hashing (N=3). V\u00f9ng x\u00e1m ch\u1ec9 ra kho\u1ea3ng key m\u00e0 c\u00e1c node A, B v\u00e0 C t\u1ea1o th\u00e0nh danh s\u00e1ch \u01b0u ti\u00ean. M\u0169i t\u00ean \u0111en ch\u1ec9 ra v\u1ecb tr\u00ed token c\u1ee7a c\u00e1c node kh\u00e1c nhau. <p>Ph\u1ea7n n\u00e0y s\u1ebd n\u00f3i v\u1ec1 c\u00e1ch s\u01a1 \u0111\u1ed3 ph\u00e2n v\u00f9ng c\u1ee7a Dynamo ph\u00e1t tri\u1ec3n theo th\u1eddi gian v\u00e0 \u00fd ngh\u0129a c\u1ee7a n\u00f3 v\u1edbi vi\u1ec7c ph\u00e2n b\u1ed1 t\u1ea3i.</p> <p>Chi\u1ebfn l\u01b0\u1ee3c 1: T token ng\u1eabu nhi\u00ean cho m\u1ed7i node v\u00e0 ph\u00e2n v\u00f9ng theo gi\u00e1 tr\u1ecb token: \u0110\u00e2y l\u00e0 chi\u1ebfn l\u01b0\u1ee3c \u0111\u01b0\u1ee3c tri\u1ec3n khai ban \u0111\u1ea7u trong th\u1ef1c t\u1ebf (\u0111\u01b0\u1ee3c m\u00f4 t\u1ea3 trong ph\u1ea7n 4.2). Trong chi\u1ebfn l\u01b0\u1ee3c n\u00e0y, m\u1ed7i node \u0111\u01b0\u1ee3c g\u00e1n T token (ch\u1ecdn ng\u1eabu nhi\u00ean trong kh\u00f4ng gian hash). C\u00e1c token c\u1ee7a t\u1ea5t c\u1ea3 c\u00e1c node \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp theo gi\u00e1 tr\u1ecb c\u1ee7a ch\u00fang theo kh\u00f4ng gian hash. M\u1ed7i c\u1eb7p token li\u00ean ti\u1ebfp \u0111\u1ecbnh ngh\u0129a m\u1ed9t \u0111o\u1ea1n. Token cu\u1ed1i c\u00f9ng v\u00e0 token \u0111\u1ea7u ti\u00ean t\u1ea1o th\u00e0nh m\u1ed9t kho\u1ea3ng \"b\u1ecdc quanh\" t\u1eeb gi\u00e1 tr\u1ecb cao nh\u1ea5t \u0111\u1ebfn gi\u00e1 tr\u1ecb th\u1ea5p nh\u1ea5t trong kh\u00f4ng gian hash. V\u00ec c\u00e1c token \u0111\u01b0\u1ee3c ch\u1ecdn ng\u1eabu nhi\u00ean, c\u00e1c \u0111o\u1ea1n c\u00f3 k\u00edch th\u01b0\u1edbc kh\u00e1c nhau. Khi c\u00e1c node tham gia v\u00e0 r\u1eddi kh\u1ecfi h\u1ec7 th\u1ed1ng, t\u1eadp token thay \u0111\u1ed5i v\u00e0 do \u0111\u00f3 c\u00e1c \u0111o\u1ea1n c\u0169ng thay \u0111\u1ed5i. L\u01b0u \u00fd r\u1eb1ng kh\u00f4ng gian c\u1ea7n thi\u1ebft \u0111\u1ec3 duy tr\u00ec th\u00e0nh vi\u00ean t\u1ea1i m\u1ed7i node t\u0103ng tuy\u1ebfn t\u00ednh v\u1edbi s\u1ed1 l\u01b0\u1ee3ng node trong h\u1ec7 th\u1ed1ng.</p> <p>Khi s\u1eed d\u1ee5ng chi\u1ebfn l\u01b0\u1ee3c n\u00e0y, ch\u00fang t\u00f4i \u0111\u00e3 g\u1eb7p nh\u1eefng v\u1ea5n \u0111\u1ec1 sau. Th\u1ee9 nh\u1ea5t, khi m\u1ed9t node m\u1edbi \u0111\u01b0\u1ee3c th\u00eam v\u00e0o, n\u00f3 c\u1ea7n ph\u1ea3i l\u1ea5y \u0111o\u1ea1n key t\u1eeb c\u00e1c node kh\u00e1c. Tuy nhi\u00ean, c\u00e1c node chuy\u1ec3n c\u00e1c \u0111o\u1ea1n key cho node m\u1edbi ph\u1ea3i qu\u00e9t kho l\u01b0u tr\u1eef c\u1ee5c b\u1ed9 c\u1ee7a ch\u00fang \u0111\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c t\u1eadp c\u00e1c data item th\u00edch h\u1ee3p. L\u01b0u \u00fd r\u1eb1ng vi\u1ec7c th\u1ef1c hi\u1ec7n thao t\u00e1c qu\u00e9t nh\u01b0 v\u1eady trong th\u1ef1c t\u1ebf r\u1ea5t ph\u1ee9c t\u1ea1p v\u00ec n\u00f3 l\u00e0 ho\u1ea1t \u0111\u1ed9ng ti\u00eau t\u1ed1n t\u00e0i nguy\u00ean v\u00e0 ch\u00fang c\u1ea7n \u0111\u01b0\u1ee3c th\u1ef1c thi \u1edf background \u0111\u1ec3 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn hi\u1ec7u su\u1ea5t c\u1ee7a kh\u00e1ch h\u00e0ng. \u0110i\u1ec1u n\u00e0y y\u00eau c\u1ea7u ch\u00fang t\u00f4i ph\u1ea3i ch\u1ea1y c\u00e1c nhi\u1ec7m v\u1ee5 kh\u1edfi \u0111\u1ed9ng \u1edf m\u1ee9c \u01b0u ti\u00ean th\u1ea5p nh\u1ea5t. Tuy nhi\u00ean, \u0111i\u1ec1u n\u00e0y l\u00e0m ch\u1eadm qu\u00e1 tr\u00ecnh kh\u1edfi \u0111\u1ed9ng v\u00e0 trong m\u00f9a mua s\u1eafm b\u1eadn r\u1ed9n, khi c\u00e1c node x\u1eed l\u00fd h\u00e0ng tri\u1ec7u request m\u1ed7i ng\u00e0y, qu\u00e1 tr\u00ecnh kh\u1edfi \u0111\u1ed9ng c\u00f3 th\u1ec3 m\u1ea5t g\u1ea7n m\u1ed9t ng\u00e0y \u0111\u1ec3 ho\u00e0n th\u00e0nh. Th\u1ee9 hai, khi m\u1ed9t node \u0111\u01b0\u1ee3c th\u00eam / xo\u00e1 h\u1ec7 th\u1ed1ng, c\u00e1c \u0111o\u1ea1n key c\u1ee7a nhi\u1ec1u node thay \u0111\u1ed5i v\u00e0 c\u00e1c c\u00e2y Merkle cho c\u00e1c \u0111o\u1ea1n m\u1edbi c\u1ea7n \u0111\u01b0\u1ee3c t\u00ednh to\u00e1n l\u1ea1i. T\u01b0\u01a1ng t\u1ef1, vi\u1ec7c n\u00e0y c\u0169ng r\u1ea5t ph\u1ee9c t\u1ea1p v\u00e0 t\u1ed1n th\u1eddi gian. Cu\u1ed1i c\u00f9ng, kh\u00f4ng c\u00f3 c\u00e1ch n\u00e0o \u0111\u1ec3 t\u1ea1o ra m\u1ed9t b\u1ea3n ch\u1ee5p c\u1ee7a to\u00e0n b\u1ed9 kh\u00f4ng gian key v\u00ec s\u1ef1 ng\u1eabu nhi\u00ean c\u1ee7a c\u00e1c \u0111o\u1ea1n key, \u0111i\u1ec1u n\u00e0y l\u00e0m cho vi\u1ec7c l\u01b0u tr\u1eef l\u1ecbch s\u1eed tr\u1edf n\u00ean ph\u1ee9c t\u1ea1p. Trong chi\u1ebfn l\u01b0\u1ee3c n\u00e0y, vi\u1ec7c l\u01b0u tr\u1eef to\u00e0n b\u1ed9 kh\u00f4ng gian key y\u00eau c\u1ea7u ch\u00fang t\u00f4i ph\u1ea3i l\u1ea5y c\u00e1c key t\u1eebng node m\u1ed9t, \u0111i\u1ec1u n\u00e0y r\u1ea5t k\u00e9m hi\u1ec7u qu\u1ea3.</p> <p>V\u1ea5n \u0111\u1ec1 c\u01a1 b\u1ea3n v\u1edbi chi\u1ebfn l\u01b0\u1ee3t n\u00e0y l\u00e0 c\u00e1c s\u01a1 \u0111\u1ed3 ph\u00e2n v\u00f9ng d\u1eef li\u1ec7u v\u00e0 v\u1ecb tr\u00ed d\u1eef li\u1ec7u b\u1ecb \u0111an xen v\u1edbi nhau. V\u00ed d\u1ee5, trong m\u1ed9t s\u1ed1 tr\u01b0\u1eddng h\u1ee3p, ta n\u00ean th\u00eam nhi\u1ec1u node h\u01a1n v\u00e0o h\u1ec7 th\u1ed1ng \u0111\u1ec3 x\u1eed l\u00fd t\u1ea3i t\u0103ng. Tuy nhi\u00ean, trong tr\u01b0\u1eddng hiwpj n\u00e0y, kh\u00f4ng th\u1ec3 th\u00eam node m\u00e0 kh\u00f4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn vi\u1ec7c ph\u00e2n v\u00f9ng d\u1eef li\u1ec7u. L\u00fd t\u01b0\u1edfng nh\u1ea5t l\u00e0 n\u00ean s\u1eed d\u1ee5ng c\u00e1c s\u01a1 \u0111\u1ed3 \u0111\u1ed9c l\u1eadp \u0111\u1ec3 ph\u00e2n v\u00f9ng v\u00e0 s\u1eafp x\u1ebfp. \u0110\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c m\u1ee5c ti\u00eau n\u00e0y, c\u00e1c chi\u1ebfn l\u01b0\u1ee3c sau \u0111\u00e2y \u0111\u00e3 \u0111\u01b0\u1ee3c \u0111\u00e1nh gi\u00e1:</p> <p>Chi\u1ebfn l\u01b0\u1ee3c 2: T token ng\u1eabu nhi\u00ean cho m\u1ed7i node v\u00e0 ph\u00e2n v\u00f9ng c\u00e1c \u0111o\u1ea1n b\u1eb1ng nhau: Trong chi\u1ebfn l\u01b0\u1ee3c n\u00e0y, kh\u00f4ng gian hash \u0111\u01b0\u1ee3c chia th\u00e0nh Q \u0111o\u1ea1n b\u1eb1ng nhau v\u00e0 m\u1ed7i node c\u00f3 T token. Q th\u01b0\u1eddng \u0111\u01b0\u1ee3c \u0111\u1eb7t sao cho Q &gt;&gt; N v\u00e0 Q &gt;&gt; S*T, trong \u0111\u00f3 S l\u00e0 s\u1ed1 node trong h\u1ec7 th\u1ed1ng. Trong chi\u1ebfn l\u01b0\u1ee3c n\u00e0y, c\u00e1c token \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 x\u00e2y d\u1ef1ng h\u00e0m \u00e1nh x\u1ea1 c\u00e1c gi\u00e1 tr\u1ecb trong kh\u00f4ng gian hash th\u00e0nh danh s\u00e1ch c\u00e1c node theo th\u1ee9 t\u1ef1 v\u00e0 kh\u00f4ng d\u00f9ng \u0111\u1ec3 ph\u00e2n v\u00f9ng. M\u1ed7i \u0111o\u1ea1n \u0111\u01b0\u1ee3c \u0111\u1eb7t tr\u00ean N node \u0111\u1ea7u ti\u00ean \u0111\u01b0\u1ee3c t\u00ecm th\u1ea5y khi \u0111i theo v\u00f2ng consistent hashing theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3 t\u1eeb cu\u1ed1i \u0111o\u1ea1n. H\u00ecnh 7 minh h\u1ecda chi\u1ebfn l\u01b0\u1ee3c n\u00e0y cho N=3. Trong v\u00ed d\u1ee5 n\u00e0y, c\u00e1c node A, B v\u00e0 C \u0111\u01b0\u1ee3c t\u00ecm th\u1ea5y khi \u0111i theo v\u00f2ng consistent hashing t\u1eeb cu\u1ed1i \u0111o\u1ea1n ch\u1ee9a key k1. L\u1ee3i th\u1ebf ch\u00ednh c\u1ee7a chi\u1ebfn l\u01b0\u1ee3c n\u00e0y l\u00e0: (i) ph\u00e2n v\u00f9ng v\u00e0 v\u1ecb tr\u00ed c\u1ee7a c\u00e1c key \u0111\u01b0\u1ee3c \u0111\u1ed9c l\u1eadp v\u1edbi nhau, (ii) kh\u1ea3 n\u0103ng thay \u0111\u1ed5i chi\u1ebfn l\u01b0\u1ee3c ph\u00e2n v\u00f9ng trong qu\u00e1 tr\u00ecnh ch\u1ea1y.</p> <p>Chi\u1ebfn l\u01b0\u1ee3c 3: Q/S token cho m\u1ed7i node, ph\u00e2n v\u00f9ng c\u00e1c \u0111o\u1ea1n b\u1eb1ng nhau: T\u01b0\u01a1ng t\u1ef1 chi\u1ebfn l\u01b0\u1ee3c 2, chi\u1ebfn l\u01b0\u1ee3c n\u00e0y chia kh\u00f4ng gian hash th\u00e0nh Q \u0111o\u1ea1n b\u1eb1ng nhau v\u00e0 vi\u1ec7c \u0111\u1eb7t v\u1ecb tr\u00ed c\u1ee7a \u0111o\u1ea1n s\u1ebd \u0111\u1ed9c l\u1eadp v\u1edbi s\u01a1 \u0111\u1ed3 ph\u00e2n v\u00f9ng. H\u01a1n n\u1eefa, m\u1ed7i node \u0111\u01b0\u1ee3c g\u00e1n Q/S token, v\u1edbi S l\u00e0 s\u1ed1 node trong h\u1ec7 th\u1ed1ng. Khi m\u1ed9t node b\u1ecb xo\u00e1, token c\u1ee7a ch\u00fang \u0111\u01b0\u1ee3c ph\u00e2n b\u1ed1 ng\u1eabu nhi\u00ean \u0111\u1ebfn c\u00e1c node c\u00f2n l\u1ea1i sao cho c\u00e1c t\u00ednh ch\u1ea5t n\u00e0y \u0111\u01b0\u1ee3c gi\u1eef nguy\u00ean. T\u01b0\u01a1ng t\u1ef1, khi m\u1ed9t node \u0111\u01b0\u1ee3c th\u00eam v\u00e0o, n\u00f3 l\u1ea5y c\u00e1c token t\u1eeb c\u00e1c node trong h\u1ec7 th\u1ed1ng theo c\u00e1ch gi\u1eef nguy\u00ean c\u00e1c t\u00ednh ch\u1ea5t v\u1eeba r\u1ed3i.</p> <p>Hi\u1ec7u qu\u1ea3 c\u1ee7a 3 chi\u1ebfn l\u01b0\u1ee3c n\u00e0y \u0111\u01b0\u1ee3c \u0111\u00e1nh gi\u00e1 cho h\u1ec7 th\u1ed1ng v\u1edbi S=30 v\u00e0 N=3. Tuy nhi\u00ean, th\u1eadt kh\u00f3 \u0111\u1ec3 so s\u00e1nh c\u00e1c chi\u1ebfn l\u01b0\u1ee3c kh\u00e1c nhau n\u00e0y m\u1ed9t c\u00e1ch c\u00f4ng b\u1eb1ng v\u00ec c\u00e1c chi\u1ebfn l\u01b0\u1ee3c kh\u00e1c nhau c\u00f3 c\u1ea5u h\u00ecnh kh\u00e1c nhau \u0111\u1ec3 \u0111i\u1ec1u ch\u1ec9nh hi\u1ec7u qu\u1ea3. V\u00ed d\u1ee5, thu\u1ed9c t\u00ednh ph\u00e2n ph\u1ed1i t\u1ea3i c\u1ee7a chi\u1ebfn l\u01b0\u1ee3c 1 ph\u1ee5 thu\u1ed9c v\u00e0o s\u1ed1 token (t\u1ee9c l\u00e0 T), trong khi chi\u1ebfn l\u01b0\u1ee3c 3 ph\u1ee5 thu\u1ed9c v\u00e0o s\u1ed1 ph\u00e2n v\u00f9ng (t\u1ee9c l\u00e0 Q). M\u1ed9t c\u00e1ch \u0111\u1ec3 so s\u00e1nh c\u00e1c chi\u1ebfn l\u01b0\u1ee3c n\u00e0y l\u00e0 \u0111\u00e1nh gi\u00e1 \u0111\u1ed9 l\u1ec7ch trong ph\u00e2n b\u1ed1 t\u1ea3i c\u1ee7a ch\u00fang trong khi t\u1ea5t c\u1ea3 c\u00e1c chi\u1ebfn l\u01b0\u1ee3c \u0111\u1ec1u s\u1eed d\u1ee5ng c\u00f9ng m\u1ed9t l\u01b0\u1ee3ng kh\u00f4ng gian b\u1ed9 nh\u1edb \u0111\u1ec3 duy tr\u00ec th\u00f4ng tin th\u00e0nh vi\u00ean. V\u00ed d\u1ee5, trong chi\u1ebfn l\u01b0\u1ee3c 1, m\u1ed7i node c\u1ea7n duy tr\u00ec v\u1ecb tr\u00ed token c\u1ee7a t\u1ea5t c\u1ea3 c\u00e1c node trong v\u00f2ng consistent hashing v\u00e0 trong chi\u1ebfn l\u01b0\u1ee3c 3, m\u1ed7i node c\u1ea7n duy tr\u00ec th\u00f4ng tin v\u1ec1 c\u00e1c ph\u00e2n v\u00f9ng \u0111\u01b0\u1ee3c g\u00e1n cho m\u1ed7i node.</p> <p>Trong th\u00ed nghi\u1ec7m ti\u1ebfp theo, c\u00e1c chi\u1ebfn l\u01b0\u1ee3c n\u00e0y \u0111\u01b0\u1ee3c \u0111\u00e1nh gi\u00e1 b\u1eb1ng c\u00e1ch thay \u0111\u1ed5i c\u00e1c tham s\u1ed1 li\u00ean quan (T v\u00e0 Q). Hi\u1ec7u qu\u1ea3 c\u00e2n b\u1eb1ng t\u1ea3i c\u1ee7a m\u1ed7i chi\u1ebfn l\u01b0\u1ee3c \u0111\u01b0\u1ee3c \u0111o b\u1eb1ng c\u00e1ch thay \u0111\u1ed5i k\u00edch th\u01b0\u1edbc th\u00f4ng tin th\u00e0nh vi\u00ean m\u00e0 m\u1ed7i node c\u1ea7n duy tr\u00ec, trong \u0111\u00f3 hi\u1ec7u qu\u1ea3 c\u00e2n b\u1eb1ng t\u1ea3i \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a l\u00e0 t\u1ec9 l\u1ec7 s\u1ed1 request trung b\u00ecnh \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi m\u1ed7i node so v\u1edbi s\u1ed1 request t\u1ed1i \u0111a \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi node c\u00f3 t\u1ea3i cao nh\u1ea5t.</p> <p></p> H\u00ecnh 8: So s\u00e1nh hi\u1ec7u qu\u1ea3 ph\u00e2n ph\u1ed1i t\u1ea3i c\u1ee7a c\u00e1c chi\u1ebfn l\u01b0\u1ee3c kh\u00e1c nhau v\u1edbi h\u1ec7 th\u1ed1ng g\u1ed3m 30 node v\u00e0 N=3 v\u1edbi c\u00f9ng m\u1ed9t l\u01b0\u1ee3ng metadata \u0111\u01b0\u1ee3c duy tr\u00ec \u1edf m\u1ed7i node. C\u00e1c gi\u00e1 tr\u1ecb v\u1ec1 k\u00edch th\u01b0\u1edbc h\u1ec7 th\u1ed1ng v\u00e0 s\u1ed1 replica \u0111\u01b0\u1ee3c d\u1ef1a tr\u00ean c\u1ea5u h\u00ecnh th\u01b0\u1eddng \u0111\u01b0\u1ee3c d\u00f9ng tr\u00ean ph\u1ea7n l\u1edbn c\u00e1c service c\u1ee7a ch\u00fang t\u00f4i. <p>K\u1ebft qu\u1ea3 n\u1eb1m trong h\u00ecnh 8. Nh\u01b0 ta th\u1ea5y, chi\u1ebfn l\u01b0\u1ee3c 3 \u0111\u1ea1t \u0111\u01b0\u1ee3c hi\u1ec7u qu\u1ea3 c\u00e2n b\u1eb1ng t\u1ea3i t\u1ed1t nh\u1ea5t v\u00e0 chi\u1ebfn l\u01b0\u1ee3c 2 c\u00f3 hi\u1ec7u qu\u1ea3 c\u00e2n b\u1eb1ng t\u1ea3i k\u00e9m nh\u1ea5t. Trong m\u1ed9t th\u1eddi gian ng\u1eafn, chi\u1ebfn l\u01b0\u1ee3c 2 \u0111\u00f3ng vai tr\u00f2 thi\u1ebft l\u1eadp t\u1ea1m th\u1eddi trong qu\u00e1 tr\u00ecnh di chuy\u1ec3n c\u00e1c instance t\u1eeb chi\u1ebfn l\u01b0\u1ee3c 1 sang chi\u1ebfn l\u01b0\u1ee3c 3. So v\u1edbi chi\u1ebfn l\u01b0\u1ee3c 1, chi\u1ebfn l\u01b0\u1ee3c 3 \u0111\u1ea1t \u0111\u01b0\u1ee3c hi\u1ec7u qu\u1ea3 t\u1ed1t h\u01a1n v\u00e0 l\u00e0m gi\u1ea3m \u0111i 3 l\u1ea7n k\u00edch th\u01b0\u1edbc th\u00f4ng tin th\u00e0nh vi\u00ean \u0111\u01b0\u1ee3c duy tr\u00ec \u1edf m\u1ed7i node \u0111i\u1ec1u ph\u1ed1i. Trong khi l\u01b0u tr\u1eef kh\u00f4ng ph\u1ea3i l\u00e0 m\u1ed9t v\u1ea5n \u0111\u1ec1 l\u1edbn, c\u00e1c node gossip th\u00f4ng tin th\u00e0nh vi\u00ean \u0111\u1ecbnh k\u1ef3 v\u00e0 do \u0111\u00f3 vi\u1ec7c duy tr\u00ec th\u00f4ng tin n\u00e0y c\u00e0ng nh\u1ecf c\u00e0ng t\u1ed1t. Ngo\u00e0i ra, chi\u1ebfn l\u01b0\u1ee3c 3 c\u00f3 nh\u1eefng \u01b0u \u0111i\u1ec3m v\u00e0 d\u1ec5 tri\u1ec3n khai h\u01a1n v\u00ec: (i) kh\u1edfi \u0111\u1ed9ng / kh\u00f4i ph\u1ee5c nhanh h\u01a1n: V\u00ec c\u00e1c \u0111o\u1ea1n \u0111\u01b0\u1ee3c c\u1ed1 \u0111\u1ecbnh, ch\u00fang c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong c\u00e1c file ri\u00eang bi\u1ec7t, \u0111i\u1ec1u n\u00e0y l\u00e0m cho vi\u1ec7c kh\u1edfi \u0111\u1ed9ng v\u00e0 kh\u00f4i ph\u1ee5c d\u1eef li\u1ec7u \u0111\u01a1n gi\u1ea3n h\u01a1n. (ii) D\u1ec5 l\u01b0u tr\u1eef: L\u01b0u tr\u1eef \u0111\u1ecbnh k\u1ef3 c\u1ee7a b\u1ed9 d\u1eef li\u1ec7u l\u00e0 m\u1ed9t y\u00eau c\u1ea7u b\u1eaft bu\u1ed9c cho h\u1ea7u h\u1ebft c\u00e1c d\u1ecbch v\u1ee5 l\u01b0u tr\u1eef c\u1ee7a Amazon. Vi\u1ec7c l\u01b0u tr\u1eef to\u00e0n b\u1ed9 b\u1ed9 d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef b\u1edfi Dynamo \u0111\u01a1n gi\u1ea3n h\u01a1n trong chi\u1ebfn l\u01b0\u1ee3c 3 v\u00ec c\u00e1c file \u0111o\u1ea1n c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef ri\u00eang bi\u1ec7t. Ng\u01b0\u1ee3c l\u1ea1i, trong chi\u1ebfn l\u01b0\u1ee3c 1, c\u00e1c token \u0111\u01b0\u1ee3c ch\u1ecdn ng\u1eabu nhi\u00ean v\u00e0 vi\u1ec7c l\u01b0u tr\u1eef d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef b\u1edfi Dynamo y\u00eau c\u1ea7u ph\u1ea3i l\u1ea5y c\u00e1c key t\u1eebng node m\u1ed9t, \u0111i\u1ec1u n\u00e0y th\u01b0\u1eddng kh\u00f4ng hi\u1ec7u qu\u1ea3 v\u00e0 ch\u1eadm ch\u1ea1p. Nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a chi\u1ebfn l\u01b0\u1ee3c 3 l\u00e0 vi\u1ec7c thay \u0111\u1ed5i th\u00e0nh vi\u00ean c\u1ee7a node \u0111i\u1ec1u ph\u1ed1i y\u00eau c\u1ea7u ph\u1ea3i \u0111\u1ed3ng b\u1ed9 h\u00f3a \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o c\u00e1c t\u00ednh ch\u1ea5t c\u1ea7n thi\u1ebft c\u1ee7a ph\u00e2n v\u00f9ng.</p>"},{"location":"misc/papers/amazon-dynamo/#63-cac-version-khac-nhau-khi-nao-va-bao-nhieu","title":"6.3. C\u00e1c version kh\u00e1c nhau: Khi n\u00e0o v\u00e0 bao nhi\u00eau?","text":"<p>Nh\u01b0 \u0111\u00e3 n\u00f3i \u1edf tr\u00ean, Dynamo \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 \u0111\u00e1nh \u0111\u1ed5i t\u00ednh nh\u1ea5t qu\u00e1n \u0111\u1ec3 l\u1ea5y t\u00ednh kh\u1ea3 d\u1ee5ng. \u0110\u1ec3 hi\u1ec3u t\u00e1c \u0111\u1ed9ng ch\u00ednh x\u00e1c c\u1ee7a c\u00e1c s\u1ef1 c\u1ed1 kh\u00e1c nhau \u0111\u1ebfn t\u00ednh nh\u1ea5t qu\u00e1n, c\u1ea7n c\u00f3 d\u1eef li\u1ec7u chi ti\u1ebft v\u1ec1 nhi\u1ec1u y\u1ebfu t\u1ed1: th\u1eddi gian ch\u1ebft, lo\u1ea1i s\u1ef1 c\u1ed1, \u0111\u1ed9 tin c\u1eady c\u1ee7a th\u00e0nh ph\u1ea7n, kh\u1ed1i l\u01b0\u1ee3ng c\u00f4ng vi\u1ec7c, v.v. Vi\u1ec7c tr\u00ecnh b\u00e0y c\u00e1c con s\u1ed1 n\u00e0y chi ti\u1ebft n\u1eb1m ngo\u00e0i ph\u1ea1m vi c\u1ee7a b\u00e0i b\u00e1o n\u00e0y. Tuy nhi\u00ean, ph\u1ea7n n\u00e0y s\u1ebd th\u1ea3o lu\u1eadn v\u1ec1 m\u1ed9t s\u1ed1 ch\u1ec9 s\u1ed1 \u0111\u00e1ng n\u00f3i: s\u1ed1 l\u01b0\u1ee3ng c\u00e1c version kh\u00e1c nhau trong m\u00f4i tr\u01b0\u1eddng th\u1ef1c t\u1ebf.</p> <p>C\u00e1c version kh\u00e1c nhau c\u1ee7a m\u1ed9t data item ph\u00e1t sinh trong hai tr\u01b0\u1eddng h\u1ee3p. Tr\u01b0\u1eddng h\u1ee3p th\u1ee9 nh\u1ea5t l\u00e0 khi h\u1ec7 th\u1ed1ng \u0111ang g\u1eb7p c\u00e1c t\u00ecnh hu\u1ed1ng s\u1ef1 c\u1ed1 nh\u01b0 s\u1ef1 c\u1ed1 node, s\u1ef1 c\u1ed1 trung t\u00e2m d\u1eef li\u1ec7u v\u00e0 ph\u00e2n v\u00f9ng m\u1ea1ng. Tr\u01b0\u1eddng h\u1ee3p th\u1ee9 hai l\u00e0 khi h\u1ec7 th\u1ed1ng \u0111ang x\u1eed l\u00fd m\u1ed9t l\u01b0\u1ee3ng l\u1edbn c\u00e1c writer \u0111\u1ed3ng th\u1eddi cho m\u1ed9t data item duy nh\u1ea5t v\u00e0 nhi\u1ec1u node k\u1ebft th\u00fac vi\u1ec7c \u0111\u1ed3ng b\u1ed9 h\u00f3a c\u00e1c b\u1ea3n c\u1eadp nh\u1eadt \u0111\u1ed3ng th\u1eddi. T\u1eeb c\u1ea3 hai kh\u00eda c\u1ea1nh v\u1ec1 t\u00ednh s\u1eed d\u1ee5ng v\u00e0 hi\u1ec7u qu\u1ea3, c\u1ea7n gi\u1ea3m thi\u1ec3u s\u1ed1 l\u01b0\u1ee3ng c\u00e1c version kh\u00e1c nhau trong b\u1ea5t k\u1ef3 th\u1eddi \u0111i\u1ec3m n\u00e0o. N\u1ebfu c\u00e1c version kh\u00f4ng th\u1ec3 \u0111\u01b0\u1ee3c \u0111\u1ed1i chi\u1ebfu c\u00fa ph\u00e1p d\u1ef1a tr\u00ean vector clock, ch\u00fang ph\u1ea3i \u0111\u01b0\u1ee3c chuy\u1ec3n \u0111\u1ebfn t\u1ea7ng \u1ee9ng d\u1ee5ng \u0111\u1ec3 \u0111\u1ed1i chi\u1ebfu ng\u1eef ngh\u0129a. \u0110\u1ed1i chi\u1ebfu ng\u1eef ngh\u0129a t\u0103ng t\u1ea3i l\u00ean c\u00e1c service, v\u00ec v\u1eady c\u1ea7n gi\u1ea3m thi\u1ec3u nhu c\u1ea7u n\u00e0y.</p> <p>Trong th\u00ed nghi\u1ec7m ti\u1ebfp theo, s\u1ed1 l\u01b0\u1ee3ng version \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 d\u1ecbch v\u1ee5 gi\u1ecf h\u00e0ng \u0111\u01b0\u1ee3c \u0111o trong m\u1ed9t kho\u1ea3ng th\u1eddi gian 24 gi\u1edd. Trong kho\u1ea3ng th\u1eddi gian n\u00e0y, 99.94% c\u00e1c request ch\u1ec9 nh\u1eadn \u0111\u01b0\u1ee3c m\u1ed9t version; 0.00057% c\u00e1c request nh\u1eadn \u0111\u01b0\u1ee3c 2 version; 0.00047% c\u00e1c request nh\u1eadn \u0111\u01b0\u1ee3c 3 version v\u00e0 0.00009% c\u00e1c request nh\u1eadn \u0111\u01b0\u1ee3c 4 version. \u0110i\u1ec1u n\u00e0y cho th\u1ea5y c\u00e1c version kh\u00e1c nhau hi\u1ebfm khi \u0111\u01b0\u1ee3c t\u1ea1o ra.</p> <p>Kinh nghi\u1ec7m cho th\u1ea5y r\u1eb1ng s\u1ef1 gia t\u0103ng s\u1ed1 l\u01b0\u1ee3ng c\u00e1c version kh\u00e1c nhau kh\u00f4ng ph\u1ea3i do c\u00e1c s\u1ef1 c\u1ed1 m\u00e0 do s\u1ed1 l\u01b0\u1ee3ng c\u00e1c writer \u0111\u1ed3ng th\u1eddi t\u0103ng l\u00ean. S\u1ef1 gia t\u0103ng s\u1ed1 l\u01b0\u1ee3ng c\u00e1c version kh\u00e1c nhau th\u01b0\u1eddng do c\u00e1c robot (ch\u01b0\u01a1ng tr\u00ecnh client t\u1ef1 \u0111\u1ed9ng) g\u00e2y ra v\u00e0 hi\u1ebfm khi do con ng\u01b0\u1eddi g\u00e2y ra. V\u1ea5n \u0111\u1ec1 n\u00e0y kh\u00f4ng \u0111\u01b0\u1ee3c th\u1ea3o lu\u1eadn chi ti\u1ebft do t\u00ednh nh\u1ea1y c\u1ea3m c\u1ee7a n\u00f3.</p>"},{"location":"misc/papers/amazon-dynamo/#64-phoi-hop-theo-huong-client-hay-huong-server","title":"6.4. Ph\u1ed1i h\u1ee3p theo h\u01b0\u1edbng client hay h\u01b0\u1edbng server","text":"<p>Nh\u01b0 \u0111\u00e3 n\u00f3i \u1edf ph\u1ea7n 5, Dynamo c\u00f3 m\u1ed9t th\u00e0nh ph\u1ea7n \u0111i\u1ec1u ph\u1ed1i request d\u00f9ng m\u00e1y tr\u1ea1ng th\u00e1i \u0111\u1ec3 x\u1eed l\u00fd c\u00e1c request. Client request th\u01b0\u1eddng \u0111\u01b0\u1ee3c ph\u00e2n b\u1ed1 \u0111\u1ec1u qua c\u00e1c node tr\u00ean v\u00f2ng v\u1edbi s\u1ef1 gi\u00fap s\u1ee9c c\u1ee7a load balancer. B\u1ea5t k\u1ef3 node Dynamo n\u00e0o c\u0169ng c\u00f3 th\u1ec3 l\u00e0 \u0111i\u1ec1u ph\u1ed1i cho m\u1ed9t request \u0111\u1ecdc. Ng\u01b0\u1ee3c l\u1ea1i, c\u00e1c request ghi s\u1ebd \u0111\u01b0\u1ee3c \u0111i\u1ec1u ph\u1ed1i b\u1edfi m\u1ed9t node trong danh s\u00e1ch \u01b0u ti\u00ean hi\u1ec7n t\u1ea1i c\u1ee7a key. H\u1ea1n ch\u1ebf n\u00e0y l\u00e0 do c\u00e1c node \u01b0u ti\u00ean n\u00e0y c\u00f3 tr\u00e1ch nhi\u1ec7m th\u00eam m\u1ed9t version m\u1edbi m\u00e0 c\u00f3 th\u1ec3 g\u00e2y ra s\u1ef1 thay \u0111\u1ed5i theo th\u1ee9 t\u1ef1 c\u1ee7a version \u0111\u00e3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt b\u1edfi request ghi. L\u01b0u \u00fd r\u1eb1ng n\u1ebfu s\u01a1 \u0111\u1ed3 version c\u1ee7a Dynamo d\u1ef1a tr\u00ean timestamp, b\u1ea5t k\u1ef3 node n\u00e0o c\u0169ng c\u00f3 th\u1ec3 \u0111i\u1ec1u ph\u1ed1i m\u1ed9t request ghi.</p> <p>M\u1ed9t c\u00e1ch kh\u00e1c \u0111\u1ec3 \u0111i\u1ec1u ph\u1ed1i request l\u00e0 chuy\u1ec3n m\u00e1y tr\u1ea1ng th\u00e1i v\u1ec1 c\u00e1c node client. Trong k\u1ebf ho\u1ea1ch n\u00e0y, c\u00e1c \u1ee9ng d\u1ee5ng client s\u1eed d\u1ee5ng m\u1ed9t th\u01b0 vi\u1ec7n \u0111\u1ec3 th\u1ef1c hi\u1ec7n vi\u1ec7c \u0111i\u1ec1u ph\u1ed1i request t\u1ea1i c\u00e1c node client. M\u1ed9t client \u0111\u1ecbnh k\u1ef3 ch\u1ecdn m\u1ed9t node Dynamo ng\u1eabu nhi\u00ean v\u00e0 t\u1ea3i v\u1ec1 s\u01a1 \u0111\u1ed3 th\u00e0nh vi\u00ean hi\u1ec7n t\u1ea1i c\u1ee7a Dynamo. S\u1eed d\u1ee5ng th\u00f4ng tin n\u00e0y, client c\u00f3 th\u1ec3 x\u00e1c \u0111\u1ecbnh t\u1eadp c\u00e1c node t\u1ea1o th\u00e0nh danh s\u00e1ch \u01b0u ti\u00ean cho b\u1ea5t k\u1ef3 key n\u00e0o. C\u00e1c request \u0111\u1ecdc c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111i\u1ec1u ph\u1ed1i t\u1ea1i node client, do \u0111\u00f3 tr\u00e1nh \u0111\u01b0\u1ee3c vi\u1ec7c t\u0103ng th\u00eam m\u1ed9t b\u01b0\u1edbc truy\u1ec1n th\u00f4ng m\u1ea1ng n\u1ebfu request \u0111\u01b0\u1ee3c giao cho m\u1ed9t node Dynamo ng\u1eabu nhi\u00ean b\u1edfi load balancer. C\u00e1c request ghi s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n ti\u1ebfp \u0111\u1ebfn m\u1ed9t node trong danh s\u00e1ch \u01b0u ti\u00ean c\u1ee7a key ho\u1eb7c ch\u00fang c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111i\u1ec1u ph\u1ed1i c\u1ee5c b\u1ed9 n\u1ebfu Dynamo s\u1eed d\u1ee5ng timestamp \u0111\u1ec3 t\u1ea1o version.</p> <p>\u01afu \u0111i\u1ec3m quan tr\u1ecdng c\u1ee7a ph\u01b0\u01a1ng ph\u00e1p \u0111i\u1ec1u ph\u1ed1i h\u01b0\u1edbng client l\u00e0 load balancer kh\u00f4ng c\u00f2n c\u1ea7n thi\u1ebft \u0111\u1ec3 ph\u00e2n ph\u1ed1i t\u1ea3i client n\u1eefa. Vi\u1ec7c ph\u00e2n ph\u1ed1i t\u1ea3i h\u1ee3p l\u00fd \u0111\u01b0\u1ee3c \u0111\u1ea3m b\u1ea3o ho\u00e0n to\u00e1n b\u1eb1ng c\u00e1ch g\u00e1n c\u00e1c key g\u1ea7n nh\u01b0 th\u1ed1ng nh\u1ea5t cho c\u00e1c node l\u01b0u tr\u1eef. R\u00f5 r\u00e0ng, hi\u1ec7u qu\u1ea3 c\u1ee7a k\u1ebf ho\u1ea1ch n\u00e0y ph\u1ee5 thu\u1ed9c v\u00e0o m\u1ee9c \u0111\u1ed9 c\u1eadp nh\u1eadt th\u00f4ng tin th\u00e0nh vi\u00ean t\u1ea1i client. Hi\u1ec7n t\u1ea1i, client \u0111\u1ecbnh k\u1ef3 g\u1eedi m\u1ed9t request t\u1edbi m\u1ed9t node Dynamo ng\u1eabu nhi\u00ean m\u1ed7i 10 gi\u00e2y \u0111\u1ec3 c\u1eadp nh\u1eadt th\u00f4ng tin th\u00e0nh vi\u00ean. C\u00e1ch n\u00e0y \u0111\u01b0\u1ee3c ch\u1ecdn thay v\u00ec c\u00e1ch push t\u1eeb node v\u00ec n\u00f3 m\u1edf r\u1ed9ng quy m\u00f4 t\u1ed1t h\u01a1n v\u1edbi s\u1ed1 l\u01b0\u1ee3ng client l\u1edbn v\u00e0 y\u00eau c\u1ea7u \u00edt tr\u1ea1ng th\u00e1i \u0111\u01b0\u1ee3c duy tr\u00ec h\u01a1n t\u1ea1i server. Tuy nhi\u00ean, trong tr\u01b0\u1eddng h\u1ee3p x\u1ea5u nh\u1ea5t, client c\u00f3 th\u1ec3 b\u1ecb \u1ea3nh h\u01b0\u1edfng b\u1edfi th\u00f4ng tin th\u00e0nh vi\u00ean b\u1ecb c\u0169 trong kho\u1ea3ng th\u1eddi gian 10 gi\u00e2y. Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, client s\u1ebd c\u1eadp nh\u1eadt th\u00f4ng tin th\u00e0nh vi\u00ean ngay l\u1eadp t\u1ee9c n\u1ebfu n\u00f3 th\u1ea5y th\u00f4ng tin b\u1ecb c\u0169 (v\u00ed d\u1ee5 nh\u01b0 khi c\u00f3 v\u00e0i node b\u1ecb ch\u1ebft)</p> \u0110\u1ed9 tr\u1ec5 \u0111\u1ecdc ph\u00e2n v\u1ecb 99.9 (ms) \u0110\u1ed9 tr\u1ec5 ghi ph\u00e2n v\u1ecb 99.9 (ms) \u0110\u1ed9 tr\u1ec5 \u0111\u1ecdc trung b\u00ecnh (ms) \u0110\u1ed9 tr\u1ec5 ghi trung b\u00ecnh (ms) H\u01b0\u1edbng server 68.9 68.5 3.9 H\u01b0\u1edbng client 30.4 30.4 1.55 <p>B\u1ea3ng 2 \u1edf tr\u00ean cho th\u1ea5y s\u1ef1 c\u1ea3i thi\u1ec7n v\u1ec1 \u0111\u1ed9 tr\u1ec5 \u1edf ph\u00e2n v\u1ecb 99.9 v\u00e0 trung b\u00ecnh \u0111\u01b0\u1ee3c theo d\u00f5i trong kho\u1ea3ng th\u1eddi gian 24 ti\u1ebfng v\u1edbi c\u00e1ch \u0111i\u1ec1u ph\u1ed1i h\u01b0\u1edbng client so v\u1edbi h\u01b0\u1edbng server. Nh\u01b0 ta th\u1ea5y, c\u00e1ch ti\u1ebfp c\u1eadn \u0111i\u1ec1u ph\u1ed1i h\u01b0\u1edbng client gi\u1ea3m \u0111\u1ed9 tr\u1ec5 \u00edt nh\u1ea5t 30 ms cho ph\u00e2n v\u1ecb 99.9 v\u00e0 gi\u1ea3m \u0111\u1ed9 tr\u1ec5 trung b\u00ecnh \u0111i 3 \u0111\u1ebfn 4 ms. S\u1ef1 c\u1ea3i thi\u1ec7n v\u1ec1 \u0111\u1ed9 tr\u1ec5 l\u00e0 do c\u00e1ch ti\u1ebfp c\u1eadn \u0111i\u1ec1u ph\u1ed1i h\u01b0\u1edbng client lo\u1ea1i b\u1ecf \u0111\u01b0\u1ee3c c\u00e1c chi ph\u00ed c\u1ee7a load balancer v\u00e0 c\u00e1c b\u01b0\u1edbc truy\u1ec1n th\u00f4ng m\u1ea1ng th\u00eam v\u00e0o khi m\u1ed9t request \u0111\u01b0\u1ee3c giao cho m\u1ed9t node ng\u1eabu nhi\u00ean. Nh\u01b0 ta th\u1ea5y trong b\u1ea3ng, \u0111\u1ed9 tr\u1ec5 trung b\u00ecnh th\u01b0\u1eddng th\u1ea5p h\u01a1n \u0111\u1ed9 tr\u1ec5 \u1edf ph\u00e2n v\u1ecb 99.9. \u0110i\u1ec1u n\u00e0y l\u00e0 do b\u1ed9 nh\u1edb \u0111\u1ec7m v\u00e0 b\u1ed9 \u0111\u1ec7m ghi c\u1ee7a h\u1ec7 th\u1ed1ng Dynamo c\u00f3 t\u1ef7 l\u1ec7 tr\u00fang cao. H\u01a1n n\u1eefa, v\u00ec load balancer v\u00e0 m\u1ea1ng t\u0103ng bi\u1ebfn \u0111\u1ed9ng v\u00e0o th\u1eddi gian ph\u1ea3n h\u1ed3i, s\u1ef1 c\u1ea3i thi\u1ec7n v\u1ec1 th\u1eddi gian ph\u1ea3n h\u1ed3i \u1edf ph\u00e2n v\u1ecb 99.9 so v\u1edbi trung b\u00ecnh l\u00e0 cao h\u01a1n.</p>"},{"location":"misc/papers/amazon-dynamo/#65-can-bang-tac-vu-background-va-foreground","title":"6.5. C\u00e2n b\u1eb1ng t\u00e1c v\u1ee5 background v\u00e0 foreground","text":"<p>M\u1ed7i node th\u1ef1c hi\u1ec7n c\u00e1c lo\u1ea1i t\u00e1c v\u1ee5 background kh\u00e1c nhau \u0111\u1ec3 \u0111\u1ed3ng b\u1ed9 ho\u00e1 replica v\u00e0 data handoff (do hinting ho\u1eb7c do th\u00eam / xo\u00e1 node) ngo\u00e0i c\u00e1c ho\u1ea1t \u0111\u1ed9ng foreground get/put b\u00ecnh th\u01b0\u1eddng. Ban \u0111\u1ea7u, c\u00e1c t\u00e1c v\u1ee5 background n\u00e0y g\u00e2y ra v\u1ea5n \u0111\u1ec1 tranh ch\u1ea5p t\u00e0i nguy\u00ean v\u00e0 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn hi\u1ec7u su\u1ea5t c\u1ee7a c\u00e1c thao t\u00e1c get/put. Do \u0111\u00f3, c\u1ea7n ph\u1ea3i \u0111\u1ea3m b\u1ea3o r\u1eb1ng c\u00e1c t\u00e1c v\u1ee5 background ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ea1y khi c\u00e1c thao t\u00e1c quan tr\u1ecdng th\u00f4ng th\u01b0\u1eddng kh\u00f4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng \u0111\u00e1ng k\u1ec3. \u0110\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y, c\u00e1c t\u00e1c v\u1ee5 background \u0111\u01b0\u1ee3c t\u00edch h\u1ee3p v\u1edbi c\u01a1 ch\u1ebf ki\u1ec3m so\u00e1t ti\u1ebfp nh\u1eadn. M\u1ed7i t\u00e1c v\u1ee5 background s\u1eed d\u1ee5ng n\u00f3 \u0111\u1ec3 d\u1ef1 tr\u1eef c\u00e1c ph\u1ea7n t\u00e0i nguy\u00ean (nh\u01b0 database), \u0111\u01b0\u1ee3c chia s\u1ebb tr\u00ean t\u1ea5t c\u1ea3 c\u00e1c t\u00e1c v\u1ee5 background. M\u1ed9t c\u01a1 ch\u1ebf ph\u1ea3n h\u1ed3i d\u1ef1a tr\u00ean hi\u1ec7u su\u1ea5t \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 thay \u0111\u1ed5i s\u1ed1 l\u01b0\u1ee3ng ph\u1ea7n \u0111\u01b0\u1ee3c c\u1ea5p cho c\u00e1c t\u00e1c v\u1ee5 background.</p> <p>B\u1ed9 \u0111i\u1ec1u khi\u1ec3n ti\u1ebfp nh\u1eadn li\u00ean t\u1ee5c gi\u00e1m s\u00e1t h\u00e0nh vi truy c\u1eadp t\u00e0i nguy\u00ean trong khi th\u1ef1c hi\u1ec7n thao t\u00e1c foreground get/put. C\u00e1c kh\u00eda c\u1ea1nh \u0111\u01b0\u1ee3c gi\u00e1m s\u00e1t bao g\u1ed3m th\u1eddi gian truy c\u1eadp \u0111\u0129a, c\u00e1c truy c\u1eadp database b\u1ecb l\u1ed7i do tranh ch\u1ea5p kh\u00f3a v\u00e0 h\u1ebft th\u1eddi gian giao d\u1ecbch, th\u1eddi gian ch\u1edd h\u00e0ng \u0111\u1ee3i y\u00eau c\u1ea7u, v.v. Th\u00f4ng tin n\u00e0y \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 ki\u1ec3m tra xem ph\u1ea7n tr\u0103m \u0111\u1ed9 tr\u1ec5 (ho\u1eb7c l\u1ed7i) trong kho\u1ea3ng th\u1eddi gian k\u00e9o d\u00e0i nh\u1ea5t \u0111\u1ecbnh c\u00f3 g\u1ea7n v\u1edbi ng\u01b0\u1ee1ng mong mu\u1ed1n hay kh\u00f4ng. V\u00ed d\u1ee5, b\u1ed9 \u0111i\u1ec1u khi\u1ec3n ti\u1ebfp nh\u1eadn ki\u1ec3m tra xem ph\u00e2n v\u1ecb 99 c\u1ee7a th\u1eddi gian truy c\u1eadp \u0111\u0129a (trong 60 gi\u00e2y g\u1ea7n \u0111\u00e2y) c\u00f3 g\u1ea7n v\u1edbi ng\u01b0\u1ee1ng 50 ms hay kh\u00f4ng. B\u1ed9 \u0111i\u1ec1u khi\u1ec3n s\u1eed d\u1ee5ng c\u00e1c so s\u00e1nh n\u00e0y \u0111\u1ec3 \u0111\u00e1nh gi\u00e1 s\u1ef1 kh\u1ea3 d\u1ee5ng c\u1ee7a t\u00e0i nguy\u00ean cho c\u00e1c thao t\u00e1c foreground. Sau \u0111\u00f3, n\u00f3 quy\u1ebft \u0111\u1ecbnh s\u1ed1 l\u01b0\u1ee3ng ph\u1ea7n t\u00e0i nguy\u00ean \u0111\u01b0\u1ee3c c\u1ea5p cho c\u00e1c t\u00e1c v\u1ee5 background. t\u1eeb \u0111\u00f3 s\u1eed d\u1ee5ng v\u00f2ng ph\u1ea3n h\u1ed3i \u0111\u1ec3 h\u1ea1n ch\u1ebf s\u1ef1 x\u00e2m nh\u1eadp c\u1ee7a c\u00e1c t\u00e1c v\u1ee5 background. L\u01b0u \u00fd r\u1eb1ng m\u1ed9t v\u1ea5n \u0111\u1ec1 t\u01b0\u01a1ng t\u1ef1 \u0111\u00e3 \u0111\u01b0\u1ee3c nghi\u00ean c\u1ee9u trong [4] \u0111\u1ec3 qu\u1ea3n l\u00fd c\u00e1c t\u00e1c v\u1ee5 background.</p>"},{"location":"misc/papers/amazon-dynamo/#66-thao-luan","title":"6.6. Th\u1ea3o lu\u1eadn","text":"<p>Ph\u1ea7n n\u00e0y t\u1ed5ng h\u1ee3p m\u1ed9t s\u1ed1 kinh nghi\u1ec7m thu \u0111\u01b0\u1ee3c trong qu\u00e1 tr\u00ecnh tri\u1ec3n khai v\u00e0 b\u1ea3o tr\u00ec Dynamo. Nhi\u1ec1u d\u1ecbch v\u1ee5 n\u1ed9i b\u1ed9 c\u1ee7a Amazon \u0111\u00e3 s\u1eed d\u1ee5ng Dynamo trong hai n\u0103m qua v\u00e0 n\u00f3 \u0111\u00e3 cung c\u1ea5p m\u1ee9c \u0111\u1ed9 kh\u1ea3 d\u1ee5ng \u0111\u00e1ng k\u1ec3 cho c\u00e1c \u1ee9ng d\u1ee5ng c\u1ee7a n\u00f3. \u0110\u1eb7c bi\u1ec7t, c\u00e1c \u1ee9ng d\u1ee5ng \u0111\u00e3 nh\u1eadn \u0111\u01b0\u1ee3c c\u00e1c ph\u1ea3n h\u1ed3i th\u00e0nh c\u00f4ng (kh\u00f4ng b\u1ecb h\u1ebft th\u1eddi gian) cho 99.9995% c\u00e1c request v\u00e0 kh\u00f4ng c\u00f3 chuy\u1ec7n m\u1ea5t d\u1eef li\u1ec7u n\u00e0o x\u1ea3y ra.</p> <p>H\u01a1n n\u1eefa, \u01b0u \u0111i\u1ec3m ch\u00ednh c\u1ee7a Dynamo l\u00e0 n\u00f3 cung c\u1ea5p c\u1ea5u h\u00ecnh c\u1ea7n thi\u1ebft v\u1edbi 3 tham s\u1ed1 (N, R, W) \u0111\u1ec3 \u0111i\u1ec1u ch\u1ec9nh instance d\u1ef1a tr\u00ean nh\u01b0 c\u1ea7u. Kh\u00f4ng nh\u01b0 c\u00e1c data store ph\u1ed5 bi\u1ebfn, Dynamo ti\u1ebft l\u1ed9 c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 nh\u1ea5t qu\u00e1n d\u1eef li\u1ec7u v\u00e0 logic \u0111\u1ed1i chi\u1ebfu cho c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n. L\u00fac \u0111\u1ea7u, ng\u01b0\u1eddi ta c\u00f3 th\u1ec3 ngh\u0129 logic \u1ee9ng d\u1ee5ng s\u1ebd tr\u1edf n\u00ean ph\u1ee9c t\u1ea1p h\u01a1n. Tuy nhi\u00ean, n\u1ec1n t\u1ea3ng Amazon \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao v\u00e0 nhi\u1ec1u \u1ee9ng d\u1ee5ng \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 x\u1eed l\u00fd nhi\u1ec1u ki\u1ec3u s\u1ef1 c\u1ed1 v\u00e0 s\u1ef1 kh\u00f4ng nh\u1ea5t qu\u00e1n c\u00f3 th\u1ec3 x\u1ea3y ra. Do \u0111\u00f3, vi\u1ec7c chuy\u1ec3n c\u00e1c \u1ee9ng d\u1ee5ng nh\u01b0 v\u1eady \u0111\u1ec3 d\u00f9ng Dynamo l\u00e0 m\u1ed9t vi\u1ec7c t\u01b0\u01a1ng \u0111\u1ed1i \u0111\u01a1n gi\u1ea3n. V\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng m\u1edbi mu\u1ed1n d\u00f9ng Dynamo, c\u1ea7n ph\u1ea3i th\u1ef1c hi\u1ec7n m\u1ed9t s\u1ed1 ph\u00e2n t\u00edch trong giai \u0111o\u1ea1n ph\u00e1t tri\u1ec3n ban \u0111\u1ea7u \u0111\u1ec3 ch\u1ecdn c\u01a1 ch\u1ebf gi\u1ea3i quy\u1ebft xung \u0111\u1ed9t ph\u00f9 h\u1ee3p, \u0111\u00e1p \u1ee9ng use case m\u1ed9t c\u00e1ch th\u00edch h\u1ee3p. Cu\u1ed1i c\u00f9ng, Dynamo \u00e1p d\u1ee5ng m\u00f4 h\u00ecnh th\u00e0nh vi\u00ean trong \u0111\u00f3 m\u1ed7i node nh\u1eadn bi\u1ebft d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef b\u1edfi c\u00e1c peer c\u1ee7a n\u00f3. \u0110\u1ec3 l\u00e0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\u00e0y, m\u1ed7i node th\u01b0\u1eddng xuy\u00ean gossip b\u1ea3ng \u0111\u1ecbnh tuy\u1ebfn \u0111\u1ea7y \u0111\u1ee7 v\u1edbi c\u00e1c node kh\u00e1c trong h\u1ec7 th\u1ed1ng. M\u00f4 h\u00ecnh n\u00e0y ho\u1ea1t \u0111\u1ed9ng t\u1ed1t cho m\u1ed9t h\u1ec7 th\u1ed1ng ch\u1ee9a v\u00e0i tr\u0103m node. Tuy nhi\u00ean, vi\u1ec7c m\u1edf r\u1ed9ng thi\u1ebft k\u1ebf n\u00e0y \u0111\u1ec3 ch\u1ea1y v\u1edbi h\u00e0ng ng\u00e0n node kh\u00f4ng \u0111\u01a1n gi\u1ea3n v\u00ec chi ph\u00ed duy tr\u00ec b\u1ea3ng \u0111\u1ecbnh tuy\u1ebfn t\u0103ng theo k\u00edch th\u01b0\u1edbc h\u1ec7 th\u1ed1ng. V\u1ea5n \u0111\u1ec1 n\u00e0y c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c kh\u1eafc ph\u1ee5c b\u1eb1ng c\u00e1ch gi\u1edbi thi\u1ec7u c\u00e1c ph\u1ea7n m\u1edf r\u1ed9ng ph\u00e2n c\u1ea5p cho Dynamo. Ngo\u00e0i ra, l\u01b0u \u00fd r\u1eb1ng v\u1ea5n \u0111\u1ec1 n\u00e0y \u0111ang \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft t\u00edch c\u1ef1c b\u1edfi c\u00e1c h\u1ec7 th\u1ed1ng DHT O(1) (v\u00ed d\u1ee5 nh\u01b0 [14]).</p>"},{"location":"misc/papers/amazon-dynamo/#7-ket-luan","title":"7. K\u1ebft lu\u1eadn","text":"<p>B\u00e0i b\u00e1o n\u00e0y m\u00f4 t\u1ea3 Dynamo, m\u1ed9t data store c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng v\u00e0 t\u00ednh m\u1edf r\u1ed9ng cao, \u0111\u01b0\u1ee3c d\u00f9ng \u0111\u1ec3 l\u01b0u tr\u1ea1ng th\u00e1i c\u1ee7a nhi\u1ec1u service c\u1ed1t l\u00f5i c\u1ee7a n\u1ec1n t\u1ea3ng th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed Amazon.com. Dynamo cung c\u1ea5p m\u1ed9t m\u1ee9c \u0111\u1ed9 kh\u1ea3 d\u1ee5ng v\u00e0 hi\u1ec7u su\u1ea5t mong mu\u1ed1n v\u00e0 \u0111\u00e3 th\u00e0nh c\u00f4ng trong vi\u1ec7c x\u1eed l\u00fd l\u1ed7i c\u1ee7a c\u00e1c server, c\u00e1c trung t\u00e2m d\u1eef li\u1ec7u v\u00e0 ph\u00e2n v\u00f9ng m\u1ea1ng. Dynamo c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng quy m\u00f4 v\u00e0 cho ph\u00e9p ng\u01b0\u1eddi qu\u1ea3n tr\u1ecb service m\u1edf r\u1ed9ng hay thu h\u1eb9p quy m\u00f4 d\u1ef1a tr\u00ean nhu c\u1ea7u. Dynamo cho ph\u00e9p ng\u01b0\u1eddi qu\u1ea3n tr\u1ecb t\u00f9y ch\u1ec9nh h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u v\u1ec1 hi\u1ec7u su\u1ea5t, t\u00ednh b\u1ec1n v\u1eefng v\u00e0 nh\u1ea5t qu\u00e1n th\u00f4ng qua SLA b\u1eb1ng c\u00e1ch cho ph\u00e9p ch\u00fang \u0111i\u1ec1u ch\u1ec9nh c\u00e1c tham s\u1ed1 N, R v\u00e0 W.</p> <p>Vi\u1ec7c s\u1eed d\u1ee5ng Dynamo trong th\u1ef1c t\u1ebf nh\u1eefng n\u0103m qua ch\u1ee9ng t\u1ecf r\u1eb1ng c\u00e1c k\u1ef9 thu\u1eadt phi t\u1eadp trung c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p \u0111\u1ec3 t\u1ea1o ra m\u1ed9t h\u1ec7 th\u1ed1ng duy nh\u1ea5t c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao. Th\u00e0nh c\u00f4ng c\u1ee7a n\u00f3 trong m\u1ed9t trong nh\u1eefng m\u00f4i tr\u01b0\u1eddng \u1ee9ng d\u1ee5ng kh\u1eafc nghi\u1ec7t nh\u1ea5t cho th\u1ea5y r\u1eb1ng m\u1ed9t h\u1ec7 th\u1ed1ng l\u01b0u tr\u1eef eventual-consistent c\u00f3 th\u1ec3 l\u00e0 m\u1ed9t ph\u1ea7n quan tr\u1ecdng cho c\u00e1c \u1ee9ng d\u1ee5ng c\u00f3 t\u00ednh kh\u1ea3 d\u1ee5ng cao.</p>"},{"location":"misc/papers/amazon-dynamo/#loi-cam-on","title":"L\u1eddi c\u1ea3m \u01a1n","text":"<p>C\u00e1c t\u00e1c gi\u1ea3 xin c\u1ea3m \u01a1n Pat Helland v\u00ec nh\u1eefng \u0111\u00f3ng g\u00f3p c\u1ee7a \u00f4ng cho thi\u1ebft k\u1ebf ban \u0111\u1ea7u c\u1ee7a Dynamo. Ch\u00fang t\u00f4i c\u0169ng xin c\u1ea3m \u01a1n nh\u1eefng nh\u1eadn x\u00e9t c\u1ee7a Marvin Theimer v\u00e0 Robert van Renesse. Cu\u1ed1i c\u00f9ng, ch\u00fang t\u00f4i mu\u1ed1n c\u1ea3m \u01a1n ng\u01b0\u1eddi h\u01b0\u1edbng d\u1eabn c\u1ee7a ch\u00fang t\u00f4i, Jeff Mogul, v\u00ec nh\u1eefng nh\u1eadn x\u00e9t v\u00e0 th\u00f4ng tin \u0111\u1ea7u v\u00e0o chi ti\u1ebft c\u1ee7a anh \u1ea5y trong khi chu\u1ea9n b\u1ecb b\u1ea3n cu\u1ed1i c\u1ee7a b\u00e0i b\u00e1o n\u00e0y, gi\u00fap c\u1ea3i thi\u1ec7n \u0111\u00e1ng k\u1ec3 ch\u1ea5t l\u01b0\u1ee3ng c\u1ee7a b\u00e0i.</p>"},{"location":"misc/papers/amazon-dynamo/#tham-khao","title":"Tham kh\u1ea3o","text":"<p>[1] Adya, A., Bolosky, W. J., Castro, M., Cermak, G., Chaiken, R., Douceur, J. R., Howell, J., Lorch, J. R., Theimer, M., and Wattenhofer, R. P. 2002. Farsite: federated, available, and reliable storage for an incompletely trusted environment. SIGOPS Oper. Syst. Rev. 36, SI (Dec. 2002), 1-14.</p> <p>[2] Bernstein, P.A., and Goodman, N. An algorithm for concurrency control and recovery in replicated distributed databases. ACM Trans. on Database Systems, 9(4):596-615, December 1984</p> <p>[3] Chang, F., Dean, J., Ghemawat, S., Hsieh, W. C., Wallach, D. A., Burrows, M., Chandra, T., Fikes, A., and Gruber, R. E. 2006. Bigtable: a distributed storage system for structured data. In Proceedings of the 7th Conference on USENIX Symposium on Operating Systems Design and Implementation - Volume 7 (Seattle, WA, November 06 - 08, 2006). USENIX Association, Berkeley, CA, 15-15.</p> <p>[4] Douceur, J. R. and Bolosky, W. J. 2000. Process-based regulation of low-importance processes. SIGOPS Oper. Syst. Rev. 34, 2 (Apr. 2000), 26-27.</p> <p>[5] Fox, A., Gribble, S. D., Chawathe, Y., Brewer, E. A., and Gauthier, P. 1997. Cluster-based scalable network services. In Proceedings of the Sixteenth ACM Symposium on Operating Systems Principles (Saint Malo, France, October 05 - 08, 1997). W. M. Waite, Ed. SOSP '97. ACM Press, New York, NY, 78-91.</p> <p>[6] Ghemawat, S., Gobioff, H., and Leung, S. 2003. The Google file system. In Proceedings of the Nineteenth ACM Symposium on Operating Systems Principles (Bolton Landing, NY, USA, October 19 - 22, 2003). SOSP '03. ACM Press, New York, NY, 29-43.</p> <p>[7] Gray, J., Helland, P., O'Neil, P., and Shasha, D. 1996. The dangers of replication and a solution. In Proceedings of the 1996 ACM SIGMOD international Conference on Management of Data (Montreal, Quebec, Canada, June 04 - 06, 1996). J. Widom, Ed. SIGMOD '96. ACM Press, New York, NY, 173-182.</p> <p>[8] Gupta, I., Chandra, T. D., and Goldszmidt, G. S. 2001. On scalable and efficient distributed failure detectors. In Proceedings of the Twentieth Annual ACM Symposium on Principles of Distributed Computing (Newport, Rhode Island, United States). PODC '01. ACM Press, New York, NY, 170-179. </p> <p>[9] Kubiatowicz, J., Bindel, D., Chen, Y., Czerwinski, S., Eaton, P., Geels, D., Gummadi, R., Rhea, S., Weatherspoon, H., Wells, C., and Zhao, B. 2000. OceanStore: an architecture for global-scale persistent storage. SIGARCH Comput. Archit. News 28, 5 (Dec. 2000), 190-201.</p> <p>[10] Karger, D., Lehman, E., Leighton, T., Panigrahy, R., Levine, M., and Lewin, D. 1997. Consistent hashing and random trees: distributed caching protocols for relieving hot spots on the World Wide Web. In Proceedings of the Twenty-Ninth Annual ACM Symposium on theory of Computing (El Paso, Texas, United States, May 04 - 06, 1997). STOC '97. ACM Press, New York, NY, 654-663.</p> <p>[11] Lindsay, B.G., et. al., \u201cNotes on Distributed Databases\u201d, Research Report RJ2571(33471), IBM Research, July 1979</p> <p>[12] Lamport, L. Time, clocks, and the ordering of events in a distributed system. ACM Communications, 21(7), pp. 558-565, 1978.</p> <p>[13] Merkle, R. A digital signature based on a conventional encryption function. Proceedings of CRYPTO, pages 369\u2013378. Springer-Verlag, 1988.</p> <p>[14] Ramasubramanian, V., and Sirer, E. G. Beehive: O(1) lookup performance for power-law query distributions in peer-topeer overlays. In Proceedings of the 1st Conference on Symposium on Networked Systems Design and Implementation, San Francisco, CA, March 29 - 31, 2004.</p> <p>[15] Reiher, P., Heidemann, J., Ratner, D., Skinner, G., and Popek, G. 1994. Resolving file conflicts in the Ficus file system. In Proceedings of the USENIX Summer 1994 Technical Conference on USENIX Summer 1994 Technical Conference - Volume 1 (Boston, Massachusetts, June 06 - 10, 1994). USENIX Association, Berkeley, CA, 12-12.</p> <p>[16] Rowstron, A., and Druschel, P. Pastry: Scalable, decentralized object location and routing for large-scale peerto-peer systems. Proceedings of Middleware, pages 329-350, November, 2001.</p> <p>[17] Rowstron, A., and Druschel, P. Storage management and caching in PAST, a large-scale, persistent peer-to-peer storage utility. Proceedings of Symposium on Operating Systems Principles, October 2001.</p> <p>[18] Saito, Y., Fr\u00f8lund, S., Veitch, A., Merchant, A., and Spence, S. 2004. FAB: building distributed enterprise disk arrays from commodity components. SIGOPS Oper. Syst. Rev. 38, 5 (Dec. 2004), 48-58.</p> <p>[19] Satyanarayanan, M., Kistler, J.J., Siegel, E.H. Coda: A Resilient Distributed File System. IEEE Workshop on Workstation Operating Systems, Nov. 1987.</p> <p>[20] Stoica, I., Morris, R., Karger, D., Kaashoek, M. F., and Balakrishnan, H. 2001. Chord: A scalable peer-to-peer lookup service for internet applications. In Proceedings of the 2001 Conference on Applications, Technologies, Architectures, and Protocols For Computer Communications (San Diego, California, United States). SIGCOMM '01. ACM Press, New York, NY, 149-160. </p> <p>[21] Terry, D. B., Theimer, M. M., Petersen, K., Demers, A. J., Spreitzer, M. J., and Hauser, C. H. 1995. Managing update conflicts in Bayou, a weakly connected replicated storage system. In Proceedings of the Fifteenth ACM Symposium on Operating Systems Principles (Copper Mountain, Colorado, United States, December 03 - 06, 1995). M. B. Jones, Ed. SOSP '95. ACM Press, New York, NY, 172-182.</p> <p>[22] Thomas, R. H. A majority consensus approach to concurrency control for multiple copy databases. ACM Transactions on Database Systems 4 (2): 180-209, 1979.</p> <p>[23] Weatherspoon, H., Eaton, P., Chun, B., and Kubiatowicz, J. 2007. Antiquity: exploiting a secure log for wide-area distributed storage. SIGOPS Oper. Syst. Rev. 41, 3 (Jun. 2007), 371-384.</p> <p>[24] Welsh, M., Culler, D., and Brewer, E. 2001. SEDA: an architecture for well-conditioned, scalable internet services. In Proceedings of the Eighteenth ACM Symposium on Operating Systems Principles (Banff, Alberta, Canada, October 21 - 24, 2001). SOSP '01. ACM Press, New York, NY, 230-243. </p>"}]}